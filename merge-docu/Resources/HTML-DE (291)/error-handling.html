<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="de"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Fehlerverwaltung · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Fehlerverwaltung bedeutet das Vorwegnehmen und Reagieren auf Fehler, die in Ihrer Anwendung auftreten können. 4D bietet umfassende Unterstützung zum Abfangen und Melden von Fehlern zur Laufzeit und zum Untersuchen der Fehlerursachen."name="description" /><meta content="de" name="docsearch:language" /><meta content="Fehlerverwaltung · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Fehlerverwaltung bedeutet das Vorwegnehmen und Reagieren auf Fehler, die in Ihrer Anwendung auftreten können. 4D bietet umfassende Unterstützung zum Abfangen und Melden von Fehlern zur Laufzeit und zum Untersuchen der Fehlerursachen."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#error-handling.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Fehlerverwaltung<a aria-hidden="true" class="anchor" id="error-handling.html"></a></h1></header><article><div><p><span>Fehlerverwaltung bedeutet das Vorwegnehmen und Reagierenauf Fehler, die in Ihrer Anwendung auftreten können. 4D bietetumfassende Unterstützung zum Abfangen und Melden von Fehlern zurLaufzeit und zum Untersuchen der Fehlerursachen.</span></p><p><span>Die Fehlerverwaltung erfüllt zweiHauptanforderungen:</span></p><ul><li><span>potenzielle Fehler und Bugs in Ihrem Code während derEntwicklungsphase herausfinden und beheben,</span></li><li><span>Unerwartete Fehler in Anwendungen im Einsatz abfangen undbeseitigen; insbesondere können Sie Fehlermeldungen des Systems(Festplatte voll, fehlende Datei usw.) durch Ihre eigene Oberflächeersetzen.</span></li></ul><blockquote><p><span>Es wird dringend empfohlen, auf 4D Server eineFehlerverwaltungsmethode für den gesamten auf dem Server laufendenCode zu installieren. Denn solch eine Methode kann vermeiden, dassunerwartete Dialogfenster auf dem Serverrechner erscheinen, undaußerdem Fehler in einer speziellen Datei für weitere Analysenprotokollieren.</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="error-handling.html_fehler-oder-status"></a><a aria-hidden="true"class="hash-link" href="#error-handling.html_fehler-oder-status"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fehler oder Status</span></h2><p><span>Viele Class Functions von 4D, wie<code>entity.save()</code> oder <code>transporter.send()</code>,geben ein Objekt <em>status</em> zurück. Dieses Objekt dient zumSpeichern "vorhersehbarer" Fehler in der Runtime-Umgebung, z.B.ungültiges Kennwort, gesperrte Entity, etc., welche die Ausführungdes Programms nicht stoppen. Diese Art von Fehlern lässt sich überregulären Code verwalten.</span></p><p><span>Andere Fehler, wie Fehler beim Schreiben auf dieFestplatte, Netzwerkfehler oder allgemein jede unerwarteteUnterbrechung, sind "nicht-vorhersehbar". Diese Art von Fehlernerzeugt Ausnahmen und müssen über eine Fehlerverwaltungsmethodebehandelt werden.</span></p><h2><span><a aria-hidden="true" class="anchor" id="error-handling.html_fehlerverwaltungsmethode-installieren"></a><a aria-hidden="true"class="hash-link" href="#error-handling.html_fehlerverwaltungsmethode-installieren"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fehlerverwaltungsmethode installieren</span></h2><p><span>In 4D, all errors can be caught and handled in a specificproject method, the <strong>error-handling</strong> (or<strong>error-catching</strong>) method.</span></p><p><span>Diese Projektmethode wird für den aktuellen Prozessinstalliert und automatisch für jeden Fehler aufgerufen, der imProzess auftritt, sei es im interpretierten oder im kompiliertenModus. Um sie zu <em>installieren</em>, rufen Sie den Befehl<code>ON ERR CALL</code> auf und setzen den Namen derProjektmethode als Parameter. Beispiel:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-function">ON ERR CALL</span>(<span class="hljs-string">"IO_ERRORS"</span>) <span class="hljs-comment">//Installs the error-handling method</span></code></span></pre><p>Wollen Sie das Auffinden von Fehlern abbrechen und wieder an 4Dübergeben, rufen Sie <code>ON ERR CALL</code> mit einem leerenString auf:</p><pre><code class="hljs css language-4d"><span class="hljs-function">ON ERR CALL</span>(<span class="hljs-string">""</span>) <span class="hljs-comment">//gives back control to 4D</span></code></pre><p>The <code>Method called on error</code> command allows you toknow the name of the method installed by <code>ON ERR CALL</code>for the current process. Er ist besonders hilfreich bei generischemCode, da Sie damit die Fehlerverwaltungsmethode zeitweise ändernund dann wiederherstellen können:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$methCurrent</span>:=Method called on error<span class="hljs-function"> ON ERR CALL</span>(<span class="hljs-string">"NewMethod"</span>)  <span class="hljs-comment">//If the document cannot be opened, an error is generated</span> <span class="hljs-variable">$ref</span>:=<span class="hljs-function">Open document</span>(<span class="hljs-string">"MyDocument"</span>)  <span class="hljs-comment">//Reinstallation of previous method</span><span class="hljs-function"> ON ERR CALL</span>(<span class="hljs-variable">$methCurrent</span>)</code></pre><h3><a aria-hidden="true" class="anchor" id="error-handling.html_reichweite-und-komponenten"></a><a aria-hidden="true"class="hash-link" href="#error-handling.html_reichweite-und-komponenten"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Reichweite und Komponenten</h3><p>Sie können eine einzige Fehlerverwaltungsmethode für die gesamteAnwendung definieren oder für jedes Modul eine eigene Methode. Siekönnen jedoch immer nur eine Methode pro Prozess installieren.</p><p>Eine Fehlerverwaltungsmethode, die über den Befehl <code>ON ERRCALL</code> eingerichtet wurde, gilt nur für die laufendeAnwendung. Erzeugt eine <strong>Komponente</strong> einen Fehler,wird nicht die Fehlerverwaltungsmethode <code>ON ERR CALL</code>der Host-Datenbank aufgerufen, und umgekehrt.</p><h3><a aria-hidden="true" class="anchor" id="error-handling.html_fehlerverwaltung-in-der-methode"></a><a aria-hidden="true"class="hash-link" href="#error-handling.html_fehlerverwaltung-in-der-methode"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fehlerverwaltung in der Methode</h3><p>Within the custom error method, you have access to severalpieces of information that will help you identifying the error:</p><ul><li><p>Spezifische Systemvariablen (*):</p><ul><li><code>Error</code> (Lange Ganzzahl): Fehlernummer</li><li><code>Error method</code> (Text): Namen der Methode, die denFehler ausgelöst hat</li><li><code>Error line</code> (Lange Ganzzahl): Zeilennummer in derMethode, die den Fehler ausgelöst hat.</li><li><code>Error formula</code> (Text): Formel des 4D Code(Rohtext), der den Fehler verursacht hat.</li></ul></li></ul><p>(<em>) <em>4D unterhält automatisch eine Reihe von Variablen,genannt <strong>Systemvariablen</strong>, die verschiedene Zweckeerfüllen.</em> Weitere Informationen dazu finden Sie im Handbuch 4DProgrammiersprache</em>.</p><ul><li>Der Befehl <code>GET LAST ERROR STACK</code> gibt Informationenüber den aktuellen Fehlerstapel der 4D Anwendung zurück.</li><li>Der Befehl <code>Get call chain</code> gibt eine Collection vonObjekten zurück, die jeden Schritt der Aufruffolge der Methode imaktuellen Prozess beschreiben.</li></ul><h4><a aria-hidden="true" class="anchor" id="error-handling.html_beispiel"></a><a aria-hidden="true" class="hash-link" href="#error-handling.html_beispiel"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><p>Hier sehen Sie ein einfaches Fehlerverwaltungssystem:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//installing the error handling method</span><span class="hljs-function"> ON ERR CALL</span>(<span class="hljs-string">"errorMethod"</span>) <span class="hljs-comment">//... executing code</span><span class="hljs-function"> ON ERR CALL</span>(<span class="hljs-string">""</span>) <span class="hljs-comment">//giving control back to 4D</span></code></pre><pre><code class="hljs css language-4d"><span class="hljs-comment">// errorMethod project method</span><span class="hljs-keyword"> If</span>(Error#<span class="hljs-number">1006</span>) <span class="hljs-comment">//this is not a user interruption</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"The error "</span>+<span class="hljs-function">String</span>(Error)+<span class="hljs-string">" occurred"</span>. The code in question is: \<span class="hljs-string">""</span>+Error formula+<span class="hljs-string">"\""</span>)<span class="hljs-keyword"> End if</span></code></pre><h3><a aria-hidden="true" class="anchor" id="error-handling.html_leere-fehlerverwaltungsmethode-verwenden"></a><a aria-hidden="true"class="hash-link" href="#error-handling.html_leere-fehlerverwaltungsmethode-verwenden"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Leere Fehlerverwaltungsmethode verwenden</h3><p>Wollen Sie hauptsächlich, dass das Dialogfenster fürStandardfehler ausgeblendet wird, können Sie eine leereFehlerverwaltungsmethode installieren. Die Systemvariable<code>Error</code> lässt sich in jeder Methode testen, z.B. auchaußerhalb der Fehlerverwaltungsmethode:</p><pre><code class="hljs css language-4d"><span class="hljs-function">ON ERR CALL</span>(<span class="hljs-string">"emptyMethod"</span>) <span class="hljs-comment">//emptyMethod exists but is empty</span><span class="hljs-variable">$doc</span>:=<span class="hljs-function">Open document</span>( <span class="hljs-string">"myFile.txt"</span>)<span class="hljs-keyword">If</span> (Error=<span class="hljs-number">-43</span>)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"File not found."</span>)<span class="hljs-keyword">End if</span><span class="hljs-function">ON ERR CALL</span>(<span class="hljs-string">""</span>)</code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#looping.html"><span class="arrow-prev">←</span><span>Schleifenstrukturen</span></a><a class="docs-next button"href="#interpreted-compiled.html"><span>Interpretierter undkompilierter Modus</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#error-handling.html_fehler-oder-status">Fehler oderStatus</a></li><li><a href="#error-handling.html_fehlerverwaltungsmethode-installieren">Fehlerverwaltungsmethodeinstallieren</a><ul class="toc-headings"><li><a href="#error-handling.html_reichweite-und-komponenten">Reichweite undKomponenten</a></li><li><a href="#error-handling.html_fehlerverwaltung-in-der-methode">Fehlerverwaltungin der Methode</a></li><li><a href="#error-handling.html_leere-fehlerverwaltungsmethode-verwenden">LeereFehlerverwaltungsmethode verwenden</a></li></ul></li></ul></nav></div></div></body></html>