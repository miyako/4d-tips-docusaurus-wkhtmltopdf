<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="de"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Entity · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="An [entity](/docs/Rx/de/ORDA/dsmapping.html#entity) is an instance of a [Dataclass](/docs/Rx/de/ORDA/dsmapping.html#dataclass), like a record of the table matching the dataclass in its associated datastore. It contains the same attributes as the dataclass as well as the data values and specific properties and functions."name="description" /><meta content="de" name="docsearch:language" /><meta content="Entity · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="An [entity](/docs/Rx/de/ORDA/dsmapping.html#entity) is an instance of a [Dataclass](/docs/Rx/de/ORDA/dsmapping.html#dataclass), like a record of the table matching the dataclass in its associated datastore. It contains the same attributes as the dataclass as well as the data values and specific properties and functions."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#EntityClass.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Entity<a aria-hidden="true" class="anchor" id="EntityClass.html"></a></h1></header><article><div><p><span>An <a href="#EntityClass.html_entity">entity</a> is aninstance of a <a href="#EntityClass.html_dataclass">Dataclass</a>,like a record of the table matching the dataclass in its associateddatastore. It contains the same attributes as the dataclass as wellas the data values and specific properties andfunctions.</span></p><h3><span><a aria-hidden="true" class="anchor" id="EntityClass.html_summary"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_summary"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Summary</span></h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#EntityClass.html_attributename"><strong><em>.attributeName</em></strong>: any</a><p>&nbsp;&nbsp;&nbsp;&nbsp;stores the attribute value for theentity</p></td></tr><tr><td><a href="#EntityClass.html_clone"><strong>.clone()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;creates in memory a new entityreferencing the same record as the original entity</p></td></tr><tr><td><a href="#EntityClass.html_diff"><strong>.diff</strong>(<em>entityToCompare</em> : 4D.Entity { ;<em>attributesToCompare</em> : Collection } ) : Collection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;compares the contents of two entitiesand returns their differences</p></td></tr><tr><td><a href="#EntityClass.html_drop"><strong>.drop</strong>({<em>mode</em> : Integer} ) : Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;deletes the data contained in the entityfrom the datastore</p></td></tr><tr><td><a href="#EntityClass.html_first"><strong>.first()</strong>:4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns a reference to the entity infirst position of the entity selection which the entity belongsto</p></td></tr><tr><td><a href="#EntityClass.html_fromobject"><strong>.fromObject</strong>(<em>filler</em> : Object )</a><p>&nbsp;&nbsp;&nbsp;&nbsp;fills an entity with the <em>filler</em>content</p></td></tr><tr><td><a href="#EntityClass.html_getdataclass"><strong>.getDataClass()</strong> :4D.DataClass</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns the dataclass of the entity</p></td></tr><tr><td><a href="#EntityClass.html_getkey"><strong>.getKey</strong>( {<em>mode</em> : Integer } ) : Text<br /><strong>.getKey</strong>( { <em>mode</em> : Integer } ) :Integer</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns the primary key value of theentity</p></td></tr><tr><td><a href="#EntityClass.html_getremotecontextattributes"><strong>.getRemoteContextAttributes()</strong>: Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns information about theoptimization context used by the entity</p></td></tr><tr><td><a href="#EntityClass.html_getselection"><strong>.getSelection()</strong>:4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns the entity selection which theentity belongs to</p></td></tr><tr><td><a href="#EntityClass.html_getstamp"><strong>.getStamp()</strong> :Integer</a><p>&nbsp;&nbsp;&nbsp;&nbsp; returns the current value of the stampof the entity</p></td></tr><tr><td><a href="#EntityClass.html_indexof"><strong>.indexOf</strong>({ <em>entitySelection</em> : 4D.EntitySelection } ) : Integer</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns the position of the entity in anentity selection</p></td></tr><tr><td><a href="#EntityClass.html_isnew"><strong>.isNew()</strong> :Boolean</a><p>&nbsp;&nbsp;&nbsp;&nbsp; returns True if the entity to which itis applied has just been created and has not yet been saved in thedatastore</p></td></tr><tr><td><a href="#EntityClass.html_last"><strong>.last()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns a reference to the entity inlast position of the entity selection which the entity belongsto</p></td></tr><tr><td><a href="#EntityClass.html_lock"><strong>.lock</strong>( {<em>mode</em> : Integer } ) : Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;puts a pessimistic lock on the recordreferenced by the entity</p></td></tr><tr><td><a href="#EntityClass.html_next"><strong>.next()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns a reference to the next entityin the entity selection which the entity belongs to</p></td></tr><tr><td><a href="#EntityClass.html_previous"><strong>.previous()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp; returns a reference to the previousentity in the entity selection which the entity belongs to</p></td></tr><tr><td><a href="#EntityClass.html_reload"><strong>.reload()</strong> :Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;reloads the content of the entity inmemory</p></td></tr><tr><td><a href="#EntityClass.html_save"><strong>.save</strong>( {<em>mode</em> : Integer } ) : Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;saves the changes made to the entity</p></td></tr><tr><td><a href="#EntityClass.html_toobject"><strong>.toObject</strong>() :Object<br /><strong>.toObject</strong>( <em>filterString</em> : Text { ;<em>options</em> : Integer} ) : Object<br /><strong>.toObject</strong>( <em>filterCol</em> : Collection { ;<em>options</em> : Integer } ) : Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns an object which has been builtfrom the entity</p></td></tr><tr><td><a href="#EntityClass.html_touched"><strong>.touched()</strong>: Boolean</a><p>&nbsp;&nbsp;&nbsp;&nbsp;tests whether or not an entity attributehas been modified since the entity was loaded into memory orsaved</p></td></tr><tr><td><a href="#EntityClass.html_touchedattributes"><strong>.touchedAttributes()</strong>: Collection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns the names of the attributes thathave been modified since the entity was loaded into memory</p></td></tr><tr><td><a href="#EntityClass.html_unlock"><strong>.unlock()</strong> :Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;removes the pessimistic lock on therecord matching the entity</p></td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="EntityClass.html_attributename"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.<em>attributeName</em></span></h2><details><summary><span>History</span></summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><span><strong><em>.attributeName</em></strong> : any</span></p><h4><span><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</span></h4><p><span>Any dataclass attribute is available as a property of anentity, which stores the attribute value for the entity.</span></p><blockquote><p><span>Dataclass attributes can also be reached using thealternate syntax with [ ].</span></p></blockquote><p><span>The attribute value type depends on the attribute <a href="#EntityClass.html_kind">kind</a> (relation or storage):</span></p><ul><li><span>If <em>attributeName</em> kind is<strong>storage</strong>: <code>.attributeName</code> returns avalue of the same type as <em>attributeName</em>.</span></li><li><span>If <em>attributeName</em> kind is<strong>relatedEntity</strong>: <code>.attributeName</code> returnsthe related entity. Values of the related entity are directlyavailable through cascading properties, for example"myEntity.employer.employees[0].lastname".</span></li><li><span>If <em>attributeName</em> kind is<strong>relatedEntities</strong>: <code>.attributeName</code>returns a new entity selection of related entities. Duplicationsare removed (an unordered entity selection isreturned).</span></li></ul><h4><span><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</span></h4><pre><span><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$myEntity </span>: cs.EmployeeEntity <span class="hljs-variable">$myEntity</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-comment">//Create a new entity</span> <span class="hljs-variable">$myEntity</span>.name:=<span class="hljs-string">"Dupont"</span> <span class="hljs-comment">// assign 'Dupont' to the 'name' attribute</span> <span class="hljs-variable">$myEntity</span>.firstname:=<span class="hljs-string">"John"</span> <span class="hljs-comment">//assign 'John' to the 'firstname' attribute</span> <span class="hljs-variable">$myEntity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//save the entity</span></code></span></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_clone"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_clone"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.clone()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.clone()</strong> : 4D.Entity</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>New entity referencing the record</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-1"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.clone()</code> function creates in memory a newentity referencing the same record as the original entity. Thisfunction allows you to update entities separately.</p><blockquote><p>Keep in mind that any modifications done to entities will besaved in the referenced record only when the <a href="#EntityClass.html_save"><code>.save( )</code></a> function isexecuted.</p></blockquote><p>This function can only be used with entities already saved inthe database. It cannot be called on a newly created entity (forwhich <a href="#EntityClass.html_isnew"><code>.isNew()</code></a>returns <strong>True</strong>).</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-1"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp</span>; <span class="hljs-variable">$empCloned </span>: cs.EmployeeEntity <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>) <span class="hljs-variable">$empCloned</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">clone</span>() <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">//Updates done on $emp are not done on $empCloned</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_diff"></a><a aria-hidden="true" class="hash-link"href="#EntityClass.html_diff"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.diff()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.diff</strong>( <em>entityToCompare</em> : 4D.Entity { ;<em>attributesToCompare</em> : Collection } ) : Collection</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>entityToCompare</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entity to be compared with the original entity</td></tr><tr><td>attributesToCompare</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Name of attributes to be compared</td></tr><tr><td>Ergebnis</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Differences between the entities</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-2"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.diff()</code> function compares the contents of twoentities and returns their differences.</p><p>In <em>entityToCompare</em>, pass the entity to be compared tothe original entity.</p><p>In <em>attributesToCompare</em>, you can designate specificattributes to compare. If provided, the comparison is done only onthe specified attributes. If not provided, all differences betweenthe entities are returned.</p><p>The differences are returned as a collection of objects whoseproperties are:</p><table><thead><tr><th>Property name</th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>attributeName</td><td>String</td><td>Name of the attribute</td></tr><tr><td>value</td><td>any - Depends on attribute type</td><td>Value of the attribute in the entity</td></tr><tr><td>otherValue</td><td>any - Depends on attribute type</td><td>Value of the attribute in <em>entityToCompare</em></td></tr></tbody></table><p>Only attributes with different values are included in thecollection. If no differences are found, <code>.diff()</code>returns an empty collection.</p><p>The function applies for properties whose <a href="#EntityClass.html_kind">kind</a> is <strong>storage</strong> or<strong>relatedEntity</strong>. In case a related entity has beenupdated (meaning the foreign key), the name of the related entityand its primary key name are returned as <em>attributeName</em>properties (<em>value</em> and <em>otherValue</em> are empty forthe related entity name).</p><p>If one of the compared entities is <strong>Null</strong>, anerror is raised.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-1-1"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-1-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$diff1</span>; <span class="hljs-variable">$diff2 </span>: Collection employee:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"ID=1001"</span>).<span class="hljs-function">first</span>() <span class="hljs-variable">$clone</span>:=employee.<span class="hljs-function">clone</span>() employee.firstName:=<span class="hljs-string">"MARIE"</span> employee.lastName:=<span class="hljs-string">"SOPHIE"</span> employee.salary:=<span class="hljs-number">500</span> <span class="hljs-variable">$diff1</span>:=<span class="hljs-variable">$clone</span>.<span class="hljs-function">diff</span>(employee) <span class="hljs-comment">// All differences are returned</span> <span class="hljs-variable">$diff2</span>:=<span class="hljs-variable">$clone</span>.<span class="hljs-function">diff</span>(employee;New collection<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"lastName"</span>))  <span class="hljs-comment">// Only differences on firstName and lastName are returned</span></code></pre><p>$diff1:</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Natasha"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"MARIE"</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Locke"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"SOPHIE"</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"salary"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-number">66600</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">500</span>    }]<span class="hljs-variable">$diff2</span>:[    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Natasha"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"MARIE"</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Locke"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"SOPHIE"</span>    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-2"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 2</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> vCompareResult1; vCompareResult2; vCompareResult3; <span class="hljs-variable">$attributesToInspect </span>: Collection vCompareResult1:=New collection vCompareResult2:=New collection vCompareResult3:=New collection <span class="hljs-variable">$attributesToInspect</span>:=New collection <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">636</span>) <span class="hljs-variable">$e2</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">636</span>) <span class="hljs-variable">$e1</span>.firstName:=<span class="hljs-variable">$e1</span>.firstName+<span class="hljs-string">" update"</span> <span class="hljs-variable">$e1</span>.lastName:=<span class="hljs-variable">$e1</span>.lastName+<span class="hljs-string">" update"</span> <span class="hljs-variable">$c</span>:=ds.Company.<span class="hljs-function">get</span>(<span class="hljs-number">117</span>) <span class="hljs-variable">$e1</span>.employer:=<span class="hljs-variable">$c</span> <span class="hljs-variable">$e2</span>.salary:=<span class="hljs-number">100</span> <span class="hljs-variable">$attributesToInspect</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"firstName"</span>) <span class="hljs-variable">$attributesToInspect</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"lastName"</span>) vCompareResult1:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>) vCompareResult2:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>;<span class="hljs-variable">$attributesToInspect</span>) vCompareResult3:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">diff</span>(<span class="hljs-variable">$e2</span>;<span class="hljs-variable">$e1</span>.<span class="hljs-function">touchedAttributes</span>())</code></pre><p>vCompareResult1 (all differences are returned):</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"salary"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-number">33500</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">100</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employerID"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-number">117</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">118</span>    },  {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employer"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"[object Entity]"</span>,<span class="hljs-comment">// Entity 117 from Company</span>        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"[object Entity]"</span><span class="hljs-comment">// Entity 118 from Company</span>    }]</code></pre><p>vCompareResult2 (only differences on $attributesToInspect arereturned)</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>    }]</code></pre><p>vCompareResult3 (only differences on $e1 touched attributes arereturned)</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"firstName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Karla update"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Karla"</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"lastName"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Marrero update"</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"Marrero"</span>    },    {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employerID"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-number">117</span>,        <span class="hljs-string">"otherValue"</span>: <span class="hljs-number">118</span>    },     {        <span class="hljs-string">"attributeName"</span>: <span class="hljs-string">"employer"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-string">"[object Entity]"</span>,<span class="hljs-comment">// Entity 117 from Company</span>        <span class="hljs-string">"otherValue"</span>: <span class="hljs-string">"[object Entity]"</span><span class="hljs-comment">// Entity 118 from Company</span>    }]</code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_drop"></a><a aria-hidden="true" class="hash-link"href="#EntityClass.html_drop"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.drop()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.drop</strong>( {<em>mode</em> : Integer} ) : Object</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>mode</td><td>Ganzzahl</td><td style="text-align:center">-&gt;</td><td><code>dk force drop if stamp changed</code>: Forces the dropeven if the stamp has changed</td></tr><tr><td>Ergebnis</td><td>Objekt</td><td style="text-align:center">&lt;-</td><td>Result of drop operation</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-3"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.drop()</code> function deletes the data contained inthe entity from the datastore, from the table related to itsDataclass. Note that the entity remains in memory.</p><p>In a multi-user or multi-process application, the<code>.drop()</code> function is executed under an <a href="#EntityClass.html_entity-locking">"optimistic lock"</a> mechanism,wherein an internal locking stamp is automatically incremented eachtime the record is saved.</p><p>By default, if the <em>mode</em> parameter is omitted, thefunction will return an error (see below) if the same entity wasmodified (i.e. the stamp has changed) by another process or user inthe meantime.</p><p>Otherwise, you can pass the <code>dk force drop if stampchanged</code> option in the <em>mode</em> parameter: in this case,the entity is dropped even if the stamp has changed (and theprimary key is still the same).</p><p><strong>Ergebnis</strong></p><p>The object returned by <code>.drop( )</code> contains thefollowing properties:</p><table><thead><tr><th>Property</th><th></th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>success</td><td></td><td>Boolean</td><td>true if the drop action is successful, false otherwise.</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of error:</em></strong></td></tr><tr><td>status(*)</td><td></td><td>number</td><td>Error code, see below</td></tr><tr><td>statusText(*)</td><td></td><td>Text</td><td>Description of the error, see below</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of pessimistic lockerror:</em></strong></td></tr><tr><td>LockKindText</td><td></td><td>Text</td><td>"Locked by record"</td></tr><tr><td>lockInfo</td><td></td><td>object</td><td>Information about the lock origin</td></tr><tr><td></td><td>task_id</td><td>number</td><td>Process id</td></tr><tr><td></td><td>user_name</td><td>Text</td><td>Session user name on the machine</td></tr><tr><td></td><td>user4d_alias</td><td>Text</td><td>User alias if defined by <code>SET USER ALIAS</code>, otherwiseuser name in the 4D directory</td></tr><tr><td></td><td>host_name</td><td>Text</td><td>Machine name</td></tr><tr><td></td><td>task_name</td><td>Text</td><td>Process name</td></tr><tr><td></td><td>client_version</td><td>Text</td><td></td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of serious error (seriouserror can be trying to duplicate a primary key, diskfull...):</em></strong></td></tr><tr><td>errors</td><td></td><td>collection of objects</td><td></td></tr><tr><td></td><td>message</td><td>Text</td><td>Error message</td></tr><tr><td></td><td>component signature</td><td>Text</td><td>internal component signature (e.g. "dmbg" stands for thedatabase component)</td></tr><tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr></tbody></table><p>(*) The following values can be returned in the <em>status</em>and <em>statusText</em> properties of <em>Result</em> object incase of error:</p><table><thead><tr><th>Constant</th><th>Wert</th><th>Kommentar</th></tr></thead><tbody><tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>The entity no longer exists in the data. This error can occurin the following cases:<br /><ul><li>the entity has been dropped (the stamp has changed and thememory space is now free)</li><li>the entity has been dropped and replaced by another one withanother primary key (the stamp has changed and a new entity nowuses the memory space). When using entity.drop( ), this error canbe returned when dk force drop if stamp changed option is used.When using entity.lock( ), this error can be returned when dkreload if stamp changed option is used</li><p><strong>Associated statusText</strong>: "Entity does not existanymore"</p></ul></td></tr><tr><td><code>dk status locked</code></td><td>3</td><td>The entity is locked by a pessimistic lock.<br /><strong>Associated statusText</strong>: "Already locked"</td></tr><tr><td><code>dk status serious error</code></td><td>4</td><td>A serious error is a low-level database error (e.g. duplicatedkey), a hardware error, etc.<br /><strong>Associated statusText</strong>: "Other error"</td></tr><tr><td><code>dk status stamp has changed</code></td><td>2</td><td>The internal stamp value of the entity does not match the oneof the entity stored in the data (optimistic lock).<br /><ul><li>with <code>.save( )</code>: error only if the <code>dk automerge</code> option is not used</li><li>with <code>.drop( )</code>: error only if the <code>dk forcedrop if stamp changed</code> option is not used</li><li>with <code>.lock( )</code>: error only if the <code>dk reloadif stamp changed</code> option is not used</li><li><strong>Associated statusText</strong>: "Stamp haschanged"</li></ul></td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-1-2"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-1-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 1</h4><p>Example without <code>dk force drop if stamp changed</code>option:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>) <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>() <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">drop</span>()<span class="hljs-keyword"> Case of</span>    :(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName) <span class="hljs-comment">//The dropped entity remains in memory</span>    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword"> End case</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-2-1"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-2-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 2</h4><p>Example with <code>dk force drop if stamp changed</code>option:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>) <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>() <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">drop</span>(dk force drop if stamp changed)<span class="hljs-keyword"> Case of</span>    :(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName) <span class="hljs-comment">//The dropped entity remains in memory</span>    :(<span class="hljs-variable">$status</span>.status=dk status entity does not exist anymore)<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword"> End case</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_first"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_first"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.first()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.first()</strong>: 4D.Entity</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Reference to first entity of an entity selection (Null if notfound)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-4"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.first()</code> function returns a reference to theentity in first position of the entity selection which the entitybelongs to.</p><p>If the entity does not belong to any existing entity selection(i.e. <a href="#EntityClass.html_getselection">.getSelection( )</a>returns Null), the function returns a Null value.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-3"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$firstEmployee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span> <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">2</span>] <span class="hljs-variable">$firstEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">first</span>() <span class="hljs-comment">//$firstEmployee is the first entity of the $employees entity selection</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_fromobject"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_fromobject"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.fromObject()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.fromObject</strong>( <em>filler</em> : Object )</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>filler</td><td>Objekt</td><td style="text-align:center">-&gt;</td><td>Object from which to fill the entity</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-5"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.fromObject()</code> function fills an entity with the<em>filler</em> content.</p><blockquote><p>This function modifies the original entity.</p></blockquote><p>The mapping between the object and the entity is done on theattribute names:</p><ul><li>If a property of the object does not exist in the dataclass, itis ignored.</li><li>Data types must be equivalent. If there is a type mismatchbetween the object and dataclass, 4D tries to convert the datawhenever possible (see <a href="#EntityClass.html_converting-data-types"><code>Converting datatypes</code></a>), otherwise the attribute is left untouched.</li><li>The primary key can be given as is or with a "__KEY" property(filled with the primary key value). If it does not already existin the dataclass, the entity is created with the given value when<a href="#EntityClass.html_save">.save()</a> is called. If theprimary key is not given, the entity is created and the primary keyvalue is assigned with respect to database rules. Theauto-increment is only computed if the primary key is null.</li></ul><p><em>filler</em> can handle a related entity under the followingconditions:</p><ul><li><em>filler</em> contains the foreign key itself, or</li><li><em>filler</em> contains a property object with the same nameas the related entity, containing a single property named"__KEY".</li><li>if the related entity does not exist, it is ignored.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-4"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><p>With the following $o object:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mary"</span>,    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Smith"</span>,    <span class="hljs-string">"salary"</span>: <span class="hljs-number">36500</span>,    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1958-10-27T00:00:00.000Z"</span>,    <span class="hljs-string">"woman"</span>: true,    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">411</span>,<span class="hljs-comment">// relatedEntity given with PK</span>    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span> <span class="hljs-comment">// relatedEntity given with PK</span>}</code></pre><p>The following code will create an entity with manager andemployer related entities.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$o </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity <span class="hljs-variable">$entity</span>:=ds.Emp.<span class="hljs-function">new</span>() <span class="hljs-variable">$entity</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$o</span>) <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()</code></pre><p>You could also use a related entity given as an object:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Marie"</span>,    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Lechat"</span>,    <span class="hljs-string">"salary"</span>: <span class="hljs-number">68400</span>,    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1971-09-03T00:00:00.000Z"</span>,    <span class="hljs-string">"woman"</span>: false,    <span class="hljs-string">"employer"</span>: {<span class="hljs-comment">// relatedEntity given as an object</span>        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"21"</span>    },    <span class="hljs-string">"manager"</span>: {<span class="hljs-comment">// relatedEntity given as an object</span>        <span class="hljs-string">"__KEY"</span>: <span class="hljs-string">"411"</span>    }}</code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_getdataclass"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_getdataclass"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getDataClass()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17 R5</td><td>Added</td></tr></tbody></table></details><p><strong>.getDataClass()</strong> : 4D.DataClass</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>4D.DataClass</td><td style="text-align:center">&lt;-</td><td>DataClass object to which the entity belongs</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-6"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.getDataClass()</code> function returns the dataclassof the entity. This function is useful when writing genericcode.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-5"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><p>The following generic code duplicates any entity:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//duplicate_entity method </span>  <span class="hljs-comment">//duplicate_entity($entity) </span> #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$entity </span>: 4D.Entity)<span class="hljs-keyword">   var</span> <span class="hljs-variable">$entityNew </span>: 4D.Entity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object <span class="hljs-variable">$entityNew</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">new</span>() <span class="hljs-comment">//create a new entity in the parent dataclass</span> <span class="hljs-variable">$entityNew</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$entity</span>.<span class="hljs-function">toObject</span>()) <span class="hljs-comment">//get all attributes</span> <span class="hljs-variable">$entityNew</span>[<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getInfo</span>().primaryKey]:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//reset the primary key</span> <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entityNew</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//save the duplicated entity</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_getkey"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_getkey"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getKey()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.getKey</strong>( { <em>mode</em> : Integer } ) :Text<br /><strong>.getKey</strong>( { <em>mode</em> : Integer } ) :Integer</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>mode</td><td>Ganzzahl</td><td style="text-align:center">-&gt;</td><td><code>dk key as string</code>: primary key is returned as astring, no matter the primary key type</td></tr><tr><td>Ergebnis</td><td>Text</td><td style="text-align:center">&lt;-</td><td>Value of the text primary key of the entity</td></tr><tr><td>Ergebnis</td><td>Ganzzahl</td><td style="text-align:center">&lt;-</td><td>Value of the numeric primary key of the entity</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-7"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-7"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.getKey()</code> function returns the primary keyvalue of the entity.</p><p>Primary keys can be numbers (Integer) or strings. You can"force" the returned primary key value to be a string, no matterthe actual primary key type, by passing the <code>dk key asstring</code> option in the <em>mode</em> parameter.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-6"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>) <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>]<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The primary key is "</span>+<span class="hljs-variable">$employee</span>.<span class="hljs-function">getKey</span>(dk key as string))</code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_getremotecontextattributes"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_getremotecontextattributes"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getRemoteContextAttributes()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v19R5</td><td>Added</td></tr></tbody></table></details><p><strong>.getRemoteContextAttributes()</strong> : Text</p><table><thead><tr><th>Parameter</th><th>Typ</th><th></th><th>Beschreibung</th></tr></thead><tbody><tr><td>result</td><td>Text</td><td>&lt;-</td><td>Context attributes linked to the entity, separated by acomma</td></tr></tbody></table><blockquote><p><strong>Advanced mode:</strong> This function is intended fordevelopers who need to customize ORDA default features for specificconfigurations. In most cases, you will not need to use it.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-8"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-8"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.getRemoteContextAttributes()</code> function returnsinformation about the optimization context used by the entity .</p><p>If there is no <a href="#EntityClass.html_clientserver-optimization">optimizationcontext</a> for the entity, the function returns an empty Text.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-7"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-7"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$address </span>: cs.AddressEntity<span class="hljs-keyword">var</span> <span class="hljs-variable">$p </span>: cs.PersonsEntity<span class="hljs-keyword">var</span> <span class="hljs-variable">$contextA </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$info </span>: Text<span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$contextA</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>; <span class="hljs-string">"contextA"</span>)<span class="hljs-variable">$address</span>:=<span class="hljs-variable">$ds</span>.Address.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>; <span class="hljs-variable">$contextA</span>)<span class="hljs-variable">$text</span>:=<span class="hljs-string">""</span><span class="hljs-keyword"> For each</span> (<span class="hljs-variable">$p</span>; <span class="hljs-variable">$address</span>.persons)    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$p</span>.firstname+<span class="hljs-string">" "</span>+<span class="hljs-variable">$p</span>.lastname<span class="hljs-keyword">End for each</span> <span class="hljs-variable">$info</span>:=<span class="hljs-variable">$address</span>.<span class="hljs-function">getRemoteContextAttributes</span>()<span class="hljs-comment">//$info = "persons,persons.lastname,persons.firstname"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_see-also"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_see-also"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>See also</h4><p><a href="#EntityClass.html_getRemoteContextAttributes">EntitySelection.getRemoteContextAttributes()</a><br /><a href="#EntityClass.html_clearallremotecontexts">.clearAllRemoteContexts()</a><br /><a href="#EntityClass.html_getremotecontextinfo">.getRemoteContextInfo()</a><br /><a href="#EntityClass.html_getallremotecontexts">.getAllRemoteContexts()</a><br /><a href="#EntityClass.html_setremotecontextinfo">.setRemoteContextInfo()</a></p><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_getselection"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_getselection"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getSelection()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.getSelection()</strong>: 4D.EntitySelection</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection to which the entity belongs (Null if notfound)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-9"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-9"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.getSelection()</code> function returns the entityselection which the entity belongs to.</p><p>If the entity does not belong to an entity selection, thefunction returns Null.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-8"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-8"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$employees2 </span>: cs.EmployeeSelection <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>) <span class="hljs-comment">// This entity does not belong to any entity selection</span> <span class="hljs-variable">$employees</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">getSelection</span>() <span class="hljs-comment">// $employees is Null</span> <span class="hljs-variable">$employees2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>) <span class="hljs-comment">//This entity selection contains 6 entities</span> <span class="hljs-variable">$emp</span>:=<span class="hljs-variable">$employees2</span>[<span class="hljs-number">0</span>]  <span class="hljs-comment">// This entity belongs to an entity selection</span><span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The entity selection contains "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">getSelection</span>().length)+<span class="hljs-string">" entities"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_getstamp"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_getstamp"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getStamp()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.getStamp()</strong> : Integer</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>Ganzzahl</td><td style="text-align:center">&lt;-</td><td>Stamp of the entity (0 if entity has just been created)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-10"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-10"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.getStamp()</code> function returns the current valueof the stamp of the entity.</p><p>The internal stamp is automatically incremented by 4D each timethe entity is saved. It manages concurrent user access andmodifications to the same entities (see <a href="#EntityClass.html_entity-locking"><strong>Entitylocking</strong></a>).</p><blockquote><p>For a new entity (never saved), the function returns 0. To knowif an entity has just been created, it is recommended to use<a href="#EntityClass.html_isnew">.isNew()</a>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-9"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-9"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$stamp </span>: Integer <span class="hljs-variable">$entity</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>() <span class="hljs-variable">$stamp</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getStamp</span>() <span class="hljs-comment">//$stamp=1</span> <span class="hljs-variable">$entity</span>.lastname:=<span class="hljs-string">"Wesson"</span> <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>() <span class="hljs-variable">$stamp</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">getStamp</span>() <span class="hljs-comment">//$stamp=2</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_indexof"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_indexof"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.indexOf()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.indexOf</strong>( { <em>entitySelection</em> :4D.EntitySelection } ) : Integer</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>entitySelection</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Position of the entity is given according to this entityselection</td></tr><tr><td>Ergebnis</td><td>Ganzzahl</td><td style="text-align:center">&lt;-</td><td>Position of the entity in an entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-11"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-11"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.indexOf()</code> function returns the position of theentity in an entity selection.</p><p>By default if the <em>entitySelection</em> parameter is omitted,the function returns the entity's position within its own entityselection. Otherwise, it returns the position of the entity withinthe specified <em>entitySelection</em>.</p><p>The resulting value is included between 0 and the length of theentity selection -1.</p><ul><li>If the entity does not have an entity selection or does notbelong to <em>entitySelection</em>, the function returns -1.</li><li>If <em>entitySelection</em> is Null or does not belong to thesame dataclass as the entity, an error is raised.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-10"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-10"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span> <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">1</span>] <span class="hljs-comment">//This entity belongs to an entity selection</span><span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The index of the entity in its own entity selection is "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employee</span>.<span class="hljs-function">indexOf</span>())) <span class="hljs-comment">//1</span> <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>) <span class="hljs-comment">//This entity does not belong to an entity selection</span><span class="hljs-function"> ALERT</span>(<span class="hljs-string">"The index of the entity is "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employee</span>.<span class="hljs-function">indexOf</span>())) <span class="hljs-comment">// -1</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_isnew"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_isnew"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.isNew()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.isNew()</strong> : Boolean</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>Boolean</td><td style="text-align:center">&lt;-</td><td>True if entity has just been created and not yet saved.Otherwise, False.</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-12"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-12"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.isNew()</code> function returns True if the entity towhich it is applied has just been created and has not yet beensaved in the datastore. Otherwise, it returns False.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-11"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-11"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">new</span>()<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">isNew</span>())<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"This is a new entity"</span>)<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_last"></a><a aria-hidden="true" class="hash-link"href="#EntityClass.html_last"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.last()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.last()</strong> : 4D.Entity</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Reference to last entity of an entity selection (Null if notfound)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-13"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-13"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.last()</code> function returns a reference to theentity in last position of the entity selection which the entitybelongs to.</p><p>If the entity does not belong to any existing entity selection(i.e. <a href="#EntityClass.html_getselection">.getSelection( )</a>returns Null), the function returns a Null value.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-12"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-12"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$lastEmployee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span> <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>] <span class="hljs-variable">$lastEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">last</span>() <span class="hljs-comment">//$lastEmployee is the last entity of the $employees entity selection</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_lock"></a><a aria-hidden="true" class="hash-link"href="#EntityClass.html_lock"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.lock()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.lock</strong>( { <em>mode</em> : Integer } ) :Object</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>mode</td><td>Ganzzahl</td><td style="text-align:center">-&gt;</td><td><code>dk reload if stamp changed</code>: Reload before lockingif stamp changed</td></tr><tr><td>Ergebnis</td><td>Objekt</td><td style="text-align:center">&lt;-</td><td>Result of lock operation</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-14"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-14"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.lock()</code> function puts a pessimistic lock on therecord referenced by the entity. The <a href="#EntityClass.html_entity-locking">lock is set</a> for a record andall the references of the entity in the current process.</p><p>Other processes will see this record as locked (the<code>result.success</code> property will contain False if they tryto lock the same entity using this function). Only functionsexecuted in the "locking" session are allowed to edit and save theattributes of the entity. The entity can be loaded as read-only byother sessions, but they will not be able to enter and savevalues.</p><p>A record locked by <code>.lock()</code> is unlocked:</p><ul><li>when the <a href="#EntityClass.html_unlock"><code>unlock()</code></a> function iscalled on a matching entity in the same process</li><li>automatically, when it is no longer referenced by any entitiesin memory. For example, if the lock is put only on one localreference of an entity, the entity is unlocked when the functionends. As long as there are references to the entity in memory, therecord remains locked.</li></ul><blockquote><p>An entity can also be <a href="#lock.html">locked by a RESTsession</a>, in which case it can only be unlocked by thesession.</p></blockquote><p>By default, if the <em>mode</em> parameter is omitted, thefunction will return an error (see below) if the same entity wasmodified (i.e. the stamp has changed) by another process or user inthe meantime.</p><p>Otherwise, you can pass the <code>dk reload if stampchanged</code> option in the <em>mode</em> parameter: in this case,no error is returned and the entity is reloaded when the stamp haschanged (if the entity still exists and the primary key is stillthe same).</p><p><strong>Ergebnis</strong></p><p>The object returned by <code>.lock( )</code> contains thefollowing properties:</p><table><thead><tr><th>Property</th><th></th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>success</td><td></td><td>Boolean</td><td>true if the lock action is successful (or if the entity isalready locked in the current process), false otherwise.</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only if <code>dk reload if stampchanged</code> option is used:</em></strong></td></tr><tr><td><strong>wasReloaded</strong></td><td></td><td>Boolean</td><td>true if the entity was reloaded with success, falseotherwise.</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of error:</em></strong></td></tr><tr><td>status(*)</td><td></td><td>number</td><td>Error code, see below</td></tr><tr><td>statusText(*)</td><td></td><td>Text</td><td>Description of the error, see below</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of pessimistic lockerror:</em></strong></td></tr><tr><td>lockKindText</td><td></td><td>Text</td><td>"Locked by record" if locked by a 4D process, "Locked bysession" if locked by a REST session</td></tr><tr><td>lockInfo</td><td></td><td>object</td><td>Information about the lock origin. Returned properties dependon the lock origin (4D process or REST session).</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only for a 4D processlock:</em></strong></td></tr><tr><td></td><td>task_id</td><td>number</td><td>Process ID</td></tr><tr><td></td><td>user_name</td><td>Text</td><td>Session user name on the machine</td></tr><tr><td></td><td>user4d_alias</td><td>Text</td><td>Name or alias of the 4D user</td></tr><tr><td></td><td>user4d_id</td><td>number</td><td>User id in the 4D database directory</td></tr><tr><td></td><td>host_name</td><td>Text</td><td>Machine name</td></tr><tr><td></td><td>task_name</td><td>Text</td><td>Process name</td></tr><tr><td></td><td>client_version</td><td>Text</td><td>Version of the client</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only for a REST sessionlock:</em></strong></td></tr><tr><td></td><td>host</td><td>Text</td><td>URL that locked the entity (e.g. "<a href="http://www.myserver.com">www.myserver.com</a>")</td></tr><tr><td></td><td>IPAddr</td><td>Text</td><td>IP address of the locker (e.g. "127.0.0.1")</td></tr><tr><td></td><td>userAgent</td><td>Text</td><td>userAgent of the locker (e.g. Mozilla/5.0 (Macintosh; Intel MacOS X 10_15_3) AppleWebKit/537.36 (KHTML, like Gecko)Chrome/96.0.4664.110 Safari/537.36")</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of seriouserror</em></strong> (primary key already exists, diskfull...):</td></tr><tr><td>errors</td><td></td><td>collection of objects</td><td></td></tr><tr><td></td><td>message</td><td>Text</td><td>Error message</td></tr><tr><td></td><td>component signature</td><td>Text</td><td>internal component signature (e.g. "dmbg" stands for thedatabase component)</td></tr><tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr></tbody></table><p>(*) The following values can be returned in the <em>status</em>and <em>statusText</em> properties of the <em>Result</em> object incase of error:</p><table><thead><tr><th>Constant</th><th>Wert</th><th>Kommentar</th></tr></thead><tbody><tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>The entity no longer exists in the data. This error can occurin the following cases:<ul><li>the entity has been dropped (the stamp has changed and thememory space is now free)</li><li>the entity has been dropped and replaced by another one withanother primary key (the stamp has changed and a new entity nowuses the memory space). When using <code>.drop( )</code>, thiserror can be returned when dk force drop if stamp changed option isused. When using <code>.lock( )</code>, this error can be returnedwhen <code>dk reload if stamp changed</code> option is used</li><br /><strong>Associated statusText</strong>: "Entity does not existanymore"</ul></td></tr><tr><td><code>dk status locked</code></td><td>3</td><td>The entity is locked by a pessimistic lock.<p><strong>Associated statusText</strong>: "Already locked"</p></td></tr><tr><td><code>dk status serious error</code></td><td>4</td><td>A serious error is a low-level database error (e.g. duplicatedkey), a hardware error, etc.<p><strong>Associated statusText</strong>: "Other error"</p></td></tr><tr><td><code>dk status stamp has changed</code></td><td>2</td><td>The internal stamp value of the entity does not match the oneof the entity stored in the data (optimistic lock).<ul><li>with <code>.save( )</code>: error only if the <code>dk automerge</code> option is not used</li><li>with <code>.drop( )</code>: error only if the <code>dk forcedrop if stamp changed</code> option is not used</li><li>with <code>.lock( )</code>: error only if the <code>dk reloadif stamp changed</code> option is not used</li><br /><strong>Associated statusText</strong>: "Stamp has changed"</ul></td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-1-3"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-1-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 1</h4><p>Example with error:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">716</span>) <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>()<span class="hljs-keyword"> Case of</span>    :(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have locked "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName)    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword"> End case</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-2-2"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-2-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 2</h4><p>Example with <code>dk reload if stamp changed</code> option:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">717</span>) <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>(dk reload if stamp changed)<span class="hljs-keyword"> Case of</span>    :(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"You have locked "</span>+<span class="hljs-variable">$employee</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-variable">$employee</span>.lastName)    :(<span class="hljs-variable">$status</span>.status=dk status entity does not exist anymore)<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword"> End case</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_next"></a><a aria-hidden="true" class="hash-link"href="#EntityClass.html_next"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.next()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.next()</strong> : 4D.Entity</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Reference to next entity in the entity selection (Null if notfound)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-15"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-15"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.next()</code> function returns a reference to thenext entity in the entity selection which the entity belongsto.</p><p>If the entity does not belong to any existing entity selection(i.e. <a href="#EntityClass.html_getselection">.getSelection()</a>returns Null), the function returns a Null value.</p><p>If there is no valid next entity in the entity selection (i.e.you are on the last entity of the selection), the function returnsNull. If the next entity has been dropped, the function returns thenext valid entity (and eventually Null).</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-13"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-13"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$nextEmployee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span> <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>] <span class="hljs-variable">$nextEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">next</span>() <span class="hljs-comment">//$nextEmployee is the second entity of the $employees entity selection</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_previous"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_previous"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.previous()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.previous()</strong> : 4D.Entity</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Reference to previous entity in the entity selection (Null ifnot found)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-16"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-16"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.previous()</code> function returns a reference to theprevious entity in the entity selection which the entity belongsto.</p><p>If the entity does not belong to any existing entity selection(i.e. <a href="#EntityClass.html_getselection">.getSelection()</a>returns Null), the function returns a Null value.</p><p>If there is no valid previous entity in the entity selection(i.e. you are on the first entity of the selection), the functionreturns Null. If the previous entity has been dropped, the functionreturns the previous valid entity (and eventually Null).</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-14"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-14"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee</span>; <span class="hljs-variable">$previousEmployee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//This entity selection contains 3 entities</span> <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">1</span>] <span class="hljs-variable">$previousEmployee</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">previous</span>() <span class="hljs-comment">//$previousEmployee is the first entity of the $employees entity selection</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_reload-"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_reload-"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.reload( )</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.reload()</strong> : Object</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>Objekt</td><td style="text-align:center">&lt;-</td><td>Status object</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-17"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-17"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.reload()</code> function reloads the content of theentity in memory, according to information stored in the tablerelated to the dataclass in the datastore. The reload is done onlyif the entity still exists with the same primary key.</p><p><strong>Ergebnis</strong></p><p>The object returned by <code>.reload( )</code> contains thefollowing properties:</p><table><thead><tr><th>Property</th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>success</td><td>Boolean</td><td>True if the reload action is successful, False otherwise.<p><strong><em>Available only in case of error</em></strong>:</p></td></tr><tr><td>status(*)</td><td>number</td><td>Error code, see below</td></tr><tr><td>statusText(*)</td><td>Text</td><td>Description of the error, see below</td></tr></tbody></table><p>(*) The following values can be returned in the <em>status</em>and <em>statusText</em> properties of <em>Result</em> object incase of error:</p><table><thead><tr><th>Constant</th><th>Wert</th><th>Kommentar</th></tr></thead><tbody><tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>The entity no longer exists in the data. This error can occurin the following cases:<br /><ul><li>the entity has been dropped (the stamp has changed and thememory space is now free)</li><li>the entity has been dropped and replaced by another one withanother primary key (the stamp has changed and a new entity nowuses the memory space). the entity has been dropped and replaced byanother one with another primary key (the stamp has changed and anew entity now uses the memory space). When using <code>.lock()</code>, this error can be returned when <code>dk reload if stampchanged</code> option is used</li><br /><strong><em>Associated statusText</em></strong>: "Entity does notexist anymore"</ul></td></tr><tr><td><code>dk status serious error</code></td><td>4</td><td>A serious error is a low-level database error (e.g. duplicatedkey), a hardware error, etc.<br /><strong><em>Associated statusText</em></strong>: "Other error"</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-15"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-15"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$result </span>: Object <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Hollis"</span>) <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">0</span>] <span class="hljs-variable">$employee</span>.firstName:=<span class="hljs-string">"Mary"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">reload</span>()<span class="hljs-keyword"> Case of</span>    :(<span class="hljs-variable">$result</span>.success)<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Reload has been done"</span>)    :(<span class="hljs-variable">$result</span>.status=dk status entity does not exist anymore)<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"The entity has been dropped"</span>)<span class="hljs-keyword"> End case</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_save"></a><a aria-hidden="true" class="hash-link"href="#EntityClass.html_save"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.save()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.save</strong>( { <em>mode</em> : Integer } ) :Object</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>mode</td><td>Ganzzahl</td><td style="text-align:center">-&gt;</td><td><code>dk auto merge</code>: Enables the automatic mergemode</td></tr><tr><td>Ergebnis</td><td>Objekt</td><td style="text-align:center">&lt;-</td><td>Result of save operation</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-18"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-18"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.save()</code> function saves the changes made to theentity in the table related to its dataClass. You must call thismethod after creating or modifying an entity if you want to savethe changes made to it.</p><p>The save operation is executed only if at least one entityattribute has been "touched" (see the <a href="#EntityClass.html_touched"><code>.touched()</code></a> and<a href="#EntityClass.html_touchedattributes"><code>.touchedAttributes()</code></a>functions). Otherwise, the function does nothing (the trigger isnot called).</p><p>In a multi-user or multi-process application, the<code>.save()</code> function is executed under an <a href="#EntityClass.html_entity-locking">"optimistic lock"</a> mechanism,wherein an internal locking stamp is automatically incremented eachtime the record is saved.</p><p>By default, if the <em>mode</em> parameter is omitted, themethod will return an error (see below) whenever the same entityhas been modified by another process or user in the meantime, nomatter the modified attribute(s).</p><p>Otherwise, you can pass the <code>dk auto merge</code> option inthe <em>mode</em> parameter: when the automatic merge mode isenabled, a modification done concurrently by another process/useron the same entity but on a different attribute will not result inan error. The resulting data saved in the entity will be thecombination (the "merge") of all non-concurrent modifications (ifmodifications were applied to the same attribute, the save failsand an error is returned, even with the auto merge mode).</p><blockquote><p>The automatic merge mode is not available for attributes ofPicture, Object, and Text type when stored outside of the record.Concurrent changes in these attributes will result in a <code>dkstatus stamp has changed</code> error.</p></blockquote><p><strong>Ergebnis</strong></p><p>The object returned by <code>.save()</code> contains thefollowing properties:</p><table><thead><tr><th>Property</th><th></th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>success</td><td></td><td>Boolean</td><td>True if the save action is successful, False otherwise.</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only if <code>dk auto merge</code> optionis used</em></strong>:</td></tr><tr><td>autoMerged</td><td></td><td>Boolean</td><td>True if an auto merge was done, False otherwise.</td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of error</em></strong>:</td></tr><tr><td>status</td><td></td><td>number</td><td>Error code, <a href="#EntityClass.html_status-and-statustext">see below</a></td></tr><tr><td>statusText</td><td></td><td>Text</td><td>Description of the error, <a href="#EntityClass.html_status-and-statustext">see below</a></td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of pessimistic lockerror</em></strong>:</td></tr><tr><td>lockKindText</td><td></td><td>Text</td><td>"Locked by record"</td></tr><tr><td>lockInfo</td><td></td><td>object</td><td>Information about the lock origin</td></tr><tr><td></td><td>task_id</td><td>number</td><td>Process id</td></tr><tr><td></td><td>user_name</td><td>Text</td><td>Session user name on the machine</td></tr><tr><td></td><td>user4d_alias</td><td>Text</td><td>User alias if defined by <code>SET USER ALIAS</code>, otherwiseuser name in the 4D directory</td></tr><tr><td></td><td>host_name</td><td>Text</td><td>Machine name</td></tr><tr><td></td><td>task_name</td><td>Text</td><td>Process name</td></tr><tr><td></td><td>client_version</td><td>Text</td><td></td></tr><tr><td></td><td></td><td></td><td><strong><em>Available only in case of seriouserror</em></strong> (serious error - can be trying to duplicate aprimary key, disk full...):</td></tr><tr><td>errors</td><td></td><td>collection of objects</td><td></td></tr><tr><td></td><td>message</td><td>Text</td><td>Error message</td></tr><tr><td></td><td>componentSignature</td><td>Text</td><td>Internal component signature (e.g. "dmbg" stands for thedatabase component)</td></tr><tr><td></td><td>errCode</td><td>number</td><td>Error code</td></tr></tbody></table><h5><a aria-hidden="true" class="anchor" id="EntityClass.html_status-and-statustext"></a><a aria-hidden="true"class="hash-link" href="#EntityClass.html_status-and-statustext"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>status and statusText</h5><p>The following values can be returned in the <code>status</code>and <code>statusText</code> properties of Result object in case oferror:</p><table><thead><tr><th>Constant</th><th>Wert</th><th>Kommentar</th></tr></thead><tbody><tr><td><code>dk status automerge failed</code></td><td>6</td><td>(Only if the <code>dk auto merge</code> option is used) Theautomatic merge option failed when saving the entity.<p><strong>Associated statusText</strong>: "Auto merge failed"</p></td></tr><tr><td><code>dk status entity does not exist anymore</code></td><td>5</td><td>The entity no longer exists in the data. This error can occurin the following cases:<br /><ul><li>the entity has been dropped (the stamp has changed and thememory space is now free)</li><li>the entity has been dropped and replaced by another one withanother primary key (the stamp has changed and a new entity nowuses the memory space). the entity has been dropped and replaced byanother one with another primary key (the stamp has changed and anew entity now uses the memory space). When using <code>.lock()</code>, this error can be returned when <code>dk reload if stampchanged</code> option is used</li><br /><strong>Associated statusText</strong>: "Entity doesnot existanymore"</ul></td></tr><tr><td><code>dk status locked</code></td><td>3</td><td>The entity is locked by a pessimistic lock.<p><strong>Associated statusText</strong>: "Already locked"</p></td></tr><tr><td><code>dk status serious error</code></td><td>4</td><td>A serious error is a low-level database error (e.g. duplicatedkey), a hardware error, etc.<p><strong>Associated statusText</strong>: "Other error"</p></td></tr><tr><td><code>dk status stamp has changed</code></td><td>2</td><td>The internal stamp value of the entity does not match the oneof the entity stored in the data (optimistic lock).<br /><ul><li>with <code>.save( )</code>: error only if the <code>dk automerge</code> option is not used</li><li>with <code>.drop( )</code>: error only if the <code>dk forcedrop if stamp changed</code> option is not used</li><li>with <code>.lock( )</code>: error only if the <code>dk reloadif stamp changed</code> option is not used</li><br /><strong>Associated statusText</strong>: "Stamp has changed"</ul></td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-1-4"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-1-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 1</h4><p>Creating a new entity:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-variable">$employee</span>.firstName:=<span class="hljs-string">"Mary"</span> <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Employee created"</span>)<span class="hljs-keyword"> End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-2-3"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-2-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 2</h4><p>Updating an entity without <code>dk auto merge</code>option:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>) <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>() <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Mac Arthur"</span> <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword"> Case of</span>    :(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Employee updated"</span>)    :(<span class="hljs-variable">$status</span>.status=dk status stamp has changed)<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword"> End case</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_example-3"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_example-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 3</h4><p>Updating an entity with <code>dk auto merge</code> option:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"Smith"</span>) <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">first</span>() <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Mac Arthur"</span> <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>(dk auto merge)<span class="hljs-keyword"> Case of</span>    :(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">       ALERT</span>(<span class="hljs-string">"Employee updated"</span>)    :(<span class="hljs-variable">$status</span>.status=dk status automerge failed)<span class="hljs-function">       ALERT</span>(<span class="hljs-variable">$status</span>.statusText)<span class="hljs-keyword"> End case</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_toobject"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_toobject"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.toObject()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.toObject</strong>() : Object<br /><strong>.toObject</strong>( <em>filterString</em> : Text { ;<em>options</em> : Integer} ) : Object<br /><strong>.toObject</strong>( <em>filterCol</em> : Collection { ;<em>options</em> : Integer } ) : Object</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>filterString</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Attribute(s) to extract (comma-separated string)</td></tr><tr><td>filterCol</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Collection of attribute(s) to extract</td></tr><tr><td>options</td><td>Ganzzahl</td><td style="text-align:center">-&gt;</td><td><code>dk with primary key</code>: adds the _KEY property;<br /><code>dk with stamp</code>: adds the _STAMP property</td></tr><tr><td>Ergebnis</td><td>Objekt</td><td style="text-align:center">&lt;-</td><td>Object built from the entity</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-19"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-19"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.toObject()</code> function returns an object whichhas been built from the entity. Property names in the object matchattribute names of the entity.</p><p>If no filter is specified, or if the <em>filterString</em>parameter contains an empty string or "*", the returned object willcontain:</p><ul><li>all storage entity attributes</li><li>attributes of the <code>relatedEntity</code> <a href="#EntityClass.html_kind">kind</a>: you get a property with the samename as the related entity (name of the many-to-one link).Attribute is extracted with the simple form.</li><li>attributes of the <code>relatedEntities</code> <a href="#EntityClass.html_kind">kind</a>: attribute is not returned.</li></ul><p>In the first parameter, you pass the entity attribute(s) toextract. You can pass:</p><ul><li><em>filterString</em>: a string with property paths separatedwith commas: "propertyPath1, propertyPath2, ...", or</li><li><em>filterCol</em>: a collection of strings:["propertyPath1","propertyPath2";...]</li></ul><p>If a filter is specified for attributes of the relatedEntity<a href="#EntityClass.html_kind">kind</a>:</p><ul><li>propertyPath = "relatedEntity" -&gt; it is extracted withsimple form: an object with property __KEY (primary key).</li><li>propertyPath = "relatedEntity.*" -&gt; all the properties areextracted</li><li>propertyPath = "relatedEntity.propertyName1;relatedEntity.propertyName2; ..." -&gt; only those properties areextracted</li></ul><p>If a filter is specified for attributes of the relatedEntities<a href="#EntityClass.html_kind">kind</a>:</p><ul><li>propertyPath = "relatedEntities.*" -&gt; all the properties areextracted</li><li>propertyPath = "relatedEntities.propertyName1;relatedEntities.propertyName2; ..." -&gt; only those properties areextracted</li></ul><p>In the <em>options</em> parameter, you can pass the <code>dkwith primary key</code> and/or<code>dk with stamp</code>selector(s) to add the entity's primary keys and/or stamps inextracted objects.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-1-5"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-1-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 1</h4><p>The following structure will be used throughout all examples ofthis section:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/dataclassAttribute4.png" /></p><p>Without filter parameter:</p><pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>()</code></pre><p>Returns:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"ID"</span>: <span class="hljs-number">413</span>,    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,    <span class="hljs-string">"salary"</span>: <span class="hljs-number">0</span>,    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,    <span class="hljs-string">"woman"</span>: false,    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,    <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,    <span class="hljs-string">"extra"</span>: null,    <span class="hljs-string">"employer"</span>: { <span class="hljs-comment">// relatedEntity extracted with simple form</span>        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>    },    <span class="hljs-string">"manager"</span>: {        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>    }}</code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-2-4"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-2-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 2</h4><p>Extracting the primary key and the stamp:</p><pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">""</span>;dk with primary key+dk with stamp)</code></pre><p>Returns:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>,   <span class="hljs-string">"__STAMP"</span>: <span class="hljs-number">1</span>,    <span class="hljs-string">"ID"</span>: <span class="hljs-number">413</span>,    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,    <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,    <span class="hljs-string">"salary"</span>: <span class="hljs-number">0</span>,    <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,    <span class="hljs-string">"woman"</span>: false,    <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,    <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,    <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,    <span class="hljs-string">"extra"</span>: null,    <span class="hljs-string">"employer"</span>: {        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>    },    <span class="hljs-string">"manager"</span>: {        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>    }}</code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_example-3-1"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_example-3-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 3</h4><p>Expanding all the properties of<code>relatedEntities</code>:</p><pre><code class="hljs css language-4d">employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"directReports.*"</span>)</code></pre><pre><code class="hljs css language-4d">{    <span class="hljs-string">"directReports"</span>: [        {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">418</span>,            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,            <span class="hljs-string">"salary"</span>: <span class="hljs-number">44800</span>,            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1970-10-02T00:00:00.000Z"</span>,            <span class="hljs-string">"woman"</span>: true,            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,            <span class="hljs-string">"extra"</span>: null,            <span class="hljs-string">"employer"</span>: {                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>            },            <span class="hljs-string">"manager"</span>: {                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>            }        },        {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">419</span>,            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Drew"</span>,            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Caudill"</span>,            <span class="hljs-string">"salary"</span>: <span class="hljs-number">41000</span>,            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2030-01-12T00:00:00.000Z"</span>,            <span class="hljs-string">"woman"</span>: false,            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,            <span class="hljs-string">"extra"</span>: null,            <span class="hljs-string">"employer"</span>: {                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>            },            <span class="hljs-string">"manager"</span>: {                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>            }        },        {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">420</span>,            <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Nathan"</span>,            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gomes"</span>,            <span class="hljs-string">"salary"</span>: <span class="hljs-number">46300</span>,            <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2010-05-29T00:00:00.000Z"</span>,            <span class="hljs-string">"woman"</span>: false,            <span class="hljs-string">"managerID"</span>: <span class="hljs-number">413</span>,            <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,            <span class="hljs-string">"extra"</span>: null,            <span class="hljs-string">"employer"</span>: {                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>            },            <span class="hljs-string">"manager"</span>: {                <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">413</span>            }        }    ]}</code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_example-4"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_example-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 4</h4><p>Extracting some properties of <code>relatedEntities</code>:</p><pre><code class="hljs css language-4d"> employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"firstName, directReports.lastName"</span>)</code></pre><p>Returns:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,    <span class="hljs-string">"directReports"</span>: [        {            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>        },        {            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Caudill"</span>        },        {            <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gomes"</span>        }    ]}</code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_example-5"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_example-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 5</h4><p>Extracting a <code>relatedEntity</code> with simple form:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$coll</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"employer"</span>) employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-variable">$coll</span>)</code></pre><p>Returns:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Greg"</span>,    <span class="hljs-string">"employer"</span>: {        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>    }}</code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_example-6"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_example-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 6</h4><p>Extracting all the properties of a<code>relatedEntity</code>:</p><pre><code class="hljs css language-4d"> employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-string">"employer.*"</span>)</code></pre><p>Returns:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"employer"</span>: {        <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,        <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,        <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,        <span class="hljs-string">"extra"</span>: null    }}</code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_example-7"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_example-7"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 7</h4><p>Extracting some properties of a <code>relatedEntity</code>:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$col</span>:=New collection <span class="hljs-variable">$col</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.name"</span>) <span class="hljs-variable">$col</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.revenues"</span>) employeeObject:=employeeSelected.<span class="hljs-function">toObject</span>(<span class="hljs-variable">$col</span>)</code></pre><p>Returns:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"employer"</span>: {        <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,        <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>    }}</code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_touched-"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_touched-"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.touched( )</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.touched()</strong> : Boolean</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>Boolean</td><td style="text-align:center">&lt;-</td><td>True if at least one entity attribute has been modified and notyet saved, else False</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-20"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-20"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.touched()</code> function tests whether or not anentity attribute has been modified since the entity was loaded intomemory or saved.</p><p>If an attribute has been modified or calculated, the functionreturns True, else it returns False. You can use this function todetermine if you need to save the entity.</p><p>This function returns False for a new entity that has just beencreated (with <a href="#EntityClass.html_new"><code>.new()</code></a>). Note however that if you use a function whichcalculates an attribute of the entity, the <code>.touched()</code>function will then return True. For example, if you call <a href="#EntityClass.html_getkey"><code>.getKey()</code></a> to calculatethe primary key, <code>.touched()</code> returns True.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-16"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-16"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><p>In this example, we check to see if it is necessary to save theentity:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>) <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-comment">//Even if updated with the same value, the attribute is marked as touched</span><span class="hljs-keyword"> If</span>(<span class="hljs-variable">$emp</span>.<span class="hljs-function">touched</span>()) <span class="hljs-comment">//if at least one of the attributes has been changed</span>    <span class="hljs-variable">$emp</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword"> End if</span> <span class="hljs-comment">// otherwise, no need to save the entity</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_touchedattributes-"></a><a aria-hidden="true"class="hash-link" href="#EntityClass.html_touchedattributes-"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.touchedAttributes( )</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.touchedAttributes()</strong> : Collection</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Names of touched attributes, or empty collection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-21"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-21"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.touchedAttributes()</code> function returns the namesof the attributes that have been modified since the entity wasloaded into memory.</p><p>This applies for attributes of the <a href="#EntityClass.html_kind">kind</a> <code>storage</code> or<code>relatedEntity</code>.</p><p>In the case of a related entity having been touched (i.e., theforeign key), the name of the related entity and its primary key'sname are returned.</p><p>If no entity attribute has been touched, the method returns anempty collection.</p><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-1-6"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-1-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$touchedAttributes </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity <span class="hljs-variable">$touchedAttributes</span>:=New collection <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>) <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-comment">//Even if updated with the same value, the attribute is marked as touched</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span> <span class="hljs-variable">$touchedAttributes</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">touchedAttributes</span>()  <span class="hljs-comment">//$touchedAttributes: ["firstName","lastName"]</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-2-5"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-2-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel 2</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$touchedAttributes </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$company </span>: cs.CompanyEntity <span class="hljs-variable">$touchedAttributes</span>:=New collection <span class="hljs-variable">$emp</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">672</span>) <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-variable">$emp</span>.firstName <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span> <span class="hljs-variable">$company</span>:=ds.Company.<span class="hljs-function">get</span>(<span class="hljs-number">121</span>) <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-variable">$company</span> <span class="hljs-variable">$touchedAttributes</span>:=<span class="hljs-variable">$emp</span>.<span class="hljs-function">touchedAttributes</span>()  <span class="hljs-comment">//collection $touchedAttributes: ["firstName","lastName","employer","employerID"]</span></code></pre><p>In this case:</p><ul><li>firstName and lastName have a <code>storage</code> kind</li><li>employer has a <code>relatedEntity</code> kind</li><li>employerID is the foreign key of the employer relatedentity</li></ul><h2><a aria-hidden="true" class="anchor" id="EntityClass.html_unlock"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_unlock"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.unlock()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.unlock()</strong> : Object</p><table><thead><tr><th>Parameter</th><th>Typ</th><th style="text-align:center"></th><th>Beschreibung</th></tr></thead><tbody><tr><td>Ergebnis</td><td>Objekt</td><td style="text-align:center">&lt;-</td><td>Status object</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beschreibung-22"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beschreibung-22"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beschreibung</h4><p>The <code>.unlock()</code> function removes the pessimistic lockon the record matching the entity in the datastore and tablerelated to its dataclass.</p><blockquote><p>For more information, please refer to <a href="#EntityClass.html_entity-locking">Entity locking</a> section.</p></blockquote><p>A record is automatically unlocked when it is no longerreferenced by any entities in the locking process (for example: ifthe lock is put only on one local reference of an entity, theentity and thus the record is unlocked when the process ends).</p><blockquote><p>When a record is locked, it must be unlocked from the lockingprocess and on the entity reference which put the lock.Beispiel:</p></blockquote><pre><code class="hljs css language-4d"> <span class="hljs-variable">$e1</span>:=ds.Emp.<span class="hljs-function">all</span>()[<span class="hljs-number">0</span>] <span class="hljs-variable">$e2</span>:=ds.Emp.<span class="hljs-function">all</span>()[<span class="hljs-number">0</span>] <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">lock</span>() <span class="hljs-comment">//$res.success=true</span> <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e2</span>.<span class="hljs-function">unlock</span>() <span class="hljs-comment">//$res.success=false</span> <span class="hljs-variable">$res</span>:=<span class="hljs-variable">$e1</span>.<span class="hljs-function">unlock</span>() <span class="hljs-comment">//$res.success=true</span></code></pre><p><strong>Ergebnis</strong></p><p>The object returned by <code>.unlock()</code> contains thefollowing property:</p><table><thead><tr><th>Property</th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>success</td><td>Boolean</td><td>True if the unlock action is successful, False otherwise. Ifthe unlock is done on a dropped entity, on a non locked record, oron a record locked by another process or entity, success isFalse.</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntityClass.html_beispiel-17"></a><a aria-hidden="true" class="hash-link" href="#EntityClass.html_beispiel-17"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">725</span>) <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">lock</span>() ... <span class="hljs-comment">//processing</span> <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$employee</span>.<span class="hljs-function">unlock</span>()<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"The entity is now unlocked"</span>)<span class="hljs-keyword"> End if</span></code></pre><style><![CDATA[ h2 { background: #d9ebff;}]]></style></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#EmailObjectClass.html"><span class="arrow-prev">←</span><span>Email</span></a><a class="docs-next button" href="#EntitySelectionClass.html"><span class="function-name-prevnext">EntitySelection</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#EntityClass.html_attributename">.<em>attributeName</em></a></li><li><a href="#EntityClass.html_clone">.clone()</a></li><li><a href="#EntityClass.html_diff">.diff()</a></li><li><a href="#EntityClass.html_drop">.drop()</a></li><li><a href="#EntityClass.html_first">.first()</a></li><li><a href="#EntityClass.html_fromobject">.fromObject()</a></li><li><a href="#EntityClass.html_getdataclass">.getDataClass()</a></li><li><a href="#EntityClass.html_getkey">.getKey()</a></li><li><a href="#EntityClass.html_getremotecontextattributes">.getRemoteContextAttributes()</a></li><li><a href="#EntityClass.html_getselection">.getSelection()</a></li><li><a href="#EntityClass.html_getstamp">.getStamp()</a></li><li><a href="#EntityClass.html_indexof">.indexOf()</a></li><li><a href="#EntityClass.html_isnew">.isNew()</a></li><li><a href="#EntityClass.html_last">.last()</a></li><li><a href="#EntityClass.html_lock">.lock()</a></li><li><a href="#EntityClass.html_next">.next()</a></li><li><a href="#EntityClass.html_previous">.previous()</a></li><li><a href="#EntityClass.html_reload-">.reload( )</a></li><li><a href="#EntityClass.html_save">.save()</a></li><li><a href="#EntityClass.html_toobject">.toObject()</a></li><li><a href="#EntityClass.html_touched-">.touched( )</a></li><li><a href="#EntityClass.html_touchedattributes-">.touchedAttributes()</a></li><li><a href="#EntityClass.html_unlock">.unlock()</a></li></ul></nav></div></div></body></html>