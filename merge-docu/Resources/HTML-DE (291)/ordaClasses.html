<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="de"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Data Model Classes · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="ORDA allows you to create high-level class functions above the data model. This allows you to write business-oriented code and &quot;publish&quot; it just like an API. Datastore, dataclasses, entity selections, and entities are all available as class objects that can contain functions."name="description" /><meta content="de" name="docsearch:language" /><meta content="Data Model Classes · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="ORDA allows you to create high-level class functions above the data model. This allows you to write business-oriented code and &quot;publish&quot; it just like an API. Datastore, dataclasses, entity selections, and entities are all available as class objects that can contain functions."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#ordaClasses.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Data ModelClasses<a aria-hidden="true" class="anchor" id="ordaClasses.html"></a></h1></header><article><div><p><span>ORDA allows you to create high-level class functions abovethe data model. This allows you to write business-oriented code and"publish" it just like an API. Datastore, dataclasses, entityselections, and entities are all available as class objects thatcan contain functions.</span></p><p><span>For example, you could create a<code>getNextWithHigherSalary()</code> function in the<code>EmployeeEntity</code> class to return employees with a salaryhigher than the selected one. It would be as simple ascalling:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-variable">$nextHigh</span>:=ds.<span class="hljs-function">Employee</span>(<span class="hljs-number">1</span>).<span class="hljs-function">getNextWithHigherSalary</span>()</code></span></pre><p>Developers can not only use these functions in local datastores,but also in client/server and remote architectures:</p><pre><code class="hljs css language-4d"> <span class="hljs-comment">//$cityManager is the reference of a remote datastore</span>Form.comp.city:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCityName</span>(Form.comp.zipcode)</code></pre><p>Thanks to this feature, the entire business logic of your 4Dapplication can be stored as a independent layer so that it can beeasily maintained and reused with a high level of security:</p><ul><li><p>You can "hide" the overall complexity of the underlying physicalstructure and only expose understandable and ready-to-usefunctions.</p></li><li><p>If the physical structure evolves, you can simply adapt functioncode and client applications will continue to call themtransparently.</p></li><li><p>By default, all of your data model class functions (including<a href="#ordaClasses.html_computed-attributes-1">computedattribute functions</a>) and <a href="#ordaClasses.html_alias-attributes-1">alias attributes</a> are<strong>not exposed</strong> to remote applications and cannot becalled from REST requests. You must explicitly declare each publicfunction and alias with the <a href="#ordaClasses.html_exposed-vs-non-exposed-functions"><code>exposed</code></a>keyword.</p></li></ul><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/api.png" /></p><p>In addition, 4D <a href="#ordaClasses.html_creating-classes">automatically pre-creates</a>the classes for each available data model object.</p><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_architecture"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_architecture"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Architecture</h2><p>ORDA provides <strong>generic classes</strong> exposed throughthe <strong><code>4D</code></strong> <a href="#ordaClasses.html_class-stores">class store</a>, as well as<strong>user classes</strong> (extending generic classes) exposedin the <strong><code>cs</code></strong> <a href="#ordaClasses.html_class-stores">class store</a>:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/ClassDiagramImage.png" /></p><p>All ORDA data model classes are exposed as properties of the<strong><code>cs</code></strong> class store. The following ORDAclasses are available:</p><table><thead><tr><th>Class</th><th>Example name</th><th>Instantiated by</th></tr></thead><tbody><tr><td>cs.DataStore</td><td>cs.DataStore</td><td><a href="#ordaClasses.html_ds"><code>ds</code></a> command</td></tr><tr><td>cs.<em>DataClassName</em></td><td>cs.Employee</td><td><a href="#ordaClasses.html_dataclassname"><code>dataStore.DataClassName</code></a>,<code>dataStore["DataClassName"]</code></td></tr><tr><td>cs.<em>DataClassName</em>Entity</td><td>cs.EmployeeEntity</td><td><a href="#ordaClasses.html_get"><code>dataClass.get()</code></a>, <a href="#ordaClasses.html_new"><code>dataClass.new()</code></a>, <a href="#ordaClasses.html_first"><code>entitySelection.first()</code></a>,<a href="#ordaClasses.html_last"><code>entitySelection.last()</code></a>,<a href="#ordaClasses.html_previous"><code>entity.previous()</code></a>,<a href="#ordaClasses.html_next"><code>entity.next()</code></a>,<a href="#ordaClasses.html_first"><code>entity.first()</code></a>,<a href="#ordaClasses.html_last"><code>entity.last()</code></a>,<a href="#ordaClasses.html_clone"><code>entity.clone()</code></a></td></tr><tr><td>cs.<em>DataClassName</em>Selection</td><td>cs.EmployeeSelection</td><td><a href="#ordaClasses.html_query"><code>dataClass.query()</code></a>,<a href="#ordaClasses.html_query"><code>entitySelection.query()</code></a>,<a href="#ordaClasses.html_all"><code>dataClass.all()</code></a>,<a href="#ordaClasses.html_fromcollection"><code>dataClass.fromCollection()</code></a>,<a href="#ordaClasses.html_newselection"><code>dataClass.newSelection()</code></a>,<a href="#ordaClasses.html_drop"><code>entitySelection.drop()</code></a>,<a href="#ordaClasses.html_getselection"><code>entity.getSelection()</code></a>,<a href="#ordaClasses.html_and"><code>entitySelection.and()</code></a>,<a href="#ordaClasses.html_minus"><code>entitySelection.minus()</code></a>,<a href="#ordaClasses.html_or"><code>entitySelection.or()</code></a>,<a href="#ordaClasses.html_or"><code>entitySelection.orderBy()</code></a>,<a href="#ordaClasses.html_orderbyformula"><code>entitySelection.orderByFormula()</code></a>,<a href="#ordaClasses.html_slice"><code>entitySelection.slice()</code></a>,<code>Create entity selection</code></td></tr></tbody></table><blockquote><p>ORDA user classes are stored as regular class files (.4dm) inthe Classes subfolder of the project <a href="#ordaClasses.html_class-files">(see below)</a>.</p></blockquote><p>Also, object instances from ORDA data model user classes benefitfrom their parent's properties and functions:</p><ul><li>a Datastore class object can call functions from the <a href="#DataStoreClass.html">ORDA Datastore generic class</a>.</li><li>a Dataclass class object can call functions from the <a href="#DataClassClass.html">ORDA Dataclass generic class</a>.</li><li>an Entity selection class object can call functions from the<a href="#EntitySelectionClass.html">ORDA Entity selection genericclass</a>.</li><li>an Entity class object can call functions from the <a href="#EntityClass.html">ORDA Entity generic class</a>.</li></ul><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_class-description"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_class-description"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Class Description</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v19 R4</td><td>Alias attributes in the Entity Class</td></tr><tr><td>v19 R3</td><td>Computed attributes in the Entity Class</td></tr><tr><td>v18 R5</td><td>Data model class functions are not exposed to REST by default.New <code>exposed</code> and <code>local</code> keywords.</td></tr></tbody></table></details><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_datastore-class"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_datastore-class"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>DataStore Class</h3><p>A 4D database exposes its own DataStore class in the<code>cs</code> class store.</p><ul><li><strong>Extends</strong>: 4D.DataStoreImplementation</li><li><strong>Class name</strong>: cs.DataStore</li></ul><p>You can create functions in the DataStore class that will beavailable through the <code>ds</code> object.</p><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiel"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiel"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.DataStore class</span><span class="hljs-keyword">Class extends</span> DataStoreImplementation<span class="hljs-keyword">Function</span> getDesc  <span class="hljs-variable">$0</span>:=<span class="hljs-string">"Database exposing employees and their companies"</span></code></pre><p>This function can then be called:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$desc</span>:=ds.<span class="hljs-function">getDesc</span>() <span class="hljs-comment">//"Database exposing..."</span></code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_dataclass-class"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_dataclass-class"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>DataClass Class</h3><p>Each table exposed with ORDA offers a DataClass class in the<code>cs</code> class store.</p><ul><li><strong>Extends</strong>: 4D.DataClass</li><li><strong>Class name</strong>: cs.<em>DataClassName</em> (where<em>DataClassName</em> is the table name)</li><li><strong>Example name</strong>: cs.Employee</li></ul><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiel-1"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiel-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4D"><span class="hljs-comment">// cs.Company class</span><span class="hljs-keyword">Class extends</span> DataClass<span class="hljs-comment">// Returns companies whose revenue is over the average</span><span class="hljs-comment">// Returns an entity selection related to the Company DataClass</span><span class="hljs-keyword">Function</span><span class="hljs-function"> GetBestOnes</span>()    <span class="hljs-variable">$sel</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"revenues &gt;= :1"</span>;<span class="hljs-literal">This</span>.<span class="hljs-function">all</span>().<span class="hljs-function">average</span>(<span class="hljs-string">"revenues"</span>));    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$sel</span></code></pre><p>Then you can get an entity selection of the "best" companies byexecuting:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">    var</span> <span class="hljs-variable">$best </span>: cs.CompanySelection    <span class="hljs-variable">$best</span>:=ds.Company.<span class="hljs-function">GetBestOnes</span>()</code></pre><blockquote><p><a href="#ordaClasses.html_computed-attributes">Computedattributes</a> are defined in the <a href="#ordaClasses.html_entity-class">Entity Class</a>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_example-with-a-remote-datastore"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_example-with-a-remote-datastore"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example with a remote datastore</h4><p>The following <em>City</em> catalog is exposed in a remotedatastore (partial view):</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/Orda_example.png" /></p><p>The <code>City Class</code> provides an API:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.City class</span><span class="hljs-keyword">Class extends</span> DataClass<span class="hljs-keyword">Function</span><span class="hljs-function"> getCityName</span>()<span class="hljs-keyword">    var</span> <span class="hljs-variable">$1</span>; <span class="hljs-variable">$zipcode </span>: Integer<span class="hljs-keyword">    var</span> <span class="hljs-variable">$zip </span>: 4D.Entity<span class="hljs-keyword">    var</span> <span class="hljs-variable">$0 </span>: Text    <span class="hljs-variable">$zipcode</span>:=<span class="hljs-variable">$1</span>    <span class="hljs-variable">$zip</span>:=ds.ZipCode.<span class="hljs-function">get</span>(<span class="hljs-variable">$zipcode</span>)    <span class="hljs-variable">$0</span>:=<span class="hljs-string">""</span><span class="hljs-keyword">     If</span> (<span class="hljs-variable">$zip</span>#<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$zip</span>.city.name<span class="hljs-keyword">    End if</span></code></pre><p>The client application opens a session on the remotedatastore:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$cityManager</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>;<span class="hljs-string">"127.0.0.1:8111"</span>);<span class="hljs-string">"CityManager"</span>)</code></pre><p>Then a client application can use the API to get the citymatching a zip code (for example) from a form:</p><pre><code class="hljs css language-4d">Form.comp.city:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCityName</span>(Form.comp.zipcode)</code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_entityselection-class"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_entityselection-class"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>EntitySelection Class</h3><p>Each table exposed with ORDA offers an EntitySelection class inthe <code>cs</code> class store.</p><ul><li><strong>Extends</strong>: 4D.EntitySelection</li><li><strong>Class name</strong>: <em>DataClassName</em>Selection(where <em>DataClassName</em> is the table name)</li><li><strong>Example name</strong>: cs.EmployeeSelection</li></ul><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiel-2"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiel-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.EmployeeSelection class</span><span class="hljs-keyword">Class extends</span> EntitySelection<span class="hljs-comment">//Extract the employees with a salary greater than the average from this entity selection </span><span class="hljs-keyword">Function</span> withSalaryGreaterThanAverage<span class="hljs-function">    C_OBJECT</span>(<span class="hljs-variable">$0</span>)    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-literal">This</span>.<span class="hljs-function">average</span>(<span class="hljs-string">"salary"</span>)).<span class="hljs-function">orderBy</span>(<span class="hljs-string">"salary"</span>)</code></pre><p>Then you can get employees with a salary greater than theaverage in any entity selection by executing:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$moreThanAvg</span>:=ds.Company.<span class="hljs-function">all</span>().employees.<span class="hljs-function">withSalaryGreaterThanAverage</span>()</code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_entity-class"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_entity-class"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity Class</h3><p>Each table exposed with ORDA offers an Entity class in the<code>cs</code> class store.</p><ul><li><strong>Extends</strong>: 4D.Entity</li><li><strong>Class name</strong>: <em>DataClassName</em>Entity(where <em>DataClassName</em> is the table name)</li><li><strong>Example name</strong>: cs.CityEntity</li></ul><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_computed-attributes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_computed-attributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Computed attributes</h4><p>Entity classes allow you to define <strong>computedattributes</strong> using specific keywords:</p><ul><li><code>Function get</code> <em>attributeName</em></li><li><code>Function set</code> <em>attributeName</em></li><li><code>Function query</code> <em>attributeName</em></li><li><code>Function orderBy</code> <em>attributeName</em></li></ul><p>For information, please refer to the <a href="#ordaClasses.html_computed-attributes-1">Computed attributes</a>section.</p><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_alias-attributes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_alias-attributes"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Alias attributes</h4><p>Entity classes allow you to define <strong>aliasattributes</strong>, usually over related attributes, using the<code>Alias</code> keyword:</p><p><code>Alias</code> <em>attributeName</em><em>targetPath</em></p><p>For information, please refer to the <a href="#ordaClasses.html_alias-attributes-1">Alias attributes</a>section.</p><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiel-3"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiel-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.CityEntity class</span><span class="hljs-keyword">Class extends</span> Entity<span class="hljs-keyword">Function</span><span class="hljs-function"> getPopulation</span>()    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.zips.<span class="hljs-function">sum</span>(<span class="hljs-string">"population"</span>)<span class="hljs-keyword">Function</span><span class="hljs-function"> isBigCity</span>(): Boolean<span class="hljs-comment">// The getPopulation() function is usable inside the class</span><span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">getPopulation</span>()&gt;<span class="hljs-number">50000</span></code></pre><p>Then you can call this code:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$cityManager</span>; <span class="hljs-variable">$city </span>: Object<span class="hljs-variable">$cityManager</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>;<span class="hljs-string">"127.0.0.1:8111"</span>);<span class="hljs-string">"CityManager"</span>)<span class="hljs-variable">$city</span>:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCity</span>(<span class="hljs-string">"Caguas"</span>)<span class="hljs-keyword">If</span> (<span class="hljs-variable">$city</span>.<span class="hljs-function">isBigCity</span>())<span class="hljs-function">    ALERT</span>(<span class="hljs-variable">$city</span>.name + <span class="hljs-string">" is a big city"</span>)<span class="hljs-keyword">End if</span></code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_specific-rules"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_specific-rules"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Specific rules</h3><p>When creating or editing data model classes, you must payattention to the following rules:</p><ul><li><p>Since they are used to define automatic DataClass class names inthe <strong>cs</strong> <a href="#ordaClasses.html_class-stores">class store</a>, 4D tables must benamed in order to avoid any conflict in the <strong>cs</strong>namespace. Das bedeutet im einzelnen:</p><ul><li>Do not give the same name to a 4D table and to a <a href="#ordaClasses.html_class-names">user class name</a>. If such a caseoccurs, the constructor of the user class becomes unusable (awarning is returned by the compiler).</li><li>Do not use a reserved name for a 4D table (e.g.,"DataClass").</li></ul></li><li><p>When defining a class, make sure the <a href="#ordaClasses.html_class-extends-classnameclass"><code>Classextends</code></a> statement exactly matches the parent class name(remember that they're case sensitive). For example, <code>Classextends EntitySelection</code> for an entity selection class.</p></li><li><p>You cannot instantiate a data model class object with the<code>new()</code> keyword (an error is returned). You must use aregular method as listed in the <a href="#ordaClasses.html_architecture"><code>Instantiated by</code>column of the ORDA class table</a>.</p></li><li><p>You cannot override a native ORDA class function from the<strong><code>4D</code></strong> <a href="#ordaClasses.html_class-stores">class store</a> with a data modeluser class function.</p></li></ul><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_preemptive-execution"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_preemptive-execution"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Preemptive execution</h3><p>When compiled, data model class functions are executed:</p><ul><li>in <strong>preemptive or cooperative processes</strong>(depending on the calling process) in single-userapplications,</li><li>in <strong>preemptive processes</strong> in client/serverapplications (except if the <a href="#ordaClasses.html_local-functions"><code>local</code></a> keywordis used, in which case it depends on the calling process like insingle-user).</li></ul><p>If your project is designed to run in client/server, make sureyour data model class function code is thread-safe. Ifthread-unsafe code is called, an error will be thrown at runtime(no error will be thrown at compilation time since cooperativeexecution is supported in single-user applications).</p><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_computed-attributes-1"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_computed-attributes-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Computed attributes</h2><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_%C3%BCberblick"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_%25C3%25BCberblick"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Überblick</h3><p>A computed attribute is a dataclass attribute with a data typethat masks a calculation. <a href="#classes.html">Standard 4Dclasses</a> implement the concept of computed properties with<code>get</code> (<em>getter</em>) and <code>set</code>(<em>setter</em>) <a href="#ordaClasses.html_function-get-and-function-set">accessorfunctions</a>. ORDA dataclass attributes benefit from this featureand extend it with two additional functions: <code>query</code> and<code>orderBy</code>.</p><p>At the very minimum, a computed attribute requires a<code>get</code> function that describes how its value will becalculated. When a <em>getter</em> function is supplied for anattribute, 4D does not create the underlying storage space in thedatastore but instead substitutes the function's code each time theattribute is accessed. If the attribute is not accessed, the codenever executes.</p><p>A computed attribute can also implement a <code>set</code>function, which executes whenever a value is assigned to theattribute. The <em>setter</em> function describes what to do withthe assigned value, usually redirecting it to one or more storageattributes or in some cases other entities.</p><p>Just like storage attributes, computed attributes may beincluded in <strong>queries</strong>. By default, when a computedattribute is used in a ORDA query, the attribute is calculated onceper entity examined. In some cases this is sufficient. However forbetter performance, especially in client/server, computedattributes can implement a <code>query</code> function that relieson actual dataclass attributes and benefits from their indexes.</p><p>Similarly, computed attributes can be included in<strong>sorts</strong>. When a computed attribute is used in a ORDAsort, the attribute is calculated once per entity examined. Justlike in queries, computed attributes can implement an<code>orderBy</code> function that substitutes other attributesduring the sort, thus increasing performance.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_how-to-define-computed-attributes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_how-to-define-computed-attributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>How to define computed attributes</h3><p>You create a computed attribute by defining a <code>get</code>accessor in the <a href="#ordaClasses.html_entity-class"><strong>entity class</strong></a>of the dataclass. The computed attribute will be automaticallyavailable in the dataclass attributes and in the entityattributes.</p><p>Other computed attribute functions (<code>set</code>,<code>query</code>, and <code>orderBy</code>) can also be definedin the entity class. They are optional.</p><p>Within computed attribute functions, <a href="#ordaClasses.html_this"><code>This</code></a> designates theentity. Computed attributes can be used and handled as anydataclass attribute, i.e. they will be processed by <a href="#EntityClass.html">entity class</a> or <a href="#EntitySelectionClass.html">entity selection class</a>functions.</p><blockquote><p>ORDA computed attributes are not <a href="#ordaClasses.html_exposed-vs-non-exposed-functions"><strong>exposed</strong></a>by default. You expose a computed attribute by adding the<code>exposed</code> keyword to the <strong>get function</strong>definition.</p></blockquote><blockquote><p><strong>get and set functions</strong> can have the <a href="#ordaClasses.html_local-functions"><strong>local</strong></a>property to optimize client/server processing.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_function-get-attributename"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_function-get-attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Function get &lt;attributeName&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntax"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntax"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax</h4><pre><code class="hljs css language-4d">{local} {exposed}<span class="hljs-keyword"> Function</span> get &lt;attributeName&gt;({<span class="hljs-variable">$event </span>: Object}) -&gt; <span class="hljs-variable">$result </span>: type<span class="hljs-comment">// code</span></code></pre><p>The <em>getter</em> function is mandatory to declare the<em>attributeName</em> computed attribute. Whenever the<em>attributeName</em> is accessed, 4D evaluates the <code>Functionget</code> code and returns the <em>$result</em> value.</p><blockquote><p>A computed attribute can use the value of other computedattribute(s). Recursive calls generate errors.</p></blockquote><p>The <em>getter</em> function defines the data type of thecomputed attribute thanks to the <em>$result</em> parameter. Thefollowing resulting types are allowed:</p><ul><li>Scalar (text, boolean, date, time, number)</li><li>Objekt</li><li>Image</li><li>BLOB</li><li>Entity (i.e. cs.EmployeeEntity)</li><li>Entity selection (i.e. cs.EmployeeSelection)</li></ul><p>The <em>$event</em> parameter contains the followingproperties:</p><table><thead><tr><th>Property</th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>attributeName</td><td>Text</td><td>Computed attribute name</td></tr><tr><td>dataClassName</td><td>Text</td><td>Dataclass name</td></tr><tr><td>kind</td><td>Text</td><td>"get"</td></tr><tr><td>result</td><td>Variant</td><td>Optional. Add this property with Null value if you want ascalar attribute to return Null</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiele"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiele"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiele</h4><ul><li><em>fullName</em> computed attribute:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$fullName </span>: Text<span class="hljs-keyword">  Case of</span>       : (<span class="hljs-literal">This</span>.firstName=<span class="hljs-literal">Null</span>) &amp; (<span class="hljs-literal">This</span>.lastName=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$event</span>.result:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//use result to return Null</span>    : (<span class="hljs-literal">This</span>.firstName=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.lastName    : (<span class="hljs-literal">This</span>.lastName=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.firstName<span class="hljs-keyword">    Else</span>         <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-literal">This</span>.lastName<span class="hljs-keyword">    End case</span> </code></pre><ul><li>A computed attribute can be based upon an entity relatedattribute:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get bigBoss</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result</span>: cs.EmployeeEntity    <span class="hljs-variable">$result</span>:=<span class="hljs-literal">This</span>.manager.manager</code></pre><ul><li>A computed attribute can be based upon an entity selectionrelated attribute:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get coWorkers</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result</span>: cs.EmployeeSelection<span class="hljs-keyword">    If</span> (<span class="hljs-literal">This</span>.manager.manager=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$result</span>:=ds.Employee.<span class="hljs-function">newSelection</span>()<span class="hljs-keyword">    Else</span>         <span class="hljs-variable">$result</span>:=<span class="hljs-literal">This</span>.manager.directReports.<span class="hljs-function">minus</span>(this)<span class="hljs-keyword">    End if</span></code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_function-set-attributename"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_function-set-attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Function set &lt;attributeName&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntax-1"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntax-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax</h4><pre><code class="hljs css language-4d">{local}<span class="hljs-keyword"> Function</span> set &lt;attributeName&gt;(<span class="hljs-variable">$value </span>: type {; <span class="hljs-variable">$event </span>: Object})<span class="hljs-comment">// code</span></code></pre><p>The <em>setter</em> function executes whenever a value isassigned to the attribute. This function usually processes theinput value(s) and the result is dispatched between one or moreother attributes.</p><p>The <em>$value</em> parameter receives the value assigned to theattribute.</p><p>The <em>$event</em> parameter contains the followingproperties:</p><table><thead><tr><th>Property</th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>attributeName</td><td>Text</td><td>Computed attribute name</td></tr><tr><td>dataClassName</td><td>Text</td><td>Dataclass name</td></tr><tr><td>kind</td><td>Text</td><td>"set"</td></tr><tr><td>value</td><td>Variant</td><td>Value to be handled by the computed attribute</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiel-4"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiel-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> set fullName</span>(<span class="hljs-variable">$value </span>: Text; <span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">    var</span> <span class="hljs-variable">$p </span>: Integer    <span class="hljs-variable">$p</span>:=<span class="hljs-function">Position</span>(<span class="hljs-string">" "</span>; <span class="hljs-variable">$value</span>)           <span class="hljs-literal">This</span>.firstname:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$value</span>; <span class="hljs-number">1</span>; <span class="hljs-variable">$p</span><span class="hljs-number">-1</span>)  <span class="hljs-comment">// "" if $p&lt;0</span>    <span class="hljs-literal">This</span>.lastname:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$value</span>; <span class="hljs-variable">$p</span>+<span class="hljs-number">1</span>)</code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_function-query-attributename"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_function-query-attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Function query &lt;attributeName&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntax-2"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntax-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object) -&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object) -&gt; <span class="hljs-variable">$result </span>: Object<span class="hljs-comment">// code</span></code></pre><p>This function supports three syntaxes:</p><ul><li><p>With the first syntax, you handle the whole query through the<code>$event.result</code> object property.</p></li><li><p>With the second and third syntaxes, the function returns a valuein <em>$result</em>:</p><ul><li>If <em>$result</em> is a Text, it must be a valid querystring</li><li>If <em>$result</em> is an Object, it must contain twoproperties:</li></ul><table><thead><tr><th>Property</th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>$result.query</td><td>Text</td><td>Valid query string with placeholders (:1, :2, etc.)</td></tr><tr><td>$result.parameters</td><td>Collection</td><td>values for placeholders</td></tr></tbody></table></li></ul><p>The <code>query</code> function executes whenever a query usingthe computed attribute is launched. It is useful to customize andoptimize queries by relying on indexed attributes. When the<code>query</code> function is not implemented for a computedattribute, the search is always sequential (based upon theevaluation of all values using the <code>get&lt;AttributeName&gt;</code> function).</p><blockquote><p>The following features are not supported: - calling a<code>query</code> function on computed attributes of type Entityor Entity selection, - using the <code>order by</code> keyword inthe resulting query string.</p></blockquote><p>The <em>$event</em> parameter contains the followingproperties:</p><table><thead><tr><th>Property</th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>attributeName</td><td>Text</td><td>Computed attribute name</td></tr><tr><td>dataClassName</td><td>Text</td><td>Dataclass name</td></tr><tr><td>kind</td><td>Text</td><td>"query"</td></tr><tr><td>value</td><td>Variant</td><td>Value to be handled by the computed attribute</td></tr><tr><td>operator</td><td>Text</td><td>Query operator (see also the <a href="#ordaClasses.html_query"><code>query</code> class function</a>).Possible values:<ul><li>== (equal to, @ is wildcard)</li><li>=== (equal to, @ is not wildcard)</li><li>!= (not equal to, @ is wildcard)</li><li>!== (not equal to, @ is not wildcard)</li><li>&lt; (less than)</li><li>&lt;= (less than or equal to)</li><li>&gt; (greater than)</li><li>&gt;= (greater than or equal to)</li><li>IN (included in)</li><li>% (contains keyword)</li></ul></td></tr><tr><td>result</td><td>Variant</td><td>Value to be handled by the computed attribute. Pass<code>Null</code> in this property if you want to let 4D executethe default query (always sequential for computed attributes).</td></tr></tbody></table><blockquote><p>If the function returns a value in <em>$result</em> and anothervalue is assigned to the <code>$event.result</code> property, thepriority is given to <code>$event.result</code>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiele-1"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiele-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiele</h4><ul><li>Query on the <em>fullName</em> computed attribute.</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> query fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt;<span class="hljs-variable">$result </span>: Object<span class="hljs-keyword">    var</span> <span class="hljs-variable">$fullname</span>; <span class="hljs-variable">$firstname</span>; <span class="hljs-variable">$lastname</span>; <span class="hljs-variable">$query </span>: Text<span class="hljs-keyword">    var</span> <span class="hljs-variable">$operator </span>: Text<span class="hljs-keyword">    var</span> <span class="hljs-variable">$p </span>: Integer<span class="hljs-keyword">    var</span> <span class="hljs-variable">$parameters </span>: Collection    <span class="hljs-variable">$operator</span>:=<span class="hljs-variable">$event</span>.operator    <span class="hljs-variable">$fullname</span>:=<span class="hljs-variable">$event</span>.value    <span class="hljs-variable">$p</span>:=<span class="hljs-function">Position</span>(<span class="hljs-string">" "</span>; <span class="hljs-variable">$fullname</span>)<span class="hljs-keyword">     If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)        <span class="hljs-variable">$firstname</span>:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$fullname</span>; <span class="hljs-number">1</span>; <span class="hljs-variable">$p</span><span class="hljs-number">-1</span>)+<span class="hljs-string">"@"</span>        <span class="hljs-variable">$lastname</span>:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$fullname</span>; <span class="hljs-variable">$p</span>+<span class="hljs-number">1</span>)+<span class="hljs-string">"@"</span>        <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$firstname</span>; <span class="hljs-variable">$lastname</span>) <span class="hljs-comment">// two items collection</span><span class="hljs-keyword">    Else</span>         <span class="hljs-variable">$fullname</span>:=<span class="hljs-variable">$fullname</span>+<span class="hljs-string">"@"</span>        <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$fullname</span>) <span class="hljs-comment">// single item collection</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword">     Case of</span>     : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"=="</span>) | (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"==="</span>)<span class="hljs-keyword">        If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"(firstName = :1 and lastName = :2) or (firstName = :2 and lastName = :1)"</span><span class="hljs-keyword">        Else</span>             <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName = :1 or lastName = :1"</span><span class="hljs-keyword">        End if</span>     : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"!="</span>)<span class="hljs-keyword">        If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName != :1 and lastName != :2 and firstName != :2 and lastName != :1"</span><span class="hljs-keyword">        Else</span>             <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName != :1 and lastName != :1"</span><span class="hljs-keyword">        End if</span><span class="hljs-keyword">     End case</span>     <span class="hljs-variable">$result</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"query"</span>; <span class="hljs-variable">$query</span>; <span class="hljs-string">"parameters"</span>; <span class="hljs-variable">$parameters</span>)</code></pre><blockquote><p>Keep in mind that using placeholders in queries based upon usertext input is recommended for security reasons (see <a href="#ordaClasses.html_query"><code>query()</code>description</a>).</p></blockquote><p>Calling code, for example:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$emps</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"fullName = :1"</span>; <span class="hljs-string">"Flora Pionsin"</span>)</code></pre><ul><li>This function handles queries on the <em>age</em> computedattribute and returns an object with parameters:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> query age</span>(<span class="hljs-variable">$event </span>: Object)-&gt;<span class="hljs-variable">$result </span>: Object<span class="hljs-keyword">    var</span> <span class="hljs-variable">$operator </span>: Text<span class="hljs-keyword">    var</span> <span class="hljs-variable">$age </span>: Integer<span class="hljs-keyword">    var</span> <span class="hljs-variable">$_ages </span>: Collection    <span class="hljs-variable">$operator</span>:=<span class="hljs-variable">$event</span>.operator    <span class="hljs-variable">$age</span>:=<span class="hljs-function">Num</span>(<span class="hljs-variable">$event</span>.value)  <span class="hljs-comment">// integer</span>    <span class="hljs-variable">$d1</span>:=<span class="hljs-function">Add to date</span>(Current date; -<span class="hljs-variable">$age</span><span class="hljs-number">-1</span>; <span class="hljs-number">0</span>; <span class="hljs-number">0</span>)    <span class="hljs-variable">$d2</span>:=<span class="hljs-function">Add to date</span>(<span class="hljs-variable">$d1</span>; <span class="hljs-number">1</span>; <span class="hljs-number">0</span>; <span class="hljs-number">0</span>)    <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$d1</span>; <span class="hljs-variable">$d2</span>)<span class="hljs-keyword">    Case of</span>         : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"=="</span>)            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday &gt; :1 and birthday &lt;= :2"</span>  <span class="hljs-comment">// after d1 and before or egal d2</span>        : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"==="</span>)             <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday = :2"</span>  <span class="hljs-comment">// d2 = second calculated date (= birthday date)</span>        : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"&gt;="</span>)            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday &lt;= :2"</span>            <span class="hljs-comment">//... other operators           </span><span class="hljs-keyword">    End case</span><span class="hljs-keyword">     If</span> (<span class="hljs-literal">Undefined</span>(<span class="hljs-variable">$event</span>.result))        <span class="hljs-variable">$result</span>:=New object        <span class="hljs-variable">$result</span>.query:=<span class="hljs-variable">$query</span>        <span class="hljs-variable">$result</span>.parameters:=<span class="hljs-variable">$parameters</span><span class="hljs-keyword">    End if</span></code></pre><p>Calling code, for example:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// people aged between 20 and 21 years (-1 day)</span><span class="hljs-variable">$twenty</span>:=people.<span class="hljs-function">query</span>(<span class="hljs-string">"age = 20"</span>)  <span class="hljs-comment">// calls the "==" case</span><span class="hljs-comment">// people aged 20 years today</span><span class="hljs-variable">$twentyToday</span>:=people.<span class="hljs-function">query</span>(<span class="hljs-string">"age === 20"</span>) <span class="hljs-comment">// equivalent to people.query("age is 20") </span></code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_function-orderby-attributename"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_function-orderby-attributename"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Function orderBy &lt;attributeName&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntax-3"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntax-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span> orderBy &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">Function</span> orderBy &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-comment">// code</span></code></pre><p>The <code>orderBy</code> function executes whenever the computedattribute needs to be ordered. It allows sorting the computedattribute. For example, you can sort <em>fullName</em> on firstnames then last names, or conversely. When the <code>orderBy</code>function is not implemented for a computed attribute, the sort isalways sequential (based upon the evaluation of all values usingthe <code>get &lt;AttributeName&gt;</code> function).</p><blockquote><p>Calling an <code>orderBy</code> function on computed attributesof type Entity class or Entity selection class <strong>is notsupported</strong>.</p></blockquote><p>The <em>$event</em> parameter contains the followingproperties:</p><table><thead><tr><th>Property</th><th>Typ</th><th>Beschreibung</th></tr></thead><tbody><tr><td>attributeName</td><td>Text</td><td>Computed attribute name</td></tr><tr><td>dataClassName</td><td>Text</td><td>Dataclass name</td></tr><tr><td>kind</td><td>Text</td><td>"orderBy"</td></tr><tr><td>value</td><td>Variant</td><td>Value to be handled by the computed attribute</td></tr><tr><td>operator</td><td>Text</td><td>"desc" or "asc" (default)</td></tr><tr><td>descending</td><td>Boolean</td><td><code>true</code> for descending order, <code>false</code> forascending order</td></tr><tr><td>result</td><td>Variant</td><td>Value to be handled by the computed attribute. Pass<code>Null</code> if you want to let 4D execute the defaultsort.</td></tr></tbody></table><blockquote><p>You can use either the <code>operator</code> or the<code>descending</code> property. It is essentially a matter ofprogramming style (see examples).</p></blockquote><p>You can return the <code>orderBy</code> string either in the<code>$event.result</code> object property or in the<em>$result</em> function result. If the function returns a valuein <em>$result</em> and another value is assigned to the<code>$event.result</code> property, the priority is given to<code>$event.result</code>.</p><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiel-5"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiel-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h4><p>You can write conditional code:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> orderBy fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$event</span>.descending=<span class="hljs-literal">True</span>)        <span class="hljs-variable">$result</span>:=<span class="hljs-string">"firstName desc, lastName desc"</span><span class="hljs-keyword">     Else</span>         <span class="hljs-variable">$result</span>:=<span class="hljs-string">"firstName, lastName"</span><span class="hljs-keyword">     End if</span></code></pre><p>You can also write compact code:</p><pre><code class="hljs css language-4d">Function orderBy fullName($event : Object)-&gt; $result : Text    $result:="firstName "+$event.operator+", "lastName "+$event.operator</code></pre><p>Conditional code is necessary in some cases:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> orderBy age</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$event</span>.descending=<span class="hljs-literal">True</span>)        <span class="hljs-variable">$result</span>:=<span class="hljs-string">"birthday asc"</span><span class="hljs-keyword">     Else</span>         <span class="hljs-variable">$result</span>:=<span class="hljs-string">"birthday desc"</span><span class="hljs-keyword">     End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_alias-attributes-1"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_alias-attributes-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Alias attributes</h2><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_%C3%BCberblick-1"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_%25C3%25BCberblick-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Überblick</h3><p>An <strong>alias</strong> attribute is built above anotherattribute of the data model, named <strong>target</strong>attribute. The target attribute can belong to a related dataclass(available through any number of relation levels) or to the samedataclass. An alias attribute stores no data, but the path to itstarget attribute. You can define as many alias attributes as youwant in a dataclass.</p><p>Alias attributes are particularly useful to handle N to Nrelations. They bring more readability and simplicity in the codeand in queries by allowing to rely on business concepts instead ofimplementation details.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_how-to-define-alias-attributes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_how-to-define-alias-attributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>How to define alias attributes</h3><p>You create an alias attribute in a dataclass by using the<code>Alias</code> keyword in the <a href="#ordaClasses.html_entity-class"><strong>entity class</strong></a>of the dataclass.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_alias-attributename-targetpath"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_alias-attributename-targetpath"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Alias &lt;attributeName&gt;&lt;targetPath&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntax-4"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntax-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax</h4><pre><code class="hljs"><span class="hljs-template-variable">{exposed}</span><span class="xml"> Alias <span class="hljs-tag">&lt;<span class="hljs-name">attributeName</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">targetPath</span>&gt;</span></span></code></pre><p><em>attributeName</em> must comply with <a href="#ordaClasses.html_object-properties">standard rules for propertynames</a>.</p><p><em>targetPath</em> is an attribute path containing one or morelevels, such as "employee.company.name". If the target attributebelongs to the same dataclass, <em>targetPath</em> is the attributename.</p><p>An alias can be used as a part of a path of another alias.</p><p>A <a href="#ordaClasses.html_computed-attributes-1">computedattribute</a> can be used in an alias path, but only as the lastlevel of the path, otherwise, an error is returned. For example, if"fullName" is a computed attribute, an alias with path"employee.fullName" is valid.</p><blockquote><p>ORDA alias attributes are <strong>not exposed</strong> bydefault. You must add the <a href="#ordaClasses.html_exposed-vs-non-exposed-functions"><code>exposed</code></a>keyword before the <code>Alias</code> keyword if you want the aliasto be available to remote requests.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_using-alias-attributes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_using-alias-attributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Using alias attributes</h3><p>Alias attributes are read-only (except when based upon a scalarattribute of the same dataclass, see the last example below). Theycan be used instead of their target attribute path in classfunctions such as:</p><table><thead><tr><th>Function</th></tr></thead><tbody><tr><td><code>dataClass.query()</code>,<code>entitySelection.query()</code></td></tr><tr><td><code>entity.toObject()</code></td></tr><tr><td><code>entitySelection.toCollection()</code></td></tr><tr><td><code>entitySelection.extract()</code></td></tr><tr><td><code>entitySelection.orderBy()</code></td></tr><tr><td><code>entitySelection.orderByFormula()</code></td></tr><tr><td><code>entitySelection.average()</code></td></tr><tr><td><code>entitySelection.count()</code></td></tr><tr><td><code>entitySelection.distinct()</code></td></tr><tr><td><code>entitySelection.sum()</code></td></tr><tr><td><code>entitySelection.min()</code></td></tr><tr><td><code>entitySelection.max()</code></td></tr><tr><td><code>entity.diff()</code></td></tr><tr><td><code>entity.touchedAttributes()</code></td></tr></tbody></table><blockquote><p>Keep in mind that alias attributes are calculated on the server.In remote configurations, updating alias attributes in entitiesrequires that entities are reloaded from the server.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_alias-properties"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_alias-properties"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Alias properties</h3><p>Alias attribute <a href="#ordaClasses.html_kind"><code>kind</code></a> is "alias".</p><p>An alias attribute inherits its data <a href="#ordaClasses.html_type"><code>type</code></a> property from thetarget attribute:</p><ul><li>if the target attribute <a href="#ordaClasses.html_kind"><code>kind</code></a> is "storage", thealias data type is of the same type,</li><li>if the target attribute <a href="#ordaClasses.html_kind"><code>kind</code></a> is "relatedEntity"or "relatedEntities", the alias data type is of the<code>4D.Entity</code> or <code>4D.EntitySelection</code> type("<em>classname</em>Entity" or "<em>classname</em>Selection").</li></ul><p>Alias attributes based upon relations have a specific <a href="#ordaClasses.html_path"><code>path</code></a> property, containingthe path of their target attributes. Alias attributes based uponattributes of the same dataclass have the same properties as theirtarget attributes (and no <code>path</code> property).</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiele-2"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiele-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiele</h3><p>Considering the following model:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/alias1.png" /></p><p>In the Teacher dataclass, an alias attribute returns allstudents of a teacher:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.TeacherEntity class</span><span class="hljs-keyword">Class extends</span> EntityAlias students courses.student <span class="hljs-comment">//relatedEntities </span></code></pre><p>In the Student dataclass, an alias attribute returns allteachers of a student:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.StudentEntity class</span><span class="hljs-keyword">Class extends</span> EntityAlias teachers courses.teacher <span class="hljs-comment">//relatedEntities </span></code></pre><p>In the Course dataclass:</p><ul><li>an alias attribute returns another label for the "name"attribute</li><li>an alias attribute returns the teacher name</li><li>an alias attribute returns the student name</li></ul><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.CourseEntity class</span><span class="hljs-keyword">Class extends</span> EntityExposed Alias courseName name <span class="hljs-comment">//scalar </span>Exposed Alias teacherName teacher.name <span class="hljs-comment">//scalar value</span>Exposed Alias studentName student.name <span class="hljs-comment">//scalar value</span></code></pre><p>You can then execute the following queries:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Find course named "Archaeology"</span>ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"courseName = :1"</span>;<span class="hljs-string">"Archaeology"</span>)<span class="hljs-comment">// Find courses given by the professor Smith</span>ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"teacherName = :1"</span>;<span class="hljs-string">"Smith"</span>)<span class="hljs-comment">// Find courses where Student "Martin" assists</span>ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"studentName = :1"</span>;<span class="hljs-string">"Martin"</span>)<span class="hljs-comment">// Find students who have M. Smith as teacher </span>ds.Student.<span class="hljs-function">query</span>(<span class="hljs-string">"teachers.name = :1"</span>;<span class="hljs-string">"Smith"</span>)<span class="hljs-comment">// Find teachers who have M. Martin as Student</span>ds.Teacher.<span class="hljs-function">query</span>(<span class="hljs-string">"students.name = :1"</span>;<span class="hljs-string">"Martin"</span>)<span class="hljs-comment">// Note that this very simple query string processes a complex </span><span class="hljs-comment">// query including a double join, as you can see in the queryPlan:   </span><span class="hljs-comment">// "Join on Table : Course  :  Teacher.ID = Course.teacherID,    </span><span class="hljs-comment">//  subquery:[ Join on Table : Student  :  Course.studentID = Student.ID,</span><span class="hljs-comment">//  subquery:[ Student.name === Martin]]"</span></code></pre><p>You can also edit the value of the <em>courseName</em>alias:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Rename a course using its alias attribute</span><span class="hljs-variable">$arch</span>:=ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"courseName = :1"</span>;<span class="hljs-string">"Archaeology"</span>)<span class="hljs-variable">$arch</span>.courseName:=<span class="hljs-string">"Archaeology II"</span><span class="hljs-variable">$arch</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//courseName and name are "Archaeology II"</span></code></pre><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_exposed-vs-non-exposed-functions"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_exposed-vs-non-exposed-functions"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exposed vs non-exposed functions</h2><p>For security reasons, all of your data model class functions andalias attributes are <strong>not exposed</strong> (i.e., private)by default to remote requests.</p><p>Remote requests include:</p><ul><li>Requests sent by remote 4D applications connected through<code>Open datastore</code></li><li>REST requests</li></ul><blockquote><p>Regular 4D client/server requests are not impacted. Data modelclass functions are always available in this architecture.</p></blockquote><p>A function that is not exposed is not available on remoteapplications and cannot be called on any object instance from aREST request. If a remote application tries to access a non-exposedfunction, the "-10729 - Unknown member method" error isreturned.</p><p>To allow a data model class function to be called by a remoterequest, you must explicitly declare it using the<code>exposed</code> keyword. The formal syntax is:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// declare an exposed function</span>exposed<span class="hljs-keyword"> Function</span> &lt;functionName&gt;   </code></pre><blockquote><p>The <code>exposed</code> keyword can only be used with Datamodel class functions. If used with a <a href="#classes.html">regular user class</a> function, it is ignored andan error is returned by the compiler.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiel-6"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiel-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiel</h3><p>You want an exposed function to use a private function in adataclass class:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> DataClass<span class="hljs-comment">//Public function</span><span class="hljs-function">exposed Function registerNewStudent</span>(<span class="hljs-variable">$student </span>: Object) -&gt; <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$entity </span>: cs.StudentsEntity<span class="hljs-variable">$entity</span>:=ds.Students.<span class="hljs-function">new</span>()<span class="hljs-variable">$entity</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$student</span>)<span class="hljs-variable">$entity</span>.school:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"name=:1"</span>; <span class="hljs-variable">$student</span>.schoolName).<span class="hljs-function">first</span>()<span class="hljs-variable">$entity</span>.serialNumber:=<span class="hljs-literal">This</span>.<span class="hljs-function">computeSerialNumber</span>()<span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()<span class="hljs-comment">//Not exposed (private) function</span><span class="hljs-keyword">Function</span><span class="hljs-function"> computeIDNumber</span>()-&gt; <span class="hljs-variable">$id </span>: Integer<span class="hljs-comment">//compute a new ID number</span><span class="hljs-variable">$id</span>:=...</code></pre><p>When the code is called:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$remoteDS</span>; <span class="hljs-variable">$student</span>; <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$id </span>: Integer<span class="hljs-variable">$remoteDS</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"127.0.0.1:8044"</span>); <span class="hljs-string">"students"</span>)<span class="hljs-variable">$student</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"firstname"</span>; <span class="hljs-string">"Mary"</span>; <span class="hljs-string">"lastname"</span>; <span class="hljs-string">"Smith"</span>; <span class="hljs-string">"schoolName"</span>; <span class="hljs-string">"Math school"</span>)<span class="hljs-variable">$status</span>:=<span class="hljs-variable">$remoteDS</span>.Schools.<span class="hljs-function">registerNewStudent</span>(<span class="hljs-variable">$student</span>) <span class="hljs-comment">// OK</span><span class="hljs-variable">$id</span>:=<span class="hljs-variable">$remoteDS</span>.Schools.<span class="hljs-function">computeIDNumber</span>() <span class="hljs-comment">// Error "Unknown member method" </span></code></pre><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_local-functions"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_local-functions"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Local functions</h2><p>By default in client/server architecture, ORDA data modelfunctions are executed <strong>on the server</strong>. It usuallyprovides the best performance since only the function request andthe result are sent over the network.</p><p>However, it could happen that a function is fully executable onthe client side (e.g., when it processes data that's already in thelocal cache). In this case, you can save requests to the server andthus, enhance the application performance by inserting the<code>local</code> keyword. The formal syntax is:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// declare a function to execute locally in client/server</span>local<span class="hljs-keyword"> Function</span> &lt;functionName&gt;   </code></pre><p>With this keyword, the function will always be executed on theclient side.</p><blockquote><p>The <code>local</code> keyword can only be used with data modelclass functions. If used with a <a href="#classes.html">regularuser class</a> function, it is ignored and an error is returned bythe compiler.</p></blockquote><p>Note that the function will work even if it eventually requiresto access the server (for example if the ORDA cache is expired).However, it is highly recommended to make sure that the localfunction does not access data on the server, otherwise the localexecution could not bring any performance benefit. A local functionthat generates many requests to the server is less efficient than afunction executed on the server that would only return theresulting values. For example, consider the following function onthe Schools entity class:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Get the youngest students  </span><span class="hljs-comment">// Inappropriate use of local keyword</span>local<span class="hljs-keyword"> Function</span> getYoungest<span class="hljs-keyword">    var</span> <span class="hljs-variable">$0 </span>: Object    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.students.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &gt;= :1"</span>; <span class="hljs-literal">!2000-01-01!</span>).<span class="hljs-function">orderBy</span>(<span class="hljs-string">"birthDate desc"</span>).<span class="hljs-function">slice</span>(<span class="hljs-number">0</span>; <span class="hljs-number">5</span>)</code></pre><ul><li><strong>without</strong> the <code>local</code> keyword, theresult is given using a single request</li><li><strong>with</strong> the <code>local</code> keyword, 4requests are necessary: one to get the Schools entity students, onefor the <code>query()</code>, one for the <code>orderBy()</code>,and one for the <code>slice()</code>. In this example, using the<code>local</code> keyword is inappropriate.</li></ul><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_beispiele-3"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_beispiele-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Beispiele</h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_calculating-age"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_calculating-age"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Calculating age</h4><p>Given an entity with a <em>birthDate</em> attribute, we want todefine an <code>age()</code> function that would be called in alist box. This function can be executed on the client, which avoidstriggering a request to the server for each line of the listbox.</p><p>On the <em>StudentsEntity</em> class:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> Entity<span class="hljs-function">local Function age</span>() -&gt; <span class="hljs-variable">$age</span>: Variant<span class="hljs-keyword">If</span> (<span class="hljs-literal">This</span>.birthDate#<span class="hljs-literal">!00-00-00!</span>)    <span class="hljs-variable">$age</span>:=<span class="hljs-function">Year of</span>(Current date)-<span class="hljs-function">Year of</span>(<span class="hljs-literal">This</span>.birthDate)<span class="hljs-keyword">Else</span>     <span class="hljs-variable">$age</span>:=<span class="hljs-literal">Null</span><span class="hljs-keyword">End if</span>    <span class="hljs-variable">$age</span>:=<span class="hljs-function">Year of</span>(Current date)-<span class="hljs-function">Year of</span>(<span class="hljs-literal">This</span>.birthDate)<span class="hljs-keyword">Else</span>     <span class="hljs-variable">$age</span>:=<span class="hljs-literal">Null</span><span class="hljs-keyword">End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_checking-attributes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_checking-attributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Checking attributes</h4><p>We want to check the consistency of the attributes of an entityloaded on the client and updated by the user before requesting theserver to save them.</p><p>On the <em>StudentsEntity</em> class, the local<code>checkData()</code> function checks the Student's age:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> Entity<span class="hljs-function">local Function checkData</span>() -&gt; <span class="hljs-variable">$status </span>: Object<span class="hljs-variable">$status</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"success"</span>; <span class="hljs-literal">True</span>)<span class="hljs-keyword">Case of</span>    : (<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>()=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$status</span>.success:=<span class="hljs-literal">False</span>        <span class="hljs-variable">$status</span>.statusText:=<span class="hljs-string">"The birthdate is missing"</span>     :((<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>() &lt;<span class="hljs-number">15</span>) | (<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>()&gt;<span class="hljs-number">30</span>) )        <span class="hljs-variable">$status</span>.success:=<span class="hljs-literal">False</span>        <span class="hljs-variable">$status</span>.statusText:=<span class="hljs-string">"The student must be between 15 and 30 - This one is "</span>+<span class="hljs-function">String</span>(<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>())<span class="hljs-keyword">End case</span></code></pre><p>Calling code:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-comment">//Form.student is loaded with all its attributes and updated on a Form</span><span class="hljs-variable">$status</span>:=Form.student.<span class="hljs-function">checkData</span>()<span class="hljs-keyword">If</span> (<span class="hljs-variable">$status</span>.success)    <span class="hljs-variable">$status</span>:=Form.student.<span class="hljs-function">save</span>() <span class="hljs-comment">// call the server</span><span class="hljs-keyword">End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_support-in-4d-ide"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_support-in-4d-ide"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Support in 4D IDE</h2><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_datei-klasse"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_datei-klasse"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Datei Klasse</h3><p>An ORDA data model user class is defined by adding, at the<a href="#ordaClasses.html_class-files">same location as regularclass files</a> (<em>i.e.</em> in the <code>/Sources/Classes</code>folder of the project folder), a .4dm file with the name of theclass. For example, an entity class for the <code>Utilities</code>dataclass will be defined through a<code>UtilitiesEntity.4dm</code> file.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_creating-classes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_creating-classes"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Creating classes</h3><p>4D automatically pre-creates empty classes in memory for eachavailable data model object.</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/ORDA_Classes-3.png" /></p><blockquote><p>By default, empty ORDA classes are not displayed in theExplorer. To show them you need to select <strong>Show all dataclasses</strong> from the Explorer's options menu: <img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/showClass.png" /></p></blockquote><p>ORDA user classes have a different icon from regular classes.Empty classes are dimmed:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/classORDA2.png" /></p><p>To create an ORDA class file, you just need to double-click onthe corresponding predefined class in the Explorer. 4D creates theclass file and add the <code>extends</code> code. For example, foran Entity class:</p><pre><code class="hljs"><span class="hljs-class"><span class="hljs-keyword">Class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Entity</span></span></code></pre><p>Once a class is defined, its name is no longer dimmed in theExplorer.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_editing-classes"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_editing-classes"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Editing classes</h3><p>To open a defined ORDA class in the 4D method editor, select ordouble-click on an ORDA class name and use <strong>Edit...</strong>from the contextual menu/options menu of the Explorer window:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/classORDA4.png" /></p><p>For ORDA classes based upon the local datastore(<code>ds</code>), you can directly access the class code from the4D Structure window:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/classORDA5.png" /></p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_method-editor"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_method-editor"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Method editor</h3><p>In the 4D method editor, variables typed as an ORDA classautomatically benefit from autocompletion features. Example with anEntity class variable:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/AutoCompletionEntity.png" /></p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#dsmapping.html"><span class="arrow-prev">←</span> <span>DataModel Objects</span></a><a class="docs-next button" href="#entities.html"><span>Working with data</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#ordaClasses.html_architecture">Architecture</a></li><li><a href="#ordaClasses.html_class-description">ClassDescription</a><ul class="toc-headings"><li><a href="#ordaClasses.html_datastore-class">DataStoreClass</a></li><li><a href="#ordaClasses.html_dataclass-class">DataClassClass</a></li><li><a href="#ordaClasses.html_entityselection-class">EntitySelectionClass</a></li><li><a href="#ordaClasses.html_entity-class">Entity Class</a></li><li><a href="#ordaClasses.html_specific-rules">Specificrules</a></li><li><a href="#ordaClasses.html_preemptive-execution">Preemptiveexecution</a></li></ul></li><li><a href="#ordaClasses.html_computed-attributes-1">Computedattributes</a><ul class="toc-headings"><li><a href="#ordaClasses.html_%25C3%25BCberblick">Überblick</a></li><li><a href="#ordaClasses.html_how-to-define-computed-attributes">How to definecomputed attributes</a></li><li><a href="#ordaClasses.html_function-get-attributename"><code>Function get&lt;attributeName&gt;</code></a></li><li><a href="#ordaClasses.html_function-set-attributename"><code>Function set&lt;attributeName&gt;</code></a></li><li><a href="#ordaClasses.html_function-query-attributename"><code>Functionquery &lt;attributeName&gt;</code></a></li><li><a href="#ordaClasses.html_function-orderby-attributename"><code>FunctionorderBy &lt;attributeName&gt;</code></a></li></ul></li><li><a href="#ordaClasses.html_alias-attributes-1">Aliasattributes</a><ul class="toc-headings"><li><a href="#ordaClasses.html_%25C3%25BCberblick-1">Überblick</a></li><li><a href="#ordaClasses.html_how-to-define-alias-attributes">Howto define alias attributes</a></li><li><a href="#ordaClasses.html_alias-attributename-targetpath"><code>Alias&lt;attributeName&gt; &lt;targetPath&gt;</code></a></li><li><a href="#ordaClasses.html_using-alias-attributes">Using aliasattributes</a></li><li><a href="#ordaClasses.html_alias-properties">Aliasproperties</a></li><li><a href="#ordaClasses.html_beispiele-2">Beispiele</a></li></ul></li><li><a href="#ordaClasses.html_exposed-vs-non-exposed-functions">Exposed vsnon-exposed functions</a><ul class="toc-headings"><li><a href="#ordaClasses.html_beispiel-6">Beispiel</a></li></ul></li><li><a href="#ordaClasses.html_local-functions">Local functions</a><ul class="toc-headings"><li><a href="#ordaClasses.html_beispiele-3">Beispiele</a></li></ul></li><li><a href="#ordaClasses.html_support-in-4d-ide">Support in 4DIDE</a><ul class="toc-headings"><li><a href="#ordaClasses.html_datei-klasse">Datei Klasse</a></li><li><a href="#ordaClasses.html_creating-classes">Creatingclasses</a></li><li><a href="#ordaClasses.html_editing-classes">Editingclasses</a></li><li><a href="#ordaClasses.html_method-editor">Methodeditor</a></li></ul></li></ul></nav></div></div></body></html>