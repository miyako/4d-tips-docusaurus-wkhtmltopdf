<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="en"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>CryptoKey · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="The `CryptoKey` class in the 4D language encapsulates an asymmetric encryption key pair."name="description" /><meta content="en" name="docsearch:language" /><meta content="CryptoKey · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="The `CryptoKey` class in the 4D language encapsulates an asymmetric encryption key pair."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#CryptoKeyClass.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">CryptoKey<a aria-hidden="true" class="anchor" id="CryptoKeyClass.html"></a></h1></header><article><div><p><span>The <code>CryptoKey</code> class in the 4D languageencapsulates an asymmetric encryption key pair.</span></p><p><span>This class is available from the <code>4D</code> classstore.</span></p><h3><span><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_example"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_example"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</span></h3><p><span>The following sample code signs and verifies a messageusing a new ECDSA key pair, for example in order to make a ES256JSON Web token.</span></p><pre><span><code class="hljs css language-4d"> <span class="hljs-comment">// Generate a new ECDSA key pair</span><span class="hljs-variable">$key</span>:=4D.CryptoKey.<span class="hljs-function">new</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"type"</span>;<span class="hljs-string">"ECDSA"</span>;<span class="hljs-string">"curve"</span>;<span class="hljs-string">"prime256v1"</span>))  <span class="hljs-comment">// Get signature as base64</span><span class="hljs-variable">$message</span>:=<span class="hljs-string">"hello world"</span><span class="hljs-variable">$signature</span>:=<span class="hljs-variable">$key</span>.<span class="hljs-function">sign</span>(<span class="hljs-variable">$message</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"hash"</span>;<span class="hljs-string">"SHA256"</span>))  <span class="hljs-comment">// Verify signature</span><span class="hljs-variable">$status</span>:=<span class="hljs-variable">$key</span>.<span class="hljs-function">verify</span>(<span class="hljs-variable">$message</span>;<span class="hljs-variable">$signature</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"hash"</span>;<span class="hljs-string">"SHA256"</span>))<span class="hljs-function">ASSERT</span>(<span class="hljs-variable">$status</span>.success)</code></span></pre><h3><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_summary"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_summary"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Summary</h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#CryptoKeyClass.html_4dcryptokeynew"><strong>4D.CryptoKey.new</strong>(<em>settings</em> : Object ) : 4D.CryptoKey</a><p>&nbsp;&nbsp;&nbsp;&nbsp;creates a new <code>4D.CryptoKey</code>object encapsulating an encryption key pair</p></td></tr><tr><td><a href="#CryptoKeyClass.html_curve"><strong>.curve</strong> :Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;normalised curve name of the key</p></td></tr><tr><td><a href="#CryptoKeyClass.html_decrypt"><strong>.decrypt</strong>(<em>message</em> : Text ; <em>options</em> : Object ) : Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;decrypts the <em>message</em> parameterusing the <strong>private</strong> key</p></td></tr><tr><td><a href="#CryptoKeyClass.html_encrypt"><strong>.encrypt</strong>(<em>message</em> : Text ; <em>options</em> : Object ) : Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;encrypts the <em>message</em> parameterusing the <strong>public</strong> key</p></td></tr><tr><td><a href="#CryptoKeyClass.html_getprivatekey"><strong>.getPrivateKey()</strong>: Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns the private key of the<code>CryptoKey</code> object</p></td></tr><tr><td><a href="#CryptoKeyClass.html_getpublickey"><strong>.getPublicKey()</strong> : Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns the public key of the<code>CryptoKey</code> object</p></td></tr><tr><td><a href="#CryptoKeyClass.html_sign">.<strong>sign</strong>(<em>message</em> : Text ; <em>options</em> : Text) : Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;signs the utf8 representation of a<em>message</em> string</p></td></tr><tr><td><a href="#CryptoKeyClass.html_size"><strong>.size</strong> :Integer</a><p>&nbsp;&nbsp;&nbsp;&nbsp;the size of the key in bits</p></td></tr><tr><td><a href="#CryptoKeyClass.html_type"><strong>.type</strong> :Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;Name of the key type - "RSA", "ECDSA","PEM"</p></td></tr><tr><td><a href="#CryptoKeyClass.html_verify"><strong>.verify</strong>(<em>message</em> : Text ; <em>signature</em> : Text ;<em>options</em> : Object) : object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;verifies the base64 signature againstthe utf8 representation of <em>message</em></p></td></tr></tbody></table><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_4dcryptokeynew"></a><a aria-hidden="true"class="hash-link" href="#CryptoKeyClass.html_4dcryptokeynew"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4D.CryptoKey.new()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>4D.CryptoKey.new</strong>( <em>settings</em> : Object ): 4D.CryptoKey</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>settings</td><td>Object</td><td>-&gt;</td><td>Settings to generate or load a key pair</td></tr><tr><td>result</td><td>4D.CryptoKey</td><td>&lt;-</td><td>Object encapsulating an encryption key pair</td></tr></tbody></table><p>The <code>4D.CryptoKey.new()</code> function creates a new<code>4D.CryptoKey</code> object encapsulating an encryption keypair, based upon the <em>settings</em> object parameter. It allowsto generate a new RSA or ECDSA key, or to load an existing key pairfrom a PEM definition.</p><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_settings"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_settings"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>settings</em></h4><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><a href="#CryptoKeyClass.html_curve">curve</a></td><td>text</td><td>Name of ECDSA curve</td></tr><tr><td><a href="#CryptoKeyClass.html_pem">pem</a></td><td>text</td><td>PEM definition of an encryption key to load</td></tr><tr><td><a href="#CryptoKeyClass.html_size">size</a></td><td>integer</td><td>Size of RSA key in bits</td></tr><tr><td><a href="#CryptoKeyClass.html_type">type</a></td><td>text</td><td>Type of the key: "RSA", "ECDSA", or "PEM"</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_cryptokey"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_cryptokey"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>CryptoKey</em></h4><p>The returned <code>CryptoKey</code> object encapsulates anencryption key pair. It is a shared object and can therefore beused by multiple 4D processes simultaneously.</p><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_curve"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_curve"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.curve</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.curve</strong> : Text</p><p>Defined only for ECDSA keys: the normalised curve name of thekey. Usually "prime256v1" for ES256 (default), "secp384r1" forES384, "secp521r1" for ES512.</p><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_decrypt"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_decrypt"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.decrypt()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.decrypt</strong>( <em>message</em> : Text ;<em>options</em> : Object ) : Object</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>message</td><td>Text</td><td>-&gt;</td><td>Message string to be decoded using<code>options.encodingEncrypted</code> and decrypted.</td></tr><tr><td>options</td><td>Object</td><td>-&gt;</td><td>Decoding options</td></tr><tr><td>Result</td><td>Object</td><td>&lt;-</td><td>Status</td></tr></tbody></table><p>The <code>.decrypt()</code> function decrypts the<em>message</em> parameter using the <strong>private</strong> key.The algorithm used depends on the type of the key.</p><p>The key must be a RSA key, the algorithm is RSA-OAEP (see<a href="https://tools.ietf.org/html/rfc3447">RFC 3447</a>).</p><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_options"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_options"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>options</em></h4><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>hash</td><td>text</td><td>Digest algorithm to use. For example: "SHA256", "SHA384", or"SHA512".</td></tr><tr><td>encodingEncrypted</td><td>text</td><td>Encoding used to convert the <code>message</code> parameterinto the binary representation to decrypt. Can be "Base64" or"Base64URL". Default is "Base64".</td></tr><tr><td>encodingDecrypted</td><td>text</td><td>Encoding used to convert the binary decrypted message into theresult string. Can be "UTF-8", "Base64", or "Base64URL". Default is"UTF-8".</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_result"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_result"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>Result</em></h4><p>The function returns a status object with <code>success</code>property set to <code>true</code> if the <em>message</em> could besuccessfully decrypted.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>success</td><td>boolean</td><td>True if the message has been successfully decrypted</td></tr><tr><td>result</td><td>text</td><td>Message decrypted and decoded using the<code>options.encodingDecrypted</code></td></tr><tr><td>errors</td><td>collection</td><td>If <code>success</code> is <code>false</code>, may contain acollection of errors</td></tr></tbody></table><p>In case the <em>message</em> couldn't be decrypted because itwas not encrypted with the same key or algorithm, the<code>status</code> object being returned contains an errorcollection in <code>status.errors</code>.</p><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_encrypt"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_encrypt"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.encrypt()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.encrypt</strong>( <em>message</em> : Text ;<em>options</em> : Object ) : Text</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>message</td><td>Text</td><td>-&gt;</td><td>Message string to be encoded using<code>options.encodingDecrypted</code> and encrypted.</td></tr><tr><td>options</td><td>Object</td><td>-&gt;</td><td>Encoding options</td></tr><tr><td>Result</td><td>Text</td><td>&lt;-</td><td>Message encrypted and encoded using the<code>options.encodingEncrypted</code></td></tr></tbody></table><p>The <code>.encrypt()</code> function encrypts the<em>message</em> parameter using the <strong>public</strong> key.The algorithm used depends on the type of the key.</p><p>The key must be a RSA key, the algorithm is RSA-OAEP (see<a href="https://tools.ietf.org/html/rfc3447">RFC 3447</a>).</p><h5><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_options-1"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_options-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>options</em></h5><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>hash</td><td>text</td><td>Digest algorithm to use. For example: "SHA256", "SHA384", or"SHA512".</td></tr><tr><td>encodingEncrypted</td><td>text</td><td>Encoding used to convert the binary encrypted message into theresult string. Can be "Base64", or "Base64URL". Default is"Base64".</td></tr><tr><td>encodingDecrypted</td><td>text</td><td>Encoding used to convert the <code>message</code> parameterinto the binary representation to encrypt. Can be "UTF-8","Base64", or "Base64URL". Default is "UTF-8".</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_result-1"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_result-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>Result</em></h4><p>The returned value is an encrypted message.</p><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_getprivatekey"></a><a aria-hidden="true"class="hash-link" href="#CryptoKeyClass.html_getprivatekey"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getPrivateKey()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.getPrivateKey()</strong> : Text</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>Result</td><td>Text</td><td>&lt;-</td><td>Private key in PEM format</td></tr></tbody></table><p>The <code>.getPrivateKey()</code> function returns the privatekey of the <code>CryptoKey</code> object in PEM format, or an emptystring if none is available.</p><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_result-2"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_result-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>Result</em></h4><p>The returned value is the private key.</p><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_getpublickey"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_getpublickey"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getPublicKey()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.getPublicKey( )</strong> : Text</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>Result</td><td>Text</td><td>&lt;-</td><td>Public key in PEM format</td></tr></tbody></table><p>The <code>.getPublicKey()</code> function returns the public keyof the <code>CryptoKey</code> object in PEM format, or an emptystring if none is available.</p><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_result-3"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_result-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>Result</em></h4><p>The returned value is the public key.</p><hr /><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_pem"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_pem"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.pem</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.pem</strong> : Text</p><p>PEM definition of an encryption key to load. If the key is aprivate key, the RSA or ECDSA public key will be deduced fromit.</p><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_sign"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_sign"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.sign()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p>.<strong>sign</strong> (<em>message</em> : Text ;<em>options</em> : Text) : Text</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>message</td><td>Text</td><td>-&gt;</td><td>Message string to sign</td></tr><tr><td>options</td><td>Object</td><td>-&gt;</td><td>Signing options</td></tr><tr><td>Result</td><td>Text</td><td>&lt;-</td><td>Signature in Base64 or Base64URL representation, depending on"encoding" option</td></tr></tbody></table><p>The <code>.sign()</code> function signs the utf8 representationof a <em>message</em> string using the <code>CryptoKey</code>object keys and provided <em>options</em>. It returns its signaturein base64 or base64URL format, depending on the value of the<code>options.encoding</code> attribute you passed.</p><p>The <code>CryptoKey</code> must contain a valid<strong>private</strong> key.</p><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_options-2"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_options-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>options</em></h4><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>hash</td><td>text</td><td>Digest algorithm to use. For example: "SHA256", "SHA384", or"SHA512". When used to produce a JWT, the hash size must match thePS@, ES@, RS@, or PS@ algorithm size</td></tr><tr><td>encodingEncrypted</td><td>text</td><td>Encoding used to convert the binary encrypted message into theresult string. Can be "Base64", or "Base64URL". Default is"Base64".</td></tr><tr><td>pss</td><td>boolean</td><td>Use Probabilistic Signature Scheme (PSS). Ignored if the key isnot an RSA key. Pass <code>true</code> when producing a JWT for PS@algorithm</td></tr><tr><td>encoding</td><td>text</td><td>ERepresentation to be used for result signature. Possiblevalues: "Base64" or "Base64URL". Default is "Base64".</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_result-4"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_result-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>Result</em></h4><p>The utf8 representation of the <em>message</em> string.</p><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_size"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_size"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.size</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.size</strong> : Integer</p><p>Defined only for RSA keys: the size of the key in bits.Typically 2048 (default).</p><h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_type"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_type"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.type</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.type</strong> : Text</p><p>Name of the key type - "RSA", "ECDSA", "PEM"</p><ul><li>"RSA": an RSA key pair, using <code>settings.size</code> as<a href="#CryptoKeyClass.html_size">.size</a>.</li><li>"ECDSA": an Elliptic Curve Digital Signature Algorithm keypair, using <code>settings.curve</code> as <a href="#CryptoKeyClass.html_curve">.curve</a>. Note that ECDSA keyscannot be used for encryption but only for signature.</li><li>"PEM": a key pair definition in PEM format, using<code>settings.pem</code> as <a href="#CryptoKeyClass.html_pem">.pem</a>.<h2><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_verify"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_verify"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.verify()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v18 R4</td><td>Added</td></tr></tbody></table></details><p><strong>.verify</strong>( <em>message</em> : Text ;<em>signature</em> : Text ; <em>options</em> : Object) : object</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>message</td><td>Text</td><td>-&gt;</td><td>Message string that was used to produce the signature</td></tr><tr><td>signature</td><td>Text</td><td>-&gt;</td><td>Signature to verify, in Base64 or Base64URL representation,depending on <code>options.encoding</code> value</td></tr><tr><td>options</td><td>Object</td><td>-&gt;</td><td>Signing options</td></tr><tr><td>Result</td><td>Object</td><td>&lt;-</td><td>Status of the verification</td></tr></tbody></table><p>The <code>.verify()</code> function verifies the base64signature against the utf8 representation of <em>message</em> usingthe <code>CryptoKey</code> object keys and provided<em>options</em>.</p><p>The <code>CryptoKey</code> must contain a valid<strong>public</strong> key.</p><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_options-3"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_options-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>options</em></h4><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>hash</td><td>text</td><td>Digest algorithm to use. For example: "SHA256", "SHA384", or"SHA512". When used to produce a JWT, the hash size must match thePS@, ES@, RS@, or PS@ algorithm size</td></tr><tr><td>pss</td><td>boolean</td><td>Use Probabilistic Signature Scheme (PSS). Ignored if the key isnot an RSA key. Pass <code>true</code> when verifying a JWT for PS@algorithm</td></tr><tr><td>encoding</td><td>text</td><td>Representation of provided signature. Possible values are"Base64" or "Base64URL". Default is "Base64".</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="CryptoKeyClass.html_result-5"></a><a aria-hidden="true" class="hash-link" href="#CryptoKeyClass.html_result-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><em>Result</em></h4><p>The function returns a status object with <code>success</code>property set to <code>true</code> if <code>message</code> could besuccessfully verified (i.e. the signature matches).</p><p>In case the signature couldn't be verified because it was notsigned with the same <em>message</em>, key or algorithm, the<code>status</code> object being returned contains an errorcollection in <code>status.errors</code>.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>success</td><td>boolean</td><td>True if the signature matches the message</td></tr><tr><td>errors</td><td>collection</td><td>If <code>success</code> is <code>false</code>, may contain acollection of errors</td></tr></tbody></table><style><![CDATA[ h2 { background: #d9ebff;}]]></style></li></ul></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#CollectionClass.html"><span class="arrow-prev">←</span><span>Collection</span></a><a class="docs-next button" href="#DataClassClass.html"><span class="function-name-prevnext">DataClass</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#CryptoKeyClass.html_4dcryptokeynew">4D.CryptoKey.new()</a></li><li><a href="#CryptoKeyClass.html_curve">.curve</a></li><li><a href="#CryptoKeyClass.html_decrypt">.decrypt()</a></li><li><a href="#CryptoKeyClass.html_encrypt">.encrypt()</a></li><li><a href="#CryptoKeyClass.html_getprivatekey">.getPrivateKey()</a></li><li><a href="#CryptoKeyClass.html_getpublickey">.getPublicKey()</a></li><li><a href="#CryptoKeyClass.html_pem">.pem</a></li><li><a href="#CryptoKeyClass.html_sign">.sign()</a></li><li><a href="#CryptoKeyClass.html_size">.size</a></li><li><a href="#CryptoKeyClass.html_type">.type</a></li><li><a href="#CryptoKeyClass.html_verify">.verify()</a></li></ul></nav></div></div></body></html>