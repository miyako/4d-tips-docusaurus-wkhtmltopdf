<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="en"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Developing Components · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="A 4D component is a set of 4D functions, methods, and forms representing one or more functionalities that can be [installed and used in 4D applications](/docs/Rx/en/Concepts/components.html). For example, you can develop a 4D e-mail component that manages every aspect of sending, receiving and storing e-mails in 4D applications."name="description" /><meta content="en" name="docsearch:language" /><meta content="Developing Components · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="A 4D component is a set of 4D functions, methods, and forms representing one or more functionalities that can be [installed and used in 4D applications](/docs/Rx/en/Concepts/components.html). For example, you can develop a 4D e-mail component that manages every aspect of sending, receiving and storing e-mails in 4D applications."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#develop-components.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">DevelopingComponents<a aria-hidden="true" class="anchor" id="develop-components.html"></a></h1></header><article><div><p><span>A 4D component is a set of 4D functions, methods, andforms representing one or more functionalities that can be <a href="#components.html">installed and used in 4D applications</a>. Forexample, you can develop a 4D e-mail component that manages everyaspect of sending, receiving and storing e-mails in 4Dapplications.</span></p><p><span>You can develop 4D components for your own needs and keepthem private. You can also <a href="https://github.com/topics/4d-component">share your components withthe 4D community</a>.</span></p><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_definitions"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_definitions"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Definitions</span></h2><ul><li><span><strong>Matrix Project</strong>: 4D project used fordeveloping the component. The matrix project is a standard projectwith no specific attributes. A matrix project forms a singlecomponent.</span></li><li><span><strong>Host Project</strong>: Application project inwhich a component is installed and used.</span></li><li><span><strong>Component</strong>: Matrix project that can becompiled or <a href="#develop-components.html_build-component">built</a>, copied intothe <a href="#architecture.html"><code>Components</code></a> folderof the host application and whose contents are used in the hostapplication.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_basics"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_basics"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Basics</span></h2><p><span>Creating and installing 4D components is carried outdirectly from 4D:</span></p><ul><li><span>To install a component, you simply need to copy thecomponent files into the <a href="#architecture.html"><code>Components</code> folder of theproject</a>. You can use aliases or shortcuts.</span></li><li><span>A project can be both a matrix and a host, in otherwords, a matrix project can itself use one or more components.However, a component cannot use "sub-components"itself.</span></li><li><span>A component can call on most of the 4D elements: classes,functions, project methods, project forms, menu bars, choice lists,and so on. It cannot call database methods andtriggers.</span></li><li><span>You cannot use the datastore, standard tables, or datafiles in 4D components. However, a component can create and/or usetables, fields and data files using mechanisms of externaldatabases. These are separate 4D databases that you work with usingSQL commands.</span></li><li><span>A host project running in interpreted mode can use eitherinterpreted or compiled components. A host project running incompiled mode cannot use interpreted components. In this case, onlycompiled components can be used.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_scope-of-language-commands"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_scope-of-language-commands"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Scope of language commands</span></h2><p><span>Except for <a href="#develop-components.html_unusable-commands">Unusable commands</a>,a component can use any command of the 4D language.</span></p><p><span>When commands are called from a component, they areexecuted in the context of the component, except for the<code>EXECUTE METHOD</code> or <code>EXECUTE FORMULA</code> commandthat use the context of the method specified by the command. Alsonote that the read commands of the “Users and Groups” theme can beused from a component but will read the users and groups of thehost project (a component does not have its own users andgroups).</span></p><p><span>The <code>SET DATABASE PARAMETER</code> and <code>Getdatabase parameter</code> commands are an exception: their scope isglobal to the application. When these commands are called from acomponent, they are applied to the host applicationproject.</span></p><p><span>Furthermore, specific measures have been specified for the<code>Structure file</code> and <code>Get 4D folder</code> commandswhen they are used in the framework of components.</span></p><p><span>The <code>COMPONENT LIST</code> command can be used toobtain the list of components that are loaded by the hostproject.</span></p><h3><span><a aria-hidden="true" class="anchor" id="develop-components.html_unusable-commands"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_unusable-commands"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Unusable commands</span></h3><p><span>The following commands are not compatible for use within acomponent because they modify the structure file — which is open inread-only. Their execution in a component will generate the error-10511, "The CommandName command cannot be called from acomponent":</span></p><ul><li><span><code>ON EVENT CALL</code></span></li><li><span><code>Method called on event</code></span></li><li><span><code>SET PICTURE TO LIBRARY</code></span></li><li><span><code>REMOVE PICTURE FROM LIBRARY</code></span></li><li><span><code>SAVE LIST</code></span></li><li><span><code>ARRAY TO LIST</code></span></li><li><span><code>EDIT FORM</code></span></li><li><span><code>CREATE USER FORM</code></span></li><li><span><code>DELETE USER FORM</code></span></li><li><span><code>CHANGE PASSWORD</code></span></li><li><span><code>EDIT ACCESS</code></span></li><li><span><code>Set group properties</code></span></li><li><span><code>Set user properties</code></span></li><li><span><code>DELETE USER</code></span></li><li><span><code>CHANGE LICENSES</code></span></li><li><span><code>BLOB TO USERS</code></span></li><li><span><code>SET PLUGIN ACCESS</code></span></li></ul><p><span><strong>Notes:</strong></span></p><ul><li><span>The <code>Current form table</code> command returns<code>Nil</code> when it is called in the context of a projectform. Consequently, it cannot be used in a component.</span></li><li><span>SQL data definition language commands (<code>CREATETABLE</code>, <code>DROP TABLE</code>, etc.) cannot be used on thecomponent project. However, they are supported with externaldatabases (see <code>CREATE DATABASE</code> SQLcommand).</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_sharing-of-project-methods"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_sharing-of-project-methods"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Sharing of project methods</span></h2><p><span>All the project methods of a matrix project are bydefinition included in the component (the project is thecomponent), which means that they can be called and executed withinthe component.</span></p><p><span>On the other hand, by default these project methods willnot be visible, and they can't be called in the host project. Inthe matrix project, you must explicitly designate the methods thatyou want to share with the host project by checking the<strong>Shared by components and host project</strong> box in themethod properties dialog box:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Concepts/shared-methods.png" /></span></p><p><span>Shared project methods can be called in the code of thehost project (but they cannot be modified in the Method editor ofthe host project). These methods are <strong>entry points</strong>of the component.</span></p><p><span>Conversely, for security reasons, by default a componentcannot execute project methods belonging to the host project. Incertain cases, you may need to allow a component to access theproject methods of your host project. To do this, you mustexplicitly designate which project methods of the host project youwant to make accessible to the components (in the methodproperties, check the <strong>Shared by components and hostproject</strong> box).</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Concepts/pict516563.en.png" /></span></p><p><span>Once the project methods of the host projects areavailable to the components, you can execute a host method frominside a component using the <code>EXECUTE FORMULA</code> or<code>EXECUTE METHOD</code> commands. For example:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-comment">// Host Method</span><span class="hljs-function">component_method</span>(<span class="hljs-string">"host_method_name"</span>)</code></span></pre><pre><code class="hljs css language-4d"><span class="hljs-comment">// component_method</span><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function"> EXECUTE METHOD</span>(<span class="hljs-variable">$1</span>)</code></pre><blockquote><p>An interpreted host database that contains interpretedcomponents can be compiled or syntax checked if it does not callmethods of the interpreted component. Otherwise, a warning dialogbox appears when you attempt to launch the compilation or a syntaxcheck and it will not be possible to carry out the operation.<br />Keep in mind that an interpreted method can call a compiled method,but not the reverse, except via the use of the <code>EXECUTEMETHOD</code> and <code>EXECUTE FORMULA</code> commands.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_sharing-of-classes-and-functions"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_sharing-of-classes-and-functions"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Sharing of classes and functions</h2><p>By default, component classes and functions cannot be calledfrom the 4D method editor of the host project. If you want yourcomponent classes and functions to be exposed in the host projects,you need to declare a component namespace. Additionally, you cancontrol how component classes and functions are suggested in thehost method editor.</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_declaring-the-component-namespace"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_declaring-the-component-namespace"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Declaring the component namespace</h3><p>To allow classes and functions of your component to be exposedin the host projects, enter a value in the <a href="#develop-components.html_component-namespace-in-the-class-store"><strong>Component namespace in the class store</strong> option in theGeneral page</a> of the matrix project Settings. By default, thearea is empty: component classes are not available outside of thecomponent context.</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/namespace.png" /></p><blockquote><p>A <em>namespace</em> ensures that no conflict emerges when ahost project uses different components that have classes orfunctions with identical names. A component namespace must becompliant with <a href="#develop-components.html_object-properties">property namingrules</a>.</p></blockquote><p>When you enter a value, you declare that component classes andfunctions will be available in the <a href="#develop-components.html_cs">user class store(<strong>cs</strong>)</a> of the host project's code, through the<code>cs.&lt;value&gt;</code> namespace. For example, if you enter"eGeometry" as component namespace, assuming that you have createda <code>Rectangle</code> class containing a <code>getArea()</code>function, once your project is installed as a component, thedeveloper of the host project can write:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//in host project</span><span class="hljs-keyword">var</span> <span class="hljs-variable">$rect</span>: cs.eGeometry.Rectangle <span class="hljs-variable">$rect</span>:=cs.eGeometry.Rectangle.<span class="hljs-function">new</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>)<span class="hljs-variable">$area</span>:=<span class="hljs-variable">$rect</span>.<span class="hljs-function">getArea</span>()</code></pre><p>Of course, it is recommended to use a distinguished name toavoid any conflict. If a user class with the same name as acomponent already exists in the project, the user class is takeninto account and the component classes are ignored.</p><p>A component's ORDA classes are not available in its hostproject. For example, if there is a dataclass called Employees inyour component, you will not be able to use a"cs.Mycomponent.Employee" class in the host project.</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_hidden-classes"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_hidden-classes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Hidden classes</h3><p>Just like in any project, you can create hidden classes andfunctions in the component by prefixing names with an underscore("_"). When a <a href="#develop-components.html_declaring-the-component-namespace">componentnamespace is defined</a>, hidden classes and functions of thecomponent will not appear as suggestions when using codecompletion.</p><p>Note however that they can still be used if you know theirnames. For example, the following syntax is valid even if the<code>_Rectangle</code> class is hidden:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$rect</span>:=cs.eGeometry._Rectangle.<span class="hljs-function">new</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>)</code></pre><blockquote><p>Non-hidden functions inside a hidden class appear as suggestionswhen you use code completion with a class that <a href="#develop-components.html_inheritance">inherits</a> from it. Forexample, if a component has a <code>Teacher</code> class thatinherits from a <code>_Person</code> class, code completion for<code>Teacher</code> suggests non-hidden functions from<code>_Person</code>.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_code-completion-for-compiled-components"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_code-completion-for-compiled-components"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Code completion for compiled components</h2><p>To make your component easier to use for developers, you cancheck the <a href="#develop-components.html_component-namespace-in-the-class-store"><strong>Generate syntax file for code completion when compiled</strong>option in the General page</a> of the matrix project Settings.</p><p>A syntax file (JSON format) is then automatically created duringthe compilation phase, filled with the syntax of your component'sclasses, functions, and <a href="#develop-components.html_sharing-of-project-methods">exposedmethods</a>, and placed in the \Resources\en.lproj folder of thecomponent project. 4D uses the contents of that syntax file togenerate contextual help in the code editor, such as codecompletion and function syntax:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/syntax-code-completion-2.png" /><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/syntax-code-completion-1.png" /></p><p>If you don't enter a <a href="#develop-components.html_declaring-the-component-namespace">componentnamespace</a>, the resources for the classes and exposed methodsare not generated even if the syntax file option is checked.</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_passing-variables"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_passing-variables"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Passing variables</h2><p>The local, process and interprocess variables are not sharedbetween components and host projects. The only way to modifycomponent variables from the host project and vice versa is usingpointers.</p><p>Example using an array:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//In the host project:</span><span class="hljs-function">     ARRAY INTEGER</span>(MyArray;<span class="hljs-number">10</span>)<span class="hljs-function">     AMethod</span>(-&gt;MyArray)<span class="hljs-comment">//In the component, the AMethod project method contains:</span><span class="hljs-function">     APPEND TO ARRAY</span>(<span class="hljs-variable">$1</span>-&gt;;<span class="hljs-number">2</span>)</code></pre><p>Examples using variables:</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_TEXT</span>(myvariable)<span class="hljs-function">component_method1</span>(-&gt;myvariable)</code></pre><pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$p</span>)<span class="hljs-variable">$p</span>:=<span class="hljs-function">component_method2</span>(...)</code></pre><p>Without a pointer, a component can still access the value of ahost database variable (but not the variable itself) and viceversa:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//In the host database</span><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$input_t</span>)<span class="hljs-variable">$input_t</span>:=<span class="hljs-string">"DoSomething"</span><span class="hljs-function">component_method</span>(<span class="hljs-variable">$input_t</span>)<span class="hljs-comment">// component_method gets "DoSomething" in $1 (but not the $input_t variable)</span></code></pre><p>When you use pointers to allow components and the host projectto communicate, you need to take the following specificities intoaccount:</p><ul><li><p>The <code>Get pointer</code> command will not return a pointerto a variable of the host project if it is called from a componentand vice versa.</p></li><li><p>The component architecture allows the coexistence, within thesame interpreted project, of both interpreted and compiledcomponents (conversely, only compiled components can be used in acompiled project). In order to use pointers in this case, you mustrespect the following principle: the interpreter can unpoint apointer built in compiled mode; however, in compiled mode, youcannot unpoint a pointer built in interpreted mode. Let’sillustrate this principle with the following example: given twocomponents, C (compiled) and I (interpreted), installed in the samehost project.</p></li><li><p>If component C defines the <code>myCvar</code> variable,component I can access the value of this variable by using thepointer <code>-&gt;myCvar</code>.</p></li><li><p>If component I defines the <code>myIvar</code> variable,component C cannot access this variable by using the pointer<code>-&gt;myIvar</code>. This syntax causes an executionerror.</p></li><li><p>The comparison of pointers using the <code>RESOLVEPOINTER</code> command is not recommended with components since theprinciple of partitioning variables allows the coexistence ofvariables having the same name but with radically differentcontents in a component and the host project (or anothercomponent). The type of the variable can even be different in bothcontexts. If the <code>myptr1</code> and <code>myptr2</code>pointers each point to a variable, the following comparison willproduce an incorrect result:</p></li></ul><pre><code class="hljs css language-4d"><span class="hljs-function">     RESOLVE POINTER</span>(myptr1;vVarName1;vtablenum1;vfieldnum1)<span class="hljs-function">     RESOLVE POINTER</span>(myptr2;vVarName2;vtablenum2;vfieldnum2)<span class="hljs-keyword">     If</span>(vVarName1=vVarName2)      <span class="hljs-comment">//This test returns True even though the variables are different</span></code></pre><p>In this case, it is necessary to use the comparison ofpointers:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">     If</span>(myptr1=myptr2) <span class="hljs-comment">//This test returns False</span></code></pre><h2><a aria-hidden="true" class="anchor" id="develop-components.html_error-handling"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_error-handling"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Error handling</h2><p>An <a href="#error-handling.html">error-handling method</a>installed by the <code>ON ERR CALL</code> command only applies tothe running application. In the case of an error generated by acomponent, the <code>ON ERR CALL</code> error-handling method ofthe host project is not called, and vice versa.</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_access-to-tables-of-the-host-project"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_access-to-tables-of-the-host-project"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Access to tables of the host project</h2><p>Although components cannot use tables, pointers can allow hostprojects and components to communicate with each other. Forexample, here is a method that could be called from acomponent:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// calling a component method</span><span class="hljs-function">methCreateRec</span>(-&gt;[PEOPLE];-&gt;[PEOPLE]Name;<span class="hljs-string">"Julie Andrews"</span>)</code></pre><p>Within the component, the code of the <code>methCreateRec</code>method:</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$1</span>) <span class="hljs-comment">//Pointer on a table in host project</span><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$2</span>) <span class="hljs-comment">//Pointer on a field in host project</span><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$3</span>) <span class="hljs-comment">// Value to insert</span><span class="hljs-variable">$tablepointer</span>:=<span class="hljs-variable">$1</span><span class="hljs-variable">$fieldpointer</span>:=<span class="hljs-variable">$2</span><span class="hljs-function">CREATE RECORD</span>(<span class="hljs-variable">$tablepointer</span>-&gt;)<span class="hljs-variable">$fieldpointer</span>-&gt;:=<span class="hljs-variable">$3</span><span class="hljs-function">SAVE RECORD</span>(<span class="hljs-variable">$tablepointer</span>-&gt;)</code></pre><blockquote><p>In the context of a component, 4D assumes that a reference to atable form is a reference to the host table form (as componentscan't have tables.)</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_use-of-tables-and-fields"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_use-of-tables-and-fields"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Use of tables and fields</h2><p>A component cannot use the tables and fields defined in the 4Dstructure of the matrix project. However, you can create and useexternal databases, and then use their tables and fields accordingto your needs. You can create and manage external databases usingSQL. An external database is a 4D project that is independent fromthe main 4D project, but that you can work with from the main 4Dproject. Using an external database means temporarily designatingthis database as the current database, in other words, as thetarget database for the SQL queries executed by 4D. You createexternal databases using the SQL <code>CREATE DATABASE</code>command.</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_example"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_example"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h3><p>The following code is included in a component and performs threebasic actions with an external database:</p><ul><li>creates the external database if it does not alreadyexist,</li><li>adds data to the external database,</li><li>reads data from the external database.</li></ul><p>Creating the external database:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">&lt;&gt;MyDatabase</span>:=Get 4D folder+<span class="hljs-string">"\MyDB"</span> <span class="hljs-comment">// (Windows) stores the data in an authorized directory</span><span class="hljs-keyword"> Begin SQL</span>        CREATE DATABASE IF NOT EXISTS DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];        USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];        CREATE TABLE IF NOT EXISTS KEEPIT        (        ID INT32 PRIMARY KEY,        kind VARCHAR,        name VARCHAR,        code TEXT,        sort_order INT32        ); <span class="hljs-function">        CREATE UNIQUE INDEX id_index ON KEEPIT </span>(ID);         USE DATABASE SQL_INTERNAL;<span class="hljs-keyword">  End SQL</span></code></pre><p>Writing in the external database:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$Ptr_1</span>:=<span class="hljs-variable">$2 </span><span class="hljs-comment">// retrieves data from the host project through pointers</span> <span class="hljs-variable">$Ptr_2</span>:=<span class="hljs-variable">$3</span> <span class="hljs-variable">$Ptr_3</span>:=<span class="hljs-variable">$4</span> <span class="hljs-variable">$Ptr_4</span>:=<span class="hljs-variable">$5</span> <span class="hljs-variable">$Ptr_5</span>:=<span class="hljs-variable">$6</span><span class="hljs-keyword"> Begin SQL</span>         USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];         INSERT INTO KEEPIT        (ID, kind, name, code, sort_order)        VALUES        (:[<span class="hljs-variable">$Ptr_1</span>], :[<span class="hljs-variable">$Ptr_2</span>], :[<span class="hljs-variable">$Ptr_3</span>], :[<span class="hljs-variable">$Ptr_4</span>], :[<span class="hljs-variable">$Ptr_5</span>]);         USE DATABASE SQL_INTERNAL;<span class="hljs-keyword">  End SQL</span></code></pre><p>Reading from an external database:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$Ptr_1</span>:=<span class="hljs-variable">$2 </span><span class="hljs-comment">// accesses data of the host project through pointers</span> <span class="hljs-variable">$Ptr_2</span>:=<span class="hljs-variable">$3</span> <span class="hljs-variable">$Ptr_3</span>:=<span class="hljs-variable">$4</span> <span class="hljs-variable">$Ptr_4</span>:=<span class="hljs-variable">$5</span> <span class="hljs-variable">$Ptr_5</span>:=<span class="hljs-variable">$6</span><span class="hljs-keyword">  Begin SQL</span>     USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];     SELECT ALL ID, kind, name, code, sort_order    FROM KEEPIT    INTO :<span class="hljs-variable">$Ptr_1</span>, :<span class="hljs-variable">$Ptr_2</span>, :<span class="hljs-variable">$Ptr_3</span>, :<span class="hljs-variable">$Ptr_4</span>, :<span class="hljs-variable">$Ptr_5</span>;     USE DATABASE SQL_INTERNAL;<span class="hljs-keyword">  End SQL</span></code></pre><h2><a aria-hidden="true" class="anchor" id="develop-components.html_use-of-forms"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_use-of-forms"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Use of forms</h2><ul><li>Only “project forms” (forms that are not associated with anyspecific table) can be used in a component. Any project formspresent in the matrix project can be used by the component.</li><li>A component can call table forms of the host project. Note thatin this case it is necessary to use pointers rather than tablenames between brackets [] to specify the forms in the code of thecomponent.</li></ul><blockquote><p>If a component uses the <code>ADD RECORD</code> command, thecurrent Input form of the host project will be displayed, in thecontext of the host project. Consequently, if the form includesvariables, the component will not have access to them.</p></blockquote><ul><li>You can publish component forms as subforms in the hostprojects. This means that you can, more particularly, developcomponents offering graphic objects. For example, Widgets providedby 4D are based on the use of subforms in components.</li></ul><blockquote><p>In the context of a component, any referenced project form mustbelong to the component. For example, inside a component,referencing a host project form using <code>DIALOG</code> or<code>Open form window</code> will throw an error.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_use-of-resources"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_use-of-resources"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Use of resources</h2><p>Components can use resources located in the Resources folder ofthe component.</p><p>Automatic mechanisms are operational: the XLIFF files found inthe Resources folder of a component will be loaded by thiscomponent.</p><p>In a host project containing one or more components, eachcomponent as well as the host projects has its own “resourcesstring.” Resources are partitioned between the different projects:it is not possible to access the resources of component A fromcomponent B or the host project.</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_executing-initialization-code"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_executing-initialization-code"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Executing initialization code</h2><p>A component can execute 4D code automatically when opening orclosing the host database, for example in order to load and/or savethe preferences or user states related to the operation of the hostdatabase.</p><p>Executing initialization or closing code is done by means of the<code>On Host Database Event</code> database method.</p><blockquote><p>For security reasons, you must explicitly authorize theexecution of the <code>On Host Database Event</code> databasemethod in the host database in order to be able to call it. To dothis, you must check the <a href="#develop-components.html_options"><strong>Execute "On HostDatabase Event" method of the components</strong> option</a> in theSecurity page of the Settings.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_protection-of-components-compilation"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_protection-of-components-compilation"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Protection of components: compilation</h2><p>By default, all the code of a matrix project installed as acomponent is potentially visible from the host project. Inparticular:</p><ul><li>The shared project methods are found on the Methods Page of theExplorer and can be called in the methods of the host project.Their contents can be selected and copied in the preview area ofthe Explorer. They can also be viewed in the debugger. However,it's not possible to open them in the Method editor or modifythem.</li><li>The other project methods of the matrix project do not appearin the Explorer but they too can be viewed in the debugger of thehost project.</li><li>The non-hidden classes and functions can be viewed in thedebugger <a href="#develop-components.html_declaring-the-component-namespace">if anamespace is declared</a>.</li></ul><p>To protect the code of a component effectively, simply <a href="#develop-components.html_build-component">compile and build</a>the matrix project and provide it in the form of a .4dz file. Whena compiled matrix project is installed as a component:</p><ul><li>The shared project methods, classes and functions can be calledin the methods of the host project. Shared project methods are alsovisible on the Methods Page of the Explorer. However, theircontents will not appear in the preview area and in thedebugger.</li><li>The other project methods of the matrix project will neverappear.</li></ul><h2><a aria-hidden="true" class="anchor" id="develop-components.html_sharing-components"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_sharing-components"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Sharing components</h2><p>We encourage you to support the 4D developer community bysharing your components, preferably on the <a href="https://github.com/topics/4d-component">GitHub platform</a>. Werecommend that you use the<strong><code>4d-component</code></strong> topic to be correctlyreferenced.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#overview.html"><span class="arrow-prev">←</span><span>Overview</span></a><a class="docs-next button" href="#develop-plug-ins.html"><span>Developing Plug-ins</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#develop-components.html_definitions">Definitions</a></li><li><a href="#develop-components.html_basics">Basics</a></li><li><a href="#develop-components.html_scope-of-language-commands">Scope oflanguage commands</a><ul class="toc-headings"><li><a href="#develop-components.html_unusable-commands">Unusablecommands</a></li></ul></li><li><a href="#develop-components.html_sharing-of-project-methods">Sharing ofproject methods</a></li><li><a href="#develop-components.html_sharing-of-classes-and-functions">Sharingof classes and functions</a><ul class="toc-headings"><li><a href="#develop-components.html_declaring-the-component-namespace">Declaringthe component namespace</a></li><li><a href="#develop-components.html_hidden-classes">Hiddenclasses</a></li></ul></li><li><a href="#develop-components.html_code-completion-for-compiled-components">Codecompletion for compiled components</a></li><li><a href="#develop-components.html_passing-variables">Passingvariables</a></li><li><a href="#develop-components.html_error-handling">Errorhandling</a></li><li><a href="#develop-components.html_access-to-tables-of-the-host-project">Accessto tables of the host project</a></li><li><a href="#develop-components.html_use-of-tables-and-fields">Useof tables and fields</a><ul class="toc-headings"><li><a href="#develop-components.html_example">Example</a></li></ul></li><li><a href="#develop-components.html_use-of-forms">Use offorms</a></li><li><a href="#develop-components.html_use-of-resources">Use ofresources</a></li><li><a href="#develop-components.html_executing-initialization-code">Executinginitialization code</a></li><li><a href="#develop-components.html_protection-of-components-compilation">Protectionof components: compilation</a></li><li><a href="#develop-components.html_sharing-components">Sharingcomponents</a></li></ul></nav></div></div></body></html>