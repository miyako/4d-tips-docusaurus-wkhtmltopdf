<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="en"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Looping structures · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Looping structures repeat a sequence of statements until a condition is met or a number of times is reached."name="description" /><meta content="en" name="docsearch:language" /><meta content="Looping structures · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Looping structures repeat a sequence of statements until a condition is met or a number of times is reached."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#cf_looping.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Loopingstructures<a aria-hidden="true" class="anchor" id="looping.html"></a></h1></header><article><div><p><span>Looping structures repeat a sequence of statements until acondition is met or a number of times is reached.</span></p><h2><span><a aria-hidden="true" class="anchor" id="looping.html_whileend-while"></a><a aria-hidden="true" class="hash-link" href="#looping.html_whileend-while"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>While...End while</span></h2><p><span>The formal syntax of the <code>While...End while</code>control flow structure is:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-keyword"> While</span>(Boolean_Expression)<span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword"> End while</span></code></span></pre><p>A <code>While...End while</code> loop executes the statementsinside the loop as long as the Boolean expression is TRUE. It teststhe Boolean expression at the beginning of the loop and does notenter the loop at all if the expression is FALSE.</p><p>The <code>break</code> and <code>continue</code> statements are<a href="#looping.html_break-and-continue">described below</a>.</p><p>It is common to initialize the value tested in the Booleanexpression immediately before entering the <code>While...Endwhile</code> loop. Initializing the value means setting it tosomething appropriate, usually so that the Boolean expression willbe TRUE and <code>While...End while</code> executes the loop.</p><p>The Boolean expression must be set by something inside the loopor else the loop will continue forever. The following loopcontinues forever because <em>NeverStop</em> is always TRUE:</p><pre><code class="hljs css language-4d"> NeverStop:=<span class="hljs-literal">True</span><span class="hljs-keyword"> While</span>(NeverStop)<span class="hljs-keyword"> End while</span></code></pre><p>If you find yourself in such a situation, where a method isexecuting uncontrolled, you can use the trace facilities to stopthe loop and track down the problem. For more information abouttracing a method, see the <a href="#error-handling.html">Errorhandling</a> page.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_example"></a><a aria-hidden="true" class="hash-link"href="#looping.html_example"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h3><pre><code class="hljs css language-4d"><span class="hljs-function"> CONFIRM</span>(<span class="hljs-string">"Add a new record?"</span>) <span class="hljs-comment">//The user wants to add a record?</span><span class="hljs-keyword"> While</span>(OK=<span class="hljs-number">1</span>) <span class="hljs-comment">//Loop as long as the user wants to</span><span class="hljs-function">    ADD RECORD</span>([aTable]) <span class="hljs-comment">//Add a new record</span><span class="hljs-keyword"> End while</span> <span class="hljs-comment">//The loop always ends with End while</span></code></pre><p>In this example, the <code>OK</code> system variable is set bythe <code>CONFIRM</code> command before the loop starts. If theuser clicks the <strong>OK</strong> button in the confirmationdialog box, the <code>OK</code> system variable is set to 1 and theloop starts. Otherwise, the <code>OK</code> system variable is setto 0 and the loop is skipped. Once the loop starts, the <code>ADDRECORD</code> command keeps the loop going because it sets the<code>OK</code> system variable to 1 when the user saves therecord. When the user cancels (does not save) the last record, the<code>OK</code> system variable is set to 0 and the loop stops.</p><h2><a aria-hidden="true" class="anchor" id="looping.html_repeatuntil"></a><a aria-hidden="true" class="hash-link" href="#looping.html_repeatuntil"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Repeat...Until</h2><p>The formal syntax of the <code>Repeat...Until</code> controlflow structure is:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Repeat</span><span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword">Until</span>(Boolean_Expression)</code></pre><p>A <code>Repeat...Until</code> loop is similar to a <a href="#looping.html_whileend-while">While...End while</a> loop, exceptthat it tests the Boolean expression after the loop rather thanbefore. Thus, a <code>Repeat...Until</code> loop always executesthe loop once, whereas if the Boolean expression is initiallyFalse, a <code>While...End while</code> loop does not execute theloop at all.</p><p>The other difference with a <code>Repeat...Until</code> loop isthat the loop continues until the Boolean expression is TRUE.</p><p>The <code>break</code> and <code>continue</code> statements are<a href="#looping.html_break-and-continue">described below</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_example-1"></a><a aria-hidden="true" class="hash-link" href="#looping.html_example-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h3><p>Compare the following example with the example for the<code>While...End while</code> loop. Note that the Booleanexpression does not need to be initialized—there is no<code>CONFIRM</code> command to initialize the <code>OK</code>variable.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Repeat</span><span class="hljs-function">    ADD RECORD</span>([aTable])<span class="hljs-keyword"> Until</span>(OK=<span class="hljs-number">0</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_forend-for"></a><a aria-hidden="true" class="hash-link" href="#looping.html_forend-for"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>For...End for</h2><p>The formal syntax of the <code>For...End for</code> control flowstructure is:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">For</span>(Counter_Variable;Start_Expression;End_Expression{;Increment_Expression})<span class="hljs-function">   statement</span>(s)    {break}      {continue}<span class="hljs-keyword">End for</span></code></pre><p>The <code>For...End for</code> loop is a loop controlled by acounter variable:</p><ul><li>The counter variable <em>Counter_Variable</em> is a numericvariable (Real or Long Integer) that the <code>For...End for</code>loop initializes to the value specified by<em>Start_Expression</em>.</li><li>Each time the loop is executed, the counter variable isincremented by the value specified in the optional value<em>Increment_Expression</em>. If you do not specify<em>Increment_Expression</em>, the counter variable is incrementedby one (1), which is the default.</li><li>When the counter variable passes the <em>End_Expression</em>value, the loop stops.</li></ul><p><strong>Important:</strong> The numeric expressions<em>Start_Expression</em>, <em>End_Expression</em> and<em>Increment_Expression</em> are evaluated once at the beginningof the loop. If these expressions are variables, changing one ofthese variables within the loop will not affect the loop.</p><p><strong>Tip:</strong> However, for special purposes, you canchange the value of the counter variable <em>Counter_Variable</em>within the loop; this will affect the loop.</p><ul><li>Usually <em>Start_Expression</em> is less than<em>End_Expression</em>.</li><li>If <em>Start_Expression</em> and <em>End_Expression</em> areequal, the loop will execute only once.</li><li>If <em>Start_Expression</em> is greater than<em>End_Expression</em>, the loop will not execute at all unlessyou specify a negative <em>Increment_Expression</em>. See theexamples.</li></ul><p>The <code>break</code> and <code>continue</code> statements are<a href="#looping.html_break-and-continue">described below</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_basic-examples"></a><a aria-hidden="true" class="hash-link" href="#looping.html_basic-examples"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Basic examples</h3><ol><li>The following example executes 100 iterations:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)  <span class="hljs-comment">//Do something</span><span class="hljs-keyword"> End for</span></code></pre><ol start="2"><li>The following example goes through all elements of the arrayanArray:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray))  <span class="hljs-comment">//Do something with the element</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><ol start="3"><li>The following example goes through all the characters of thetext vtSomeText:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlChar</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Length</span>(vtSomeText))  <span class="hljs-comment">//Do something with the character if it is a TAB</span><span class="hljs-keyword">    If</span>(<span class="hljs-function">Character code</span>(vtSomeText<span class="hljs-variable">[[$vlChar]]</span>)=Tab)  <span class="hljs-comment">//...</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><ol start="4"><li>The following example goes through the selected records for thetable [aTable]:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> FIRST RECORD</span>([aTable])<span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlRecord</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Records in selection</span>([aTable]))  <span class="hljs-comment">//Do something with the record</span><span class="hljs-function">    SEND RECORD</span>([aTable])  <span class="hljs-comment">//...</span>  <span class="hljs-comment">//Go to the next record</span><span class="hljs-function">    NEXT RECORD</span>([aTable])<span class="hljs-keyword"> End for</span></code></pre><p>Most of the <code>For...End for</code> loops you will write inyour projects will look like the ones listed in these examples.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_decrementing-variable-counter"></a><a aria-hidden="true" class="hash-link" href="#looping.html_decrementing-variable-counter"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Decrementing variable counter</h3><p>In some cases, you may want to have a loop whose countervariable is decreasing rather than increasing. To do so, you mustspecify <em>Start_Expression</em> greater than<em>End_Expression</em> and a negative<em>Increment_Expression</em>. The following examples do the samething as the previous examples, but in reverse order:</p><ol start="5"><li>The following example executes 100 iterations:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">100</span>;<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Do something</span><span class="hljs-keyword"> End for</span></code></pre><ol start="6"><li>The following example goes through all elements of the arrayanArray:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-function">Size of array</span>(anArray);<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Do something with the element</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><ol start="7"><li>The following example goes through all the characters of thetext vtSomeText:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlChar</span>;<span class="hljs-function">Length</span>(vtSomeText);<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Do something with the character if it is a TAB</span><span class="hljs-keyword">    If</span>(<span class="hljs-function">Character code</span>(vtSomeText<span class="hljs-variable">[[$vlChar]]</span>)=Tab)  <span class="hljs-comment">//...</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><ol start="8"><li>The following example goes through the selected records for thetable [aTable]:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> LAST RECORD</span>([aTable])<span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlRecord</span>;<span class="hljs-function">Records in selection</span>([aTable]);<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Do something with the record</span><span class="hljs-function">    SEND RECORD</span>([aTable])  <span class="hljs-comment">//...</span>  <span class="hljs-comment">//Go to the previous record</span><span class="hljs-function">    PREVIOUS RECORD</span>([aTable])<span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_incrementing-the-counter-variable-by-more-than-one"></a><a aria-hidden="true"class="hash-link" href="#looping.html_incrementing-the-counter-variable-by-more-than-one"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Incrementing the counter variable by more than one</h3><p>If you need to, you can use an <em>Increment_Expression</em>(positive or negative) whose absolute value is greater thanone.</p><ol start="9"><li>The following loop addresses only the even elements of thearray anArray:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">2</span>;<span class="hljs-function">Size of array</span>(anArray);<span class="hljs-number">2</span>)  <span class="hljs-comment">//Do something with the element #2,#4...#2n</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_comparing-looping-structures"></a><a aria-hidden="true" class="hash-link" href="#looping.html_comparing-looping-structures"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Comparing looping structures</h3><p>Let's go back to the first <code>For...End for</code> example.The following example executes 100 iterations:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)  <span class="hljs-comment">//Do something</span><span class="hljs-keyword"> End for</span></code></pre><p>It is interesting to see how the <code>While...End while</code>loop and <code>Repeat...Until</code> loop would perform the sameaction. Here is the equivalent <code>While...End while</code>loop:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$i</span>:=<span class="hljs-number">1</span> <span class="hljs-comment">//Initialize the counter</span><span class="hljs-keyword"> While</span>(<span class="hljs-variable">$i</span>&lt;=<span class="hljs-number">100</span>) <span class="hljs-comment">//Loop 100 times</span>  <span class="hljs-comment">//Do something</span>    <span class="hljs-variable">$i</span>:=<span class="hljs-variable">$i</span>+<span class="hljs-number">1</span> <span class="hljs-comment">//Need to increment the counter</span><span class="hljs-keyword"> End while</span></code></pre><p>Here is the equivalent <code>Repeat...Until</code> loop:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$i</span>:=<span class="hljs-number">1</span> <span class="hljs-comment">//Initialize the counter</span><span class="hljs-keyword"> Repeat</span>  <span class="hljs-comment">//Do something</span>    <span class="hljs-variable">$i</span>:=<span class="hljs-variable">$i</span>+<span class="hljs-number">1</span> <span class="hljs-comment">//Need to increment the counter</span><span class="hljs-keyword"> Until</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">100</span>) <span class="hljs-comment">//Loop 100 times</span></code></pre><p><strong>Tip:</strong> The <code>For...End for</code> loop isusually faster than the <code>While...End while</code> and<code>Repeat...Until</code> loops, because 4D tests the conditioninternally for each cycle of the loop and increments the counter.Therefore, use the <code>For...End for</code> loop wheneverpossible.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_optimizing-the-execution-of-the-forend-for-loops"></a><a aria-hidden="true"class="hash-link" href="#looping.html_optimizing-the-execution-of-the-forend-for-loops"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Optimizing the execution of the For...End for loops</h3><p>You can use Real and Long Integer variables as well asinterprocess, process, and local variable counters. For lengthyrepetitive loops, especially in compiled mode, use local LongInteger variables.</p><ol start="10"><li>Here is an example:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> C_LONGINT</span>(<span class="hljs-variable">$vlCounter</span>) <span class="hljs-comment">//use local Long Integer variables</span><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlCounter</span>;<span class="hljs-number">1</span>;<span class="hljs-number">10000</span>)  <span class="hljs-comment">//Do something</span><span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_nested-forend-for-looping-structures"></a><a aria-hidden="true"class="hash-link" href="#looping.html_nested-forend-for-looping-structures"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Nested For...End for looping structures</h3><p>You can nest as many control structures as you (reasonably)need. This includes nesting <code>For...End for</code> loops. Toavoid mistakes, make sure to use different counter variables foreach looping structure.</p><p>Here are two examples:</p><ol><li>The following example goes through all the elements of atwo-dimensional array:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray))  <span class="hljs-comment">//...</span>  <span class="hljs-comment">//Do something with the row</span>  <span class="hljs-comment">//...</span><span class="hljs-keyword">    For</span>(<span class="hljs-variable">$vlSubElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray{<span class="hljs-variable">$vlElem}</span>))  <span class="hljs-comment">//Do something with the element</span>       anArray{<span class="hljs-variable">$vlElem}{</span><span class="hljs-variable">$vlSubElem}</span>:=...<span class="hljs-keyword">    End for</span><span class="hljs-keyword"> End for</span></code></pre><ol start="2"><li>The following example builds an array of pointers to all thedate fields present in the database:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY POINTER</span>(<span class="hljs-variable">$apDateFields</span>;<span class="hljs-number">0</span>) <span class="hljs-variable">$vlElem</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-number">1</span>;Get last table number)<span class="hljs-keyword">    If</span>(<span class="hljs-function">Is table number valid</span>(<span class="hljs-variable">$vlTable</span>))<span class="hljs-keyword">       For</span>(<span class="hljs-variable">$vlField</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Get last field number</span>(<span class="hljs-variable">$vlTable</span>))<span class="hljs-keyword">          If</span>(<span class="hljs-function">Is field number valid</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-variable">$vlField</span>))             <span class="hljs-variable">$vpField</span>:=<span class="hljs-function">Field</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-variable">$vlField</span>)<span class="hljs-keyword">             If</span>(<span class="hljs-function">Type</span>(<span class="hljs-variable">$vpField</span>-&gt;)=Is date)                <span class="hljs-variable">$vlElem</span>:=<span class="hljs-variable">$vlElem</span>+<span class="hljs-number">1</span><span class="hljs-function">                INSERT IN ARRAY</span>(<span class="hljs-variable">$apDateFields</span>;<span class="hljs-variable">$vlElem</span>)                <span class="hljs-variable">$apDateFields{</span><span class="hljs-variable">$vlElem}</span>:=<span class="hljs-variable">$vpField</span><span class="hljs-keyword">             End if</span><span class="hljs-keyword">          End if</span><span class="hljs-keyword">       End for</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_for-eachend-for-each"></a><a aria-hidden="true"class="hash-link" href="#looping.html_for-eachend-for-each"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>For each...End for each</h2><p>The formal syntax of the <code>For each...End for each</code>control flow structure is:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For each</span>(Current_Item;Expression{;begin{;end}}){<span class="hljs-keyword">Until</span>|<span class="hljs-keyword">While</span>}(Boolean_Expression)}<span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword"> End for each</span></code></pre><p>The <code>For each...End for each</code> structure iterates aspecified <em>Current_item</em> over all values of the<em>Expression</em>. The <em>Current_item</em> type depends on the<em>Expression</em> type. The <code>For each...End for each</code>loop can iterate through three <em>Expression</em> types:</p><ul><li>collections: loop through each element of the collection,</li><li>entity selections: loop through each entity,</li><li>objects: loop through each object property.</li></ul><p>The following table compares the three types of <code>Foreach...End for each</code>:</p><table><thead><tr><th></th><th>Loop through collections</th><th>Loop through entity selections</th><th>Loop through objects</th></tr></thead><tbody><tr><td>Current_Item type</td><td>Variable of the same type as collection elements</td><td>Entity</td><td>Text variable</td></tr><tr><td>Expression type</td><td>Collection (with elements of the same type)</td><td>Entity selection</td><td>Object</td></tr><tr><td>Number of loops (by default)</td><td>Number of collection elements</td><td>Number of entities in the selection</td><td>Number of object properties</td></tr><tr><td>Support of begin / end parameters</td><td>Yes</td><td>Yes</td><td>No</td></tr></tbody></table><ul><li>The number of loops is evaluated at startup and will not changeduring the processing. Adding or removing items during the loop isusually not recommended since it may result in missing or redundantiterations.</li><li>By default, the enclosed <em>statement(s)</em> are executed foreach value in <em>Expression</em>. It is, however, possible to exitthe loop by testing a condition either at the begining of the loop(<code>While</code>) or at the end of the loop(<code>Until</code>).</li><li>The <em>begin</em> and <em>end</em> optional parameters can beused with collections and entity selections to define boundariesfor the loop.</li><li>The <code>For each...End for each</code> loop can be used on a<strong>shared collection</strong> or a <strong>sharedobject</strong>. If your code needs to modify one or moreelement(s) of the collection or object properties, you need to usethe <code>Use...End use</code> keywords. Depending on your needs,you can call the <code>Use...End use</code> keywords:<ul><li>before entering the loop, if items should be modified togetherfor integrity reasons, or</li><li>within the loop when only some elements/properties need to bemodified and no integrity management is required.</li></ul></li></ul><p>The <code>break</code> and <code>continue</code> statements are<a href="#looping.html_break-and-continue">described below</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_loop-through-collections"></a><a aria-hidden="true"class="hash-link" href="#looping.html_loop-through-collections"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Loop through collections</h3><p>When <code>For each...End for each</code> is used with an<em>Expression</em> of the <em>Collection</em> type, the<em>Current_Item</em> parameter is a variable of the same type asthe collection elements. By default, the number of loops is basedon the number of items of the collection.</p><p>The collection must contain only elements of the same type,otherwise an error will be returned as soon as the<em>Current_Item</em> variable is assigned the first mismatchedvalue type.</p><p>At each loop iteration, the <em>Current_Item</em> variable isautomatically filled with the matching element of the collection.The following points must be taken into account:</p><ul><li>If the <em>Current_Item</em> variable is of the object type orcollection type (i.e. if <em>Expression</em> is a collection ofobjects or of collections), modifying this variable willautomatically modify the matching element of the collection(because objects and collections share the same references). If thevariable is of a scalar type, only the variable will bemodified.</li><li>The <em>Current_Item</em> variable must be of the same type asthe collection elements. If any collection item is not of the sametype as the variable, an error is generated and the loopstops.</li><li>If the collection contains elements with a<strong>Null</strong> value, an error will be generated if the<em>Current_Item</em> variable type does not support<strong>Null</strong> values (such as longint variables).</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_example-2"></a><a aria-hidden="true" class="hash-link" href="#looping.html_example-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><p>You want to compute some statistics for a collection ofnumbers:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_COLLECTION</span>(<span class="hljs-variable">$nums</span>) <span class="hljs-variable">$nums</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">10</span>;<span class="hljs-number">5001</span>;<span class="hljs-number">6665</span>;<span class="hljs-number">33</span>;<span class="hljs-number">1</span>;<span class="hljs-number">42</span>;<span class="hljs-number">7850</span>)<span class="hljs-function"> C_LONGINT</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$vEven</span>;<span class="hljs-variable">$vOdd</span>;<span class="hljs-variable">$vUnder</span>;<span class="hljs-variable">$vOver</span>)<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$nums</span>)<span class="hljs-keyword">    If</span>(<span class="hljs-variable">$item</span>%<span class="hljs-number">2</span>=<span class="hljs-number">0</span>)       <span class="hljs-variable">$vEven</span>:=<span class="hljs-variable">$vEven</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    Else</span>       <span class="hljs-variable">$vOdd</span>:=<span class="hljs-variable">$vOdd</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword">    Case of</span>       :(<span class="hljs-variable">$item</span>&lt;<span class="hljs-number">5000</span>)          <span class="hljs-variable">$vUnder</span>:=<span class="hljs-variable">$vUnder</span>+<span class="hljs-number">1</span>       :(<span class="hljs-variable">$item</span>&gt;<span class="hljs-number">6000</span>)          <span class="hljs-variable">$vOver</span>:=<span class="hljs-variable">$vOver</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    End case</span><span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$vEven=3, $vOdd=4</span>  <span class="hljs-comment">//$vUnder=4,$vOver=2</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_loop-through-entity-selections"></a><a aria-hidden="true" class="hash-link" href="#looping.html_loop-through-entity-selections"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Loop through entity selections</h3><p>When <code>For each...End for each</code> is used with an<em>Expression</em> of the <em>Entity selection</em> type, the<em>Current_Item</em> parameter is the entity that is currentlyprocessed.</p><p>The number of loops is based on the number of entities in theentity selection. On each loop iteration, the <em>Current_Item</em>parameter is automatically filled with the entity of the entityselection that is currently processed.</p><p><strong>Note:</strong> If the entity selection contains anentity that was removed meanwhile by another process, it isautomatically skipped during the loop.</p><p>Keep in mind that any modifications applied on the currententity must be saved explicitly using <code>entity.save()</code>.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_example-3"></a><a aria-hidden="true" class="hash-link" href="#looping.html_example-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><p>You want to raise the salary of all British employees in anentity selection:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_OBJECT</span>(emp)<span class="hljs-keyword"> For each</span>(emp;ds.Employees.<span class="hljs-function">query</span>(<span class="hljs-string">"country='UK'"</span>))    emp.salary:=emp.salary*<span class="hljs-number">1</span>,<span class="hljs-number">03</span>    emp.<span class="hljs-function">save</span>()<span class="hljs-keyword"> End for each</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_loop-through-object-properties"></a><a aria-hidden="true" class="hash-link" href="#looping.html_loop-through-object-properties"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Loop through object properties</h3><p>When <code>For each...End for each</code> is used with an<em>Expression</em> of the Object type, the <em>Current_Item</em>parameter is a text variable automatically filled with the name ofthe currently processed property.</p><p>The properties of the object are processed according to theirorder of creation. During the loop, properties can be added to orremoved from the object, without modifying the number of loops thatwill remain based on the original number of properties of theobject.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_example-4"></a><a aria-hidden="true" class="hash-link" href="#looping.html_example-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><p>You want to switch the names to uppercase in the followingobject:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"firstname"</span>: <span class="hljs-string">"gregory"</span>,    <span class="hljs-string">"lastname"</span>: <span class="hljs-string">"badikora"</span>,    <span class="hljs-string">"age"</span>: <span class="hljs-number">20</span>}</code></pre><p>You can write:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For each</span>(property;vObject)<span class="hljs-keyword">    If</span>(<span class="hljs-function">Value type</span>(vObject[property])=Is text)       vObject[property]:=<span class="hljs-function">Uppercase</span>(vObject[property])<span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for each</span></code></pre><pre><code class="hljs">{    <span class="hljs-attr">"firstname"</span>: <span class="hljs-string">"GREGORY"</span>,    <span class="hljs-attr">"lastname"</span>: <span class="hljs-string">"BADIKORA"</span>,    <span class="hljs-attr">"age"</span>: <span class="hljs-number">20</span>}</code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_begin--end-parameters"></a><a aria-hidden="true"class="hash-link" href="#looping.html_begin--end-parameters"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>begin / end parameters</h3><p>You can define bounds to the iteration using the optional beginand end parameters.</p><p><strong>Note:</strong> The <em>begin</em> and <em>end</em>parameters can only be used in iterations through collections andentity selections (they are ignored on object properties).</p><ul><li>In the <em>begin</em> parameter, pass the element position in<em>Expression</em> at which to start the iteration (<em>begin</em>is included).</li><li>In the <em>end</em> parameter, you can also pass the elementposition in <em>Expression</em> at which to stop the iteration(<em>end</em> is excluded).</li></ul><p>If <em>end</em> is omitted or if <em>end</em> is greater thanthe number of elements in <em>Expression</em>, elements areiterated from <em>begin</em> until the last one (included). If the<em>begin</em> and <em>end</em> parameters are positive values,they represent actual positions of elements in <em>Expression</em>.If <em>begin</em> is a negative value, it is recalculed as<code>begin:=begin+Expression size</code> (it is considered as theoffset from the end of <em>Expression</em>). If the calculatedvalue is negative, <em>begin</em> is set to 0.<strong>Note:</strong> Even if begin is negative, the iteration isstill performed in the standard order. If <em>end</em> is anegative value, it is recalculed as <code>end:=end+Expressionsize</code></p><p>For example:</p><ul><li>a collection contains 10 elements (numbered from 0 to 9)</li><li>begin=-4 -&gt; begin=-4+10=6 -&gt; iteration starts at the 6thelement (#5)</li><li>end=-2 -&gt; end=-2+10=8 -&gt; iteration stops before the 8thelement (#7), i.e. at the 7th element.</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_example-5"></a><a aria-hidden="true" class="hash-link" href="#looping.html_example-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><pre><code class="hljs css language-4d"><span class="hljs-function"> C_COLLECTION</span>(<span class="hljs-variable">$col</span>;<span class="hljs-variable">$col2</span>) <span class="hljs-variable">$col</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"a"</span>;<span class="hljs-string">"b"</span>;<span class="hljs-string">"c"</span>;<span class="hljs-string">"d"</span>;<span class="hljs-string">"e"</span>) <span class="hljs-variable">$col2</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">1</span>;<span class="hljs-number">2</span>;<span class="hljs-number">3</span>)<span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$col</span>;<span class="hljs-number">0</span>;<span class="hljs-number">3</span>)    <span class="hljs-variable">$col2</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$col2=[1,2,3,"a","b","c"]</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$col</span>;<span class="hljs-number">-2</span>;<span class="hljs-number">-1</span>)    <span class="hljs-variable">$col2</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$col2=[1,2,3,"a","b","c","d"]</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_until-and-while-conditions"></a><a aria-hidden="true"class="hash-link" href="#looping.html_until-and-while-conditions"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Until and While conditions</h3><p>You can control the <code>For each...End for each</code>execution by adding an <code>Until</code> or a <code>While</code>condition to the loop. When an <code>Until(condition)</code>statement is associated to the loop, the iteration will stop assoon as the condition is evaluated to <code>True</code>, whereaswhen is case of a <code>While(condition)</code> statement, theiteration will stop when the condition is first evaluated to<code>False</code>.</p><p>You can pass either keyword depending on your needs:</p><ul><li>The <code>Until</code> condition is tested at the end of eachiteration, so if the <em>Expression</em> is not empty or null, theloop will be executed at least once.</li><li>The <code>While</code> condition is tested at the beginning ofeach iteration, so according to the condition result, the loop maynot be executed at all.</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_example-6"></a><a aria-hidden="true" class="hash-link" href="#looping.html_example-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><pre><code class="hljs css language-4d"> <span class="hljs-variable">$colNum</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">1</span>;<span class="hljs-number">2</span>;<span class="hljs-number">3</span>;<span class="hljs-number">4</span>;<span class="hljs-number">5</span>;<span class="hljs-number">6</span>;<span class="hljs-number">7</span>;<span class="hljs-number">8</span>;<span class="hljs-number">9</span>;<span class="hljs-number">10</span>)  <span class="hljs-variable">$total</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$num</span>;<span class="hljs-variable">$colNum</span>)<span class="hljs-keyword">While</span>(<span class="hljs-variable">$total</span>&lt;<span class="hljs-number">30</span>) <span class="hljs-comment">//tested at the beginning</span>    <span class="hljs-variable">$total</span>:=<span class="hljs-variable">$total</span>+<span class="hljs-variable">$num</span><span class="hljs-keyword"> End for each</span><span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$total</span>)) <span class="hljs-comment">//$total = 36 (1+2+3+4+5+6+7+8)</span>  <span class="hljs-variable">$total</span>:=<span class="hljs-number">1000</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$num</span>;<span class="hljs-variable">$colNum</span>)<span class="hljs-keyword">Until</span>(<span class="hljs-variable">$total</span>&gt;<span class="hljs-number">30</span>) <span class="hljs-comment">//tested at the end</span>    <span class="hljs-variable">$total</span>:=<span class="hljs-variable">$total</span>+<span class="hljs-variable">$num</span><span class="hljs-keyword"> End for each</span><span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$total</span>)) <span class="hljs-comment">//$total = 1001 (1000+1)</span></code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_break-and-continue"></a><a aria-hidden="true" class="hash-link" href="#looping.html_break-and-continue"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>break</code> and <code>continue</code></h2><p>All looping structures above support both <code>break</code> and<code>continue</code> statements. These statements give you morecontrol over the loops by allowing to exit the loop and to bypassthe current iteration at any moment.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_break"></a><a aria-hidden="true" class="hash-link"href="#looping.html_break"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>break</h3><p>The <code>break</code> statement terminates the loop containingit. Control of the program flows to the statement immediately afterthe body of the loop.</p><p>If the <code>break</code> statement is inside a <a href="#looping.html_nested-forend-for-looping-structures">nestedloop</a> (loop inside another loop), the <code>break</code>statement will terminate the innermost loop.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_example-7"></a><a aria-hidden="true" class="hash-link" href="#looping.html_example-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">For</span> (vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$tab{vCounter}</span>=<span class="hljs-string">""</span>) <span class="hljs-comment">//if a condition becomes true</span>        break <span class="hljs-comment">//end of the for loop</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword">End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_continue"></a><a aria-hidden="true" class="hash-link"href="#looping.html_continue"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>continue</h3><p>The <code>continue</code> statement terminates execution of thestatements in the current iteration of the current loop, andcontinues execution of the loop with the next iteration.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-keyword">For</span> (<span class="hljs-variable">$i</span>; <span class="hljs-number">0</span>; <span class="hljs-number">9</span>)<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$i</span>=<span class="hljs-number">3</span>)        continue <span class="hljs-comment">//go directly to the next iteration</span><span class="hljs-keyword">    End if</span>    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$text</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$i</span>)<span class="hljs-keyword">End for</span><span class="hljs-comment">// $text="012456789" </span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#branching.html"><span class="arrow-prev">←</span> <span>Branchingstructures</span></a><a class="docs-next button" href="#error-handling.html"><span>Error handling</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#looping.html_whileend-while">While...End while</a><ul class="toc-headings"><li><a href="#looping.html_example">Example</a></li></ul></li><li><a href="#looping.html_repeatuntil">Repeat...Until</a><ul class="toc-headings"><li><a href="#looping.html_example-1">Example</a></li></ul></li><li><a href="#looping.html_forend-for">For...End for</a><ul class="toc-headings"><li><a href="#looping.html_basic-examples">Basic examples</a></li><li><a href="#looping.html_decrementing-variable-counter">Decrementing variablecounter</a></li><li><a href="#looping.html_incrementing-the-counter-variable-by-more-than-one">Incrementingthe counter variable by more than one</a></li><li><a href="#looping.html_comparing-looping-structures">Comparinglooping structures</a></li><li><a href="#looping.html_optimizing-the-execution-of-the-forend-for-loops">Optimizingthe execution of the For...End for loops</a></li><li><a href="#looping.html_nested-forend-for-looping-structures">NestedFor...End for looping structures</a></li></ul></li><li><a href="#looping.html_for-eachend-for-each">For each...End foreach</a><ul class="toc-headings"><li><a href="#looping.html_loop-through-collections">Loop throughcollections</a></li><li><a href="#looping.html_loop-through-entity-selections">Loopthrough entity selections</a></li><li><a href="#looping.html_loop-through-object-properties">Loopthrough object properties</a></li><li><a href="#looping.html_begin--end-parameters">begin / endparameters</a></li><li><a href="#looping.html_until-and-while-conditions">Until andWhile conditions</a></li></ul></li><li><a href="#looping.html_break-and-continue"><code>break</code>and <code>continue</code></a><ul class="toc-headings"><li><a href="#looping.html_break">break</a></li><li><a href="#looping.html_continue">continue</a></li></ul></li></ul></nav></div></div></body></html>