<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="en"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Using a remote datastore · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="A [datastore](/docs/Rx/en/ORDA/dsmapping.html#datastore) exposed on a 4D application can be accessed simultaneously through different clients:"name="description" /><meta content="en" name="docsearch:language" /><meta content="Using a remote datastore · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="A [datastore](/docs/Rx/en/ORDA/dsmapping.html#datastore) exposed on a 4D application can be accessed simultaneously through different clients:"property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#remoteDatastores.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Using a remotedatastore<a aria-hidden="true" class="anchor" id="datastores.html"></a></h1></header><article><div><p><span>A <a href="#datastores.html_datastore">datastore</a>exposed on a 4D application can be accessed simultaneously throughdifferent clients:</span></p><ul><li><span>4D remote applications using ORDA to access the maindatastore with the <code>ds</code> command. Note that the 4D remoteapplication can still access the database in classic mode. Theseaccesses are handled by the <strong>4D applicationserver</strong>.</span></li><li><span>Other 4D applications (4D remote, 4D Server) opening asession on the remote datastore through the <a href="#datastores.html_open-datastore"><code>Open datastore</code></a>command. These accesses are handled by the <strong>HTTP RESTserver</strong>.</span></li><li><span><a href="https://developer.4d.com/go-mobile/">4D for iOSor 4D for Android</a> queries for updating mobile applications.These accesses are handled by the <strong>HTTPserver</strong>.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="datastores.html_opening-sessions"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_opening-sessions"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Opening sessions</span></h2><p><span>When you work with a remote datastore referenced throughcalls to the <code>Open datastore</code> command, the connectionbetween the requesting processes and the remote datastore ishandled via sessions.</span></p><p><span>A session in created on the remote datastore to handle theconnection. This session is identified using a internal session IDwhich is associated to the <code>localID</code> on the 4Dapplication side. This session automatically manages access todata, entity selections, or entities.</span></p><p><span>The <code>localID</code> is local to the machine thatconnects to the remote datastore, which means:</span></p><ul><li><span>If other processes of the same application need to accessthe same remote datastore, they can use the same<code>localID</code> and thus, share the same session.</span></li><li><span>If another process of the same application opens the sameremote datastore but with another <code>localID</code>, it willcreate a new session on the remote datastore.</span></li><li><span>If another machine connects to the same remote datastorewith the same <code>localID</code>, it will create another sessionwith another cookie.</span></li></ul><p><span>These principles are illustrated in the followinggraphics:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/sessions.png" /></span></p><blockquote><p><span>For sessions opened by REST requests, please refer to<a href="#authUsers.html">Users and sessions</a>.</span></p></blockquote><h3><span><a aria-hidden="true" class="anchor" id="datastores.html_viewing-sessions"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_viewing-sessions"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Viewing sessions</span></h3><p><span>Processes that manage sessions for datastore access areshown in the 4D Server administration window:</span></p><ul><li><span>name: "REST Handler: &lt;process name&gt;"</span></li><li><span>type: HTTP Server Worker type</span></li><li><span>session: session name is the user name passed to the<code>Open datastore</code> command.</span></li></ul><p><span>In the following example, two processes are running forthe same session:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/sessionAdmin.png" /></span></p><h3><span><a aria-hidden="true" class="anchor" id="datastores.html_locking-and-transactions"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_locking-and-transactions"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Locking and transactions</span></h3><p><span>ORDA features related to entity locking and transactionare managed at process level in remote datastores, just like inORDA client/server mode:</span></p><ul><li><span>If a process locks an entity from a remote datastore, theentity is locked for all other processes, even when these processesshare the same session (see <a href="#datastores.html_entity-locking">Entity locking</a>). If severalentities pointing to a same record have been locked in a process,they must be all unlocked in the process to remove the lock. If alock has been put on an entity, the lock is removed when there isno more reference to this entity in memory.</span></li><li><span>Transactions can be started, validated or cancelledseparately on each remote datastore using the<code>dataStore.startTransaction()</code>,<code>dataStore.cancelTransaction()</code>, and<code>dataStore.validateTransaction()</code> functions. They do notimpact other datastores.</span></li><li><span>Classic 4D language commands (<code>STARTTRANSACTION</code>, <code>VALIDATE TRANSACTION</code>, <code>CANCELTRANSACTION</code>) only apply to the main datastore (returned by<code>ds</code>). If an entity from a remote datastore is hold by atransaction in a process, other processes cannot update it, even ifthese processes share the same session.</span></li><li><span>Locks on entities are removed and transactions arerollbacked:</span><ul><li><span>when the process is killed.</span></li><li><span>when the session is closed on the server</span></li><li><span>when the session is killed from the server administrationwindow.</span></li></ul></li></ul><h3><span><a aria-hidden="true" class="anchor" id="datastores.html_closing-sessions"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_closing-sessions"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Closing sessions</span></h3><p><span>A session is automatically closed by 4D when there hasbeen no activity during its timeout period. The default timeout is60 mn, but this value can be modified using the<em>connectionInfo</em> parameter of the <code>Opendatastore</code> command.</span></p><p><span>If a request is sent to the remote datastore after thesession has been closed, it is automatically re-created if possible(license available, server not stopped...). However, keep in mindthat the context of the session regarding locks and transactions islost (see above).</span></p><h2><span><a aria-hidden="true" class="anchor" id="datastores.html_clientserver-optimization"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_clientserver-optimization"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Client/server optimization</span></h2><p><span>4D provides optimizations for ORDA requests that useentity selections or load entities in client/server configurations(datastore accessed remotely through <code>ds</code> or via<code>Open datastore</code>). These optimizations speed up theexecution of your 4D application by reducing drastically the volumeof information transmitted over the network. Theyinclude:</span></p><ul><li><span>the <strong>optimization context</strong></span></li><li><span>the <strong>ORDA cache</strong></span></li></ul><h3><span><a aria-hidden="true" class="anchor" id="datastores.html_context"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_context"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Context</span></h3><p><span>The optimization context is based upon the followingimplementations:</span></p><ul><li><p><span>When a client requests an entity selection from theserver, 4D automatically "learns" which attributes of the entityselection are actually used on the client side during the codeexecution, and builds a corresponding "optimization context". Thiscontext is attached to the entity selection and stores the usedattributes. It will be dynamically updated if other attributes areused afterwards. The following methods and functions trigger thelearning phase:</span></p><ul><li><span><a href="#datastores.html_create-entity-selection"><code>Create entityselection</code></a></span></li><li><span><a href="#datastores.html_fromcollection"><code>dataClass.fromCollection()</code></a></span></li><li><span><a href="#datastores.html_all"><code>dataClass.all()</code></a></span></li><li><span><a href="#datastores.html_get"><code>dataClass.get()</code></a></span></li><li><span><a href="#datastores.html_query"><code>dataClass.query()</code></a></span></li><li><span><a href="#datastores.html_query"><code>entitySelection.query()</code></a></span></li></ul></li><li><p><span>Subsequent requests sent to the server on the same entityselection automatically reuse the optimization context and only getnecessary attributes from the server, which accelerates theprocessing. For example, in an <a href="#datastores.html_entity-selection-based-list-box">entityselection-based list box</a>, the learning phase takes place duringthe display of the first row. the display of the next rows isoptimized. The following functions automatically associate theoptimization context of the source entity selection to the returnedentity selection:</span></p><ul><li><span><a href="#datastores.html_and"><code>entitySelection.and()</code></a></span></li><li><span><a href="#datastores.html_minus"><code>entitySelection.minus()</code></a></span></li><li><span><a href="#datastores.html_or"><code>entitySelection.or()</code></a></span></li><li><span><a href="#datastores.html_orderBy"><code>entitySelection.orderBy()</code></a></span></li><li><span><a href="#datastores.html_slice"><code>entitySelection.slice()</code></a></span></li><li><span><a href="#datastores.html_drop"><code>entitySelection.drop()</code></a></span></li></ul></li><li><p><span>An existing optimization context can be passed as aproperty to another entity selection of the same dataclass, thusbypassing the learning phase and accelerating the application (see<a href="#datastores.html_reusing-the-context-property">Using thecontext property</a> below).</span></p></li><li><p><span>You can build optimization contexts manually using the<a href="#datastores.html_setremotecontextinfo"><code>dataStore.setRemoteContextInfo()</code></a>function (see <a href="#datastores.html_preconfiguring-contexts">Preconfiguringcontexts</a>).</span></p></li></ul><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/cs-optimization-process.png" /></span></p><h4><span><a aria-hidden="true" class="anchor" id="datastores.html_example"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_example"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</span></h4><p><span>Given the following code:</span></p><pre><span><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=<span class="hljs-variable">$ds</span>.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstname = ab@"</span>)<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$e</span>;<span class="hljs-variable">$sel</span>)    <span class="hljs-variable">$s</span>:=<span class="hljs-variable">$e</span>.firstname+<span class="hljs-string">" "</span>+<span class="hljs-variable">$e</span>.lastname+<span class="hljs-string">" works for "</span>+<span class="hljs-variable">$e</span>.employer.name <span class="hljs-comment">// $e.employer refers to Company table</span><span class="hljs-keyword"> End for each</span></code></span></pre><p>Thanks to the optimization, this request will only get data fromused attributes (firstname, lastname, employer, employer.name) in<em>$sel</em> from the second iteration of the loop.</p><h4><a aria-hidden="true" class="anchor" id="datastores.html_reusing-the-context-property"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_reusing-the-context-property"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Reusing the context property</h4><p>You can increase the benefits of the optimization by using the<strong>context</strong> property. This property references anoptimization context "learned" for an entity selection. It can bepassed as parameter to ORDA functions that return new entityselections, so that entity selections directly request usedattributes to the server and bypass the learning phase.</p><blockquote><p>You can also create contexts using the <a href="#datastores.html_setremotecontextinfo"><code>.setRemoteContextInfo()</code></a>function.</p></blockquote><p>The same optimization context property can be passed tounlimited number of entity selections on the same dataclass. AllORDA functions that handle entity selections support the<strong>context</strong> property (for example <a href="#datastores.html_query"><code>dataClass.query()</code></a> or<a href="#datastores.html_all"><code>dataClass.all()</code></a>).Keep in mind, however, that a context is automatically updated whennew attributes are used in other parts of the code. Reusing thesame context in different codes could result in overloading thecontext and then, reduce its efficiency.</p><blockquote><p>A similar mechanism is implemented for entities that are loaded,so that only used attributes are requested (see the <a href="#datastores.html_get"><code>dataClass.get()</code></a>function).</p></blockquote><p><strong>Example with<code>dataClass.query()</code>:</strong></p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel1</span>; <span class="hljs-variable">$sel2</span>; <span class="hljs-variable">$sel3</span>; <span class="hljs-variable">$sel4</span>; <span class="hljs-variable">$querysettings</span>; <span class="hljs-variable">$querysettings2 </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$data </span>: Collection <span class="hljs-variable">$querysettings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"shortList"</span>) <span class="hljs-variable">$querysettings2</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"longList"</span>)  <span class="hljs-variable">$sel1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = S@"</span>;<span class="hljs-variable">$querysettings</span>) <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractData</span>(<span class="hljs-variable">$sel1</span>) <span class="hljs-comment">// In extractData method an optimization is triggered   </span> <span class="hljs-comment">// and associated to context "shortList"</span>  <span class="hljs-variable">$sel2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Sm@"</span>;<span class="hljs-variable">$querysettings</span>) <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractData</span>(<span class="hljs-variable">$sel2</span>) <span class="hljs-comment">// In extractData method the optimization associated   </span> <span class="hljs-comment">// to context "shortList" is applied</span>  <span class="hljs-variable">$sel3</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Smith"</span>;<span class="hljs-variable">$querysettings2</span>) <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractDetailedData</span>(<span class="hljs-variable">$sel3</span>) <span class="hljs-comment">// In extractDetailedData method an optimization  </span> <span class="hljs-comment">// is triggered and associated to context "longList"</span>  <span class="hljs-variable">$sel4</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname = Brown"</span>;<span class="hljs-variable">$querysettings2</span>) <span class="hljs-variable">$data</span>:=<span class="hljs-function">extractDetailedData</span>(<span class="hljs-variable">$sel4</span>) <span class="hljs-comment">// In extractDetailedData method the optimization  </span> <span class="hljs-comment">// associated to context "longList" is applied</span></code></pre><h4><a aria-hidden="true" class="anchor" id="datastores.html_entity-selection-based-list-box"></a><a aria-hidden="true"class="hash-link" href="#datastores.html_entity-selection-based-list-box"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity selection-based list box</h4><p>Entity selection optimization is automatically applied to entityselection-based list boxes in client/server configurations, whendisplaying and scrolling a list box content: only the attributesdisplayed in the list box are requested from the server.</p><p>A specific "page mode" context is also provided when loading thecurrent entity through the <strong>Current item</strong> propertyexpression of the list box (see <a href="#datastores.html_list-box-types">Collection or entity selectiontype list boxes</a>). This feature allows you to not overload thelist box initial context in this case, especially if the "page"requests additional attributes. Note that only the use of<strong>Current item</strong> expression will create/use the pagecontext (access through <code>entitySelection\[index]</code> willalter the entity selection context).</p><p>Subsequent requests to server sent by entity browsing functionswill also support this optimization. The following functionsautomatically associate the optimization context of the sourceentity to the returned entity:</p><ul><li><a href="#datastores.html_next"><code>entity.next()</code></a></li><li><a href="#datastores.html_first"><code>entity.first()</code></a></li><li><a href="#datastores.html_last"><code>entity.last()</code></a></li><li><a href="#datastores.html_previous"><code>entity.previous()</code></a></li></ul><p>For example, the following code loads the selected entity andallows browsing in the entity selection. Entities are loaded in aseparate context and the list box initial context is leftuntouched:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$myEntity</span>:=Form.currentElement <span class="hljs-comment">//current item expression</span>  <span class="hljs-comment">//... do something</span> <span class="hljs-variable">$myEntity</span>:=<span class="hljs-variable">$myEntity</span>.<span class="hljs-function">next</span>() <span class="hljs-comment">//loads the next entity using the same context</span></code></pre><h4><a aria-hidden="true" class="anchor" id="datastores.html_preconfiguring-contexts"></a><a aria-hidden="true"class="hash-link" href="#datastores.html_preconfiguring-contexts"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Preconfiguring contexts</h4><p>An optimization context should be defined for every feature oralgorithm of your application, in order to have the bestperformances. For example, a context can be used for queries oncustomers, another context for queries on products, etc.</p><p>If you want to deliver final applications with the highest levelof optimization, you can preconfigure your contexts and thus savelearning phases by following these steps:</p><ol><li>Design your algorithms.</li><li>Run your application and let the automatic learning mechanismfill the optimization contexts.</li><li>Call the <a href="#datastores.html_getremotecontextinfo"><code>dataStore.getRemoteContextInfo()</code></a>or <a href="#datastores.html_getallremotecontexts"><code>dataStore.getAllRemoteContexts()</code></a>function to collect contexts. You can use the <a href="#datastores.html_getremotecontextattributes"><code>entitySelection.getRemoteContextAttributes()</code></a>and <a href="#datastores.html_getremotecontextattributes"><code>entity.getRemoteContextAttributes()</code></a>functions to analyse how your algorithms use attributes.</li><li>In the final step, call the <a href="#datastores.html_setremotecontextinfo"><code>dataStore.setRemoteContextInfo()</code></a>function to build contexts at application startup and <a href="#datastores.html_reusing-the-context-property">use them</a> inyour algorithms.</li></ol><h3><a aria-hidden="true" class="anchor" id="datastores.html_orda-cache"></a><a aria-hidden="true" class="hash-link" href="#datastores.html_orda-cache"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>ORDA cache</h3><p>For optimization reasons, data requested from the server viaORDA is loaded in the ORDA remote cache (which is different fromthe 4D cache). The ORDA cache is organized by dataclass, andexpires after 30 seconds.</p><p>The data contained in the cache is considered as expired whenthe timeout is reached. Any access to expired data will send arequest to the server. Expired data remains in the cache untilspace is needed.</p><p>By default, the ORDA cache is transparently handled by 4D.However, you can control its contents using the following ORDAclass functions:</p><ul><li><a href="#datastores.html_setremotecachesettings">dataClass.setRemoteCacheSettings()</a></li><li><a href="#datastores.html_getremotecache">dataClass.getRemoteCache()</a></li><li><a href="#datastores.html_clearremotecache">dataClass.clearRemoteCache()</a></li></ul></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#entities.html"><span class="arrow-prev">←</span> <span>Workingwith data</span></a><a class="docs-next button" href="#glossary.html"><span>Glossary</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#datastores.html_opening-sessions">Openingsessions</a><ul class="toc-headings"><li><a href="#datastores.html_viewing-sessions">Viewingsessions</a></li><li><a href="#datastores.html_locking-and-transactions">Locking andtransactions</a></li><li><a href="#datastores.html_closing-sessions">Closingsessions</a></li></ul></li><li><a href="#datastores.html_clientserver-optimization">Client/serveroptimization</a><ul class="toc-headings"><li><a href="#datastores.html_context">Context</a></li><li><a href="#datastores.html_orda-cache">ORDA cache</a></li></ul></li></ul></nav></div></div></body></html>