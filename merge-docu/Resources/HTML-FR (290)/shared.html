<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Objets et collections partagés · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="**Les objets partagés** et **les collections partagées** sont des [objets](/docs/Rx/fr/Concepts/object.html) et des [collections](/docs/Rx/fr/Concepts/collection.html) spécifiques dont le contenu est partagé entre les process. Comparés aux [Variables interprocess](/docs/Rx/fr/Concepts/variables.html#interprocess-variables), les objets partagés et les collections partagées ont l'avantage d'être compatibles avec les **Process 4D préemptifs** : il peuvent être passés en paramètres (par référence) aux commandes telles que `New process` ou `CALL WORKER`."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Objets et collections partagés · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="**Les objets partagés** et **les collections partagées** sont des [objets](/docs/Rx/fr/Concepts/object.html) et des [collections](/docs/Rx/fr/Concepts/collection.html) spécifiques dont le contenu est partagé entre les process. Comparés aux [Variables interprocess](/docs/Rx/fr/Concepts/variables.html#interprocess-variables), les objets partagés et les collections partagées ont l'avantage d'être compatibles avec les **Process 4D préemptifs** : il peuvent être passés en paramètres (par référence) aux commandes telles que `New process` ou `CALL WORKER`."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#shared.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Objets et collectionspartagés<a aria-hidden="true" class="anchor" id="shared.html"></a></h1></header><article><div><p><span><strong>Les objets partagés</strong> et <strong>lescollections partagées</strong> sont des <a href="#object.html">objets</a> et des <a href="#collection.html">collections</a> spécifiques dont le contenu estpartagé entre les process. Comparés aux <a href="#shared.html_interprocess-variables">Variables interprocess</a>,les objets partagés et les collections partagées ont l'avantaged'être compatibles avec les <strong>Process 4D préemptifs</strong>: il peuvent être passés en paramètres (par référence) auxcommandes telles que <code>New process</code> ou <code>CALLWORKER</code>.</span></p><p><span>Les objets partagés et les collections partagées peuventêtre stockés dans des variables déclarées à l'aide des commandesstandard <code>C_OBJECT</code> et <code>C_COLLECTION</code>, maisdoivent être instanciées à l'aide de commandes spécifiques:</span></p><ul><li><span>pour créer un objet partagé, utilisez la commande<code>New shared object</code>,</span></li><li><span>pour créer une collection partagée, utilisez la commande<code>New shared collection</code>.</span></li></ul><p><span><strong>Note :</strong> Des objets partagés et descollections partagées peuvent être définis comme propriétésd'objets/éléments de collections standard (nonpartagés).</span></p><p><span>Toute modification d'un objet/d'une collection partagé(e)doit s'effectuer à l'intérieur d'une structure <strong>Use...Enduse</strong>. La lecture d'une valeur d'objet/collection nenécessite pas de structure <strong>Use...Enduse</strong>.</span></p><p><span>Un catalogue unique et global, retourné par la commande<code>Storage</code>, est disponible à tout moment et depuis toutprocess de l'application et de ses composants.</span></p><h2><span><a aria-hidden="true" class="anchor" id="shared.html_utilisation-des-objets-et-collections-partag%C3%A9s"></a><a aria-hidden="true"class="hash-link" href="#shared.html_utilisation-des-objets-et-collections-partag%25C3%25A9s"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utilisation des objets et collectionspartagés</span></h2><p><span>Une fois instanciés à l'aide des commandes <code>Newshared object</code> ou <code>New shared collection</code>, lesobjets partagés et les collections partagées peuvent être modifiéset lus depuis n'importe quel process.</span></p><h3><span><a aria-hidden="true" class="anchor" id="shared.html_modification"></a><a aria-hidden="true" class="hash-link" href="#shared.html_modification"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Modification</span></h3><p><span>Les modifications suivantes peuvent être effectuées surles objets partagés et les collections partagées :</span></p><ul><li><span>ajout ou suppression de propriétés d'objets,</span></li><li><span>ajout ou modification de valeurs (prises en charge parles objets/collections partagé(e) s), y compris d'autres objets etcollections partagé(s) (ce qui crée un groupe partagé, cf.ci-dessous).</span></li></ul><p><span>Toute instruction de modification d'objet ou de collectionpartagé(e) doit être encadrée par les mots-clés <code>Use...Enduse</code>, sinon une erreur est générée.</span></p><pre><span><code class="hljs css language-4d"> <span class="hljs-variable">$s_obj</span>:=<span class="hljs-function">New shared object</span>(<span class="hljs-string">"prop1"</span>;<span class="hljs-string">"alpha"</span>)<span class="hljs-keyword"> Use</span>(<span class="hljs-variable">$s_obj</span>)    <span class="hljs-variable">$s_obj</span>.prop1:=<span class="hljs-string">"omega"</span>End<span class="hljs-keyword"> Use</span></code></span></pre><p>Un objet/une collection partagé(e) ne peut être modifié(e) quepar un seul process à la fois. <code>Use</code> permet deverrouiller l'objet/la collection partagé(e) pour les autresthreads, tandis que <code>End use</code> déverrouille l'objet/lacollection partagé(e) (si le compteur de verrouillage est à 0, voirci-dessous). . Toute tentative de modification d'un objet/d'unecollection partagé(e) sans au moins un appel à <code>Use...Enduse</code> génère une erreur. Lorsqu'un process appelle<code>Use...End use</code> avec un objet/une collection partagé(e)qui est déjà "utilisé(e)" par un autre process, il est simplementmis en attente jusqu'à ce qu'il soit déverrouillé par l'appel à<code>End use</code> (aucune erreur n'est générée). En conséquence,les instructions situées à l'intérieur des structures<code>Use...End use</code> doivent toujours s'exécuter rapidementet déverrouiller les éléments dès que possible. Il est doncfortement déconseillé de modifier un objet ou une collectionpartagé(e) directement depuis l'interface, par exemple depuis uneboîte de dialogue.</p><p>L'assignation d'objets/collections partagé(e) s à des propriétésou éléments d'autres objets/collections partagé(e) s est autoriséeet entraîne la création de <strong>groupes partagés</strong>. Ungroupe partagé est automatiquement créé lorsqu'un objet ou unecollection partagé(e) est assigné(e) en tant que valeur depropriété ou élément à un autre objet ou collection partagé(e). Lesgroupes partagés permettent d'imbriquer des objets et collectionspartagé(e)s mais nécessitent d'observer des règles supplémentaires:</p><ul><li>L'appel de <code>Use</code> avec un(e) objet/collectionpartagé(e) appartenant à un groupe provoquera le verrouillage despropriétés/éléments de tous/toutes les objets/collectionspartagé(e) s du groupe et incrémente son compteur de verrouillage.L'appel à <code>End use</code> décrémente le compteur deverrouillage du groupe et lorsque le compteur est à 0, tous lesobjets ou collections partagés partagés sont déverrouillés.</li><li>Un objet ou une collection partagé(e) peut appartenir à un seulgroupe partagé. Une erreur est générée si vous tentez d'assigner unobjet ou une collection appartenant déjà à un groupe à un groupedifférent.</li><li>Les objets/collections groupé(e) s ne peuvent plus êtredégroupé(e) s. Une fois inclus dans un groupe partagé, un objet ouune collection partagé(e) est lié(e) définitivement au groupependant toute la durée de la session. Même si toutes les référencesde l'objet/la collection sont supprimé(e) s des objets/collectionsparent(e) s, ils resteront liés.</li></ul><p>Reportez-vous à l'exemple 2 pour l'illustration des règles desgroupes partagés.</p><p><strong>Note :</strong> Les groupes partagés sont gérés via unepropriété interne nommée <em>locking identifier</em>. Si vous avezbesoin de plus d'informations sur les mécanismes utilisés,reportez-vous au Guide du développeur de 4D.</p><h3><a aria-hidden="true" class="anchor" id="shared.html_lecture"></a><a aria-hidden="true" class="hash-link"href="#shared.html_lecture"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Lecture</h3><p>La lecture de propriétés ou d'éléments d'un objet ou d'unecollection partagé(e) est possible sans appel de la structure<code>Use...End use</code>, même si l'objet ou la collectionpartagé(e) est "utilisé(e)" par un autre process.</p><p>Cependant, lorsque plusieurs valeurs sont interdépendantes etdoivent être lues simultanément, il est nécessaire d'encadrerl'accès en lecture par une structure <code>Use...End use</code>pour des raisons de cohérence.</p><h3><a aria-hidden="true" class="anchor" id="shared.html_duplication"></a><a aria-hidden="true" class="hash-link" href="#shared.html_duplication"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Duplication</h3><p>Appeler <code>OB Copy</code> avec un objet partagé (ou avec unobjet dont des propriétés sont des objets partagés) est possible,mais dans ce cas un objet standard (non partagé) est retourné.</p><h3><a aria-hidden="true" class="anchor" id="shared.html_storage"></a><a aria-hidden="true" class="hash-link"href="#shared.html_storage"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Storage</h3><p><strong>Storage</strong> est un objet partagé unique, disponibleautomatiquement pour chaque application et machine. Cet objetpartagé est retourné par la commande <code>Storage</code>. Il estdestiné à référencer les objets ou collections partagé(e)sdéfini(e)s durant la session que vous souhaitez rendre accessiblesà tous les process, préemptifs ou standard.</p><p>A noter que, à la différence de objets partagés standard,l'objet <code>Storage</code> ne crée par de groupe partagé lorsquedes objets/collection lui sont assigné(e) s en tant que propriétés.Cette exception permet à l'objet <strong>Storage</strong> d'êtreutilisé sans verrouiller les objets/collections partagé(e) sconnecté(e) s.</p><p>Pour plus d'informations, reportez-vous à la description de lacommande <code>Storage</code>.</p><h2><a aria-hidden="true" class="anchor" id="shared.html_useend-use"></a><a aria-hidden="true" class="hash-link" href="#shared.html_useend-use"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Use...End use</h2><p>La syntaxe de la structure <code>Use...End use</code> est lasuivante :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Use</span>(Shared_object_or_Shared_collection)<span class="hljs-function">    instruction</span>(s)<span class="hljs-keyword"> End use</span></code></pre><p>La structure <code>Use...End use</code> définit une séquenced'instructions qui exécutera des tâches sur le paramètre<em>Shared_object_or_Shared_collection</em> sous la protection d'unsémaphore interne. <em>Shared_object_or_Shared_collection</em> peutêtre tout objet partagé ou collection partagée valide.</p><p>Les objets partagés et les collections partagées permettentd'établir des communications entre les process, en particulier les<strong>Process 4D préemptifs</strong>. Ils peuvent être passés parréférence en paramètre d'un process à un autre. Pour plus dedétails sur les objets partagés et les collections partagées,reportez-vous à la page <strong>Objets et collectionspartagés</strong>. Encadrer les modifications sur les objetspartagés et les collections partagées à l'aide des mots-clés<code>Use...End use</code> est obligatoire pour empêcher les accèsconcurrents entre les process.</p><ul><li>Une fois que la ligne <strong>Use</strong> est exécutée avecsuccès, toutes les propriétés/éléments de<em>Shared_object_or_Shared_collection</em> sont verrouillé(e)s enécriture pour tous les autres process jusqu'à ce que la ligne<code>End use</code> correspondante soit exécutée.</li><li>La séquence d'<em>instructions</em> peut alors effectuer toutemodification dans les propriétés/éléments deShared_object_or_Shared_collection sans risque d'accèsconcurrent.</li><li>Si un autre objet ou collection partagé(e) est ajouté(e) entant que propriété du paramètre<em>Shared_object_or_Shared_collection</em>, il ou elle devientconnecté(e) et appartiennent au même groupe partagé (cf.<strong>Utilisation des objets et collectionspartagés</strong>).</li><li>Si un autre process tente d'accéder à une propriété de<em>Shared_object_or_Shared_collection</em> ou une propriétéconnectée alors qu'une séquence <strong>Use...End use</strong> esten cours d'exécution sur le mêmeShared_object_or_Shared_collection, il est automatiquement placé enattente et attendra jusqu'à ce que la séquence courante soitterminée.</li><li>La ligne <strong>End use</strong> déverrouille les propriétésde <em>Shared_object_or_Shared_collection</em> et tous les objetsdu même groupe.</li><li>Plusieurs structures <strong>Use...End use</strong> peuventêtre imbriquées dans le code 4D. Dans le cas d'un groupe, chaque<strong>Use</strong> incrémente le compteur de verrouillage dugroupe et chaque <strong>End use</strong> le décrémente ; tous leséléments/propriétés ne seront libérés que lorsque le dernier appelà <strong>End use</strong> mettra le compteur de verrouillage à0.</li></ul><p><strong>Note :</strong> Si une fonction membre d'une collectionmodifie une collection partagée, un <strong>Use</strong> interneest automatiquement mis en place pour cette collection partagéedurant l'exécution de la fonction.</p><h2><a aria-hidden="true" class="anchor" id="shared.html_exemple-1"></a><a aria-hidden="true" class="hash-link"href="#shared.html_exemple-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h2><p>Vous souhaitez lancer plusieurs process qui vont effectuer destâches d'inventaire parmi différents produits et mettre à jour lemême objet partagé. Le process principal instancie un objet partagévide et ensuite lance les autres process, passant en paramètrel'objet partagé et les produits à comptabiliser :</p><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY TEXT</span>(<span class="hljs-variable">$_items</span>;<span class="hljs-number">0</span>) ... <span class="hljs-comment">//remplir le tableau avec les éléments à compter</span> <span class="hljs-variable">$nbItems</span>:=<span class="hljs-function">Size of array</span>(<span class="hljs-variable">$_items</span>)<span class="hljs-function"> C_OBJECT</span>(<span class="hljs-variable">$inventory</span>) <span class="hljs-variable">$inventory</span>:=New shared object<span class="hljs-keyword"> Use</span>(<span class="hljs-variable">$inventory</span>)    <span class="hljs-variable">$inventory</span>.nbItems:=<span class="hljs-variable">$nbItems</span><span class="hljs-keyword"> End use</span>  <span class="hljs-comment">//Créer un process</span><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$i</span>;<span class="hljs-number">1</span>;<span class="hljs-variable">$nbItems</span>)    <span class="hljs-variable">$ps</span>:=<span class="hljs-function">New process</span>(<span class="hljs-string">"HowMany"</span>;<span class="hljs-number">0</span>;<span class="hljs-string">"HowMany_"</span>+<span class="hljs-variable">$_items{</span><span class="hljs-variable">$i}</span>;<span class="hljs-variable">$_items{</span><span class="hljs-variable">$i}</span>;<span class="hljs-variable">$inventory</span>)  <span class="hljs-comment">// objet $inventory envoyé par référence</span><span class="hljs-keyword"> End for</span></code></pre><p>Dans la méthode "HowMany", l'inventaire est effectué et l'objetpartagé $inventory est mis à jour dès que possible :</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$what</span>)<span class="hljs-function"> C_OBJECT</span>(<span class="hljs-variable">$2</span>)<span class="hljs-function"> C_OBJECT</span>(<span class="hljs-variable">$inventory</span>) <span class="hljs-variable">$what</span>:=<span class="hljs-variable">$1 </span><span class="hljs-comment">//pour une meilleure lisibilité</span> <span class="hljs-variable">$inventory</span>:=<span class="hljs-variable">$2</span>  <span class="hljs-variable">$count</span>:=<span class="hljs-function">CountMethod</span>(<span class="hljs-variable">$what</span>) <span class="hljs-comment">//méthode de comptage des produits</span><span class="hljs-keyword"> Use</span>(<span class="hljs-variable">$inventory</span>) <span class="hljs-comment">//Utiliser l'objet partagé</span>    <span class="hljs-variable">$inventory</span>[<span class="hljs-variable">$what</span>]:=<span class="hljs-variable">$count  </span><span class="hljs-comment">//stockage des résultats pour cet article</span><span class="hljs-keyword">End use</span></code></pre><h2><a aria-hidden="true" class="anchor" id="shared.html_exemple-2"></a><a aria-hidden="true" class="hash-link"href="#shared.html_exemple-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h2><p>Les exemples suivants illustrent les règles spécifiques àobserver lorsque vous utilisez des groupes partagés :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$ob1</span>:=New shared object <span class="hljs-variable">$ob2</span>:=New shared object<span class="hljs-keyword"> Use</span>(<span class="hljs-variable">$ob1</span>)    <span class="hljs-variable">$ob1</span>.a:=<span class="hljs-variable">$ob2  </span><span class="hljs-comment">//un premier groupe est créé</span><span class="hljs-keyword">  End use</span> <span class="hljs-variable">$ob3</span>:=New shared object <span class="hljs-variable">$ob4</span>:=New shared object<span class="hljs-keyword"> Use</span>(<span class="hljs-variable">$ob3</span>)    <span class="hljs-variable">$ob3</span>.a:=<span class="hljs-variable">$ob4  </span><span class="hljs-comment">//un 2e groupe est créé</span><span class="hljs-keyword"> End use</span><span class="hljs-keyword"> Use</span>(<span class="hljs-variable">$ob1</span>) <span class="hljs-comment">//Utilisation d'un objet du groupe 1</span>    <span class="hljs-variable">$ob1</span>.b:=<span class="hljs-variable">$ob4  </span><span class="hljs-comment">//ERREUR</span>  <span class="hljs-comment">//$ob4 appartient déjà à un autre groupe</span>  <span class="hljs-comment">//son assignation n'est pas permise</span><span class="hljs-keyword">End use</span><span class="hljs-keyword"> Use</span>(<span class="hljs-variable">$ob3</span>)    <span class="hljs-variable">$ob3</span>.a:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//on enlève la référence de $ob4 du groupe 2</span><span class="hljs-keyword"> End use</span><span class="hljs-keyword"> Use</span>(<span class="hljs-variable">$ob1</span>) <span class="hljs-comment">//Utilisation d'un objet du groupe 1</span>    <span class="hljs-variable">$ob1</span>.b:=<span class="hljs-variable">$ob4  </span><span class="hljs-comment">//ERREUR</span>  <span class="hljs-comment">//$ob4 appartient toujours au groupe 2</span>  <span class="hljs-comment">//son assignation n'est pas permise</span><span class="hljs-keyword"> End use</span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#parameters.html"><span class="arrow-prev">←</span><span>Paramètres</span></a><a class="docs-next button" href="#classes.html"><span>Classes</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#shared.html_utilisation-des-objets-et-collections-partag%25C3%25A9s">Utilisation des objets et collections partagés</a><ul class="toc-headings"><li><a href="#shared.html_modification">Modification</a></li><li><a href="#shared.html_lecture">Lecture</a></li><li><a href="#shared.html_duplication">Duplication</a></li><li><a href="#shared.html_storage">Storage</a></li></ul></li><li><a href="#shared.html_useend-use">Use...End use</a></li><li><a href="#shared.html_exemple-1">Exemple 1</a></li><li><a href="#shared.html_exemple-2">Exemple 2</a></li></ul></nav></div></div></body></html>