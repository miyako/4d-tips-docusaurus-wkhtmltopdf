<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Template pages · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Le serveur Web de 4D vous permet d'utiliser des pages de modèles HTML contenant des balises, c'est-à-dire un mélange de code HTML statique et de références 4D ajoutées via des [balises de transformation](/docs/Rx/fr/Tags/tags.html) telles que 4DTEXT, 4DIF ou 4DINCLUDE. These tags are usually inserted as HTML type comments (`&lt;!--#4DTagName TagValue--&gt;`) into the HTML source code."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Template pages · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Le serveur Web de 4D vous permet d'utiliser des pages de modèles HTML contenant des balises, c'est-à-dire un mélange de code HTML statique et de références 4D ajoutées via des [balises de transformation](/docs/Rx/fr/Tags/tags.html) telles que 4DTEXT, 4DIF ou 4DINCLUDE. These tags are usually inserted as HTML type comments (`&lt;!--#4DTagName TagValue--&gt;`) into the HTML source code."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#templates.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Templatepages<a aria-hidden="true" class="anchor" id="templates.html"></a></h1></header><article><div><p><span>Le serveur Web de 4D vous permet d'utiliser des pages demodèles HTML contenant des balises, c'est-à-dire un mélange de codeHTML statique et de références 4D ajoutées via des <a href="#tags.html">balises de transformation</a> telles que 4DTEXT, 4DIFou 4DINCLUDE. These tags are usually inserted as HTML type comments(<code>&lt;!--#4DTagName TagValue--&gt;</code>) into the HTMLsource code.</span></p><p><span>When these pages are sent by the HTTP server, they areparsed and the tags they contain are executed and replaced with theresulting data. The pages received by the browsers are thus acombination of static elements and values coming from 4Dprocessing.</span></p><p><span>For example, if you write in an HTML page:</span></p><pre><span><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">P</span>&gt;</span>Welcome to <span class="hljs-comment">&lt;!--#4DTEXT vtSiteName--&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">P</span>&gt;</span></code></span></pre><p>The value of the 4D variable <em>vtSiteName</em> will beinserted in the HTML page.</p><h2><a aria-hidden="true" class="anchor" id="templates.html_tags-for-templates"></a><a aria-hidden="true"class="hash-link" href="#templates.html_tags-for-templates"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Tags for templates</h2><p>The following 4D tags are available:</p><ul><li>4DTEXT, to insert 4D variables and expressions as text,</li><li>4DHTML, to insert HTML code,</li><li>4DEVAL, to evaluate any 4D expression,</li><li>4DSCRIPT, to execute a 4D method,</li><li>4DINCLUDE, to include a page within another one,</li><li>4DBASE, to modify the default folder used by the 4DINCLUDEtag,</li><li>4DCODE, to insert 4D code,</li><li>4DIF, 4DELSE, 4DELSEIF and 4DENDIF, to insert conditions in theHTML code,</li><li>4DLOOP et 4DENDLOOP, pour faire des boucles dans le codeHTML,</li><li>4DEACH et 4DENDEACH, pour boucler des collections, des entityselections ou des propriétés d'objets.</li></ul><p>Ces balises sont décrites dans la page <a href="#tags.html">Balises de transformation</a>.</p><p>It is possible to mix tags. For example, the following HTML codeis allowed:</p><pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">HTML</span>&gt;</span>...<span class="hljs-tag">&lt;<span class="hljs-name">BODY</span>&gt;</span><span class="hljs-comment">&lt;!--#4DSCRIPT/PRE_PROCESS--&gt;</span>   (Method call)<span class="hljs-comment">&lt;!--#4DIF (myvar=1)--&gt;</span>   (If condition)   <span class="hljs-comment">&lt;!--#4DINCLUDE banner1.html--&gt;</span>   (Subpage insertion)<span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span>   (End if)<span class="hljs-comment">&lt;!--#4DIF (myvar=2)--&gt;</span>   <span class="hljs-comment">&lt;!--#4DINCLUDE banner2.html--&gt;</span><span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span><span class="hljs-comment">&lt;!--#4DLOOP [TABLE]--&gt;</span>   (loop on the current selection)<span class="hljs-comment">&lt;!--#4DIF ([TABLE]ValNum&gt;10)--&gt;</span>   (If [TABLE]ValNum&gt;10)   <span class="hljs-comment">&lt;!--#4DINCLUDE subpage.html--&gt;</span>   (subpage insertion)<span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>   (Else)   <span class="hljs-tag">&lt;<span class="hljs-name">B</span>&gt;</span>Value: <span class="hljs-comment">&lt;!--#4DTEXT [TABLE]ValNum--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">B</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span>      (Field display)<span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span><span class="hljs-comment">&lt;!--#4DENDLOOP--&gt;</span>   (End for)<span class="hljs-tag">&lt;/<span class="hljs-name">BODY</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">HTML</span>&gt;</span></code></pre><h2><a aria-hidden="true" class="anchor" id="templates.html_tag-parsing"></a><a aria-hidden="true" class="hash-link" href="#templates.html_tag-parsing"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Tag parsing</h2><p>For optimization reasons, the parsing of the HTML source code isnot carried out by the 4D Web server when HTML pages are calledusing simple URLs that are suffixed with “.HTML” or “.HTM”.</p><p>Parsing of the contents of template pages sent by 4D web servertakes place when <code>WEB SEND FILE</code> (.htm, .html, .shtm,.shtml), <code>WEB SEND BLOB</code> (text/html type BLOB) or<code>WEB SEND TEXT</code> commands are called, as well as whensending pages called using URLs. Dans ce dernier cas, à des finsd'optimisation, les pages suffixées par ".htm" et ".html" ne sontPAS parsées. In order to "force" the parsing of HTML pages in thiscase, you must add the suffix “.shtm” or “.shtml” (for example,<code>http://www.server.com/dir/page.shtm</code>). An example ofthe use of this type of page is given in the description of the<code>WEB GET STATISTICS</code> command. XML pages (.xml, .xsl) arealso supported and always parsed by 4D.</p><p>You can also carry out parsing outside of the Web context whenyou use the <code>PROCESS 4D TAGS</code> command.</p><p>Internally, the parser works with UTF-16 strings, but the datato parse may have been encoded differently. When tags contain text(for example <code>4DHTML</code>), 4D converts the data whennecessary depending on its origin and the information available(charset). Below are the cases where 4D parses the tags containedin the HTML pages, as well as any conversions carried out:</p><table><thead><tr><th>Action / Command</th><th>Content analysis of the sent pages</th><th>Support of $ syntax(*)</th><th>Character set used for parsing tags</th></tr></thead><tbody><tr><td>Pages called via URLs</td><td>X, except for pages with “.htm” or “.html” extensions</td><td>X, except for pages with “.htm” or “.html” extensions</td><td>Use of charset passed as parameter of the "Content-Type" headerof the page. If there is none, search for a META-HTTP EQUIV tagwith a charset. Otherwise, use of default character set for theHTTP server</td></tr><tr><td><code>WEB SEND FILE</code></td><td>X</td><td>-</td><td>Use of charset passed as parameter of the "Content-Type" headerof the page. If there is none, search for a META-HTTP EQUIV tagwith a charset. Otherwise, use of default character set for theHTTP server</td></tr><tr><td><code>WEB SEND TEXT</code></td><td>X</td><td>-</td><td>No conversion necessary</td></tr><tr><td><code>WEB SEND BLOB</code></td><td>X, if BLOB is of the “text/html” type</td><td>-</td><td>Use of charset set in the "Content-Type" header of theresponse. Otherwise, use of default character set for the HTTPserver</td></tr><tr><td>Inclusion by the <code>&lt;!--#4DINCLUDE--&gt;</code> tag</td><td>X</td><td>X</td><td>Use of charset passed as parameter of the "Content-Type" headerof the page. If there is none, search for a META-HTTP EQUIV tagwith a charset. Otherwise, use of default character set for theHTTP server</td></tr><tr><td><code>PROCESS 4D TAGS</code></td><td>X</td><td>X</td><td>Text data: no conversion. BLOB data: automatic conversion fromthe Mac-Roman character set for compatibility</td></tr></tbody></table><p>(*) The alternative $-based syntax is available for 4DHTML,4DTEXT and 4DEVAL tags.</p><h2><a aria-hidden="true" class="anchor" id="templates.html_acc%C3%A8s-aux-m%C3%A9thodes-4d-via-le-web"></a><a aria-hidden="true"class="hash-link" href="#templates.html_acc%25C3%25A8s-aux-m%25C3%25A9thodes-4d-via-le-web"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Accès aux méthodes 4D via le Web</h2><p>L'exécution d'une méthode 4D avec <code>4DEACH</code>,<code>4DELSEIF</code>, <code>4DEVAL</code>, <code>4DHTML</code>,<code>4DIF</code>, <code>4DLOOP</code>, <code>4DSCRIPT</code>, ou<code>4DTEXT</code> à partir d'une requête web est soumise à lavaleur de l'attribut <a href="#allowProject.html">disponible viades balises 4D et des URL (4DACTION...)</a> définie dans lespropriétés de la méthode. Si cet attribut n'est pas vérifié pour laméthode, celle-ci ne peut pas être appelée à partir d'une requêteWeb.</p><h2><a aria-hidden="true" class="anchor" id="templates.html_prevention-of-malicious-code-insertion"></a><a aria-hidden="true"class="hash-link" href="#templates.html_prevention-of-malicious-code-insertion"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Prevention of malicious code insertion</h2><p>4D tags accept different types of data as parameters: text,variables, methods, command names, etc. When this data is providedby your own code, there is no risk of malicious code insertionsince you control the input. However, your database code oftenworks with data that was, at one time or another, introducedthrough an external source (user input, import, etc.).</p><p>In this case, it is advisable to <strong>not use</strong> tagssuch as <code>4DEVAL</code> or <code>4DSCRIPT</code>, whichevaluate parameters, directly with this sort of data.</p><p>De plus, selon le <a href="#templates.html_recursive-processing">principe de larécursivité</a>, le code malveillant peut lui-même inclure desbalises de transformation. In this case, it is imperative to usethe <code>4DTEXT</code> tag. Imagine, for example, a Web form fieldnamed "Name", where users must enter their name. This name is thendisplayed using a <code>&lt;!--#4DHTML vName--&gt;</code> tag inthe page. If text of the "&lt;!--#4DEVAL QUIT 4D--&gt;" type isinserted instead of the name, interpreting this tag will cause theapplication to be exited. To avoid this risk, you can just use the<code>4DTEXT</code> tag systematically in this case. Since this tagescapes the special HTML characters, any malicious recursive codethat may have been inserted will not be reinterpreted. Pour seréférer à l'exemple précédent, le champ "Name" contiendra, dans cecas, "<code>&amp;lt;!--#4DEVAL QUIT 4D--&amp;gt;</code>" qui nesera pas transformé.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#gettingStarted.html"><span class="arrow-prev">←</span><span>Prise en main</span></a><a class="docs-next button" href="#httpRequests.html"><span>Traitement des requêtes HTTP</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#templates.html_tags-for-templates">Tags fortemplates</a></li><li><a href="#templates.html_tag-parsing">Tag parsing</a></li><li><a href="#templates.html_acc%25C3%25A8s-aux-m%25C3%25A9thodes-4d-via-le-web">Accès aux méthodes 4D via le Web</a></li><li><a href="#templates.html_prevention-of-malicious-code-insertion">Preventionof malicious code insertion</a></li></ul></nav></div></div></body></html>