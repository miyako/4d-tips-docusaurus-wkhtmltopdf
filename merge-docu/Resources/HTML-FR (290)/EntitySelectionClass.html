<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>EntitySelection · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Une entity selection est un objet contenant une ou plusieurs référence(s) à des [entités](/docs/Rx/fr/ORDA/dsmapping.html#entity) appartenant à la même [Dataclass](/docs/Rx/fr/ORDA/dsmapping.html#dataclass). Une entity selection peut contenir 0, 1 ou X entités de la dataclass - où X peut représenter le nombre total d'entités contenues dans la dataclass."name="description" /><meta content="fr" name="docsearch:language" /><meta content="EntitySelection · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Une entity selection est un objet contenant une ou plusieurs référence(s) à des [entités](/docs/Rx/fr/ORDA/dsmapping.html#entity) appartenant à la même [Dataclass](/docs/Rx/fr/ORDA/dsmapping.html#dataclass). Une entity selection peut contenir 0, 1 ou X entités de la dataclass - où X peut représenter le nombre total d'entités contenues dans la dataclass."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#EntitySelectionClass.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">EntitySelection<a aria-hidden="true" class="anchor" id="EntitySelectionClass.html"></a></h1></header><article><div><p><span>Une entity selection est un objet contenant une ouplusieurs référence(s) à des <a href="#EntitySelectionClass.html_entity">entités</a> appartenant à lamême <a href="#EntitySelectionClass.html_dataclass">Dataclass</a>.Une entity selection peut contenir 0, 1 ou X entités de ladataclass - où X peut représenter le nombre total d'entitéscontenues dans la dataclass.</span></p><p><span>Les entity selections peuvent être créées à partir desélections existantes à l'aide de diverses fonctions de la classe<a href="#DataClassClass.html"><code>DataClass</code></a> tellesque <a href="#EntitySelectionClass.html_all"><code>.all()</code></a> ou<a href="#EntitySelectionClass.html_query"><code>.query()</code></a>,ou de la classe <code>EntityClass</code> elle-même, telles que<a href="#EntitySelectionClass.html_and"><code>.and()</code></a> ou<a href="#EntitySelectionClass.html_orderby"><code>orderBy()</code></a>.Vous pouvez également créer des entity selections vides à l'aide dela fonction <a href="#EntitySelectionClass.html_newselection"><code>dataClass.newSelection()</code></a>ou de la commande <a href="#EntitySelectionClass.html_create-new-selection"><code>Create newselection</code></a>.</span></p><h3><span><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_sommaire"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_sommaire"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Sommaire</span></h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#EntitySelectionClass.html_91index93"><strong><em>[index]</em></strong>: 4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;vous permet d'accéder aux entités del'entity selection à l'aide de la syntaxe standard descollections</p></td></tr><tr><td><a href="#EntitySelectionClass.html_attributename"><strong><em>.attributeName</em></strong>: Collection<br /><strong><em>.attributeName</em></strong> : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;une "projection" des valeurs del'attribut dans l'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_add"><strong>.add</strong>(<em>entity</em> : 4D.Entity ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;ajoute l'<em>entity</em> spécifiée àl'entity selection et retourne l'entity selection modifiée</p></td></tr><tr><td><a href="#EntitySelectionClass.html_and"><strong>.and</strong>(<em>entity</em> : 4D.Entity ) : 4D.EntitySelection<br /><strong>.and</strong>( <em>entitySelection</em> :4D.EntitySelection ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;combine l'entity selection avec leparamètre <em>entity</em> ou <em>entitySelection</em> à l'aide del'opérateur logique ET</p></td></tr><tr><td><a href="#EntitySelectionClass.html_average"><strong>.average</strong>(<em>attributePath</em> : Text ) : Real</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne la moyenne arithmétique detoutes les valeurs non nulles de <em>attributePath</em> dansl'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_contains"><strong>.contains</strong>(<em>entity</em> : 4D.Entity ) : Boolean</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne vrai si la référence d'entitéappartient à l'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_count"><strong>.count</strong>(<em>attributePath</em> : Text ) : Real</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne le nombre d'entités dansl'entity selection pour lesquelles la valeur de<em>attributePath</em> n'est pas null</p></td></tr><tr><td><a href="#EntitySelectionClass.html_distinct"><strong>.distinct</strong>(<em>attributePath</em> : Text { ; <em>option</em> : Integer } ) :Collection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;renvoie une collection contenantuniquement les valeurs distinctes (différentes) dans la collectiond'origine</p></td></tr><tr><td><a href="#EntitySelectionClass.html_drop"><strong>.drop</strong>( {<em>mode</em> : Integer } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;supprime les entités appartenant àl'entity selection de la table liée à sa dataclass dans ledatastore</p></td></tr><tr><td><a href="#EntitySelectionClass.html_extract"><strong>.extract</strong>(<em>attributePath</em> : Text { ; <em>option</em> : Integer } ) :Collection<br /><strong>.extract</strong>( <em>attributePath</em> { ;<em>targetPath</em> } { ; <em>...attributePathN</em> : Text ;<em>targetPathN</em> : Text } ) : Collection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne une collection contenant lesvaleurs <em>attributePath</em> extraites de l'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_first"><strong>.first()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne une référence vers l'entité enpremière position dans l'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_getdataclass"><strong>.getDataClass()</strong>: 4D.DataClass</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne la dataclass de l'entityselection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_getremotecontextattributes"><strong>.getRemoteContextAttributes()</strong>: Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne des informations relatives aucontexte d'optimisation utilisé par l'entity</p></td></tr><tr><td><a href="#EntitySelectionClass.html_isalterable"><strong>.isAlterable()</strong>: Boolean</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne Vrai si l'entity selection estmodifiable (alterable)</p></td></tr><tr><td><a href="#EntitySelectionClass.html_isordered"><strong>.isOrdered()</strong>: Boolean</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne Vrai si l'entity selection esttriée</p></td></tr><tr><td><a href="#EntitySelectionClass.html_last"><strong>.last()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne une référence vers l'entité endernière position dans l'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_length"><strong>.length</strong> :Integer</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne le nombre d'entités dansl'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_max"><strong>.max</strong>(<em>attributePath</em> : Text ) : any</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne la plus haute valeur (ou valeurmaximale) parmi toutes les valeurs de <em>attributePath</em> dansl'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_min"><strong>.min</strong>(<em>attributePath</em> : Text ) : any</a><p>&nbsp;&nbsp;&nbsp;&nbsp; retourne la plus faible valeur (ouvaleur minimale) parmi toutes les valeurs de attributePath dansl'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_minus"><strong>.minus</strong>(<em>entity</em> : 4D.Entity ) : 4D.EntitySelection<br /><strong>.minus</strong>( <em>entitySelection</em> :4D.EntitySelection ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;exclut de l'entity selection à laquelleelle est appliquée l'<em>entity</em> ou les entités del'<em>entitySelection</em> et retourne l'entity selectionrésultante</p></td></tr><tr><td><a href="#EntitySelectionClass.html_or"><strong>.or</strong>(<em>entity</em> : 4D.Entity ) : 4D.EntitySelection<br /><strong>.or</strong>( <em>entitySelection</em> : 4D.EntitySelection) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;combine l'entity selection avec leparamètre <em>entity</em> ou <em>entitySelection</em> en utilisantl'opérateur OU logique (non exclusif)</p></td></tr><tr><td><a href="#EntitySelectionClass.html_orderby"><strong>.orderBy</strong>(<em>pathString</em> : Text ) : 4D.EntitySelection<br /><strong>.orderBy</strong>( <em>pathObjects</em> : Collection ) :4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;renvoie une nouvelle entity selectiontriée contenant toutes les entités de l'entity selection dansl'ordre spécifié par le paramètre <em>pathString</em> ou<em>pathObjects</em></p></td></tr><tr><td><a href="#EntitySelectionClass.html_orderbyformula"><strong>.orderByFormula</strong>(<em>formulaString</em> : Text { ; <em>sortOrder</em> : Integer } {; <em>settings</em> : Object} ) : 4D.EntitySelection<br /><strong>.orderByFormula</strong>( <em>formulaObj</em> : Object { ;<em>sortOrder</em> : Integer } { ; <em>settings</em> : Object} ) :4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;renvoie une nouvelle entity selectiontriée</p></td></tr><tr><td><a href="#EntitySelectionClass.html_query"><strong>.query</strong>(<em>queryString</em> : Text { ; <em>...value</em> : any } { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection<br /><strong>.query</strong>( <em>formula</em> : Object { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;recherche les entités répondant auxcritères de recherche spécifiés dans <em>queryString</em> ou<em>formula</em> et (optionnellement) dans <em>value</em>toutes lesentités de l'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_querypath"><strong>.queryPath</strong>: Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;contient la description détaillée duchemin de recherche réel utilisé par 4D</p></td></tr><tr><td><a href="#EntitySelectionClass.html_queryplan"><strong>.queryPlan</strong>: Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp; contient la description détaillée duplan de recherche prévu par 4D avant de l'exécuter</p></td></tr><tr><td><a href="#EntitySelectionClass.html_refresh"><strong>.refresh()</strong></a><p>&nbsp;&nbsp;&nbsp;&nbsp;"invalide" immédiatement les données del'entity selection dans le cache local d'ORDA</p></td></tr><tr><td><a href="#EntitySelectionClass.html_selected"><strong>.selected</strong>(<em>selectedEntities</em> : 4D.EntitySelection ) : Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne un objet décrivant la ou lespositions de <em>selectedEntities</em> dans l'entity selectiond'origine</p></td></tr><tr><td><a href="#EntitySelectionClass.html_slice"><strong>.slice</strong>(<em>startFrom</em> : Integer { ; <em>end</em> : Integer } ) :4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne une partie d'une entityselection dans une nouvelle entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_sum"><strong>.sum</strong>(<em>attributePath</em> : Text ) : Real</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne la somme de toutes les valeursd'<em>attributePath</em> dans l'entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_tocollection"><strong>.toCollection</strong>({ <em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer } } ) : <em>Collection</em><br /><strong>.toCollection</strong>( <em>filterString</em> : Text {;<em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer }}} ) : <em>Collection</em><br /><strong>.toCollection</strong>( <em>filterCol</em> : Collection {;<em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer }}} ) : <em>Collection</em></a><p>&nbsp;&nbsp;&nbsp;&nbsp;crée et retourne une collection danslaquelle chaque élément est un objet contenant un ensemble depropriétés et de valeurs</p></td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_cr%C3%A9er-une-entity-selection"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_cr%25C3%25A9er-une-entity-selection"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Créer une entity selection</span></h2><p><span><strong>Create entity selection</strong> (<em>dsTable</em> : Table { ; <em>settings</em> : Object } ) :4D.EntitySelection</span></p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>dsTable</td><td>Table</td><td style="text-align:center">-&gt;</td><td>Table de la base 4D dont la sélection courante doit êtreutilisée pour construire l'entity selection</td></tr><tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Option de création : contexte</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nouvelle entity selection liée à la dataclass de la table</td></tr></tbody></table><h4><span><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</span></h4><p><span>La commande <code>Create entity selection</code> construitet retourne une nouvelle entity selection <a href="#EntitySelectionClass.html_shareable-or-alterable-entity-selections">altérable</a> liée à la dataclass correspondant à la table<em>dsTable</em>, basée sur la sélection courante de cettetable.</span></p><p><span>Si la sélection courante est triée, une entity selection<a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">triée</a>est créée (l'ordre de la sélection courante est conservé). Si lasélection courante n'est pas triée, une entity selection non-triéeest créée.</span></p><p><span>Si la table <em>dsTable</em> n'est pas exposée dans<a href="#EntitySelectionClass.html_ds"><code>ds</code></a>, uneerreur est retournée. Cette commande ne peut pas être utilisée avecun datastore distant.</span></p><p><span>Dans le paramètre optionnel <em>settings</em>, vous pouvezpasser un objet contenant la propriété suivante :</span></p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>Nom du <a href="#EntitySelectionClass.html_clientserver-optimization">contexted'optimisation</a> appliqué à l'entity selection.</td></tr></tbody></table><h4><span><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</span></h4><pre><span><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-function">ALL RECORDS</span>([Employee])<span class="hljs-variable">$employees</span>:=<span class="hljs-function">Create entity selection</span>([Employee]) <span class="hljs-comment">// L'entity selection $employees contient maintenant un ensemble de </span><span class="hljs-comment">// références vers toutes les entités de la dataclass Employee</span></code></span></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_voir-aussi"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_voir-aussi"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir aussi</h4><p><a href="#EntitySelectionClass.html_newselection"><code>dataClass.newSelection()</code></a></p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_use-entity-selection"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_use-entity-selection"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>USE ENTITY SELECTION</h2><p><strong>USE ENTITY SELECTION</strong>(<em>entitySelection</em>)</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>entitySelection</td><td>EntitySelection</td><td style="text-align:center">-&gt;</td><td>Une entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La commande <code>USE ENTITY SELECTION</code> met à jour lasélection courante de la table correspondant à la dataclass duparamètre <em>entitySelection</em>, en fonction du contenu del'entity selection.</p><p>Cette commande ne peut pas être utilisée avec un <a href="#datastores.html">datastore distant</a>.</p><blockquote><p>Après un appel à <code>USE ENTITY SELECTION</code>, le premierenregistrement de la sélection courante mise à jour (s'il n'est pasvide) devient l'enregistrement courant, mais il n'est pas chargé enmémoire. Si vous avez besoin d'utiliser les valeurs des champs del'enregistrement courant, utilisez la commande <code>LOADRECORD</code> après la commande <code>USE ENTITYSELECTION</code>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$entitySel </span>: Object<span class="hljs-variable">$entitySel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"M@"</span>) <span class="hljs-comment">//$entitySel est associé à la dataclass Employee</span><span class="hljs-function">REDUCE SELECTION</span>([Employee];<span class="hljs-number">0</span>)<span class="hljs-function">USE ENTITY SELECTION</span>(<span class="hljs-variable">$entitySel</span>) <span class="hljs-comment">//La sélection courante de la table Employee est mise à jour</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_91index93"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_91index93"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>[<em>index</em>]</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong><em>[index]</em></strong> : 4D.Entity</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-2"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La notation <code>EntitySelection[index]</code> vous permetd'accéder aux entités de l'entity selection à l'aide de la syntaxestandard des collections : il vous suffit de passer la position del'entité à laquelle vous souhaitez accéder dans le paramètre<em>index</em>.</p><p>A noter que l'entité correspondante est rechargée depuis ledatastore.</p><p><em>index</em> peut être tout nombre compris entre 0 et<code>.length</code>-1.</p><ul><li>Si <em>index</em> est en-dehors de ces limites, une erreur estretournée.</li><li>Si <em>index</em> correspond à une entité supprimée, la valeurNull est retournée.</li></ul><blockquote><blockquote><p><strong>Attention</strong> : <code>EntitySelection[index]</code>est une expression non assignable, ce qui signifie qu'elle ne peutpas être utilisée comme référence modifiable de l'entité avec desfonctions telles que <a href="#EntitySelectionClass.html_lock"><code>.lock()</code></a> ou<a href="#EntitySelectionClass.html_save"><code>.save()</code></a>.Pour travailler avec l'entité correspondante, vous devez assignerl'expression retournée à une expression assignable, comme unevariable. Voici quelques exemples :</p></blockquote></blockquote><pre><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-comment">//creation de l'entity selection</span>  <span class="hljs-comment">//code invalide:</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$sel</span>[<span class="hljs-number">0</span>].<span class="hljs-function">lock</span>() <span class="hljs-comment">//ne fonctionnera PAS</span> <span class="hljs-variable">$sel</span>[<span class="hljs-number">0</span>].lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">//ne fonctionnera PAS</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$sel</span>[<span class="hljs-number">0</span>].<span class="hljs-function">save</span>() <span class="hljs-comment">//ne fonctionnera PAS</span>  <span class="hljs-comment">//code valide :</span> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$sel</span>[<span class="hljs-number">0</span>]  <span class="hljs-comment">//OK</span> <span class="hljs-variable">$entity</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">//OK</span> <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//OK</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">2</span>]  <span class="hljs-comment">// La 3e entité de l'entity selection $employees est rechargée depuis le datastore</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_attributename"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_attributename"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.<em>attributeName</em></h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong><em>.attributeName</em></strong> : Collection<br /><strong><em>.attributeName</em></strong> : 4D.EntitySelection</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-3"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>Tout attribut de dataclass peut être utilisé en tant quepropriété d'une entity selection afin de retourner une "projection"des valeurs de l'attribut dans l'entity selection. Les valeursprojetées peuvent être une collection ou une nouvelle entityselection, selon le <a href="#EntitySelectionClass.html_kind">kind</a> (<code>storage</code> ou<code>relation</code>) de l'attribut.</p><ul><li>Si le "kind" de <em>attributeName</em> est<code>storage</code>: <code>.attributeName</code> retourne unecollection de valeurs du même type que <em>attributeName</em>.</li><li>Si le "kind" de <em>attributeName</em> est<code>relatedEntity</code> : <code>.attributeName</code> retourneune nouvelle entity selection de valeurs liées du même type que<em>attributeName</em>. Les doublons sont supprimés (une entityselection non ordonnée est retournée).</li><li>Si le "kind" de <em>attributeName</em> est<code>relatedEntities</code> : <code>.attributeName</code> retourneune nouvelle entity selection de valeurs liées du même type que<em>attributeName</em>. Les doublons sont supprimés (une entityselection non ordonnée est retournée).</li></ul><p>Lorsqu'un attribut de relation est utilisé comme propriété d'uneentity selection, le résultat est toujours une autre entityselection, même si une seule entité est retournée. Lorsqu'unattribut de relation est utilisé comme propriété d'une entityselection, le résultat est toujours une autre entity selection,même si une seule entité est retournée.</p><p>Si l'attribut n'existe pas dans l'entity selection, une erreurest retournée.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><p>Projection de valeurs de stockage :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$firstNames </span>: Collection <span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-variable">$firstNames</span>:=<span class="hljs-variable">$entitySelection</span>.firstName <span class="hljs-comment">// firstName est un texte</span></code></pre><p>Le résultat est une collection de chaînes, par exemple :</p><pre><code class="hljs css language-4d">[    <span class="hljs-string">"Joanna"</span>,    <span class="hljs-string">"Alexandra"</span>,    <span class="hljs-string">"Rick"</span>]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Projection d'entité liée :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es</span>; <span class="hljs-variable">$entitySelection </span>: cs.EmployeeSelection <span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-variable">$es</span>:=<span class="hljs-variable">$entitySelection</span>.employer <span class="hljs-comment">// employer est lié à la dataclass Company</span></code></pre><p>L'objet résultant est une entity selection de la dataclassCompany sans doublons (s'il y en a).</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-3"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 3</h4><p>Projection d'entités liées :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">all</span>().directReports <span class="hljs-comment">// directReports est récursif et lié à la dataclass Employee</span></code></pre><p>L'objet résultant est une entity selection de la dataclassEmployee sans doublons (s'il y en a).</p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_add"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_add"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.add()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v18 R5</td><td>Supporte uniquement les entity selections altérables</td></tr><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.add</strong>( <em>entity</em> : 4D.Entity ) :4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entité à ajouter à l'entity selection</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Entity selection incluant l'<em>entity</em></td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-4"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.add()</code> ajoute l'<em>entity</em>spécifiée à l'entity selection et retourne l'entity selectionmodifiée.</p><blockquote><p>Les valeurs de type Date sont converties en valeurs numériques(secondes) et utilisées pour calculer la moyenne.</p></blockquote><p><strong>Attention :</strong> L'entity selection doit être<em>altérable</em>, c'est-à-dire qu'elle a été créée par exemplepar <a href="#EntitySelectionClass.html_newselection"><code>.newSelection()</code></a>ou <code>Create entity selection</code>, sinon <code>.add()</code>retournera une erreur. Les entity selections partageablesn'acceptent pas l'ajout d'entités. Pour plus d'informations,reportez-vous au paragraphe <a href="#EntitySelectionClass.html_shareable-or-alterable-entity-selections">Entity selections partageables ou altérables</a>.</p><ul><li>Si l'entity selection est ordonnée, le paramètre<em>entity</em> est ajouté à la fin de la sélection. Si uneréférence à la même entité appartient déjà à l'entity selection,elle est dupliquée et une nouvelle référence est ajoutée.</li><li>Si l'entity selection est non ordonnée, le paramètre<em>entity</em> est ajouté n'importe où dans la sélection, sansordre spécifique.</li></ul><blockquote><p>Pour plus d'informations, reportez-vous au paragraphe <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">Entityselections triées ou non triées</a>.</p></blockquote><p>L'entity selection modifiée est retournée par la fonction, afinque les appels vers la fonction puissent être chaînés.</p><p>Une erreur est générée si <em>entity</em> et l'entity selectionne sont pas liées à la même dataclass. Si <em>entity</em> est Null,aucune erreur n'est générée.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-2"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"S@"</span>) <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>() <span class="hljs-variable">$employees</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-comment">//L'entité $employee est ajoutée à l'entity selection $employees</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-2"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Les appels vers la fonction peuvent être chaînés :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel </span>: cs.ProductSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$p1</span>;<span class="hljs-variable">$p2</span>;<span class="hljs-variable">$p3 </span>: cs.ProductEntity <span class="hljs-variable">$p1</span>:=ds.Product.<span class="hljs-function">get</span>(<span class="hljs-number">10</span>) <span class="hljs-variable">$p2</span>:=ds.Product.<span class="hljs-function">get</span>(<span class="hljs-number">11</span>) <span class="hljs-variable">$p3</span>:=ds.Product.<span class="hljs-function">get</span>(<span class="hljs-number">12</span>) <span class="hljs-variable">$sel</span>:=ds.Product.<span class="hljs-function">query</span>(<span class="hljs-string">"ID &gt; 50"</span>) <span class="hljs-variable">$sel</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$p1</span>).<span class="hljs-function">add</span>(<span class="hljs-variable">$p2</span>).<span class="hljs-function">add</span>(<span class="hljs-variable">$p3</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_and"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_and"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.and()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.and</strong>( <em>entity</em> : 4D.Entity ) :4D.EntitySelection<br /><strong>.and</strong>( <em>entitySelection</em> :4D.EntitySelection ) : 4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entité à intersecter</td></tr><tr><td>entitySelection</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Entity selection à intersecter</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection résultante de l'intersection à l'aide del'opérateur logique ET</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-5"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.and()</code> combine l'entity selection avecle paramètre <em>entity</em> ou <em>entitySelection</em> à l'aidede l'opérateur logique ET ; elle retourne une nouvelle entityselection non ordonnée qui ne contient que les entités qui sontréférencées à la fois dans l'entity selection et le paramètre.</p><ul><li>Si vous passez <em>entity</em> comme paramètre, vous combinezcette entité avec l'entity selection. Si l'entité appartient àl'entity selection, une nouvelle entity selection contenantuniquement l'entité est retournée. Sinon, une entity selection videest retournée.</li><li>Si vous passez <em>entitySelection</em> comme paramètre, vouscombinez les deux entity selections. Une nouvelle entity selectioncontenant uniquement les entités qui sont référencées dans les deuxsélections est retournée. S'il n'y a pas d'entité intersectée, uneentity selection vide est retournée.</li></ul><blockquote><blockquote><p>Vous pouvez comparer des <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">entityselections ordonnées et/ou non ordonnées</a>. La sélectionrésultante est toujours non ordonnée.</p></blockquote></blockquote><p>Si l'entity selection initiale ou celle du paramètre<em>entitySelection</em> est vide, ou si <em>entity</em> est Null,une entity selection vide est retournée.</p><p>Si l'entity selection initiale et le paramètre ne sont pas liésà la même dataclass, une erreur est retournée.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-3"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$result </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>)     <span class="hljs-comment">//l'entity selection $employees contient l'entité</span>  <span class="hljs-comment">//ayant la clé primaire 710 et d'autres entités</span>  <span class="hljs-comment">//par ex. "Colin Hetrick" / "Grady Harness" / "Sherlock Holmes" (clé primaire 710)</span> <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">710</span>) <span class="hljs-comment">// Retourne "Sherlock Holmes"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">and</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-comment">//$result est une entity selection contenant</span>  <span class="hljs-comment">//uniquement l'entité avec la clé primaire 710 ("Sherlock Holmes")</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-3"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Nous voulons obtenir une sélection d'employés nommés "Jones" quivivent à New York :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel1</span>; <span class="hljs-variable">$sel2</span>; <span class="hljs-variable">$sel3 </span>: cs.EmployeeSelection <span class="hljs-variable">$sel1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"name =:1"</span>;<span class="hljs-string">"Jones"</span>) <span class="hljs-variable">$sel2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"city=:1"</span>;<span class="hljs-string">"New York"</span>) <span class="hljs-variable">$sel3</span>:=<span class="hljs-variable">$sel1</span>.<span class="hljs-function">and</span>(<span class="hljs-variable">$sel2</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_average"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_average"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.average()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v18 R6</td><td>Retourne undefined si l'entity selection est vide</td></tr><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.average</strong>( <em>attributePath</em> : Text ) :Real</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>attributePath</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin de l'attribut à utiliser pour le calcul</td></tr><tr><td>Résultat</td><td>Réel</td><td style="text-align:center">&lt;-</td><td>Moyenne arithmétique des valeurs des entités pour l'attribut(Undefined pour une entity selection vide)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-6"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.average()</code> retourne la moyennearithmétique de toutes les valeurs non nulles de<em>attributePath</em> dans l'entity selection.</p><p>Passez dans le paramètre <em>attributePath</em> le chemin del'attribut à utiliser pour le calcul.</p><p>Seules les valeurs numériques sont utilisées pour le calcul.Notez cependant que, lorsque le <em>attributePath</em> de l'entityselection contient des valeurs de types variés,<code>.average()</code> tient compte de tous les éléments contenantdes valeurs scalaires pour calculer la moyenne.</p><blockquote><p>Les valeurs de type Date sont converties en valeurs numériques(secondes) et utilisées pour calculer la moyenne.</p></blockquote><p><code>.average()</code> retourne <strong>undefined</strong> sil'entity selection est vide ou si <em>attributePath</em> necontient pas de valeurs numériques.</p><p>Une erreur est retournée si :</p><ul><li><em>attributePath</em> est un attribut relatif,</li><li><em>attributePath</em> désigne un attribut qui n'existe pasdans la dataclass de l'entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-4"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Nous voulons obtenir la liste des employés dont le salaire estsupérieur au salaire moyen :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$averageSalary </span>: Real<span class="hljs-keyword"> var</span> <span class="hljs-variable">$moreThanAv </span>: cs.EmployeeSelection <span class="hljs-variable">$averageSalary</span>:=ds.Employee.<span class="hljs-function">all</span>().<span class="hljs-function">average</span>(<span class="hljs-string">"salary"</span>) <span class="hljs-variable">$moreThanAv</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-variable">$averageSalary</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_contains"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_contains"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.contains()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.contains</strong>( <em>entity</em> : 4D.Entity ) :Boolean</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entité à évaluer</td></tr><tr><td>Résultat</td><td>Booléen</td><td style="text-align:center">&lt;-</td><td>Vrai si l'entité appartient à l'entity selection, sinonFaux</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-7"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.contains()</code> retourne vrai si laréférence d'entité appartient à l'entity selection, et fauxsinon.</p><p>Dans <em>entity</em>, spécifiez l'entité à rechercher dansl'entity selection. Si l'entité est Null, la fonction retournerafaux.</p><p>Si <em>entity</em> et l'entity selection n'appartiennent pas àla même dataclass, une erreur est générée.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-5"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">610</span>)<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$employees</span>.<span class="hljs-function">contains</span>(<span class="hljs-variable">$employee</span>))<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"L'entité ayant la clé primaire 610 a un nom commençant par H"</span>)<span class="hljs-keyword"> Else</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"L'entité ayant la clé primaire 610 n'a pas un nom commençant par H"</span>)<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_count"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_count"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.count()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.count</strong>( <em>attributePath</em> : Text ) :Real</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>attributePath</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin de l'attribut à utiliser pour le calcul</td></tr><tr><td>Résultat</td><td>Réel</td><td style="text-align:center">&lt;-</td><td>Nombre de valeurs de <em>attributePath</em> non null dansl'entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-8"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.count()</code> retourne le nombre d'entitésdans l'entity selection pour lesquelles la valeur de<em>attributePath</em> n'est pas null.</p><blockquote><p>Seules les valeurs scalaires sont prises en compte. Les valeursde type objet ou collection sont considérées comme des valeursnull.</p></blockquote><p>Une erreur est retournée si :</p><ul><li><em>attributePath</em> est un attribut relatif,</li><li><em>attributePath</em> n'est pas trouvé dans la dataclass del'entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-6"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Nous voulons trouver le nombre total d'employés d'une entreprisesans compter ceux dont l'intitulé du poste n'a pas été défini :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$count </span>: Real <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"employer = :1"</span>;<span class="hljs-string">"Acme, Inc"</span>) <span class="hljs-variable">$count</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">count</span>(<span class="hljs-string">"jobtitle"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_copy"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_copy"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.copy()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v18 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.copy</strong>( { <em>option</em> : Integer } ) :4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>option</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>ck shared</code> : retourne une entity selectionpartageable</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Copie de l'entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-9"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_description-9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.copy()</code> retourne une copie de l'entityselection d'origine.</p><blockquote><p>Les entités d'une collection d'entités auxquelles on accède via[ ] ne sont pas rechargées depuis la base de données.</p></blockquote><p>Par défaut, si le paramètre <em>option</em> est omis, lafonction retourne une nouvelle entity selection non partageable(même si la fonction est appliquée à une entity selectionpartageable). Passez la constante <code>ck shared</code> dans leparamètre <em>option</em> si vous souhaitez créer une entityselection partageable.</p><blockquote><p>Cette fonction retourne toujours vrai lorsque l'entity selectionprovient d'un datastore distant.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-7"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Vous créez une nouvelle entity selection de produits, videlorsque le formulaire est chargé :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :(Form event code=On Load)       Form.products:=ds.Products.<span class="hljs-function">newSelection</span>()<span class="hljs-keyword"> End case</span></code></pre><p>Cette entity selection est ensuite mise à jour avec les produitset vous souhaitez partager les produits entre plusieurs process.Copiez l'entity selection Form.products comme sélectionpartageable:</p><pre><code class="hljs css language-4d"> ...  <span class="hljs-comment">// L'entity selection Form.products est mise à jour</span> Form.products.<span class="hljs-function">add</span>(Form.selectedProduct)<span class="hljs-keyword"> Use</span>(Storage)<span class="hljs-keyword">    If</span>(Storage.products=<span class="hljs-literal">Null</span>)       Storage.products:=<span class="hljs-function">New shared object</span>()<span class="hljs-keyword">    End if</span><span class="hljs-keyword">    Use</span>(Storage.products)       Storage.products:=Form.products.<span class="hljs-function">copy</span>(ck shared)<span class="hljs-keyword">    End use</span><span class="hljs-keyword"> End use</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_distinct"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_distinct"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.distinct()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.distinct</strong>( <em>attributePath</em> : Text { ;<em>option</em> : Integer } ) : Collection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>attributePath</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin de l'attribut dont vous souhaitez obtenir les valeursdistinctes</td></tr><tr><td>option</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk diacritical</code> : évaluation diacritique ("A" # "a"par exemple)</td></tr><tr><td>Résultat</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Collection avec seulement les valeurs distinctes</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-10"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.distinct()</code> renvoie une collectioncontenant uniquement les valeurs distinctes (différentes) de<em>attributePath</em> dans l'entity selection.</p><p>La collection retournée est automatiquement triée. Les valeurs<strong>Null</strong> ne sont pas renvoyées.</p><p>Dans le paramètre <em>attributePath</em> passez l'attributd'entité dont vous voulez obtenir les valeurs distinctes. Seulesles valeurs scalaires (texte, nombre, booléen ou date) peuvent êtregérées. Les types sont renvoyés dans l'ordre suivant : Si<em>attributePath</em> est un attribut d'objet qui contient desvaleurs de types différents, elles sont groupées par type et triéesensuite.</p><ol><li>booléens</li><li>chaînes</li><li>nombres</li><li>dates</li></ol><p>Vous pouvez utiliser la notation <code>[]</code> pour désignerune collection lorsque <em>attributePath</em> est un chemin dans unobjet (cf. exemples).</p><p>Par défaut, une évaluation non diacritique est effectuée. Sivous souhaitez que l'évaluation soit sensible à la casse ou pourdifférencier des caractères accentués et non-accentués, passez laconstante <code>dk diacritical</code> dans le paramètre<em>option</em>.</p><p>Une erreur est retournée si :</p><ul><li><em>attributePath</em> est un attribut relatif,</li><li><em>attributePath</em> n'est pas trouvé dans la dataclass del'entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemples"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemples"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemples</h4><p>Vous souhaitez obtenir une collection contenant un seul élémentpar nom de pays :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$countries </span>: Collection <span class="hljs-variable">$countries</span>:=ds.Employee.<span class="hljs-function">all</span>().<span class="hljs-function">distinct</span>(<span class="hljs-string">"address.country"</span>)</code></pre><p><code>nicknames</code> est une collection et <code>extra</code>est un attribut d'objet :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$values</span>:=ds.Employee.<span class="hljs-function">all</span>().<span class="hljs-function">distinct</span>(<span class="hljs-string">"extra.nicknames[].first"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_drop"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_drop"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.drop()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.drop</strong>( { <em>mode</em> : Integer } ) :4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk stop dropping on first error</code> : stoppel'exécution de la fonction au niveau de la première entiténon-supprimable</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection vide si exécutée avec succès, sinon entityselection contenant la ou les entité(s) non supprimée(s)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-11"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-11"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.drop()</code> supprime les entitésappartenant à l'entity selection de la table liée à sa dataclassdans le datastore. L'entity selection reste en mémoire.</p><blockquote><p>La suppression d'entités est permanente et ne peut pas êtreannulée. Il est recommandé d'appeler cette action dans unetransaction afin d'avoir une possibilité de récupération.</p></blockquote><p>Si une entité verrouillée est rencontrée lors de l'exécution de<code>.drop()</code>, elle n'est pas supprimée. Par défaut, lafonction traite toutes les entités de l'entity selection et renvoiedes entités non supprimables dans l'entity selection. Si voussouhaitez que la fonction arrête l'exécution au niveau de lapremière entité non supprimable rencontrée, passez la constante<code>dk stop dropping on first error</code> dans le paramètre<em>mode</em>.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-8"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Exemple sans l'option <code>dk stop dropping on firsterror</code> :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$notDropped </span>: cs.EmployeeSelection <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName=:1"</span>;<span class="hljs-string">"S@"</span>) <span class="hljs-variable">$notDropped</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">drop</span>() <span class="hljs-comment">// $notDropped est une entity selection contenant toutes les entités non supprimées</span><span class="hljs-keyword"> If</span>(<span class="hljs-variable">$notDropped</span>.length=<span class="hljs-number">0</span>) <span class="hljs-comment">///La suppression est un succès, toutes les entités ont été supprimées</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Vous avez supprimé "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employees</span>.length)+<span class="hljs-string">" employés"</span>) <span class="hljs-comment">//L'entity selection supprimée reste en mémoire</span><span class="hljs-keyword"> Else</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Problème durant la suppression, réessayez plus tard"</span>)<span class="hljs-keyword"> End if</span></code></pre><p>Exemple avec l'option <code>dk stop dropping on firsterror</code> :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$notDropped </span>: cs.EmployeeSelection <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName=:1"</span>;<span class="hljs-string">"S@"</span>) <span class="hljs-variable">$notDropped</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">drop</span>(dk stop dropping on first error) <span class="hljs-comment">//$notDropped est une entity selection contenant la première entité non supprimée</span><span class="hljs-keyword"> If</span>(<span class="hljs-variable">$notDropped</span>.length=<span class="hljs-number">0</span>) <span class="hljs-comment">//La suppression est un succès, toutes les entités ont été supprimées</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Vous avez supprimé "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employees</span>.length)+<span class="hljs-string">" employés"</span>) <span class="hljs-comment">//L'entity selection supprimée reste en mémoire</span><span class="hljs-keyword"> Else</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Problème durant la suppression, réessayez plus tard"</span>)<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_extract"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_extract"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.extract()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v18 R3</td><td>Ajout</td></tr></tbody></table></details><p><strong>.extract</strong>( <em>attributePath</em> : Text { ;<em>option</em> : Integer } ) : Collection<br /><strong>.extract</strong>( <em>attributePath</em> { ;<em>targetPath</em> } { ; <em>...attributePathN</em> : Text ;<em>targetPathN</em> : Text } ) : Collection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>attributePath</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin d'attribut dont les valeurs doivent être extraites dansla nouvelle collection</td></tr><tr><td>targetPath</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin ou nom d'attribut cible</td></tr><tr><td>option</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>ck keep null</code> : inclure les attributs null dans lacollection retournée (ignorés par défaut).</td></tr><tr><td>Résultat</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Collection contenant les valeurs extraites</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-12"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-12"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.extract()</code> retourne une collectioncontenant les valeurs <em>attributePath</em> extraites de l'entityselection.</p><p><em>attributePath</em> peut désigner :</p><ul><li>un attribut scalaire de dataclass,</li><li>une entité liée,</li><li>des entités liées.</li></ul><p>Si <em>attributePath</em> est invalide, une collection vide estretournée.</p><p>Cette fonction accepte deux syntaxes.</p><p><strong>.extract( attributePath : Text { ; option : Integer } ): Collection</strong></p><p>Avec cette syntaxe, <code>.extract()</code> remplit lacollection retournée avec des valeurs de <em>attributePath</em> del'entity selection.</p><p>Par défaut, les entités pour lesquelles <em>attributePath</em>est <em>null</em> ou indéfini sont ignorées dans la collectionrésultante. Vous pouvez passer la constante <code>ck keepnull</code> dans le paramètre <em>option</em> pour intégrer cesvaleurs comme des éléments <strong>null</strong> dans la collectionretournée.</p><ul><li>Les attributs dataclass avec <a href="#EntitySelectionClass.html_kind">.kind</a> = "relatedEntity" sontextraits sous forme de collection d'entités (les duplications sontconservées).</li><li>Les attributs dataclass avec <a href="#EntitySelectionClass.html_kind">.kind</a> = "relatedEntities"sont extraits sous forme de collection d'entity selections.</li></ul><p><strong>.extract ( attributePath ; targetPath { ;...attributePathN ; ... targetPathN}) : Collection</strong></p><p>Avec cette syntaxe, <code>.extract()</code> remplit lacollection retournée avec les valeurs de <em>attributePath</em>.Chaque élément de la collection retournée est un objet avec lespropriétés <em>targetPath</em> complétées par les propriétés<em>attributePath</em> correspondantes. Les valeurs null sontconservées (le paramètre <em>option</em> est ignoré avec cettesyntaxe).</p><p>Si plusieurs <em>attributePath</em> sont renseignés, un<em>targetPath</em> doit être fourni pour chacun. Seules les paires[<em>attributePath</em>, <em>targetPath</em>] valides sontextraites.</p><ul><li>Les attributs dataclass avec <a href="#EntitySelectionClass.html_kind">.kind</a> = "relatedEntity" sontextraits sous forme d'entity.</li><li>Les attributs dataclass avec <a href="#EntitySelectionClass.html_kind">.kind</a> = "relatedEntities"sont extraits sous forme d'entity selection.</li></ul><blockquote><p>Les valeurs Null sont évaluées comme inférieures aux autresvaleurs.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-9"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Considérons les tables et relations suivantes :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/entityselection.PNG" /></p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$firstnames</span>; <span class="hljs-variable">$addresses</span>; <span class="hljs-variable">$mailing</span>; <span class="hljs-variable">$teachers </span>: Collection  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">//$firstnames est une collection de Chaînes</span> <span class="hljs-variable">$firstnames</span>:=ds.Teachers.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"firstname"</span>)  <span class="hljs-comment">//  //$addresses est une collection d'entités liées à la dataclass Address</span>  <span class="hljs-comment">//Les valeurs null d'Address sont extraites</span> <span class="hljs-variable">$addresses</span>:=ds.Teachers.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"address"</span>;ck keep null)  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">//$mailing est une collection d'objets avec les propriétés "who" et "to"</span>  <span class="hljs-comment">//Le contenu de la propriété "who" est de type Chaîne </span>  <span class="hljs-comment">//Le contenu de la propriété "to" est de type entity (dataclass Address)</span> <span class="hljs-variable">$mailing</span>:=ds.Teachers.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"lastname"</span>;<span class="hljs-string">"who"</span>;<span class="hljs-string">"address"</span>;<span class="hljs-string">"to"</span>)  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">//$mailing est une collection d'objets avec les propriétés "who" et "city"</span>  <span class="hljs-comment">//Le contenu de la propriété "who" est de type Chaîne </span>  <span class="hljs-comment">//Le contenu de la propriété "city" est de type Chaîne </span> <span class="hljs-variable">$mailing</span>:=ds.Teachers.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"lastname"</span>;<span class="hljs-string">"who"</span>;<span class="hljs-string">"address.city"</span>;<span class="hljs-string">"city"</span>)  <span class="hljs-comment">//  //$teachers est une collection d'objets avec les propriétés "where" et "who"</span>  <span class="hljs-comment">//Le contenu de la propriété "where" est de type Chaîne</span>  <span class="hljs-comment">//Le contenu de la propriété "who" est une entity selection (dataclass Teachers)</span> <span class="hljs-variable">$teachers</span>:=ds.Address.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"city"</span>;<span class="hljs-string">"where"</span>;<span class="hljs-string">"teachers"</span>;<span class="hljs-string">"who"</span>)  <span class="hljs-comment">//  //$teachers est une collection d'entity selections</span> <span class="hljs-variable">$teachers</span>:=ds.Address.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"teachers"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_first"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_first"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.first()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.first()</strong> : 4D.Entity</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>Résultat</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Référence vers la première entité de l'entity selection (Nullsi la selection est vide)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-13"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-13"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.first()</code> retourne une référence versl'entité en première position dans l'entity selection.</p><p>Le résultat de cette fonction est similaire à :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySel</span>[<span class="hljs-number">0</span>]</code></pre><p>Il existe cependant une différence entre les deux instructionslorsque la sélection est vide :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entitySel </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity <span class="hljs-variable">$entitySel</span>:=ds.Emp.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"Nonexistentname"</span>) <span class="hljs-comment">//aucune entité correspondante</span>  <span class="hljs-comment">//l'entity selection est alors vide</span> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySel</span>.<span class="hljs-function">first</span>() <span class="hljs-comment">//renvoie Null</span> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySel</span>[<span class="hljs-number">0</span>]  <span class="hljs-comment">//génère une erreur</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-10"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entitySelection </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity <span class="hljs-variable">$entitySelection</span>:=ds.Emp.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-number">100000</span>)<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$entitySelection</span>.length#<span class="hljs-number">0</span>)    <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">first</span>()<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_getdataclass"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_getdataclass"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getDataClass()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.getDataClass()</strong> : 4D.DataClass</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>Résultat</td><td>4D.DataClass</td><td style="text-align:center">&lt;-</td><td>Dataclass à laquelle appartient l'entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-14"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-14"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.getDataClass()</code> retourne la dataclassde l'entity selection.</p><p>Cette fonction est utile principalement dans le contexte de codegénérique.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-11"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-11"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Le code générique suivant duplique toutes les entités del'entity selection :</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//méthode duplicate_entities</span>  <span class="hljs-comment">//duplicate_entities($entity_selection)</span> #<span class="hljs-function">DECLARE </span>( <span class="hljs-variable">$entitySelection </span>: 4D.EntitySelection )<span class="hljs-keyword">   var</span> <span class="hljs-variable">$dataClass </span>: 4D.DataClass<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity</span>; <span class="hljs-variable">$duplicate </span>: 4D.Entity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object <span class="hljs-variable">$dataClass</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">getDataClass</span>()<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$entity</span>;<span class="hljs-variable">$entitySelection</span>)    <span class="hljs-variable">$duplicate</span>:=<span class="hljs-variable">$dataClass</span>.<span class="hljs-function">new</span>()    <span class="hljs-variable">$duplicate</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$entity</span>.<span class="hljs-function">toObject</span>())    <span class="hljs-variable">$duplicate</span>[<span class="hljs-variable">$dataClass</span>.<span class="hljs-function">getInfo</span>().primaryKey]:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//réinitialise la clé primaire</span>    <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$duplicate</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword"> End for each</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_getremotecontextattributes"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_getremotecontextattributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getRemoteContextAttributes()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v19R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.getRemoteContextAttributes()</strong> : Text</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>result</td><td>Text</td><td>&lt;-</td><td>Attributs de contexte associés à l'entity selection, séparéspar une virgule</td></tr></tbody></table><blockquote><p><strong>Mode avancé :</strong> Cette fonction est destinée auxdéveloppeurs qui souhaitent personnaliser les fonctionnalités pardéfaut de ORDA dans le cadre de configurations spécifiques. Dans laplupart des cas, vous n'aurez pas besoin de l'utiliser.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-15"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-15"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.getRemoteContextAttributes()</code>retournedes informations relatives au contexte d'optimisation utilisé parl'entity selection.</p><p>S'il n'existe pas de <a href="#EntitySelectionClass.html_clientserver-optimization">contexted'optimisation</a> pour l'entity selection, la fonction retourne untexte vide.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-12"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-12"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$persons </span>: cs.PersonsSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$p </span>: cs.PersonsEntity<span class="hljs-keyword">var</span> <span class="hljs-variable">$info </span>: Text<span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$persons</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">all</span>()<span class="hljs-variable">$text</span>:=<span class="hljs-string">""</span><span class="hljs-keyword"> For each</span> (<span class="hljs-variable">$p</span>; <span class="hljs-variable">$persons</span>)    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$p</span>.firstname+<span class="hljs-string">" lives in "</span>+<span class="hljs-variable">$p</span>.address.city+<span class="hljs-string">" / "</span><span class="hljs-keyword"> End for each</span> <span class="hljs-variable">$info</span>:=<span class="hljs-variable">$persons</span>.<span class="hljs-function">getRemoteContextAttributes</span>()<span class="hljs-comment">//$info = "firstname,address,address.city"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_voir-aussi-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_voir-aussi-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir aussi</h4><p><a href="#EntitySelectionClass.html_getRemoteContextAttributes">Entity.getRemoteContextAttributes()</a><br /><a href="#EntitySelectionClass.html_clearallremotecontexts">.clearAllRemoteContexts()</a><br /><a href="#EntitySelectionClass.html_getremotecontextinfo">.getRemoteContextInfo()</a><br /><a href="#EntitySelectionClass.html_getallremotecontexts">.getAllRemoteContexts()</a><br /><a href="#EntitySelectionClass.html_setremotecontextinfo">.setRemoteContextInfo()</a></p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_isalterable"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_isalterable"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.isAlterable()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v18 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.isAlterable()</strong> : Boolean</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>Résultat</td><td>Booléen</td><td style="text-align:center">&lt;-</td><td>Vrai si l'entity selection est modifiable, sinon Faux</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-16"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-16"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.isAlterable()</code> retourne Vrai sil'entity selection est modifiable (alterable), et Faux si ellen'est pas modifiable.</p><p>Pour plus d'informations, voir <a href="#EntitySelectionClass.html_entity-selections-partageables-ou-modifiables">Entity selections partageables ou modifiables</a>.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-13"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-13"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Vous êtes sur le point d'afficher l'entity selection<code>Form.products</code> dans une <a href="#listboxOverview.html">list box</a> pour permettre à l'utilisateurd'ajouter de nouveaux produits. Vous voulez vous assurer qu'elleest modifiable afin que l'utilisateur puisse ajouter de nouveauxproduits sans erreur :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">If</span> (<span class="hljs-function">Not</span>(Form.products.<span class="hljs-function">isAlterable</span>()))    Form.products:=Form.products.<span class="hljs-function">copy</span>()<span class="hljs-keyword">End if</span>...Form.products.<span class="hljs-function">add</span>(Form.product)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_isordered"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_isordered"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.isOrdered()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.isOrdered()</strong> : Boolean</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>Résultat</td><td>Booléen</td><td style="text-align:center">&lt;-</td><td>Vrai si l'entity selection est triée, sinon Faux</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-17"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-17"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.isOrdered()</code> retourne Vrai si l'entityselection est triée, et Faux si elle est non triée.</p><blockquote><p>Cette fonction ne modifie pas l'entity selection d'origine.</p></blockquote><p>Pour plus d'informations, voir <a href="#EntitySelectionClass.html_entity-selections-triees-vs-entity-selections-non-triees">Entity selections triées vs Entity selections non-triées</a>.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-14"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-14"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$isOrdered </span>: Boolean <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">newSelection</span>(dk keep ordered) <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">714</span>) <span class="hljs-comment">// // renvoie l'entité avec clé primaire 714</span>  <span class="hljs-comment">//Dans une entity selection triée, vous pouvez ajouter la même entité plusieurs fois (les duplications sont conservées)</span> <span class="hljs-variable">$employees</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-variable">$employees</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-variable">$employees</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-variable">$isOrdered</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">isOrdered</span>()<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$isOrdered</span>)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"L'entity selection est triée et contient "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employees</span>.length)+<span class="hljs-string">" employés"</span>)<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_last"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_last"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.last()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.last()</strong> : 4D.Entity</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>Résultat</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Référence vers la dernière entité de l'entity selection (Nullsi l'entity selection est vide)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-18"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-18"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.last()</code> retourne une référence versl'entité en dernière position dans l'entity selection.</p><p>Le résultat de cette fonction est similaire à :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySel</span>[length<span class="hljs-number">-1</span>]</code></pre><p>Si l'entity selection est vide, la fonction renvoie Null.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-15"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-15"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entitySelection </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity <span class="hljs-variable">$entitySelection</span>:=ds.Emp.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &lt; :1"</span>;<span class="hljs-number">50000</span>)<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$entitySelection</span>.length#<span class="hljs-number">0</span>)    <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">last</span>()<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_length"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_length"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.length</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.length</strong> : Integer</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-19"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-19"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La propriété <code>.length</code> retourne le nombre d'entitésdans l'entity selection. Si l'entity selection est vide, ellecontient 0.</p><p>Les entity selections ont toujours une propriété<code>.length</code>.</p><blockquote><p>Les entités d'une collection d'entités auxquelles on accède via[ ] ne sont pas rechargées depuis la base de données.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-16"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-16"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$vSize </span>: Integer <span class="hljs-variable">$vSize</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"gender = :1"</span>;<span class="hljs-string">"male"</span>).length<span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(vSize)+<span class="hljs-string">" employés masculins trouvés."</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_max"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_max"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.max()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr><tr><td>v18 R6</td><td>Retourne undefined si l'entity selection est vide</td></tr></tbody></table></details><p><strong>.max</strong>( <em>attributePath</em> : Text ) : any</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>attributePath</td><td>Text</td><td>-&gt;</td><td>Chemin de l'attribut à utiliser pour le calcul</td></tr><tr><td>Résultat</td><td>any</td><td>&lt;-</td><td>Valeur la plus haute de l'attribut</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-20"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-20"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.max()</code> retourne la plus haute valeur(ou valeur maximale) parmi toutes les valeurs de<em>attributePath</em> dans l'entity selection. Autrement dit, elleretourne la valeur de la dernière entité de la sélection si elleétait triée par ordre croissant avec la fonction <a href="#EntitySelectionClass.html_orderby"><code>.orderBy()</code></a>.</p><p>Si vous passez dans <em>attributePath</em> le chemin d'unattribut objet contenant des valeurs de différents types, lafonction <code>.max()</code> retournera la valeur maximale dupremier type de valeur scalaire dans l'ordre par défaut de la listedes types 4D (voir <a href="#EntitySelectionClass.html_sort"><code>.sort()</code></a>).</p><p><code>.max()</code> retourne <strong>undefined</strong> sil'entity selection est vide ou si <em>attributePath</em> n'est pastrouvé dans l'attribut objet.</p><p>Une erreur est retournée si :</p><ul><li><em>attributePath</em> est un attribut relatif,</li><li><em>attributePath</em> désigne un attribut qui n'existe pasdans la dataclass de l'entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-17"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-17"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Nous souhaitons connaître le salaire le plus élevé parmi lesemployées :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$maxSalary </span>: Real <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"gender = :1"</span>;<span class="hljs-string">"female"</span>) <span class="hljs-variable">$maxSalary</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">max</span>(<span class="hljs-string">"salary"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_min"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_min"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.min()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr><tr><td>v18 R6</td><td>Retourne undefined si l'entity selection est vide</td></tr></tbody></table></details><p><strong>.min</strong>( <em>attributePath</em> : Text ) : any</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>attributePath</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin de l'attribut à utiliser pour le calcul</td></tr><tr><td>Résultat</td><td>any</td><td style="text-align:center">&lt;-</td><td>Valeur la plus basse de l'attribut</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-21"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-21"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.min()</code> retourne la plus faible valeur(ou valeur minimale) parmi toutes les valeurs de attributePath dansl'entity selection. Autrement dit, elle retourne la valeur de lapremière entité de la sélection si elle était triée par ordrecroissant avec la fonction <a href="#EntitySelectionClass.html_orderby"><code>.orderBy()</code></a>(hors valeurs <strong>Null</strong>).</p><p>Si vous passez dans <em>attributePath</em> le chemin d'unattribut objet contenant des valeurs de différents types, lafonction <code>.min()</code> retournera la valeur minimale dupremier type de valeur scalaire dans l'ordre par défaut de la listedes types 4D (voir <a href="#EntitySelectionClass.html_sort"><code>.sort()</code></a>).</p><p><code>.min()</code> retourne <strong>undefined</strong> sil'entity selection est vide ou si <em>attributePath</em> n'est pastrouvé dans l'attribut objet.</p><p>Une erreur est retournée si :</p><ul><li><em>attributePath</em> est un attribut relatif,</li><li><em>attributePath</em> désigne un attribut qui n'existe pasdans la dataclass de l'entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-18"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-18"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Nous souhaitons connaître le salaire le plus bas parmi lesemployées :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$minSalary </span>: Real <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"gender = :1"</span>;<span class="hljs-string">"female"</span>) <span class="hljs-variable">$minSalary</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">min</span>(<span class="hljs-string">"salary"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_minus"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_minus"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.minus()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.minus</strong>( <em>entity</em> : 4D.Entity ) :4D.EntitySelection<br /><strong>.minus</strong>( <em>entitySelection</em> :4D.EntitySelection ) : 4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entité à soustraire</td></tr><tr><td>entitySelection</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Entity selection à soustraire</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nouvelle entity selection ou une nouvelle référence surl'entity selection existante</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-22"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-22"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.minus()</code> exclut de l'entity selection àlaquelle elle est appliquée l'<em>entity</em> ou les entités del'<em>entitySelection</em> et retourne l'entity selectionrésultante.</p><ul><li>Si vous passez <em>entity</em> en paramètre, la fonction créeune nouvelle entity selection sans <em>entity</em> (si<em>entity</em> appartient à l'entity selection). Si<em>entity</em> n'était pas incluse dans l'entity selectiond'origine, une nouvelle référence à l'entity selection estrenvoyée.</li><li>Si vous passez <em>entitySelection</em> en paramètre, lafonction retourne une entity selection contenant les entitésappartenant à l"entity selection d'origine, sans les entitésappartenant à <em>entitySelection</em>.</li></ul><blockquote><blockquote><p>Vous pouvez comparer des <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">entityselections ordonnées et/ou non ordonnées</a>. La sélectionrésultante est toujours non ordonnée.</p></blockquote></blockquote><p>Si l'entity selection initiale ou l'entity selection initiale etcelle du paramètre <em>entitySelection</em> sont vides, une entityselection vide est retournée.</p><p>Si <em>entitySelection</em> est vide ou si <em>entity</em> estNull, une nouvelle référence à l'entity selection d'origine estrenvoyée.</p><p>Si l'entity selection initiale et le paramètre ne sont pas liésà la même dataclass, une erreur est retournée.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-4"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$result </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>)   <span class="hljs-comment">// l'entity selection $employees contient l'entité avec la clé primaire 710 ainsi que d'autres entités</span>  <span class="hljs-comment">// par ex. "Colin Hetrick", "Grady Harness", "Sherlock Holmes" (clé primaire 710)</span> <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">710</span>) <span class="hljs-comment">// "Sherlock Holmes"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">minus</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-comment">//$result contient "Colin Hetrick", "Grady Harness"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-4"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Vous voulez avoir une sélection d'employées nommées "Jones" quivivent à New York :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel1</span>; <span class="hljs-variable">$sel2</span>; <span class="hljs-variable">$sel3 </span>: cs.EmployeeSelection <span class="hljs-variable">$sel1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"name =:1"</span>;<span class="hljs-string">"Jones"</span>) <span class="hljs-variable">$sel2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"city=:1"</span>;<span class="hljs-string">"New York"</span>) <span class="hljs-variable">$sel3</span>:=<span class="hljs-variable">$sel1</span>.<span class="hljs-function">and</span>(<span class="hljs-variable">$sel2</span>).<span class="hljs-function">minus</span>(ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"gender='male'"</span>))</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_or"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_or"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.or()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.or</strong>( <em>entity</em> : 4D.Entity ) :4D.EntitySelection<br /><strong>.or</strong>( <em>entitySelection</em> : 4D.EntitySelection) : 4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entité à intersecter</td></tr><tr><td>entitySelection</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Entity selection à intersecter</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nouvelle entity selection ou nouvelle référence à l'entityselection d'origine</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-23"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-23"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.or()</code> combine l'entity selection avecle paramètre <em>entity</em> ou <em>entitySelection</em> enutilisant l'opérateur OU logique (non exclusif); elle retourne unenouvelle entity selection non triée contenant toutes les entités del'entity selection et du paramètre.</p><ul><li>Si vous passez <em>entity</em> comme paramètre, vous comparezcette entité avec l'entity selection. Si l'entité appartient àl'entity selection, une nouvelle référence à l'entity selection estretournée. Sinon, une nouvelle entity selection contenant l'entityselection d'origine et l'entité est retournée.</li><li>Si vous passez <em>entitySelection</em> comme paramètre, vouscomparez les deux entity selections. Une nouvelle entity selectioncontenant les entités appartenant à la sélection d'entitésd'origine ou à <em>entitySelection</em> est renvoyée (OU n'est pasexclusif, les entités référencées dans les deux sélections ne sontpas dupliquées dans la sélection résultante).</li></ul><blockquote><blockquote><p>Vous pouvez comparer des <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">entityselections ordonnées et/ou non ordonnées</a>. La sélectionrésultante est toujours non ordonnée.</p></blockquote></blockquote><p>Si l'entity selection initiale et celle du paramètre<em>entitySelection</em> sont vides, une entity selection vide estretournée. Si l'entity selection d'origine est vide, une référenceà <em>entitySelection</em> ou une entity selection contenantuniquement <em>entity</em> est retournée.</p><p>Si <em>entitySelection</em> est vide ou si <em>entity</em> estNull, une nouvelle référence à l'entity selection d'origine estrenvoyée.</p><p>Si l'entity selection initiale et le paramètre ne sont pas liésà la même dataclass, une erreur est retournée.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-5"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees1</span>; <span class="hljs-variable">$employees2</span>; <span class="hljs-variable">$result </span>: cs.EmployeeSelection <span class="hljs-variable">$employees1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//"Colin Hetrick","Grady Harness"</span> <span class="hljs-variable">$employees2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName = :1"</span>;<span class="hljs-string">"C@"</span>) <span class="hljs-comment">//"Colin Hetrick", "Cath Kidston"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employees1</span>.or(<span class="hljs-variable">$employees2</span>) <span class="hljs-comment">//$result contient "Colin Hetrick", "Grady Harness","Cath Kidston"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-5"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$result </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">// "Colin Hetrick","Grady Harness", "Sherlock Holmes"</span> <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">686</span>) <span class="hljs-comment">//l'entité avec clé primaire 686 n'appartient pas à l'entity selection $employees </span>  <span class="hljs-comment">//elle correspond à l'employée "Mary Smith"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employees</span>.or(<span class="hljs-variable">$employee</span>) <span class="hljs-comment">//$result contient "Colin Hetrick", "Grady Harness", "Sherlock Holmes", "Mary Smith"</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_orderby"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_orderby"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.orderBy()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.orderBy</strong>( <em>pathString</em> : Text ) :4D.EntitySelection<br /><strong>.orderBy</strong>( <em>pathObjects</em> : Collection ) :4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>pathString</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin(s) d'attribut(s) et mode(s) de tri pour l'entityselection</td></tr><tr><td>pathObjects</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Collection d'objets critère</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nouvelle entity selection dans l'ordre spécifié</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-24"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-24"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.orderBy()</code> renvoie une nouvelle entityselection triée contenant toutes les entités de l'entity selectiondans l'ordre spécifié par le paramètre <em>pathString</em> ou<em>pathObjects</em>.</p><blockquote><ul><li>Cette fonction ne modifie pas l'entity selectiond'origine.</li></ul></blockquote><ul><li>Pour plus d'informations, reportez-vous au paragraphe <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">Entityselections triées ou non triées</a>.</li></ul><p>Vous devez utiliser un paramètre de critère pour définir lamanière dont les entités doivent être triées. Deux paramètresdifférents sont pris en charge :</p><ul><li><em>pathString</em> (Texte) : Ce paramètre contient une formulecomposée de chemins d'attribut de 1 à n et (optionnellement) detri, séparés par des virgules. La syntaxe est :</li></ul><pre><code class="hljs css language-4d"><span class="hljs-string">"attributePath1 {desc or asc}, attributePath2 {desc or asc},..."</span></code></pre><p>L'ordre dans lequel les attributs sont passés détermine lapriorité de tri des entités. Par défaut, les attributs sont triéspar ordre croissant. Vous pouvez définir l'ordre de tri de chaquepropriété dans la formule de critère, séparée du chemin depropriété par un simple espace : passez "asc" pour trier par ordrecroissant ou "desc" pour un ordre décroissant.</p><ul><li><em>pathObjects</em> (collection) : chaque élément de lacollection contient un objet structuré de la façon suivante :</li></ul><pre><code class="hljs css language-4d">{    <span class="hljs-string">"propertyPath"</span>: string,    <span class="hljs-string">"descending"</span>: boolean}</code></pre><p>Par défaut, les attributs sont triés par ordre croissant("descending" est false).</p><p>Vous pouvez ajouter autant d'objets que nécessaire dans lacollection de critères.</p><blockquote><p>Cette fonction est utilisable uniquement avec un datastoredistant (client/serveur ou connexion <code>Opendatastore</code>).</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-19"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-19"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-comment">// tri avec formule</span> <span class="hljs-variable">$sortedEntitySelection</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">orderBy</span>(<span class="hljs-string">"firstName asc, salary desc"</span>) <span class="hljs-variable">$sortedEntitySelection</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">orderBy</span>(<span class="hljs-string">"firstName"</span>)  <span class="hljs-comment">// tri avec collection avec ou sans ordres de tri</span> <span class="hljs-variable">$orderColl</span>:=New collection <span class="hljs-variable">$orderColl</span>.<span class="hljs-function">push</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"propertyPath"</span>;<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"descending"</span>;<span class="hljs-literal">False</span>)) <span class="hljs-variable">$orderColl</span>.<span class="hljs-function">push</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"propertyPath"</span>;<span class="hljs-string">"salary"</span>;<span class="hljs-string">"descending"</span>;<span class="hljs-literal">True</span>)) <span class="hljs-variable">$sortedEntitySelection</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">orderBy</span>(<span class="hljs-variable">$orderColl</span>) <span class="hljs-variable">$orderColl</span>:=New collection <span class="hljs-variable">$orderColl</span>.<span class="hljs-function">push</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"propertyPath"</span>;<span class="hljs-string">"manager.lastName"</span>)) <span class="hljs-variable">$orderColl</span>.<span class="hljs-function">push</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"propertyPath"</span>;<span class="hljs-string">"salary"</span>)) <span class="hljs-variable">$sortedEntitySelection</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">orderBy</span>(<span class="hljs-variable">$orderColl</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_orderbyformula"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_orderbyformula"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.orderByFormula()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17 R6</td><td>Ajout</td></tr></tbody></table></details><p><strong>.orderByFormula</strong>( <em>formulaString</em> : Text{ ; <em>sortOrder</em> : Integer } { ; <em>settings</em> : Object}) : 4D.EntitySelection<br /><strong>.orderByFormula</strong>( <em>formulaObj</em> : Object { ;<em>sortOrder</em> : Integer } { ; <em>settings</em> : Object} ) :4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>formulaString</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chaîne formule</td></tr><tr><td>formulaObj</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Objet formule</td></tr><tr><td>sortOrder</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk ascending</code> (par défaut) ou<code>dkdescending</code></td></tr><tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Paramètre(s) de la formule</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nouvelle entity selection triée</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-25"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-25"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.orderByFormula()</code> renvoie une nouvelleentity selection triée contenant toutes les entités de l'entityselection dans l'ordre spécifié par le paramètre<em>formulaString</em> ou <em>formulaObj</em> et, éventuellement,les paramètres <em>sortOrder</em> et <em>settings</em>.</p><blockquote><p>Les entités d'une collection d'entités auxquelles on accède via[ ] ne sont pas rechargées depuis la base de données.</p></blockquote><p>Vous pouvez utiliser soit le paramètre <em>formulaString</em>,soit le paramètre <em>formulaObj</em> :</p><ul><li><em>formulaString</em> : passez une expression 4D telle que"Year of(this.birthDate)".</li><li><em>formulaObj</em> : passez un objet formule valide créé àl'aide de la commande <code>Formula</code> ou <code>Formula fromstring</code>.</li></ul><p>La formule de <em>formulaString</em> ou <em>formulaObj</em> estexécutée pour chaque entité de l'entity selection et son résultatsert à définir la position de l'entité dans l'entity selectionretournée. Le résultat doit être de type triable (booléen, date,numérique, texte, heure, null).</p><blockquote><p>Un résultat null est toujours la plus petite valeur.</p></blockquote><p>Par défaut, si vous omettez le paramètre <em>sortOrder</em>,l'entity selection résultante est triée par ordre croissant. Vouspouvez optionnellement passer l'une des valeurs suivantes dans leparamètre <em>sortOrder</em> :</p><table><thead><tr><th>Constante</th><th>Valeur</th><th>Commentaire</th></tr></thead><tbody><tr><td>dk ascending</td><td>0</td><td>Ordre de tri croissant (défaut)</td></tr><tr><td>dk descending</td><td>1</td><td>Ordre de tri décroissant</td></tr></tbody></table><p>Dans <em>formulaString</em> et <em>formulaObj</em>, l'entité quiest traitée ainsi que ses attributs sont disponibles via lacommande <code>This</code> (par exemple,<code>This.lastName</code>).</p><p>Vous pouvez passer un ou plusieurs paramètre(s) à la formule àl'aide de la propriété <code>args</code> (objet) du paramètre<code>settings</code> : la formule reçoit l'objet<code>settings.args</code> dans $1.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-6"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><p>Pour effectuer un tri d'étudiants à l'aide d'une formule texte:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es1</span>; <span class="hljs-variable">$es2 </span>: cs.StudentsSelection <span class="hljs-variable">$es1</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality=:1"</span>;<span class="hljs-string">"French"</span>) <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.<span class="hljs-function">orderByFormula</span>(<span class="hljs-string">"length(this.lastname)"</span>) <span class="hljs-comment">//croissant par défaut</span> <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.<span class="hljs-function">orderByFormula</span>(<span class="hljs-string">"length(this.lastname)"</span>;dk descending)</code></pre><p>Pour effectuer le même tri dans le même ordre, mais à l'aided'un objet formule :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es1</span>; <span class="hljs-variable">$es2 </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula </span>: Object <span class="hljs-variable">$es1</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality=:1"</span>;<span class="hljs-string">"French"</span>) <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)) <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.<span class="hljs-function">orderByFormula</span>(<span class="hljs-variable">$formula</span>) <span class="hljs-comment">// croissant par défaut</span> <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.<span class="hljs-function">orderByFormula</span>(<span class="hljs-variable">$formula</span>;dk descending)</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-6"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Une formule est donnée sous forme d'objet formule avec desparamètres; l'objet <code>settings.args</code> est reçu dans $1dans la méthode <strong><em>computeAverage</em></strong>.</p><p>Dans cet exemple, le champ objet "marks" de la dataclass<strong>Students</strong> contient les notes des étudiants danschaque matière. Un seul objet formule est utilisé pour calculer lanote moyenne des étudiants à l'aide de différents coefficients pourschoolA et schoolB.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es1</span>; <span class="hljs-variable">$es2 </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula</span>; <span class="hljs-variable">$schoolA</span>; <span class="hljs-variable">$schoolB </span>: Object <span class="hljs-variable">$es1</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality=:1"</span>;<span class="hljs-string">"French"</span>) <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">computeAverage</span>(<span class="hljs-variable">$1</span>)) <span class="hljs-variable">$schoolA</span>:=<span class="hljs-function">New object</span>() <span class="hljs-comment">//objet settings</span> <span class="hljs-variable">$schoolA</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"english"</span>;<span class="hljs-number">1</span>;<span class="hljs-string">"math"</span>;<span class="hljs-number">1</span>;<span class="hljs-string">"history"</span>;<span class="hljs-number">1</span>) <span class="hljs-comment">// Coefficients permettant de calculer la moyenne</span>  <span class="hljs-comment">//Trier les étudiants en fonction du critère schoolA</span> <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.entitySelection.<span class="hljs-function">orderByFormula</span>(<span class="hljs-variable">$formula</span>;<span class="hljs-variable">$schoolA</span>) <span class="hljs-variable">$schoolB</span>:=<span class="hljs-function">New object</span>() <span class="hljs-comment">//objet settings </span> <span class="hljs-variable">$schoolB</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"english"</span>;<span class="hljs-number">1</span>;<span class="hljs-string">"math"</span>;<span class="hljs-number">2</span>;<span class="hljs-string">"history"</span>;<span class="hljs-number">3</span>) <span class="hljs-comment">// Coefficients permettant de calculer une moyenne</span>  <span class="hljs-comment">//Trier les étudiants en fonction du critère schoolB</span> <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.entitySelection.<span class="hljs-function">orderByFormula</span>(<span class="hljs-variable">$formula</span>;dk descending;<span class="hljs-variable">$schoolB</span>)</code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">//  // méthode computeAverage </span>  <span class="hljs-comment">// -----------------------------</span> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$coefList </span>: Object) -&gt; <span class="hljs-variable">$result </span>: Integer<span class="hljs-keyword"> var</span> <span class="hljs-variable">$subject </span>: Text<span class="hljs-keyword"> var</span> <span class="hljs-variable">$average</span>; <span class="hljs-variable">$sum </span>: Integer <span class="hljs-variable">$average</span>:=<span class="hljs-number">0</span> <span class="hljs-variable">$sum</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$subject</span>;<span class="hljs-variable">$coefList</span>)    <span class="hljs-variable">$sum</span>:=<span class="hljs-variable">$sum</span>+<span class="hljs-variable">$coefList</span>[<span class="hljs-variable">$subject</span>]<span class="hljs-keyword"> End for each</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$subject</span>;<span class="hljs-literal">This</span>.marks)    <span class="hljs-variable">$average</span>:=<span class="hljs-variable">$average</span>+(<span class="hljs-literal">This</span>.marks[<span class="hljs-variable">$subject</span>]*<span class="hljs-variable">$coefList</span>[<span class="hljs-variable">$subject</span>])<span class="hljs-keyword"> End for each</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$average</span>/<span class="hljs-variable">$sum</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_query"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_query"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.query()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17 R6</td><td>Prise en charge des paramètres Formula</td></tr><tr><td>v17 R5</td><td>Prise en charge des placeholders pour les valeurs</td></tr><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.query</strong>( <em>queryString</em> : Text { ;<em>...value</em> : any } { ; <em>querySettings</em> : Object } ) :4D.EntitySelection<br /><strong>.query</strong>( <em>formula</em> : Object { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>queryString</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Critères de recherche en texte</td></tr><tr><td>formula</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Critères de recherche en objet formule</td></tr><tr><td>value</td><td>any</td><td style="text-align:center">-&gt;</td><td>Valeur(s) à utiliser comme placeholder(s)</td></tr><tr><td>querySettings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Options de recherche : parameters, attributes, args,allowFormulas, context, queryPath, queryPlan</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nouvelle entity selection composée d'entités issues de l'entityselection répondant aux critères de recherche spécifiés dans<em>queryString</em> ou <em>formula</em></td><td></td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-26"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-26"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.query()</code> recherche les entitésrépondant aux critères de recherche spécifiés dans<em>queryString</em> ou <em>formula</em> et (optionnellement) dans<em>value</em>toutes les entités de l'entity selection, et renvoieun nouvel objet de type <code>EntitySelection</code> contenanttoutes les entités trouvées. Le mode lazy loading est appliqué.</p><blockquote><p>Les entités d'une collection d'entités auxquelles on accède via[ ] ne sont pas rechargées depuis la base de données.</p></blockquote><p>Si aucune entité correspondante n'est trouvée, une<code>EntitySelection</code> vide est retournée.</p><p>Si aucune entité correspondante n'est trouvée, une<code>EntitySelection</code> vide est retournée.</p><blockquote><p>Par défaut, si vous omettez la déclaration <strong>orderby</strong> dans <em>queryString</em>, l'entity selection retournéen'est <a href="#EntitySelectionClass.html_entity-selections-triees-vs-entity-selections-non-triees">pas triée</a>. A noter cependant qu'en client/server, elle secomporte comme une entity selection triée (les entités sontajoutées à la fin de la sélection).</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-7"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entitySelectionTemp </span>: cs.EmployeeSelection <span class="hljs-variable">$entitySelectionTemp</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"M@"</span>) Form.emps:=<span class="hljs-variable">$entitySelectionTemp</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"manager.lastName = :1"</span>;<span class="hljs-string">"S@"</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-7"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Pour plus d'informations sur la génération d'une requête àl'aide des paramètres <em>queryString</em>, <em>value</em>, et<em>querySettings</em>, reportez-vous à la description de lafonction de dataclass <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_voir-aussi-2"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_voir-aussi-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir aussi</h4><p>Vous trouverez plus d'exemples de requêtes dans la page <a href="#EntitySelectionClass.html_query"><code>.query()</code></a> .</p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_querypath"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_querypath"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.queryPath</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.queryPath</strong> : Text</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-27"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-27"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La propriété <code>.queryPath</code> contient la descriptiondétaillée du chemin de recherche réel utilisé par 4D. Cettepropriété est disponible pour les objets de type<code>EntitySelection</code> générés via des recherches si lapropriété <code>"queryPath":true</code> a été passée dans leparamètre <em>querySettings</em> de la fonction <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>.</p><p>Pour plus d'informations, veuillez vous reporter au paragraphe<strong>querySettings</strong> de la fonction de dataclass <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>.</p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_queryplan"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_queryplan"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.queryPlan</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.queryPlan</strong> : Text</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-28"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-28"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La propriété <code>.queryPlan</code> contient la descriptiondétaillée du plan de recherche prévu par 4D avant de l'exécuter.Cette propriété est disponible pour les objets de type<code>EntitySelection</code> générés via des recherches si lapropriété <code>"queryPlan":true</code> a été passée dans leparamètre <em>querySettings</em> de la fonction <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>.</p><p>Pour plus d'informations, veuillez vous reporter au paragraphe<strong>querySettings</strong> de la fonction de dataclass <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>.</p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_refresh"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_refresh"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.refresh()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v18 R3</td><td>Ajout</td></tr></tbody></table></details><p><strong>.refresh()</strong></p><p>| Paramètres | Type | | Description | | ---------- | ---- |::|--------------------------- | | | | | Ne requiert aucun paramètre|</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-29"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-29"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><blockquote><p>Cette fonction est utilisable uniquement avec un datastoredistant (client/serveur ou connexion <code>Opendatastore</code>).</p></blockquote><p>La fonction <code>.refresh()</code> "invalide" immédiatement lesdonnées de l'entity selection dans le cache local d'ORDA de sorteque, la prochaine fois que 4D accède à l'entity selection, ellesoit rechargée à partir de la base.</p><p>Par défaut, le cache local d'ORDA est invalidé après 30secondes. Dans le contexte des applications client/serveur à l'aided'ORDA et du langage classique, cette fonction vous permet d'êtrecertain que l'application distante fonctionne toujours avec lesdonnées les plus récentes.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-8"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><p>Dans cet exemple, les langages classiques et ORDA modifientsimultanément les mêmes données :</p><pre><code class="hljs css language-4d"> <span class="hljs-comment">//Sur un 4D distant</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$selection </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$student </span>: cs.StudentsEntity <span class="hljs-variable">$selection</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname=:1"</span>;<span class="hljs-string">"Collins"</span>)  <span class="hljs-comment">//La première entité est chargée dans le cache d'ORDA</span> <span class="hljs-variable">$student</span>:=<span class="hljs-variable">$selection</span>.<span class="hljs-function">first</span>()  <span class="hljs-comment">//Mise à jour avec un 4D classique, le cache ORDA cache n'en est pas informé</span><span class="hljs-function"> QUERY</span>([Students];[Students]lastname=<span class="hljs-string">"Collins"</span>) [Students]lastname:=<span class="hljs-string">"Colin"</span><span class="hljs-function"> SAVE RECORD</span>([Students])  <span class="hljs-comment">//pour obtenir la dernière version, le cache d'ORDA doit être invalidé</span> <span class="hljs-variable">$selection</span>.<span class="hljs-function">refresh</span>()  <span class="hljs-comment">// Même si le cache n'a pas expiré, la première entité est rechargée à partir du disque</span> <span class="hljs-variable">$student</span>:=<span class="hljs-variable">$selection</span>.<span class="hljs-function">first</span>()  <span class="hljs-comment">//$student.lastname contient "Colin"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-8"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Dans cet exemple, les langages classiques et ORDA modifientsimultanément les mêmes données :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Methode formulaire:</span><span class="hljs-keyword"> Case of</span>    :(Form event code=On Load)       Form.students:=ds.Students.<span class="hljs-function">all</span>()<span class="hljs-keyword"> End case</span>  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">// Sur client #1, l'utilisateur charge, met à jour et sauvegarde la première entité</span>  <span class="hljs-comment">// Sur client #2, l'utilisateur charge, met à jour et sauvegarde la même entité</span>  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">// Sur client #1:</span> Form.students.<span class="hljs-function">refresh</span>() <span class="hljs-comment">// Invalide le cache ORDA pour l'entity selection Form.students</span>  <span class="hljs-comment">// Le contenu de la list box est rafraîchi à partir de la base avec les mises à jour effectuées par le client #2</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_selected"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_selected"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.selected()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v19 R3</td><td>Ajout</td></tr></tbody></table></details><p><strong>.selected</strong>( <em>selectedEntities</em> :4D.EntitySelection ) : Object</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>selectedEntities</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Entity selection avec des entités dont il faut connaître lerang dans l'entity selection</td></tr><tr><td>Résultat</td><td>Object</td><td style="text-align:center">&lt;-</td><td>Plage(s) d'entités sélectionnées dans l'entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-30"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-30"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.selected()</code> retourne un objet décrivantla ou les positions de <em>selectedEntities</em> dans l'entityselection d'origine.</p><blockquote><p>Les entités d'une collection d'entités auxquelles on accède via[ ] ne sont pas rechargées depuis la base de données.</p></blockquote><p>Passez, dans le paramètre <em>selectedEntities</em> une entityselection contenant des entités dont vous souhaitez connaître laposition dans l'entity selection d'origine.<em>selectedEntities</em> doit être une entity selectionappartenant à la même dataclass que l'entity selection d'origine,sinon une erreur 1587 - "La sélection d'entités provient d'unedataclass incompatible" est générée.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_r%C3%A9sultat"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_r%25C3%25A9sultat"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Résultat</h4><p>L'objet retourné contient les propriétés suivantes :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>ranges</td><td>Collection</td><td>Collection d'objets plage</td></tr><tr><td>ranges[].start</td><td>Integer</td><td>Indice de la première entité de la plage</td></tr><tr><td>ranges[].end</td><td>Integer</td><td>Indice de la dernière entité de la plage</td></tr></tbody></table><p>Si une propriété <code>ranges</code> contient une seule entité,<code>start</code> = <code>end</code>. L'indice démarre à 0.</p><p>La fonction retourne une collection vide dans la propriété<code>ranges</code> si l'entity selection d'origine ou l'entityselection <em>selectedEntities</em> est vide.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-20"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-20"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$invoices</span>; <span class="hljs-variable">$cashSel</span>; <span class="hljs-variable">$creditSel </span>: cs.Invoices<span class="hljs-keyword">var</span> <span class="hljs-variable">$result1</span>; <span class="hljs-variable">$result2 </span>: Object<span class="hljs-variable">$invoices</span>:=ds.Invoices.<span class="hljs-function">all</span>()<span class="hljs-variable">$cashSelection</span>:=ds.Invoices.<span class="hljs-function">query</span>(<span class="hljs-string">"payment = :1"</span>; <span class="hljs-string">"Cash"</span>)<span class="hljs-variable">$creditSel</span>:=ds.Invoices.<span class="hljs-function">query</span>(<span class="hljs-string">"payment IN :1"</span>;<span class="hljs-function"> New collection</span>(<span class="hljs-string">"Cash"</span>; <span class="hljs-string">"Credit Card"</span>))<span class="hljs-variable">$result1</span>:=<span class="hljs-variable">$invoices</span>.<span class="hljs-function">selected</span>(<span class="hljs-variable">$cashSelection</span>)<span class="hljs-variable">$result2</span>:=<span class="hljs-variable">$invoices</span>.<span class="hljs-function">selected</span>(<span class="hljs-variable">$creditSel</span>)<span class="hljs-comment">//$result1 = {ranges:[{start:0;end:0},{start:3;end:3},{start:6;end:6}]}</span><span class="hljs-comment">//$result2 = {ranges:[{start:0;end:1},{start:3;end:4},{start:6;end:7}]}</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_slice"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_slice"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.slice()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.slice</strong>( <em>startFrom</em> : Integer { ;<em>end</em> : Integer } ) : 4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>startFrom</td><td>Integer</td><td style="text-align:center">-&gt;</td><td>Position à laquelle démarrer l'opération (incluse)</td></tr><tr><td>end</td><td>Integer</td><td style="text-align:center">-&gt;</td><td>Position de fin (non incluse)</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nouvelle entity selection contenant les entités copiées(shallow copy)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-31"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-31"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.slice()</code> retourne une partie d'uneentity selection dans une nouvelle entity selection, sélectionnéede l'index <em>startFrom</em> à l'index de <em>fin</em>(<em>fin</em> non incluse) ou à la dernière entité de l'entityselection. Cette fonction effectue une shallow copy (copiesuperficielle) de l'entity selection (les mêmes référencesd'entités sont utilisées).</p><blockquote><p>Les entités d'une collection d'entités auxquelles on accède via[ ] ne sont pas rechargées depuis la base de données.</p></blockquote><p>L'entity selection retournée contient les entités comprisesentre l'entité désignée par <em>startFrom</em> et, sans lacontenir, celle désignée par <em>end</em>. Si seul le paramètre<em>startFrom</em> est spécifié, l'entity selection retournéecontient toutes les entités entre <em>startFrom</em> et la dernièreentité de l'entity selection d'origine.</p><ul><li>Si <em>startFrom</em> &lt; 0, il est recalculé comme<em>startFrom:=startFrom+length</em> (il est considéré commepartant de la fin de l'entity selection). Si la valeur calculée estnégative, <em>startFrom</em> prend la valeur 0.</li><li>Si <em>startFrom &gt;= length</em>, la fonction retourne uneentity selection vide.</li><li>Si <em>end</em> &lt; 0, le paramètre est recalculé comme<em>end:=end+length</em>.</li><li>Si <em>end &lt; startFrom</em> (valeurs passées ourecalculées), la fonction ne fait rien.</li></ul><p>Si l'entity selection contient des entités qui ont étésupprimées entre-temps, elles sont également retournées.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-9"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><p>Si l'entity selection contient des entités qui ont étésupprimées entre-temps, elles sont également retournées.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$sel</span>; <span class="hljs-variable">$sliced </span>: cs.EmployeeSelection<span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-number">50000</span>)<span class="hljs-variable">$sliced</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">slice</span>(<span class="hljs-number">0</span>;<span class="hljs-number">9</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-9"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Vous souhaitez obtenir une sous-sélection des 9 premièresentités de l'entity selection :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$slice </span>: cs.EmployeeSelection<span class="hljs-variable">$slice</span>:=ds.Employee.<span class="hljs-function">all</span>().<span class="hljs-function">slice</span>(<span class="hljs-number">-1</span>;<span class="hljs-number">-2</span>) <span class="hljs-comment">//tente de retourner les entités de position 9 à 8, mais comme 9 &gt; 8, retourne une entity selection vide</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_sum-"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_sum-"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.sum( )</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.sum</strong>( <em>attributePath</em> : Text ) :Real</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>attributePath</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin de l'attribut à utiliser pour le calcul</td></tr><tr><td>Résultat</td><td>Réel</td><td style="text-align:center">&lt;-</td><td>Somme des valeurs de l'entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-32"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-32"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.toCollection()</code> crée et retourne unecollection dans laquelle chaque élément est un objet contenant unensemble de propriétés et de valeurs correspondant aux noms etvaleurs d'attributs de l'entity selection.</p><p>La fonction <code>.sum()</code> retourne la somme de toutes lesvaleurs d'<em>attributePath</em> dans l'entity selection.</p><p>La somme peut uniquement être effectuée sur des valeursnumériques. Si <em>attributePath</em> est de type objet, seules lesvaleurs numériques qu'il contient seront prises en compte (lesautres types de valeurs sont ignorés). Dans ce cas, si<em>attributePath</em> désigne une propriété qui n'existe pas dansl'objet ou qui ne contient pas de valeurs numériques,<code>.sum()</code> retourne 0.</p><p>Une erreur est retournée si :</p><ul><li><em>attributePath</em> est un attribut qui n'est ni de typenumérique ni de type objet,</li><li><em>attributePath</em> est un attribut relatif,</li><li><em>attributePath</em> n'est pas trouvé dans la dataclass del'entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-21"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-21"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$sel </span>: cs.EmployeeSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$sum </span>: Real<span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &lt; :1"</span>;<span class="hljs-number">20000</span>)<span class="hljs-variable">$sum</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">sum</span>(<span class="hljs-string">"salary"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_tocollection-"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_tocollection-"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.toCollection( )</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.toCollection</strong>( { <em>options</em> : Integer { ;<em>begin</em> : Integer { ; <em>howMany</em> : Integer } } ) :<em>Collection</em><br /><strong>.toCollection</strong>( <em>filterString</em> : Text {;<em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer }}} ) : <em>Collection</em><br /><strong>.toCollection</strong>( <em>filterCol</em> : Collection {;<em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer }}} ) : <em>Collection</em></p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>filterString</td><td>Text</td><td style="text-align:center">-&gt;</td><td>Chemin(s) d'attribut(s) à extraire</td></tr><tr><td>filterCol</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Collection d'attribut(s) à extraire</td></tr><tr><td>options</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk with primary key</code> : ajoute la clé primaire<br /><code>dk with stamp</code> : ajoute le marqueur</td></tr><tr><td>begin</td><td>Integer</td><td style="text-align:center">-&gt;</td><td>Désigne la position de début</td></tr><tr><td>howMany</td><td>Integer</td><td style="text-align:center">-&gt;</td><td>Nombre d'entités à extraire</td></tr><tr><td>Résultat</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Collection d'objets contenant les attributs et valeurs del'entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_description-33"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_description-33"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.toCollection()</code> crée et retourne unecollection dans laquelle chaque élément est un objet contenant unensemble de propriétés et de valeurs correspondant aux noms etvaleurs d'attributs de l'entity selection.</p><p>Si aucun paramètre de filtre n'est passé ou si le paramètrecontient une chaîne vide ou "*", tous les attributs sont extraits.Les attributs dont la propriété <a href="#EntitySelectionClass.html_kind">kind</a> est "relatedEntity" sontextraits avec la forme simple : un objet avec la propriété __KEY(clé primaire). Les attributs dont la propriété "kind" est"relatedEntities" ne sont pas extraits.</p><p>Vous pouvez également indiquer les attributs à extraire à l'aided'un paramètre de filtre. Deux types de filtres sont utilisables:</p><ul><li><em>filterString</em> --une chaîne avec les chemins despropriétés séparés par des virgules : "propertyPath1,propertyPath2, ...".</li><li><em>filterCol</em> --une collection de chaînes contenant deschemins de propriétés : ["propertyPath1","propertyPath2",...]</li></ul><p>Si un filtre est spécifié pour un attribut de type<code>relatedEntity</code> :</p><ul><li>propertyPath = "relatedEntity" -&gt; l'extraction se fait dansune forme simple</li><li>propertyPath = "relatedEntity.*" -&gt; toutes les propriétéssont extraites</li><li>propertyPath = "relatedEntity.propertyName1,relatedEntity.propertyName2, ..." -&gt; seules ces propriétés sontextraites</li></ul><p>Si un filtre est spécifié pour un attribut de type<code>relatedEntity</code> :</p><ul><li>propertyPath = "relatedEntities.*" -&gt; toutes les propriétéssont extraites</li><li>propertyPath = "relatedEntities.propertyName1,relatedEntities.propertyName2, ..." -&gt; seules ces propriétéssont extraites</li></ul><p>Si un filtre est spécifié pour un attribut detype<code>relatedEntities</code> :</p><p>Le paramètre <em>begin</em> vous permet d'indiquer la positionde départ des entités à extraire. Vous pouvez passer toute valeurcomprise entre 0 et la longueur de l'entity selection -1.</p><p>Le paramètre <em>howMany</em> vous permet de spécifier le nombred'entités à extraire, à partir de celle désignée par<em>begin</em>. Les entités supprimées ne sont pas retournées maissont prises en compte dans <em>howMany</em>. Par exemple, si<em>howMany</em>= 3 et s'il y a une entité supprimée, seulement 2entités sont extraites.</p><p>Si le "kind" de <em>attributeName</em> est <code>storage</code>:<code>.attributeName</code> retourne une collection de valeurs dumême type que <em>attributeName</em>.</p><p>Si <em>howMany</em> &gt; length de l'entity selection, lafonction retourne (length - <em>begin</em>) objects.</p><ul><li>l'entity selection est vide, ou</li><li><em>begin</em> est supérieur à la longueur de l'entityselection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-1-10"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-1-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><p>La structure suivante sera utilisée pour les exemples de cettesection :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/dataclassAttribute4.png" /></p><p>Exemple sans paramètres de filtre ni d'options :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$employeesCollection</span>:=New collection <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>()</code></pre><p>Retourne :</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"ID"</span>: <span class="hljs-number">416</span>,        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"salary"</span>: <span class="hljs-number">79100</span>,        <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,        <span class="hljs-string">"woman"</span>: false,        <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,        <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,        <span class="hljs-string">"extra"</span>: null,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        },        <span class="hljs-string">"manager"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>        }    },    {        <span class="hljs-string">"ID"</span>: <span class="hljs-number">417</span>,        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"salary"</span>: <span class="hljs-number">47000</span>,        <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1992-06-16T00:00:00.000Z"</span>,        <span class="hljs-string">"woman"</span>: true,        <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,        <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,        <span class="hljs-string">"extra"</span>: null,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        },        <span class="hljs-string">"manager"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>        }    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-2-10"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-2-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Retourne :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-keyword">var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">all</span>()<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">""</span>;dk with primary key+dk with stamp)</code></pre><p>Retourne :</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">416</span>,        <span class="hljs-string">"__STAMP"</span>: <span class="hljs-number">1</span>,        <span class="hljs-string">"ID"</span>: <span class="hljs-number">416</span>,        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"salary"</span>: <span class="hljs-number">79100</span>,        <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,        <span class="hljs-string">"woman"</span>: false,        <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,        <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,        <span class="hljs-string">"extra"</span>: null,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        },        <span class="hljs-string">"manager"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>        }    },    {        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">417</span>,        <span class="hljs-string">"__STAMP"</span>: <span class="hljs-number">1</span>,        <span class="hljs-string">"ID"</span>: <span class="hljs-number">417</span>,        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"salary"</span>: <span class="hljs-number">47000</span>,        <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1992-06-16T00:00:00.000Z"</span>,        <span class="hljs-string">"woman"</span>: true,        <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,        <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,        <span class="hljs-string">"extra"</span>: null,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        },        <span class="hljs-string">"manager"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>        }    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-3-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-3-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 3</h4><p>Retourne :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection</span>; <span class="hljs-variable">$filter </span>: Collection<span class="hljs-keyword">var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$filter</span>:=New collection<span class="hljs-variable">$filter</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"firstName"</span>)<span class="hljs-variable">$filter</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"lastName"</span>)<span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">all</span>()<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-variable">$filter</span>;<span class="hljs-number">0</span>;<span class="hljs-number">0</span>;<span class="hljs-number">2</span>)</code></pre><p>Retourne :</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-4-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-4-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 4</h4><p>Retourne :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">"firstName,lastName,employer"</span>)</code></pre><p>Exemple avec le type <code>relatedEntity</code> avec une formesimple :</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        }    }   ]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-5-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-5-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 5</h4><p>retourne :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection</span>; <span class="hljs-variable">$coll </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$coll</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"lastName"</span>)<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-variable">$coll</span>)</code></pre><p>Retourne :</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Joanna"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Cabrera"</span>    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Alexandra"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Coleman"</span>    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-6-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-6-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 6</h4><p>Retourne :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection</span>; <span class="hljs-variable">$coll </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$coll</span>:=New collection<span class="hljs-variable">$coll</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"firstName"</span>)<span class="hljs-variable">$coll</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"lastName"</span>)<span class="hljs-variable">$coll</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.*"</span>)<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-variable">$coll</span>)</code></pre><p>Retourne :</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,            <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,            <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,            <span class="hljs-string">"extra"</span>: null        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,            <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,            <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,            <span class="hljs-string">"extra"</span>: null        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,            <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,            <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,            <span class="hljs-string">"extra"</span>: null        }    }  ]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-7-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-7-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 7</h4><p>Retourne :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">"firstName, lastName, employer.name"</span>)</code></pre><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>        }    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-8-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-8-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 8</h4><p>Exemple avec extraction de quelques propriétés de relatedEntity:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employeesCollection </span>: Collection <span class="hljs-variable">$employeesCollection</span>:=New collection <span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">"firstName, lastName, directReports.firstName"</span>)</code></pre><p>Retourne :</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"directReports"</span>: []    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mike"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Phan"</span>,        <span class="hljs-string">"directReports"</span>: [            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gary"</span>            },            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Sadie"</span>            },            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Christie"</span>            }        ]    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gary"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Reichert"</span>,        <span class="hljs-string">"directReports"</span>: [            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Rex"</span>            },            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Jenny"</span>            },            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lowell"</span>            }        ]    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_exemple-9-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_exemple-9-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 9</h4><p>Retourne :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">"firstName, lastName, directReports.*"</span>)</code></pre><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"directReports"</span>: []    },        {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mike"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Phan"</span>,        <span class="hljs-string">"directReports"</span>: [            {                <span class="hljs-string">"ID"</span>: <span class="hljs-number">425</span>,                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gary"</span>,                <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Reichert"</span>,                <span class="hljs-string">"salary"</span>: <span class="hljs-number">65800</span>,                <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1957-12-23T00:00:00.000Z"</span>,                <span class="hljs-string">"woman"</span>: false,                <span class="hljs-string">"managerID"</span>: <span class="hljs-number">424</span>,                <span class="hljs-string">"employerID"</span>: <span class="hljs-number">21</span>,                <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,                <span class="hljs-string">"extra"</span>: null,                <span class="hljs-string">"employer"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">21</span>                },                <span class="hljs-string">"manager"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">424</span>                }            },            {                <span class="hljs-string">"ID"</span>: <span class="hljs-number">426</span>,                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Sadie"</span>,                <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gallant"</span>,                <span class="hljs-string">"salary"</span>: <span class="hljs-number">35200</span>,                <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2022-01-03T00:00:00.000Z"</span>,                <span class="hljs-string">"woman"</span>: true,                <span class="hljs-string">"managerID"</span>: <span class="hljs-number">424</span>,                <span class="hljs-string">"employerID"</span>: <span class="hljs-number">21</span>,                <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,                <span class="hljs-string">"extra"</span>: null,                <span class="hljs-string">"employer"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">21</span>                },                <span class="hljs-string">"manager"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">424</span>                }            }                   ]    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gary"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Reichert"</span>,        <span class="hljs-string">"directReports"</span>: [            {                <span class="hljs-string">"ID"</span>: <span class="hljs-number">428</span>,                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Rex"</span>,                <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Chance"</span>,                <span class="hljs-string">"salary"</span>: <span class="hljs-number">71600</span>,                <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1968-08-09T00:00:00.000Z"</span>,                <span class="hljs-string">"woman"</span>: false,                <span class="hljs-string">"managerID"</span>: <span class="hljs-number">425</span>,                <span class="hljs-string">"employerID"</span>: <span class="hljs-number">21</span>,                <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,                <span class="hljs-string">"extra"</span>: null,                <span class="hljs-string">"employer"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">21</span>                },                <span class="hljs-string">"manager"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">425</span>                }            },            {                <span class="hljs-string">"ID"</span>: <span class="hljs-number">429</span>,                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Jenny"</span>,                <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Parks"</span>,                <span class="hljs-string">"salary"</span>: <span class="hljs-number">51300</span>,                <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1984-05-25T00:00:00.000Z"</span>,                <span class="hljs-string">"woman"</span>: true,                <span class="hljs-string">"managerID"</span>: <span class="hljs-number">425</span>,                <span class="hljs-string">"employerID"</span>: <span class="hljs-number">21</span>,                <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,                <span class="hljs-string">"extra"</span>: null,                <span class="hljs-string">"employer"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">21</span>                },                <span class="hljs-string">"manager"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">425</span>                }            }           ] }]</code></pre><style><![CDATA[ h2 { background: #d9ebff;}]]></style></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#EntityClass.html"><span class="arrow-prev">←</span><span>Entity</span></a><a class="docs-next button" href="#FileClass.html"><span>File</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#EntitySelectionClass.html_cr%25C3%25A9er-une-entity-selection">Créerune entity selection</a></li><li><a href="#EntitySelectionClass.html_use-entity-selection">USEENTITY SELECTION</a></li><li><a href="#EntitySelectionClass.html_91index93">[<em>index</em>]</a></li><li><a href="#EntitySelectionClass.html_attributename">.<em>attributeName</em></a></li><li><a href="#EntitySelectionClass.html_add">.add()</a></li><li><a href="#EntitySelectionClass.html_and">.and()</a></li><li><a href="#EntitySelectionClass.html_average">.average()</a></li><li><a href="#EntitySelectionClass.html_contains">.contains()</a></li><li><a href="#EntitySelectionClass.html_count">.count()</a></li><li><a href="#EntitySelectionClass.html_copy">.copy()</a></li><li><a href="#EntitySelectionClass.html_distinct">.distinct()</a></li><li><a href="#EntitySelectionClass.html_drop">.drop()</a></li><li><a href="#EntitySelectionClass.html_extract">.extract()</a></li><li><a href="#EntitySelectionClass.html_first">.first()</a></li><li><a href="#EntitySelectionClass.html_getdataclass">.getDataClass()</a></li><li><a href="#EntitySelectionClass.html_getremotecontextattributes">.getRemoteContextAttributes()</a></li><li><a href="#EntitySelectionClass.html_isalterable">.isAlterable()</a></li><li><a href="#EntitySelectionClass.html_isordered">.isOrdered()</a></li><li><a href="#EntitySelectionClass.html_last">.last()</a></li><li><a href="#EntitySelectionClass.html_length">.length</a></li><li><a href="#EntitySelectionClass.html_max">.max()</a></li><li><a href="#EntitySelectionClass.html_min">.min()</a></li><li><a href="#EntitySelectionClass.html_minus">.minus()</a></li><li><a href="#EntitySelectionClass.html_or">.or()</a></li><li><a href="#EntitySelectionClass.html_orderby">.orderBy()</a></li><li><a href="#EntitySelectionClass.html_orderbyformula">.orderByFormula()</a></li><li><a href="#EntitySelectionClass.html_query">.query()</a></li><li><a href="#EntitySelectionClass.html_querypath">.queryPath</a></li><li><a href="#EntitySelectionClass.html_queryplan">.queryPlan</a></li><li><a href="#EntitySelectionClass.html_refresh">.refresh()</a></li><li><a href="#EntitySelectionClass.html_selected">.selected()</a></li><li><a href="#EntitySelectionClass.html_slice">.slice()</a></li><li><a href="#EntitySelectionClass.html_sum-">.sum( )</a></li><li><a href="#EntitySelectionClass.html_tocollection-">.toCollection()</a></li></ul></nav></div></div></body></html>