<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Composants de développement · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Un composant 4D est un ensemble de fonctions, méthodes et de formulaires 4D représentant une ou plusieurs fonctionnalité(s) qu’il est possible [d’installer et d'utiliser dans des applications 4D](/docs/Rx/fr/Concepts/components.html). Par exemple, vous pouvez développer un composant 4D de courrier électronique gérant tous les aspects de l’envoi, la réception et le stockage d’emails au sein des applications 4D."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Composants de développement · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Un composant 4D est un ensemble de fonctions, méthodes et de formulaires 4D représentant une ou plusieurs fonctionnalité(s) qu’il est possible [d’installer et d'utiliser dans des applications 4D](/docs/Rx/fr/Concepts/components.html). Par exemple, vous pouvez développer un composant 4D de courrier électronique gérant tous les aspects de l’envoi, la réception et le stockage d’emails au sein des applications 4D."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#develop-components.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Composants dedéveloppement<a aria-hidden="true" class="anchor" id="develop-components.html"></a></h1></header><article><div><p><span>Un composant 4D est un ensemble de fonctions, méthodes etde formulaires 4D représentant une ou plusieurs fonctionnalité(s)qu’il est possible <a href="#components.html">d’installer etd'utiliser dans des applications 4D</a>. Par exemple, vous pouvezdévelopper un composant 4D de courrier électronique gérant tous lesaspects de l’envoi, la réception et le stockage d’emails au seindes applications 4D.</span></p><p><span>Vous pouvez développer des composants 4D pour vos propresbesoins et les garder privés. Vous pouvez également <a href="https://github.com/topics/4d-component">partager vos composantsavec la communauté 4D</a>.</span></p><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_d%C3%A9finitions"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_d%25C3%25A9finitions"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Définitions</span></h2><ul><li><span><strong>Projet utilisé comme matrice</strong> : Projet 4Dutilisé pour le développement du composant. C'est un projetstandard, sans attribut spécifique. Il constitue un seulcomposant.</span></li><li><span><strong>Projet hôte :</strong> projet dans lequel uncomposant est installé et utilisé.</span></li><li><span><strong>Composant</strong> : Projet utilisé commematrice, pouvant être compilé ou <a href="#develop-components.html_build-component">généré</a>, copié dansle dossier <a href="#architecture.html"><code>Components</code></a>de l'application hôte et dont le contenu est utilisé dansl'application hôte.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_principes-de-base"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_principes-de-base"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Principes de base</span></h2><p><span>La création et l’installation des composants 4Ds’effectuent directement depuis 4D :</span></p><ul><li><span>Pour installer un composant, il suffit de copier lesfichiers du composant dans le dossier <a href="#architecture.html"><code>Components</code> du projet</a>. Vouspouvez utiliser des alias ou des raccourcis.</span></li><li><span>Un projet peut être à la fois "matrice" et "hôte",c'est-à-dire qu'un projet utilisé comme matrice peut lui-mêmeutiliser un ou plusieurs composants. En revanche, un composant nepeut pas lui-même utiliser de "sous-composants".</span></li><li><span>Un composant peut appeler la plupart des éléments 4D :des classes, des fonctions, des méthodes projet, des formulairesprojet, des barres de menus, des listes à choix multiples, etc. Ilne peut pas appeler des méthodes base et des triggers.</span></li><li><span>Il n’est pas possible d’exploiter le datastore, destables standard ou des fichiers de données dans les composants 4D.En revanche, un composant peut créer et/ou utiliser des tables, deschamps et des fichiers de données via les mécanismes des basesexternes. Les bases externes sont des bases 4D indépendantesmanipulées via les commandes SQL.</span></li><li><span>Un projet hôte fonctionnant en mode interprété peututiliser des composants interprétés ou compilés. Un projet hôtefonctionnant en mode compilé ne peut pas utiliser de composantsinterprétés. Dans ce cas, seuls les composants compilés peuventêtre utilisés.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_port%C3%A9e-des-commandes-du-langage"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_port%25C3%25A9e-des-commandes-du-langage"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Portée des commandes du langage</span></h2><p><span>Hormis les <a href="#develop-components.html_unusable-commands">Commandes nonutilisables</a>, un composant peut utiliser toute commande dulangage 4D.</span></p><p><span>Lorsqu’elles sont appelées depuis un composant, lescommandes s’exécutent dans le contexte du composant, à l’exceptionde la commande <code>EXECUTE METHOD</code> ou <code>EXECUTEFORMULA</code> qui utilise le contexte de la méthode désignée parla commande. A noter également que les commandes de lecture duthème “Utilisateurs et groupes” sont utilisables depuis uncomposant mais lisent les utilisateurs et les groupes du projethôte (un composant n’a pas d’utilisateurs et groupespropres).</span></p><p><span>Les commandes <code>EXECUTE METHOD</code> et <code>Getdatabase parameter</code> constituent aussi une exception à ceprincipe : leur portée est globale à l'application. Lorsque cescommandes sont appelées depuis un composant, elles s’appliquent auprojet d'application hôte.</span></p><p><span>Par ailleurs, des dispositions spécifiques sont définiespour les commandes <code>Structure file</code> et <code>Get 4Dfolder</code> lorsqu’elles sont utilisées dans le cadre descomposants.</span></p><p><span>La commande <code>COMPONENT LIST</code> permet deconnaître la liste des composants chargés par le projethôte.</span></p><h3><span><a aria-hidden="true" class="anchor" id="develop-components.html_commandes-non-utilisables"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_commandes-non-utilisables"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Commandes non utilisables</span></h3><p><span>Les commandes suivantes ne sont pas compatibles avec uneutilisation dans le cadre d’un composant car elles modifient lefichier de structure — ouvert en lecture. Leur exécution dans uncomposant provoque l’erreur -10511, “La commande NomCommande nepeut pas être appelée depuis un composant” :</span></p><ul><li><span><code>ON EVENT CALL</code></span></li><li><span><code>Method called on event</code></span></li><li><span><code>SET PICTURE TO LIBRARY</code></span></li><li><span><code>REMOVE PICTURE FROM LIBRARY</code></span></li><li><span><code>SAVE LIST</code></span></li><li><span><code>ARRAY TO LIST</code></span></li><li><span><code>EDIT FORM</code></span></li><li><span><code>CREATE USER FORM</code></span></li><li><span><code>DELETE USER FORM</code></span></li><li><span><code>CHANGE PASSWORD</code></span></li><li><span><code>EDIT ACCESS</code></span></li><li><span><code>Set group properties</code></span></li><li><span><code>Set user properties</code></span></li><li><span><code>DELETE USER</code></span></li><li><span><code>CHANGE LICENSES</code></span></li><li><span><code>BLOB TO USERS</code></span></li><li><span><code>SET PLUGIN ACCESS</code></span></li></ul><p><span><strong>Notes :</strong></span></p><ul><li><span>La commande <code>Table du formulaire courant</code>retourne <code>Nil</code> lorsqu’elle est appelée dans le contexted’un formulaire projet. Par conséquent, elle ne peut pas êtreutilisée dans un composant.</span></li><li><span>Les commandes SQL de définition de données (<code>CREATETABLE</code>, <code>DROP TABLE</code>, etc.) ne peuvent pas êtreutilisées dans les composants. Elles sont néanmoins prises encharge avec des bases de données externes (voir la commande SQL<code>CREATE DATABASE</code>).</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_partage-des-m%C3%A9thodes-projet"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_partage-des-m%25C3%25A9thodes-projet"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Partage des méthodes projet</span></h2><p><span>Toutes les méthodes projet d’un projet utilisé commematrice sont par définition incluses dans le composant (le projetest le composant), ce qui signifie qu’elles peuvent être appeléeset exécutées dans le composant.</span></p><p><span>En revanche, par défaut ces méthodes projet ne seront nivisibles ni appelables par le projet hôte. Dans le projet utilisécomme matrice, vous devez désigner explicitement les méthodes quevous souhaitez partager avec le projet hôte en cochant la case<strong>Partagée par les composants et le projet hôte</strong> dansla boîte de dialogue des propriétés de la méthode :</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Concepts/shared-methods.png" /></span></p><p><span>Les méthodes projet partagées peuvent être appelées dansle code du projet hôte (mais elles ne pourront pas être modifiéesdans l’éditeur de méthodes du projet hôte). Ces méthodesconstituent les <strong>points d’entrée</strong> ducomposant.</span></p><p><span>A l’inverse, pour des raisons de sécurité, par défaut uncomposant ne peut pas exécuter de méthode projet appartenant auprojet hôte. Dans certains cas, vous pourrez avoir besoind’autoriser un composant à accéder à des méthodes projet de votreprojet hôte. In certain cases, you may need to allow a component toaccess the project methods of your host project.</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Concepts/pict516563.en.png" /></span></p><p><span>Une fois que les méthodes projets hôtes sont disponiblespour les composants, vous pouvez exécuter une méthode hôte depuisl'intérieur d'un composant à l'aide des commandes <code>EXECUTEFORMULA</code> ou <code>EXECUTE METHOD</code>. Par exemple:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-comment">// Méthode hôte</span><span class="hljs-function">component_method</span>(<span class="hljs-string">"host_method_name"</span>)</code></span></pre><pre><code class="hljs css language-4d"><span class="hljs-comment">// component_method</span><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function"> EXECUTE METHOD</span>(<span class="hljs-variable">$1</span>)</code></pre><blockquote><p>Une base hôte interprétée qui contient des composantsinterprétés peut être compilée ou soumise à un contrôle syntaxiquesi elle n'appelle pas de méthodes du composant interprété. Dans lecas contraire, une boîte de dialogue d'avertissement apparaîtlorsque vous tentez de lancer la compilation ou un contrôlesyntaxique et il ne sera pas possible d'effectuerl'opération.<br />A noter qu'une méthode interprétée peut appeler une méthodecompilée, mais pas l'inverse, sauf si vous utilisez les commandes<code>EXECUTE METHOD</code> et <code>EXECUTE FORMULA</code>.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_partage-des-classes-et-des-fonctions"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_partage-des-classes-et-des-fonctions"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Partage des classes et des fonctions</h2><p>Par défaut, les classes et fonctions des composants ne peuventpas être appelées à partir de l'éditeur de méthodes 4D du projethôte. By default, component classes and functions cannot be calledfrom the 4D Code Editor of the host project. En outre, vous pouvezcontrôler la manière dont les classes et les fonctions descomposants sont suggérées dans l'éditeur de méthodes de l'hôte.</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_d%C3%A9claration-du-namespace"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_d%25C3%25A9claration-du-namespace"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Déclaration du namespace</h3><p>Pour permettre aux classes et aux fonctions de votre composantd'être exposées dans les projets hôtes, saisissez une valeur dans<a href="#develop-components.html_component-namespace-in-the-class-store"><strong>Component namespace in the class store</strong> dans la pageGénéral</a> des Propriétés du projet utilisé comme matrice. Pardéfaut, l'espace est vide : les classes du composant ne sont pasdisponibles en dehors du contexte du composant.</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/namespace.png" /></p><blockquote><p>Un <em>namespace</em> garantit qu'aucun conflit n'émergelorsqu'un projet hôte utilise différents composants dont lesclasses ou les fonctions ont des noms identiques. Un namespace doitêtre conforme aux <a href="#develop-components.html_object-properties">règles de dénominationdes propriétés</a>.</p></blockquote><p>Lorsque vous saisissez une valeur, vous déclarez que les classeset les fonctions du composant seront disponibles dans <a href="#develop-components.html_cs">user class store(<strong>cs</strong>)</a> du code du projet hôte, par le biais dunamespace <code>cs.&lt;value&gt;</code>. Par exemple, si vousentrez "eGeometry" comme namespace, en supposant que vous avez crééune classe <code>Rectangle</code> contenant une fonction<code>getArea()</code>, une fois votre projet installé commecomposant, le développeur du projet hôte peut écrire :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//dans le projet hôte</span><span class="hljs-keyword">var</span> <span class="hljs-variable">$rect</span>: cs.eGeometry.Rectangle <span class="hljs-variable">$rect</span>:=cs.eGeometry.Rectangle.<span class="hljs-function">new</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>)<span class="hljs-variable">$area</span>:=<span class="hljs-variable">$rect</span>.<span class="hljs-function">getArea</span>()</code></pre><p>Bien entendu, il est recommandé d'utiliser un nom distinctifpour éviter tout conflit. Si une classe utilisateur portant le mêmenom qu'un composant existe déjà dans le projet, la classeutilisateur est prise en compte et les classes du composant sontignorées.</p><p>Les classes ORDA d'un composant ne sont pas disponibles dans leprojet hôte. Par exemple, s'il existe une dataclass nomméeEmployees dans votre composant, vous ne pourrez pas utiliser uneclasse "cs.Mycomponent.Employee" dans le projet hôte.</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_classes-cach%C3%A9es"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_classes-cach%25C3%25A9es"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Classes cachées</h3><p>Comme dans tout projet, vous pouvez créer des classes et desfonctions cachées dans le composant en préfixant les noms par uncaractère de soulignement ou ("_"). Lorsqu'un <a href="#develop-components.html_declaring-the-component-namespace">namespaceest défini</a>, les classes et fonctions cachées du composantn'apparaîtront pas comme des suggestions lors de l'utilisation dela complétion de code.</p><p>Notez cependant qu'elles peuvent toujours être utilisées si vousconnaissez leurs noms. Par exemple, la syntaxe suivante est valablemême si la classe <code>_Rectangle</code> est cachée :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$rect</span>:=cs.eGeometry._Rectangle.<span class="hljs-function">new</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>)</code></pre><blockquote><p>Les fonctions non cachées à l'intérieur d'une classe cachéeapparaissent comme des suggestions lorsque vous utilisez lacomplétion de code avec une classe qui en <a href="#develop-components.html_inheritance">hérite</a>. Par exemple, siun composant possède une classe <code>Teacher</code> qui hérited'une classe <code>_Person</code>, la complétion de code pour<code>Teacher</code> suggère des fonctions non cachées de<code>_Person</code>.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_compl%C3%A9tion-de-code-pour-les-composants-compil%C3%A9s"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_compl%25C3%25A9tion-de-code-pour-les-composants-compil%25C3%25A9s"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Complétion de code pour les composants compilés</h2><p>Pour faciliter l'utilisation de votre composant par lesdéveloppeurs, vous pouvez cocher l'option <a href="#develop-components.html_component-namespace-in-the-class-store"><strong>Generate syntax file for code completion when compiled</strong>dans la page Général</a> des Proriétés du projet utilisé commematrice.</p><p>Un fichier de syntaxe (format JSON) est alors automatiquementcréé lors de la phase de compilation, complété par la syntaxe desclasses, fonctions et <a href="#develop-components.html_sharing-of-project-methods">méthodes'exposed'</a> de votre composant, et placé dans le dossier\Resources\en.lproj du projet du composant. 4D utilise le contenude ce fichier syntaxique pour générer une aide contextuelle dansl'éditeur de code, telle que la complétion de code et la syntaxedes fonctions :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/syntax-code-completion-2.png" /><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/syntax-code-completion-1.png" /></p><p>Si vous ne saisissez pas de <a href="#develop-components.html_declaring-the-component-namespace">namespace</a>,les ressources des classes et des méthodes 'exposed' ne sont pasgénérées, même si l'option de fichier de syntaxe est cochée.</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_passage-de-variables"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_passage-de-variables"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Passage de variables</h2><p>Les composants et les projets hôtes ne partagent pas devariables locales, process ou interprocess. The local, process andinterprocess variables are not shared between components and hostprojects.</p><p>Exemple utilisant un tableau :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//Dans le projet hôte :</span><span class="hljs-function">    ARRAY INTEGER</span>(MyArray;<span class="hljs-number">10</span>)<span class="hljs-function">    AMethod</span>(-&gt;MyArray)<span class="hljs-comment">//Dans le composant, la méthode projet UneMéthode contient : </span><span class="hljs-function">     APPEND TO ARRAY</span>(<span class="hljs-variable">$1</span>-&gt;;<span class="hljs-number">2</span>)</code></pre><p>Exemples utilisant des variables :</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_TEXT</span>(myvariable)<span class="hljs-function">component_method1</span>(-&gt;myvariable)</code></pre><pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$p</span>)<span class="hljs-variable">$p</span>:=<span class="hljs-function">component_method2</span>(...)</code></pre><p>Sans pointeur, un composant peut toujours accéder à la valeurd'une variable de base hôte (mais pas à la variable elle-même) etvice versa :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//Dans la base hôte</span><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$input_t</span>)<span class="hljs-variable">$input_t</span>:=<span class="hljs-string">"DoSomething"</span><span class="hljs-function">component_method</span>(<span class="hljs-variable">$input_t</span>)<span class="hljs-comment">// component_method obtient "DoSomething" in $1 (mais pas la variable $input_t)</span></code></pre><p>L’utilisation de pointeurs pour faire communiquer les composantset le projet hôte nécessite de prendre en compte les spécificitéssuivantes :</p><ul><li><p>La commande <code>Get pointer</code> ne retournera pas unpointeur vers une variable du projet hôte si elle est appeléedepuis un composant et inversement.</p></li><li><p>L’usage de pointeurs dans ce cas doit respecter le principesuivant : l’interpréteur peut dépointer un pointeur construit enmode compilé mais à l’inverse, en mode compilé, il n’est paspossible de dépointer un pointeur construit en mode interprété.L’usage de pointeurs dans ce cas doit respecter le principe suivant: l’interpréteur peut dépointer un pointeur construit en modecompilé mais à l’inverse, en mode compilé, il n’est pas possible dedépointer un pointeur construit en mode interprété. Illustrons ceprincipe par l’exemple suivant : soient deux composants, C(compilé) et I (interprété) installés dans le même projet hôte.</p></li><li><p>Si le composant C définit la variable <code>mavarC</code>, lecomposant I peut accéder à la valeur de cette variable en utilisantle pointeur <code>-&gt;mavarC</code>.</p></li><li><p>Si le composant I définit la variable <code>mavarI</code>, lecomposant C ne peut pas accéder à cette variable en utilisant lepointeur <code>-&gt;mavarI</code>. Cette syntaxe provoque uneerreur d’exécution.</p></li><li><p>La comparaison de pointeurs via la commande <code>RESOLVEPOINTER</code> est déconseillée avec les composants car le principede cloisonnement des variables autorise la coexistence de variablesde même nom mais au contenu radicalement différent dans uncomposant et le projet hôte (ou un autre composant). Le type de lavariable peut même être différent dans les deux contextes. Si lespointeurs <code>monptr1</code> et <code>monptr2</code> pointentchacun sur une variable, la comparaison suivante produira unrésultat erroné :</p></li></ul><pre><code class="hljs css language-4d"><span class="hljs-function">     RESOLVE POINTER</span>(monptr1;vNomVar1;vnumtable1;vnumchamp1)<span class="hljs-function">      RESOLVE POINTER</span>(monptr2;vNomVar2;vnumtable2;vnumchamp2)<span class="hljs-keyword">      If</span>(vNomVar1=vNomVar2)       <span class="hljs-comment">//Ce test retourne Vrai alors que les variables sont différentes</span></code></pre><p>Dans ce cas, il est nécessaire d’utiliser la comparaison depointeurs :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">     If</span>(monptr1=monptr2) <span class="hljs-comment">//Ce test retourne Faux</span></code></pre><h2><a aria-hidden="true" class="anchor" id="develop-components.html_gestion-des-erreurs"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_gestion-des-erreurs"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Gestion des erreurs</h2><p>Une <a href="#error-handling.html">méthode de gestiond'erreurs</a> installée par la commande <code>ON ERR CALL</code>s'applique à l'application en cours d'exécution uniquement. En casd'erreur générée par un composant, la méthode d'appel sur erreur<code>ON ERR CALL</code> du prpjet hôte n'est pas appelée, etinversement.</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_acc%C3%A8s-aux-tables-du-projet-h%C3%B4te"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_acc%25C3%25A8s-aux-tables-du-projet-h%25C3%25B4te"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Accès aux tables du projet hôte</h2><p>Bien que les composants ne puissent pas utiliser de tables, lespointeurs permettent au projet hôte et au composant de communiquer.Par exemple, voici une méthode pouvant être appelée depuis uncomposant :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// appeler une méthode composant</span><span class="hljs-function">methCreateRec</span>(-&gt;[PERSONNES];-&gt;[PERSONNES]Nom;<span class="hljs-string">"Julie Andrews"</span>)</code></pre><p>Dans le composant, le code de la méthode<code>methCreateRec</code> :</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$1</span>) <span class="hljs-comment">//Pointeur vers une table du projet hôte</span><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$2</span>) <span class="hljs-comment">//Pointeur vers un champ du projet hôte</span><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$3</span>) <span class="hljs-comment">// Valeur à insérer</span><span class="hljs-variable">$tablepointer</span>:=<span class="hljs-variable">$1</span><span class="hljs-variable">$fieldpointer</span>:=<span class="hljs-variable">$2</span><span class="hljs-function">CREATE RECORD</span>(<span class="hljs-variable">$tablepointer</span>-&gt;)<span class="hljs-variable">$fieldpointer</span>-&gt;:=<span class="hljs-variable">$3</span><span class="hljs-function">SAVE RECORD</span>(<span class="hljs-variable">$tablepointer</span>-&gt;)</code></pre><blockquote><p>Dans le contexte d'un composant, 4D suppose qu'une référence àun formulaire table est une référence au formulaire table hôte (carles composants ne peuvent pas avoir de tables)</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_utilisation-de-tables-et-de-champs"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_utilisation-de-tables-et-de-champs"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utilisation de tables et de champs</h2><p>Un composant ne peut pas utiliser les tables et les champsdéfinis dans la structure 4D du projet utilisé comme matrice. Enrevanche, il peut créer et utiliser des bases externes, et doncutiliser des tables et des champs en fonction de ses besoins. Lesbases externes sont créées et gérées via le langage SQL. Enrevanche, il peut créer et utiliser des bases externes, et doncutiliser des tables et des champs en fonction de ses besoins.Utiliser une base externe signifie désigner temporairement cettebase comme base courante, c’est-à-dire comme base cible desrequêtes SQL exécutées par 4D. Les bases externes sont créées àl'aide de la commande SQL <code>CREATE DATABASE</code>.</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_exemple"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_exemple"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h3><p>Le code suivant est inclus dans un composant et effectue troisactions élémentaires avec une base de données externe :</p><ul><li>création de la base de données externe si elle n'existe pasdéjà,</li><li>ajout de données dans la base de données externe,</li><li>lecture de données depuis la base de données externe.</li></ul><p>Création de la base de données externe :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">&lt;&gt;MyDatabase</span>:=Get 4D folder+<span class="hljs-string">"\MyDB"</span> <span class="hljs-comment">// (Windows) stocke les données dans un répertoire autorisé</span><span class="hljs-keyword"> Begin SQL</span>        CREATE DATABASE IF NOT EXISTS DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];        USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];        CREATE TABLE IF NOT EXISTS KEEPIT        (        ID INT32 PRIMARY KEY,        kind VARCHAR,        name VARCHAR,        code TEXT,        sort_order INT32        );<span class="hljs-function">        CREATE UNIQUE INDEX id_index ON KEEPIT </span>(ID);        USE DATABASE SQL_INTERNAL;<span class="hljs-keyword"> End SQL</span></code></pre><p>Ecriture dans la base de données externe :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$Ptr_1</span>:=<span class="hljs-variable">$2 </span><span class="hljs-comment">// récupère les données à partir du projet hôte via des pointeurs</span> <span class="hljs-variable">$Ptr_2</span>:=<span class="hljs-variable">$3</span> <span class="hljs-variable">$Ptr_3</span>:=<span class="hljs-variable">$4</span> <span class="hljs-variable">$Ptr_4</span>:=<span class="hljs-variable">$5</span> <span class="hljs-variable">$Ptr_5</span>:=<span class="hljs-variable">$6</span><span class="hljs-keyword"> Begin SQL</span>        USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];        INSERT INTO KEEPIT        (ID, kind, name, code, sort_order)        VALUES        (:[<span class="hljs-variable">$Ptr_1</span>], :[<span class="hljs-variable">$Ptr_2</span>], :[<span class="hljs-variable">$Ptr_3</span>], :[<span class="hljs-variable">$Ptr_4</span>], :[<span class="hljs-variable">$Ptr_5</span>]);        USE DATABASE SQL_INTERNAL;<span class="hljs-keyword"> End SQL</span></code></pre><p>Lecture dans une base de données externe :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$Ptr_1</span>:=<span class="hljs-variable">$2 </span><span class="hljs-comment">// accède aux données du projet hôte via des pointeurs</span> <span class="hljs-variable">$Ptr_2</span>:=<span class="hljs-variable">$3</span> <span class="hljs-variable">$Ptr_3</span>:=<span class="hljs-variable">$4</span> <span class="hljs-variable">$Ptr_4</span>:=<span class="hljs-variable">$5</span> <span class="hljs-variable">$Ptr_5</span>:=<span class="hljs-variable">$6</span><span class="hljs-keyword"> Begin SQL</span>    USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];    SELECT ALL ID, kind, name, code, sort_order    FROM KEEPIT    INTO :<span class="hljs-variable">$Ptr_1</span>, :<span class="hljs-variable">$Ptr_2</span>, :<span class="hljs-variable">$Ptr_3</span>, :<span class="hljs-variable">$Ptr_4</span>, :<span class="hljs-variable">$Ptr_5</span>;    USE DATABASE SQL_INTERNAL;<span class="hljs-keyword"> End SQL</span></code></pre><h2><a aria-hidden="true" class="anchor" id="develop-components.html_utilisation-de-formulaires"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_utilisation-de-formulaires"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utilisation de formulaires</h2><ul><li>Seuls les "formulaires projet" (formulaires non associés à unetable en particulier) peuvent être exploités directement dans uncomposant. Seuls les "formulaires projet" (formulaires non associésà une table en particulier) peuvent être exploités directement dansun composant.</li><li>Un composant peut faire appel à des formulaires table du projethôte. A noter qu’il est nécessaire dans ce cas d’utiliser despointeurs plutôt que des noms de table entre [] pour désigner lesformulaires dans le code du composant.</li></ul><blockquote><p>Si un composant utilise la commande <code>ADD RECORD</code>, leformulaire Entrée courant du projet hôte sera affiché, dans lecontexte du projet hôte. Par conséquent, si le formulaire comportedes variables, le composant n’y aura pas accès.</p></blockquote><ul><li>Vous pouvez publier des formulaires de composants commesous-formulaires dans les projets hôtes. Avec ce principe, vouspouvez notamment développer des composants proposant des objetsgraphiques. Par exemple, les Widgets proposés par 4D sont basés surl’emploi de sous-formulaires en composants.</li></ul><blockquote><p>Dans le contexte d'un composant, tout formulaire projetréférencé doit appartenir au composant. Par exemple, à l'intérieurd'un composant, le fait de référencer un formulaire projet hôte àl'aide de <code>DIALOG</code> ou de <code>Open form window</code>déclenchera une erreur.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_utilisation-de-ressources"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_utilisation-de-ressources"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utilisation de ressources</h2><p>Les composants peuvent utiliser des ressources situées dans ledossier Ressources du composant.</p><p>Les mécanismes automatiques sont opérationnels : les fichiersXLIFF présents dans le dossier Resources d’un composant serontchargés par ce composant.</p><p>Dans un projet hôte contenant un ou plusieurs composants, chaquecomposant ainsi que les projets hôtes ont leur propre «chaîne deressources» Dans un projet hôte contenant un ou plusieurscomposants, chaque composant ainsi que les projets hôtes ont leurpropre «chaîne de ressources» Les ressources sont divisées entreles différents projets : il n'est pas possible d'accéder auxressources du composant A depuis le composant B ou depuis le projethôte.</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_ex%C3%A9cution-du-code-dinitialisation"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_ex%25C3%25A9cution-du-code-dinitialisation"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exécution du code d'initialisation</h2><p>Un composant peut exécuter automatiquement du code 4D lors del'ouverture ou de la fermeture de la base hôte, par exemple pourcharger et/ou sauvegarder les préférences ou les états utilisateurliés au fonctionnement de la base hôte.</p><p>L'exécution du code d'initialisation ou de fermeture se fait aumoyen de la méthode base <code>On Host Database Event</code>.</p><blockquote><p>Pour des raisons de sécurité, vous devez autoriser explicitementl'exécution de la méthode base<code>On Host Database Event</code>dans la base hôte afin de pouvoir l'appeler. Pour des raisons desécurité, vous devez autoriser explicitement l'exécution de laméthode base<code>On Host Database Event</code> dans la base hôteafin de pouvoir l'appeler.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_protection-des-composants--la-compilation"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_protection-des-composants--la-compilation"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Protection des composants : la compilation</h2><p>Par défaut, tout le code d’un projet utilisé comme matriceinstallé comme composant est virtuellement visible depuis le projethôte. En particulier :</p><ul><li>Les méthodes projet partagées sont accessibles dans la PageMéthodes de l’Explorateur et peuvent être appelées dans lesméthodes du projet hôte. Leur contenu peut être sélectionné etcopié dans la zone de prévisualisation de l’Explorateur. Ellespeuvent également être visualisées dans le débogueur. Il n’esttoutefois pas possible de les ouvrir dans l’éditeur de méthodes nide les modifier.</li><li>Les autres méthodes projet du projet utilisé comme matricen’apparaissent pas dans l’Explorateur mais peuvent également êtrevisualisées dans le débogueur du projet hôte.</li><li>Les classes et fonctions non cachées peuvent être visualiséesdans le débogueur <a href="#develop-components.html_declaring-the-component-namespace">si unnamespace est déclaré</a>.</li></ul><p>Pour assurer la protection du code d'un composant, <a href="#develop-components.html_build-component">compilez etgénérerez</a> simplement le projet utilisé comme matrice etfournissez-le sous forme de fichier .4dz. Lorsqu’un projet compiléutilisé comme matrice est installé comme composant :</p><ul><li>Les méthodes, classes et fonctions du projet partagé peuventêtre appelées dans les méthodes du projet hôte. Les méthodes duprojet partagé sont également visibles sur la page Méthodes del'Explorateur. En revanche, leur contenu n’apparaît pas dans lazone de prévisualisation ni dans le débogueur.</li><li>Les autres méthodes projet du projet utilisé comme matricen’apparaissent jamais.</li></ul><h2><a aria-hidden="true" class="anchor" id="develop-components.html_partage-des-composants"></a><a aria-hidden="true"class="hash-link" href="#develop-components.html_partage-des-composants"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Partage des composants</h2><p>We encourage you to support the 4D developer community bysharing your components, preferably on the <a href="https://github.com/topics/4d-component">GitHub platform</a>. Werecommend that you use the<strong><code>4d-component</code></strong> topic to be correctlyreferenced.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#overview.html"><span class="arrow-prev">←</span><span>Aperçu</span></a><a class="docs-next button" href="#develop-plug-ins.html"><span>Plug-ins de développement</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#develop-components.html_d%25C3%25A9finitions">Définitions</a></li><li><a href="#develop-components.html_principes-de-base">Principesde base</a></li><li><a href="#develop-components.html_port%25C3%25A9e-des-commandes-du-langage">Portée des commandes du langage</a><ul class="toc-headings"><li><a href="#develop-components.html_commandes-non-utilisables">Commandes nonutilisables</a></li></ul></li><li><a href="#develop-components.html_partage-des-m%25C3%25A9thodes-projet">Partagedes méthodes projet</a></li><li><a href="#develop-components.html_partage-des-classes-et-des-fonctions">Partagedes classes et des fonctions</a><ul class="toc-headings"><li><a href="#develop-components.html_d%25C3%25A9claration-du-namespace">Déclarationdu namespace</a></li><li><a href="#develop-components.html_classes-cach%25C3%25A9es">Classescachées</a></li></ul></li><li><a href="#develop-components.html_compl%25C3%25A9tion-de-code-pour-les-composants-compil%25C3%25A9s">Complétion de code pour les composants compilés</a></li><li><a href="#develop-components.html_passage-de-variables">Passagede variables</a></li><li><a href="#develop-components.html_gestion-des-erreurs">Gestiondes erreurs</a></li><li><a href="#develop-components.html_acc%25C3%25A8s-aux-tables-du-projet-h%25C3%25B4te">Accès aux tables du projet hôte</a></li><li><a href="#develop-components.html_utilisation-de-tables-et-de-champs">Utilisationde tables et de champs</a><ul class="toc-headings"><li><a href="#develop-components.html_exemple">Exemple</a></li></ul></li><li><a href="#develop-components.html_utilisation-de-formulaires">Utilisationde formulaires</a></li><li><a href="#develop-components.html_utilisation-de-ressources">Utilisation deressources</a></li><li><a href="#develop-components.html_ex%25C3%25A9cution-du-code-dinitialisation">Exécution du code d'initialisation</a></li><li><a href="#develop-components.html_protection-des-composants--la-compilation">Protection des composants : la compilation</a></li><li><a href="#develop-components.html_partage-des-composants">Partage descomposants</a></li></ul></nav></div></div></body></html>