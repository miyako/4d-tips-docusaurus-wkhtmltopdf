<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Variant · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Variant est un type de variable qui permet d'encapsuler des données de type valide et standard dans une variable. En règle générale, ce type de variable peut être utilisé pour écrire du code générique qui retourne ou reçoit des valeurs dont le type n'est pas connu. C'est le cas par exemple du code traitant des attributs d'objet."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Variant · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Variant est un type de variable qui permet d'encapsuler des données de type valide et standard dans une variable. En règle générale, ce type de variable peut être utilisé pour écrire du code générique qui retourne ou reçoit des valeurs dont le type n'est pas connu. C'est le cas par exemple du code traitant des attributs d'objet."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#dt_variant.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Variant<a aria-hidden="true" class="anchor" id="variant.html"></a></h1></header><article><div><p><span>Variant est un type de variable qui permet d'encapsulerdes données de type valide et standard dans une variable. En règlegénérale, ce type de variable peut être utilisé pour écrire du codegénérique qui retourne ou reçoit des valeurs dont le type n'est pasconnu. C'est le cas par exemple du code traitant des attributsd'objet.</span></p><p><span>Une variable de type variant peut contenir une valeur destypes de données suivants :</span></p><ul><li><span>BLOB</span></li><li><span>boolean</span></li><li><span>collection</span></li><li><span>date</span></li><li><span>entier long</span></li><li><span>object</span></li><li><span>picture</span></li><li><span>pointer</span></li><li><span>réel</span></li><li><span>Texte</span></li><li><span>time</span></li><li><span>null</span></li><li><span>indéfini</span></li></ul><blockquote><p><span>Les tableaux ne peuvent pas être stockés dans desvariables de type variant.</span></p></blockquote><p><span>En modes interprété et compilé, le même contenu peut êtreaffecté à une même variable variant. Contrairement aux types devariable standard, le type de contenu des variable de type variantest différent du type de variable variant lui-même. Par exemple:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-function">C_VARIANT</span>(<span class="hljs-variable">$variant</span>)<span class="hljs-variable">$variant</span>:=<span class="hljs-string">"hello world"</span><span class="hljs-variable">$vtype</span>:=<span class="hljs-function">Type</span>(<span class="hljs-variable">$variant</span>) <span class="hljs-comment">// 12 (Is variant)</span><span class="hljs-variable">$vtypeVal</span>:=<span class="hljs-function">Value type</span>(<span class="hljs-variable">$variant</span>) <span class="hljs-comment">// 2 (Is text)</span><span class="hljs-variable">$variant</span>:=<span class="hljs-number">42</span><span class="hljs-variable">$vtype</span>:=<span class="hljs-function">Type</span>(<span class="hljs-variable">$variant</span>) <span class="hljs-comment">// 12 (Is variant)</span><span class="hljs-variable">$vtypeVal</span>:=<span class="hljs-function">Value type</span>(<span class="hljs-variable">$variant</span>) <span class="hljs-comment">// 1 (Is real)</span></code></span></pre><p>Vous pouvez utiliser des variables variant chaque fois qu'ellessont attendues. Vous devez simplement vous assurer que le type dedonnées du contenu de la variable est du type attendu. Lorsque vousaccédez à des variables de type variant, seule leur valeur couranteest prise en compte. Par exemple :</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_VARIANT</span>(<span class="hljs-variable">$v</span>)<span class="hljs-variable">$v</span>:=<span class="hljs-string">"hello world"</span><span class="hljs-variable">$v2</span>:=<span class="hljs-variable">$v </span><span class="hljs-comment">//assign variable to another variable</span><span class="hljs-variable">$t</span>:=<span class="hljs-function">Type</span>(<span class="hljs-variable">$v</span>) <span class="hljs-comment">// 12 (Is variant)</span><span class="hljs-variable">$t2</span>:=<span class="hljs-function">Type</span>(<span class="hljs-variable">$v2</span>) <span class="hljs-comment">// 2 (Is text)</span></code></pre><p>Variant peut être utilisé pour déclarer des paramètres deméthode ($0, $1, etc.) pouvant être de différents types. Dans cecas, vous pouvez générer votre code en testant le type de valeur duparamètre, par exemple :</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_VARIANT</span>(<span class="hljs-variable">$1</span>)<span class="hljs-keyword">Case of</span>: (<span class="hljs-function">Value type</span>(<span class="hljs-variable">$1</span>)=Is longint)...: (<span class="hljs-function">Value type</span>(<span class="hljs-variable">$1</span>)=Is text)...<span class="hljs-comment">//déclaration(s)</span><span class="hljs-keyword"> End case</span></code></pre><blockquote><p>Lorsque des variables variant ne sont pas nécessaires(c'est-à-dire lorsque le type de données est connu), il estrecommandé d'utiliser des variables typées standard. Les variablestypées standard fournissent de meilleures performances, un codeplus clair et permettent au compilateur d'éviter les bugs liés àdes types de données passés qui sont inattendus.</p></blockquote></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#time.html"><span class="arrow-prev">←</span><span>Heure</span></a><a class="docs-next button" href="#variables.html"><span>Variables</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"></nav></div></div></body></html>