<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Objets Data Model · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="La technologie ORDA est fondée sur une cartographie automatique d'une structure de base sous-jacente. Elle permet également d'accéder aux données via des objets sélection d'entités (entity selection) et entité (entity). Par conséquent, ORDA expose la base de données entière comme un ensemble d'objets de modèle de données."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Objets Data Model · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="La technologie ORDA est fondée sur une cartographie automatique d'une structure de base sous-jacente. Elle permet également d'accéder aux données via des objets sélection d'entités (entity selection) et entité (entity). Par conséquent, ORDA expose la base de données entière comme un ensemble d'objets de modèle de données."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#dsMapping.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Objets DataModel<a aria-hidden="true" class="anchor" id="dsmapping.html"></a></h1></header><article><div><p><span>La technologie ORDA est fondée sur une cartographieautomatique d'une structure de base sous-jacente. Elle permetégalement d'accéder aux données via des objets sélection d'entités(entity selection) et entité (entity). Par conséquent, ORDA exposela base de données entière comme un ensemble d'objets de modèle dedonnées.</span></p><h2><span><a aria-hidden="true" class="anchor" id="dsmapping.html_correspondance-de-la-structure"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_correspondance-de-la-structure"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Correspondance de la structure</span></h2><p><span>Lorsque vous appelez un datastore à l'aide de la commande<a href="#dsmapping.html_ds"><code>ds</code></a> ou <a href="#dsmapping.html_open-datastore"><code>Open datastore</code></a>,4D référence automatiquement les tables et les champs de lastructure 4D correspondante en tant que propriétés de l'objet<a href="#dsmapping.html_datastore">datastore</a> retourné:</span></p><ul><li><span>Les tables correspondent à des dataclasses.</span></li><li><span>Les champs correspondent à des attributs destockage.</span></li><li><span>Les relations correspondent à des attributs de relation -les noms de relation, définis dans l'éditeur de structure, sontutilisés comme noms d'attribut de relation.</span></li></ul><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/datastoreMapping.png" /></span></p><h3><span><a aria-hidden="true" class="anchor" id="dsmapping.html_r%C3%A8gles-g%C3%A9n%C3%A9rales"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_r%25C3%25A8gles-g%25C3%25A9n%25C3%25A9rales"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Règles générales</span></h3><p><span>Les règles suivantes s'appliquent à toutes les conversions:</span></p><ul><li><span>Les noms de table, de champ et de relation correspondentà des noms de propriété d'objet. Assurez-vous que ces noms sontconformes aux règles générales de dénomination des objets, commeexpliqué dans la section <a href="#identifiers.html">Conventions dedénomination des objets</a>.</span></li><li><span>Un datastore ne référence que les tables avec une seuleclé primaire. Les tables suivantes ne sont pas référencées :</span><ul><li><span>Tables sans clé primaire</span></li><li><span>Tables avec clés primaires composites.</span></li></ul></li><li><span>Les champs BLOB sont automatiquement disponibles commeattributs de type <a href="#dsmapping.html_blob-types">objetBlob</a>.</span></li></ul><blockquote><p><span>ORDA mapping does not take into account:</span></p><ul><li><span>the "Invisible" option for tables or fields, - thevirtual structure defined through <code>SET TABLE TITLES</code> or<code>SET FIELD TITLES</code>, - the "Manual" or "Automatic"property of relations.</span></li></ul></blockquote><h3><span><a aria-hidden="true" class="anchor" id="dsmapping.html_r%C3%A8gles-de-contr%C3%B4le-dacc%C3%A8s-%C3%A0-distance"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_r%25C3%25A8gles-de-contr%25C3%25B4le-dacc%25C3%25A8s-%25C3%25A0-distance"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Règles de contrôle d'accès à distance</span></h3><p><span>Lorsque vous accédez à un datastore distant via lacommande <code>Ouvrir datastore</code> ou des <a href="#gettingStarted.html">requêtes REST</a>, seules les tables et leschamps avec la propriété de ressource <strong>Expose as RESTresource</strong> sont disponibles à distance.</span></p><p><span>Cette option doit être choisie au niveau de la structure4D pour chaque table et chaque champ que vous souhaitez voirapparaître comme dataclass et attribut dans le datastore:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/ExposeDataclass.png" /></span></p><h3><span><a aria-hidden="true" class="anchor" id="dsmapping.html_mise-%C3%A0-jour-des-donn%C3%A9es"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_mise-%25C3%25A0-jour-des-donn%25C3%25A9es"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Mise à jour des données</span></h3><p><span>Toute modification apportée à la structure de la baseinvalide la couche courante de données ORDA. Ces modificationsincluent :</span></p><ul><li><span>l'ajout ou la suppression d'une table, d'un champ oud'une relation</span></li><li><span>le renommage d'une table, d'un champ ou d'unerelation</span></li><li><span>la modification d'une propriété principale d'un champ(type, unique, index, autoincrement, valeur null)</span></li></ul><p><span>Lorsque la couche courante de données ORDA est invalidée,elle est automatiquement rechargée et mise à jour dans lesprochains appels du datastore local <code>ds</code> vers 4D et 4DServer. A noter que les références existantes vers des objets ORDAtels que des entités ou des sélections d'entités continuerontd'utiliser les données à partir desquelles elles ont été créées, etce jusqu'à ce qu'elles soient regénérées.</span></p><p><span>Toutefois, la couche de données ORDA mise à jour n'est pasautomatiquement disponible dans les contextes suivants :</span></p><ul><li><span>une application 4D distante connectée à 4D Server --l'application distante doit être reconnectée auserveur.</span></li><li><span>un datastore distant ouvert à l'aide de <code>Ouvrirdatastore</code> ou des <a href="#gettingStarted.html">appelsREST</a> -- une nouvelle session doit être ouverte.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="dsmapping.html_d%C3%A9finitions-des-objets"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_d%25C3%25A9finitions-des-objets"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Définitions des objets</span></h2><h3><span><a aria-hidden="true" class="anchor" id="dsmapping.html_datastore"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_datastore"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Datastore</span></h3><p><span>Un datastore est l'objet d'interface d'une base dedonnées. Il crée une représentation de toute la base sous formed'objet. Un datastore est constitué d'un <strong>modèle</strong> età de <strong>données</strong> :</span></p><ul><li><span>Le modèle contient et décrit toutes les dataclasses quicomposent le datastore. Il est indépendant de la base de donnéessous-jacente.</span></li><li><span>Les données se réfèrent à l'information qui va êtreutilisée et stockée dans ce modèle. Par exemple, les noms, adresseset dates de naissance des employés sont des éléments de données quevous pouvez utiliser dans un datastore.</span></li></ul><p><span>Lorsqu'il est géré via le code, le datastore est un objetdont les propriétés sont toutes les <a href="#dsmapping.html_dataclass">dataclasses</a> ayant étéspécifiquement exposées.</span></p><p><span>4d vous permet de gérer les datastores suivants:</span></p><ul><li><span>le datastore local, fondé sur la base 4D courante,retourné par la commande <code>ds</code> (le datastoreprincipal).</span></li><li><span>un ou plusieurs datastores distants, exposés en tant queressources RESET dans des bases 4D distantes, retournés par lacommande <code>Ouvrir datastore</code>.</span></li></ul><p><span>Un datastore ne référence qu'une seule base de donnéeslocale ou distante.</span></p><p><span>L'objet datastore lui-même ne peut pas être copié en tantqu'objet :</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-variable">$mydatastore</span>:=<span class="hljs-function">OB Copy</span>(ds) <span class="hljs-comment">//retourne null</span></code></span></pre><p>Les propriétés du datastore sont toutefois énumérables :</p><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY TEXT</span>(<span class="hljs-variable">$prop</span>;<span class="hljs-number">0</span>)<span class="hljs-function"> OB GET PROPERTY NAMES</span>(ds;<span class="hljs-variable">$prop</span>)  <span class="hljs-comment">//$prop contient les noms de toutes les dataclasses</span></code></pre><p>Le datastore principal (par défaut) est toujours disponible viala commande <code>ds</code>, mais la commande <code>Ouvrirdatastore</code> permet de référencer n'importe quel datastoredistant.</p><h3><a aria-hidden="true" class="anchor" id="dsmapping.html_dataclass"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_dataclass"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Dataclass</h3><p>Une dataclasse est l'équivalent d'une table. Elle est utiliséecomme modèle d'objet et référence tous les champs comme attributs,y compris les attributs relationnels (attributs construits à partirdes relations entre les dataclasses). Les attributs relationnelspeuvent être utilisés dans les requêtes comme tout autreattribut.</p><p>Toutes les dataclasses d'un projet 4D sont disponibles en tantque propriété du datastore <code>ds</code>. Pour les datastoresdistants accédés via <code>Ouvrir datastore</code> ou les <a href="#gettingStarted.html">requêtes REST</a>, l'option <strong>Exposercomme ressource REST</strong> doit être sélectionnée au niveau dela structure 4D pour chaque table que vous souhaitez exposer entant que dataclass du datastore.</p><p>Par exemple, considérons cette table dans la structure suivante:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/companyTable.png" /></p><p>La table <code>Company</code> est automatiquement disponible entant que dataclasse dans la banque de données <code>ds</code>. Vouspouvez écrire :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$compClass </span>: cs.Company <span class="hljs-comment">//déclare une variable objet $compClass de la classe Company</span><span class="hljs-variable">$compClass</span>:=ds.Company <span class="hljs-comment">//affecte la référence de dataclasse Company à $compClass</span></code></pre><p>Un objet dataclass peut contenir :</p><ul><li>attributes</li><li>des attributs relationnels</li></ul><p>La dataclass offre une abstraction de la base de donnéesphysique et permet de gérer un modèle de données conceptuel. Ladataclass est le seul moyen d'interroger le datastore. Une requêteest effectuée à partir d'une seule dataclass. Les requêtes sontconstruites autour des attributs et des noms d'attributsrelationnels des dataclasses. Les attributs relationnels sont ainsiles moyens d'impliquer plusieurs tables liées dans une requête.</p><p>L'objet dataclass lui-même ne peut pas être copié en tantqu'objet :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$mydataclass</span>:=<span class="hljs-function">OB Copy</span>(ds.Employee) <span class="hljs-comment">//retourne null</span></code></pre><p>Les propriétés de la dataclass sont toutefois énumérables :</p><pre><code class="hljs css language-code4d">ARRAY <span class="hljs-constructor">TEXT($<span class="hljs-params">prop</span>;0)</span>OB GET PROPERTY <span class="hljs-constructor">NAMES(<span class="hljs-params">ds</span>.Employee;$<span class="hljs-params">prop</span>)</span><span class="hljs-comment">//$prop contient les noms de tous les attributs de dataclass</span></code></pre><h3><a aria-hidden="true" class="anchor" id="dsmapping.html_attribut"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_attribut"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Attribut</h3><p>Les propriétés de dataclass sont des objets attribut décrivantles champs ou relations sous-jacents. Par exemple :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$nameAttribute</span>:=ds.Company.name <span class="hljs-comment">//référence à un attribut de classe</span> <span class="hljs-variable">$revenuesAttribute</span>:=ds.Company[<span class="hljs-string">"revenues"</span>] <span class="hljs-comment">//méthode alternative</span></code></pre><p>Ce code attribue à <code>$nameAttribute</code> et<code>$revenuesAttribute</code> des références aux attributs nameet revenues de la classe <code>Company</code>. Cette syntaxe neretourne PAS les valeurs contenues dans l'attribut, mais retourneplutôt des références aux attributs eux-mêmes. Pour gérer lesvaleurs, vous devez passer par les <a href="#dsmapping.html_entity">Entités</a>.</p><p>Tous les fichiers éligibles d'une table sont disponibles en tantqu'attributs de leur <a href="#dsmapping.html_dataclass">dataclass</a> parente. Pour lesdatastores distants accédés via <code>Ouvrir datastore</code> oules <a href="#gettingStarted.html">requêtes REST</a>, l'option<strong>Exposer comme ressource REST</strong> doit êtresélectionnée au niveau de la structure 4D pour chaque champ quevous souhaitez exposer en tant qu'attribut de dataclass.</p><h4><a aria-hidden="true" class="anchor" id="dsmapping.html_attributs-de-stockage-et-relationnels"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_attributs-de-stockage-et-relationnels"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Attributs de stockage et relationnels</h4><p>Les attributs de la Dataclass sont de plusieurs types : storage,relatedEntity et relatedEntities. Les attributs scalaires(c'est-à-dire qui ne fournissent qu'une seule valeur) prennent encharge tous les types de données standard 4D (Entier, texte, objet,etc.).</p><ul><li>Un <strong>attribut de stockage</strong> (storage) estéquivalent à un champ dans la base de données 4D et peut êtreindexé. Les valeurs affectées à un attribut de stockage sontstockées en tant que partie de l'entité lors de son enregistrement.Lorsqu'on accède à un attribut de stockage, sa valeur provientdirectement du datastore. Les attributs de stockage sont le bloc deconstruction le plus élémentaire d'une entité et sont définis parun nom et un type de données.</li><li>Un <strong>attribut relationnel</strong> (relatedEntity etrelatedEntities) donne accès à d'autres entités. Les attributsrelationnels peuvent aboutir soit à une entité unique (ou à aucuneentité), soit à une sélection d'entité (0 à N entités). Lesattributs relationnels s'appuient sur les relations "classiques"dans la structure relationnelle pour fournir un accès direct à uneentité ou à des entités reliées. Tous les attributs relationnelssont directement disponibles dans ORDA si vous utilisez leursnoms.</li></ul><p>Prenons l'exemple de la structure de base de données partiellesuivante et les propriétés relationnelles :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/relationProperties.png" /></p><p>Tous les attributs relationnels seront disponiblesautomatiquement :</p><ul><li>dans la dataclass Project : "ID", "name", et "companyID"</li><li>dans la dataclass Company : "ID", "name", et "discount"</li></ul><p>En outre, les attributs relationnels suivant seront égalementdisponibles automatiquement :</p><ul><li>dans la dataclass Project : l'attribut<strong>theClient</strong>, du type "relatedEntity" ; il y a auplus une compagnie pour chaque projet (le client)</li><li>dans la dataclass Company : l'attribut<strong>companyProjects</strong>, du type "relatedEntities" ; pourchaque compagnie, il existe un certain nombre de projetsreliés.</li></ul><blockquote><p>Les entity selections peuvent également être "partageables" ou"non partageables", selon <a href="#dsmapping.html_shareable-or-alterable-entity-selections">la façondont elles ont été créées</a>.</p></blockquote><p>Tous les attributs de la dataclass sont exposés en tant quepropriétés de la dataclass :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/dataclassProperties.png" /></p><p>Gardez à l'esprit que ces objets décrivent des attributs, maisne donnent pas accès aux données. La lecture ou l'écriture desdonnées se fait à travers des <a href="#dsmapping.html_using-entity-attributes">objets entité</a>.</p><h4><a aria-hidden="true" class="anchor" id="dsmapping.html_champs-calcul%C3%A9s"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_champs-calcul%25C3%25A9s"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Champs calculés</h4><p>dans la <a href="#dsmapping.html_entity-class">définition de laclasse Entity</a>. Leur valeur n'est pas stockée mais évaluée àchaque fois qu'on y accède. Ils n'appartiennent pas à la structuresous-jacente de la base, mais ils se basent sur elle et peuventêtre utilisés comme n'importe quel champ du modèle de données.</p><h3><a aria-hidden="true" class="anchor" id="dsmapping.html_entity"></a><a aria-hidden="true" class="hash-link"href="#dsmapping.html_entity"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity</h3><p>Une entité est l'équivalent d'un enregistrement. Il s'agit d'unobjet qui fait référence à un enregistrement de la base de données.Elle peut être perçue comme une instance de la <a href="#dsmapping.html_dataclass">dataclass</a>, comme un enregistrementde la table correspondante à la dataclass. Toutefois, une entitécontient également des données corrélées à la base de données liéeau datastore.</p><p>Le but de l'entité est de gérer les données (créer, mettre àjour, supprimer). Lorsqu'une référence d'entité est obtenue aumoyen d'une sélection d'entité, elle conserve également desinformations sur la sélection d'entité qui permet une itération àtravers la sélection.</p><p>L'objet entité lui-même ne peut pas être copié en tant qu'objet:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$myentity</span>:=<span class="hljs-function">OB Copy</span>(ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>)) <span class="hljs-comment">//retourne null</span></code></pre><p>Les propriétés de l'entité sont toutefois énumérables :</p><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY TEXT</span>(<span class="hljs-variable">$prop</span>;<span class="hljs-number">0</span>)<span class="hljs-function"> OB GET PROPERTY NAMES</span>(ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>);<span class="hljs-variable">$prop</span>)  <span class="hljs-comment">//$prop contient les noms de tous les attributs de l'entité</span></code></pre><h3><a aria-hidden="true" class="anchor" id="dsmapping.html_entity-selection"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_entity-selection"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity selection</h3><p>Une sélection d'entité est un objet contenant une ou plusieursréférence(s) à des entités appartenant à la même dataclasse. Elleest généralement créée à la suite d'une requête ou retournée àpartir d'un attribut relationnel. Une entity selection peutcontenir 0, 1 ou X entités de la dataclass - où X peut représenterle nombre total d'entités contenues dans la dataclass.</p><p>Exemple :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$e </span>: cs.EmployeeSelection <span class="hljs-comment">//déclare une variable objet $e de type de classe EmployeeSelection</span><span class="hljs-variable">$e</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-comment">//assigne la référence de la sélection d'entité résultante à la variable $e</span></code></pre><p>Les entity selections peuvent être "triées" ou "non triées"(<a href="#dsmapping.html_ordered-or-unordered-entity-selection">voirci-dessous</a>).</p><blockquote><blockquote><p>Les entity selections peuvent également être "partageables" ou"non partageables", selon <a href="#dsmapping.html_shareable-or-alterable-entity-selections">la façondont elles ont été créées</a>.</p></blockquote></blockquote><p>L'objet sélection d'entités lui-même ne peut pas être copié entant qu'objet :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$myentitysel</span>:=<span class="hljs-function">OB Copy</span>(ds.Employee.<span class="hljs-function">all</span>()) <span class="hljs-comment">//retourne null</span></code></pre><p>Les propriétés des sélections d'entités sont toutefoisénumérables :</p><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY TEXT</span>(<span class="hljs-variable">$prop</span>;<span class="hljs-number">0</span>)<span class="hljs-function"> OB GET PROPERTY NAMES</span>(ds.Employee.<span class="hljs-function">all</span>();<span class="hljs-variable">$prop</span>)  <span class="hljs-comment">//$prop contient les noms des propriétés des sélections d'entités</span>  <span class="hljs-comment">//("length", "00", "01"...)</span></code></pre><h4><a aria-hidden="true" class="anchor" id="dsmapping.html_entity-selections-tri%C3%A9es-vs-entity-selections-non-tri%C3%A9es"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_entity-selections-tri%25C3%25A9es-vs-entity-selections-non-tri%25C3%25A9es"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity selections triées vs Entity selectionsnon-triées</h4><p>Pour des raisons d'optimisation, par défaut, 4D ORDA créegénéralement des sélections d'entités non-ordonnées, sauf lorsquevous utilisez la méthode <code>orderBy( )</code> ou si vousutilisez les options appropriées. Dans cette documentation, saufindication contraire, "sélection d'entités" fait généralementréférence à une "sélection d'entités non-ordonnée".</p><p>Les sélections d'entités ordonnées sont créées uniquementlorsque cela est nécessaire ou lorsqu'elles sont spécifiquementdemandées à l'aide d'options, c'est-à-dire dans les cas suivants:</p><ul><li>résultat d'un <code>orderBy( )</code> sur une sélection (den'importe quel type) ou un <code>orderBy( )</code> sur unedataclass,</li><li>résultat de la méthode <code>newSelection( )</code> avecl'option <code>dk keep ordered</code></li></ul><p>Les sélections d'entités non-triées sont créées dans les cassuivants :</p><ul><li>résultat d'un <code>query()</code> standard sur une sélection(de n'importe quel type) ou un <code>query()</code> sur unedataclass,</li><li>résultat de la méthode <code>newSelection()</code> sansoption,</li><li>résultat de l'une des méthodes de comparaison, quel que soit letype de sélection saisi : <code>or()</code>, <code>and()</code>,<code>minus()</code>.</li></ul><blockquote><p>Les sélections d'entités suivantes sont toujours<strong>triées</strong> :</p><ul><li>sélections d'entités retournées par 4D Server vers un clientdistant</li><li>sélections d'entités fondées sur des datastores distants.</li></ul></blockquote><p>Notez que lorsqu'une sélection d'entités ordonnée devient unesélection non-ordonnée, toute référence d'entité répétée estsupprimée.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#overview.html"><span class="arrow-prev">←</span> <span>Quesignifie ORDA ?</span></a><a class="docs-next button" href="#ordaClasses.html"><span>Classes du modèle de données</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#dsmapping.html_correspondance-de-la-structure">Correspondance dela structure</a><ul class="toc-headings"><li><a href="#dsmapping.html_r%25C3%25A8gles-g%25C3%25A9n%25C3%25A9rales">Règlesgénérales</a></li><li><a href="#dsmapping.html_r%25C3%25A8gles-de-contr%25C3%25B4le-dacc%25C3%25A8s-%25C3%25A0-distance">Règles de contrôle d'accès à distance</a></li><li><a href="#dsmapping.html_mise-%25C3%25A0-jour-des-donn%25C3%25A9es">Mise àjour des données</a></li></ul></li><li><a href="#dsmapping.html_d%25C3%25A9finitions-des-objets">Définitions desobjets</a><ul class="toc-headings"><li><a href="#dsmapping.html_datastore">Datastore</a></li><li><a href="#dsmapping.html_dataclass">Dataclass</a></li><li><a href="#dsmapping.html_attribut">Attribut</a></li><li><a href="#dsmapping.html_entity">Entity</a></li><li><a href="#dsmapping.html_entity-selection">Entityselection</a></li></ul></li></ul></nav></div></div></body></html>