<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="en"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>DataClass · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="A [DataClass](/docs/Rx/en/ORDA/dsmapping.html#dataclass) provides an object interface to a database table. All dataclasses in a 4D application are available as a property of the `ds` [datastore](/docs/Rx/en/ORDA/dsmapping.html#datastore)."name="description" /><meta content="en" name="docsearch:language" /><meta content="DataClass · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="A [DataClass](/docs/Rx/en/ORDA/dsmapping.html#dataclass) provides an object interface to a database table. All dataclasses in a 4D application are available as a property of the `ds` [datastore](/docs/Rx/en/ORDA/dsmapping.html#datastore)."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#DataClassClass.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">DataClass<a aria-hidden="true" class="anchor" id="DataClassClass.html"></a></h1></header><article><div><p><span>A <a href="#DataClassClass.html_dataclass">DataClass</a>provides an object interface to a database table. All dataclassesin a 4D application are available as a property of the<code>ds</code> <a href="#DataClassClass.html_datastore">datastore</a>.</span></p><h3><span><a aria-hidden="true" class="anchor" id="DataClassClass.html_summary"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_summary"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Summary</span></h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#DataClassClass.html_attributename"><strong><em>.attributeName</em></strong>: DataClassAttribute</a><p>&nbsp;&nbsp;&nbsp;&nbsp;objects that are available directly asproperties</p></td></tr><tr><td><a href="#DataClassClass.html_all"><strong>.all</strong> ( {<em>settings</em> : Object } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;queries the datastore to find all theentities related to the dataclass and returns them as an entityselection</p></td></tr><tr><td><a href="#DataClassClass.html_clearremotecache"><strong>.clearRemoteCache()</strong></a><p>&nbsp;&nbsp;&nbsp;&nbsp;empties the ORDA cache of adataclass</p></td></tr><tr><td><a href="#DataClassClass.html_fromcollection"><strong>.fromCollection</strong>(<em>objectCol</em> : Collection { ; <em>settings</em> : Object } ): 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;updates or creates entities in thedataclass according to the <em>objectCol</em> collection ofobjects, and returns the corresponding entity selection</p></td></tr><tr><td><a href="#DataClassClass.html_get"><strong>.get</strong>(<em>primaryKey</em> : Integer { ; <em>settings</em> : Object } ) :4D.Entity<br /><strong>.get</strong>( <em>primaryKey</em> : Text { ;<em>settings</em> : Object } ) : 4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;queries the dataclass to retrieve theentity matching the <em>primaryKey</em> parameter</p></td></tr><tr><td><a href="#DataClassClass.html_getcount"><strong>.getCount()</strong> :Integer</a><p>&nbsp;&nbsp;&nbsp;&nbsp; returns the number of entities in adataclass</p></td></tr><tr><td><a href="#DataClassClass.html_getdatastore"><strong>.getDataStore()</strong>: cs.DataStore</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns the datastore for the specifieddataclass</p></td></tr><tr><td><a href="#DataClassClass.html_getinfo"><strong>.getInfo()</strong> :Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns an object providing informationabout the dataclass</p></td></tr><tr><td><a href="#DataClassClass.html_getremotecache"><strong>.getRemoteCache</strong>(): Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;returns an object that holds thecontents of the ORDA cache for a dataclass.</p></td></tr><tr><td><a href="#DataClassClass.html_new"><strong>.new()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;creates in memory and returns a newblank entity related to the Dataclass</p></td></tr><tr><td><a href="#DataClassClass.html_newselection"><strong>.newSelection</strong>({ <em>keepOrder</em> : Integer } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;creates a new, blank, non-shareableentity selection, related to the dataclass, in memory</p></td></tr><tr><td><a href="#DataClassClass.html_query"><strong>.query</strong>(<em>queryString</em> : Text { ; <em>...value</em> : any } { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection<br /><strong>.query</strong>( <em>formula</em> : Object { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;searches for entities that meet thesearch criteria specified in <em>queryString</em> or<em>formula</em> and (optionally) <em>value</em>(s)</p></td></tr><tr><td><a href="#DataClassClass.html_setremotecachesettings"><strong>.setRemoteCacheSettings</strong>(<em>settings</em>: Object)</a><p>&nbsp;&nbsp;&nbsp;&nbsp;sets the timeout and maximum size of theORDA cache for a dataclass.</p></td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="DataClassClass.html_attributename"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.<em>attributeName</em></span></h2><details><summary><span>History</span></summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><span><strong><em>.attributeName</em></strong> :DataClassAttribute</span></p><h4><span><a aria-hidden="true" class="anchor" id="DataClassClass.html_description"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_description"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</span></h4><p><span>The attributes of dataclasses are objects that areavailable directly as properties of these classes.</span></p><p><span>The returned objects are of the <a href="#DataClassAttributeClass.html"><code>DataClassAttribute</code></a>class. These objects have properties that you can read to getinformation about your dataclass attributes.</span></p><blockquote><p><span>Dataclass attribute objects can be modified, but theunderlying database structure will not be altered.</span></p></blockquote><h4><span><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 1</span></h4><pre><span><code class="hljs css language-4d"><span class="hljs-variable">$salary</span>:=ds.Employee.salary <span class="hljs-comment">//returns the salary attribute in the Employee dataclass</span><span class="hljs-variable">$compCity</span>:=ds.Company[<span class="hljs-string">"city"</span>] <span class="hljs-comment">//returns the city attribute in the Company dataclass</span></code></span></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 2</h4><p>Considering the following database structure:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/dataclassAttribute.png" /></p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$firstnameAtt</span>;<span class="hljs-variable">$employerAtt</span>;<span class="hljs-variable">$employeesAtt </span>: Object <span class="hljs-variable">$firstnameAtt</span>:=ds.Employee.firstname  <span class="hljs-comment">//{name:firstname,kind:storage,fieldType:0,type:string,fieldNumber:2,indexed:true,</span>  <span class="hljs-comment">//keyWordIndexed:false,autoFilled:false,mandatory:false,unique:false}</span> <span class="hljs-variable">$employerAtt</span>:=ds.Employee.employer  <span class="hljs-comment">//{name:employer,kind:relatedEntity,relatedDataClass:Company,</span>  <span class="hljs-comment">//fieldType:38,type:Company,inverseName:employees}</span>  <span class="hljs-comment">//38=Is object</span> <span class="hljs-variable">$employeesAtt</span>:=ds.Company.employees  <span class="hljs-comment">//{name:employees,kind:relatedEntities,relatedDataClass:Employee,</span>  <span class="hljs-comment">//fieldType:42,type:EmployeeSelection,inverseName:employer}</span>  <span class="hljs-comment">//42=Is collection</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 3</h4><p>Considering the following table properties:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/dataclassAttribute2.png" /></p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sequenceNumberAtt </span>: Object <span class="hljs-variable">$sequenceNumberAtt</span>=ds.Employee.sequenceNumber  <span class="hljs-comment">//{name:sequenceNumber,kind:storage,fieldType:0,type:string,fieldNumber:13,</span>  <span class="hljs-comment">//indexed:true,keyWordIndexed:false,autoFilled:true,mandatory:false,unique:true}</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_all"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_all"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.all()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17 R5</td><td>Support of the <em>settings</em> parameter</td></tr><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.all</strong> ( { <em>settings</em> : Object } ) :4D.EntitySelection</p><table><thead><tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Build option: context</td></tr><tr><td>Result</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>References on all entities related to the Dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-1"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.all()</code> function queries the datastore to findall the entities related to the dataclass and returns them as anentity selection.</p><p>The entities are returned in the default order, which isinitially the order in which they were created. Note however that,if entities have been deleted and new ones added, the default orderdoes not reflect the creation order anymore.</p><p>If no corresponding entity is found, an empty entity selectionis returned.</p><p>Lazy loading is applied.</p><p><strong>settings</strong></p><p>In the optional <em>settings</em> parameter, you can pass anobject containing additional options. The following property issupported:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>Label for the optimization context applied to the entityselection. This context will be used by the code that handles theentity selection so that it can benefit from the optimization. Thisfeature is <a href="#DataClassClass.html_client-server-optimization">designed for ORDAclient/server processing</a>.</td></tr></tbody></table><blockquote><p>To know the total number of entities in a dataclass, it isrecommended to use the <a href="#DataClassClass.html_getcount"><code>getCount()</code></a>function which is more optimized than the<code>ds.myClass.all().length</code> expression.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$allEmp </span>: cs.EmployeeSelection <span class="hljs-variable">$allEmp</span>:=ds.Employee.<span class="hljs-function">all</span>()</code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_clearremotecache"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_clearremotecache"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.clearRemoteCache()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v19 R5</td><td>Added</td></tr></tbody></table></details><p><strong>.clearRemoteCache()</strong></p><table><thead><tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td></td><td></td><td style="text-align:center"></td><td>Does not require any parameters</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-2"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.clearRemoteCache()</code> function empties the ORDAcache of a dataclass.</p><blockquote><p>This function does not reset the <code>timeout</code> and<code>maxEntries</code> values.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-4"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$persons </span>: cs.PersonsSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$p </span>: cs.PersonsEntity<span class="hljs-keyword">var</span> <span class="hljs-variable">$cache </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$info </span>: Collection<span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$persons</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">all</span>()<span class="hljs-variable">$text</span>:=<span class="hljs-string">""</span><span class="hljs-keyword">For each</span> (<span class="hljs-variable">$p</span>; <span class="hljs-variable">$persons</span>)    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$p</span>.firstname+<span class="hljs-string">" lives in "</span>+<span class="hljs-variable">$p</span>.address.city+<span class="hljs-string">" / "</span><span class="hljs-keyword">End for each</span><span class="hljs-variable">$cache</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">getRemoteCache</span>()<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">clearRemoteCache</span>()<span class="hljs-comment">// Cache of the Persons dataclass = {timeout:30;maxEntries:30000;stamp:255;entries:[]}</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_fromcollection"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_fromcollection"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.fromCollection()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17 R5</td><td>Support of the <em>settings</em> parameter</td></tr><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.fromCollection</strong>( <em>objectCol</em> :Collection { ; <em>settings</em> : Object } ) :4D.EntitySelection</p><table><thead><tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>objectCol</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Collection of objects to be mapped with entities</td></tr><tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Build option: context</td></tr><tr><td>Result</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection filled from the collection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-3"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.fromCollection()</code> function updates or createsentities in the dataclass according to the <em>objectCol</em>collection of objects, and returns the corresponding entityselection.</p><p>In the <em>objectCol</em> parameter, pass a collection ofobjects to create new or update existing entities of the dataclass.The property names must be the same as attribute names in thedataclass. If a property name does not exist in the dataclass, itis ignored. If an attribute value is not defined in the collection,its value is null.</p><p>The mapping between the objects of the collection and theentities is done on the <strong>attribute names</strong> and<strong>matching types</strong>. If an object's property has thesame name as an entity's attribute but their types do not match,the entity's attribute is not filled.</p><p><strong>Create or update mode</strong></p><p>For each object of <em>objectCol</em>:</p><ul><li><p>If the object contains a boolean property "__NEW" set to false(or does not contain a boolean "__NEW" property), the entity isupdated or created with the corresponding values of the propertiesfrom the object. No check is performed in regards to the primarykey:</p><ul><li>If the primary key is given and exists, the entity is updated.In this case, the primary key can be given as is or with a "__KEY"property (filled with the primary key value).</li><li>If the primary key is given (as is) and does not exist, theentity is created</li><li>If the primary key is not given, the entity is created and theprimary key value is assigned with respect to standard databaserules.</li></ul></li><li><p>If the object contains a boolean property "__NEW" set to<strong>true</strong>, the entity is created with the correspondingvalues of the attributes from the object. A check is performed inregards to the primary key:</p><ul><li>If the primary key is given (as is) and exists, an error issent</li><li>If the primary key is given (as is) and does not exist, theentity is created</li><li>If the primary is not given, the entity is created and theprimary key value is assigned with respect to standard databaserules.</li></ul><blockquote><p>The "__KEY" property containing a value is taken into accountonly when the "__NEW" property is set to <strong>false</strong> (oris omitted) and a corresponding entity exists. In all other cases,the "__KEY" property value is ignored, primary key value must bepassed "as is".</p></blockquote></li></ul><p><strong>Related entities</strong></p><p>The objects of <em>objectCol</em> may contain one or more nestedobject(s) featuring one or more related entities, which can beuseful to create or update links between entities.</p><p>The nested objects featuring related entities must contain a"__KEY" property (filled with the primary key value of the relatedentity) or the primary key attribute of the related entity itself.The use of a __KEY property allows independence from the primarykey attribute name.</p><blockquote><p>The content of the related entities cannot be created / updatedthrough this mechanism.</p></blockquote><p><strong>Stamp</strong></p><p>If a __STAMP attribute is given, a check is performed with thestamp in the datastore and an error can be returned ("Given stampdoes not match current one for record# XX of table XXXX"). For moreinformation, see <a href="#DataClassClass.html_entity-locking">Entity locking</a>.</p><p><strong>settings</strong></p><p>In the optional <em>settings</em> parameter, you can pass anobject containing additional options. The following property issupported:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>Label for the optimization context applied to the entityselection. This context will be used by the code that handles theentity selection so that it can benefit from the optimization. Thisfeature is <a href="#DataClassClass.html_client-server-optimization">designed for ORDAclient/server processing</a>.</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-1-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-1-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 1</h4><p>We want to update an existing entity. The __NEW property is notgiven, the employee primary key is given and exists:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">668</span> <span class="hljs-comment">//Existing PK in Employee table</span> <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Arthur"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span> <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"ID"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Existing PK in the related dataClass Company</span>  <span class="hljs-comment">// For this employee, we can change the Company by using another existing PK in the related dataClass Company</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-2-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-2-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 2</h4><p>We want to update an existing entity. The __NEW property is notgiven, the employee primary key is with the __KEY attribute andexists:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.__KEY:=<span class="hljs-number">1720</span> <span class="hljs-comment">//Existing PK in Employee table</span> <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"John"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Boorman"</span> <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"ID"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Existing PK in the related dataClass Company</span>  <span class="hljs-comment">// For this employee, we can change the Company by using another existing PK in the related dataClass Company</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-3-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-3-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 3</h4><p>We want to simply create a new entity from a collection:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Victor"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Hugo"</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-4-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-4-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 4</h4><p>We want to create an entity. The __NEW property is True, theemployee primary key is not given:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Mary"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"__KEY"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Existing PK in the related dataClass Company</span> <span class="hljs-variable">$emp</span>.__NEW:=<span class="hljs-literal">True</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-5"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 5</h4><p>We want to create an entity. The __NEW property is omitted, theemployee primary key is given and does not exist:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">10000</span> <span class="hljs-comment">//Unexisting primary key</span> <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Françoise"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Sagan"</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-6"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 6</h4><p>In this example, the first entity will be created and saved butthe second will fail since they both use the same primary key:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp</span>; <span class="hljs-variable">$emp2 </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">10001</span> <span class="hljs-comment">// Unexisting primary key</span> <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Simone"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span> <span class="hljs-variable">$emp</span>.__NEW:=<span class="hljs-literal">True</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$emp2</span>:=New object <span class="hljs-variable">$emp2</span>.ID:=<span class="hljs-number">10001</span> <span class="hljs-comment">// Same primary key, already existing</span> <span class="hljs-variable">$emp2</span>.firstName:=<span class="hljs-string">"Marc"</span> <span class="hljs-variable">$emp2</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$emp2</span>.__NEW:=<span class="hljs-literal">True</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp2</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)  <span class="hljs-comment">//first entity is created</span>  <span class="hljs-comment">//duplicated key error for the second entity</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_see-also"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_see-also"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>See also</h4><p><a href="#DataClassClass.html_tocollection"><strong>.toCollection()</strong></a></p><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_get"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_get"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.get()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.get</strong>( <em>primaryKey</em> : Integer { ;<em>settings</em> : Object } ) : 4D.Entity<br /><strong>.get</strong>( <em>primaryKey</em> : Text { ;<em>settings</em> : Object } ) : 4D.Entity</p><table><thead><tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>primaryKey</td><td>Integer OR Text</td><td style="text-align:center">-&gt;</td><td>Primary key value of the entity to retrieve</td></tr><tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Build option: context</td></tr><tr><td>Result</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Entity matching the designated primary key</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-4"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.get()</code> function queries the dataclass toretrieve the entity matching the <em>primaryKey</em> parameter.</p><p>In <em>primaryKey</em>, pass the primary key value of the entityto retrieve. The value type must match the primary key type set inthe datastore (Integer or Text). You can also make sure that theprimary key value is always returned as Text by using the <a href="#DataClassClass.html_getkey"><code>.getKey()</code></a> functionwith the <code>dk key as string</code> parameter.</p><p>If no entity is found with <em>primaryKey</em>, a<strong>Null</strong> entity is returned.</p><p>Lazy loading is applied, which means that related data is loadedfrom disk only when it is required.</p><p><strong>settings</strong></p><p>In the optional <em>settings</em> parameter, you can pass anobject containing additional options. The following property issupported:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>Label for the automatic optimization context applied to theentity. This context will be used by the subsequent code that loadsthe entity so that it can benefit from the optimization. Thisfeature is <a href="#DataClassClass.html_client-server-optimization">designed for ORDAclient/server processing</a>.</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-1-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-1-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmployeeEntity<span class="hljs-keyword">   var</span> <span class="hljs-variable">$entity2 </span>: cs.InvoiceEntity <span class="hljs-variable">$entity</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">167</span>) <span class="hljs-comment">// return the entity whose primary key value is 167</span> <span class="hljs-variable">$entity2</span>:=ds.Invoice.<span class="hljs-function">get</span>(<span class="hljs-string">"DGGX20030"</span>) <span class="hljs-comment">// return the entity whose primary key value is "DGGX20030"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-2-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-2-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 2</h4><p>This example illustrates the use of the <em>context</em>property:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$e1</span>; <span class="hljs-variable">$e2</span>; <span class="hljs-variable">$e3</span>; <span class="hljs-variable">$e4 </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings</span>; <span class="hljs-variable">$settings2 </span>: Object <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"detail"</span>) <span class="hljs-variable">$settings2</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"summary"</span>) <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>;<span class="hljs-variable">$settings</span>)<span class="hljs-function"> completeAllData</span>(<span class="hljs-variable">$e1</span>) <span class="hljs-comment">// In completeAllData method, an optimization is triggered and associated to context "detail"</span> <span class="hljs-variable">$e2</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">2</span>;<span class="hljs-variable">$settings</span>)<span class="hljs-function"> completeAllData</span>(<span class="hljs-variable">$e2</span>) <span class="hljs-comment">// In completeAllData method, the optimization associated to context "detail" is applied</span> <span class="hljs-variable">$e3</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">3</span>;<span class="hljs-variable">$settings2</span>)<span class="hljs-function"> completeSummary</span>(<span class="hljs-variable">$e3</span>) <span class="hljs-comment">//In completeSummary method, an optimization is triggered and associated to context "summary"</span> <span class="hljs-variable">$e4</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">4</span>;<span class="hljs-variable">$settings2</span>)<span class="hljs-function"> completeSummary</span>(<span class="hljs-variable">$e4</span>) <span class="hljs-comment">//In completeSummary method, the optimization associated to context "summary" is applied</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_getcount"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_getcount"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getCount()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v19 R5</td><td>Added</td></tr></tbody></table></details><p><strong>.getCount()</strong> : Integer</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>result</td><td>Integer</td><td>&lt;-</td><td>Number of entities in the dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-5"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.getCount()</code> function returns the number ofentities in a dataclass.</p><p>If this function is used within a transaction, entities createdduring the transaction will be taken into account.</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-7"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-7"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$number </span>: Integer<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$number</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">getCount</span>()</code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_getdatastore"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_getdatastore"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getDataStore()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17 R5</td><td>Added</td></tr></tbody></table></details><p><strong>.getDataStore()</strong> : cs.DataStore</p><table><thead><tr><th>Parameter</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>Result</td><td>cs.DataStore</td><td style="text-align:center">&lt;-</td><td>Datastore of the dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-6"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.getDataStore()</code> function returns the datastorefor the specified dataclass.</p><p>The datastore can be:</p><ul><li>the main datastore, as returned by the <code>ds</code>command.</li><li>a remote datastore, opened using the <code>Opendatastore</code> command.</li></ul><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-8"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-8"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><p>The <strong><em>SearchDuplicate</em></strong> project methodsearches for duplicated values in any dataclass.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$pet </span>: cs.CatsEntity <span class="hljs-variable">$pet</span>:=ds.Cats.<span class="hljs-function">all</span>().<span class="hljs-function">first</span>() <span class="hljs-comment">//get an entity</span><span class="hljs-function"> SearchDuplicate</span>(<span class="hljs-variable">$pet</span>;<span class="hljs-string">"Dogs"</span>)</code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">// SearchDuplicate method</span>  <span class="hljs-comment">// SearchDuplicate(entity_to_search;dataclass_name)</span> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$pet </span>: Object ; <span class="hljs-variable">$dataClassName </span>: Text)<span class="hljs-keyword"> var</span> <span class="hljs-variable">$dataStore</span>; <span class="hljs-variable">$duplicates </span>: Object   <span class="hljs-variable">$dataStore</span>:=<span class="hljs-variable">$pet</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getDataStore</span>() <span class="hljs-variable">$duplicates</span>:=<span class="hljs-variable">$dataStore</span>[<span class="hljs-variable">$dataClassName</span>].<span class="hljs-function">query</span>(<span class="hljs-string">"name=:1"</span>;<span class="hljs-variable">$pet</span>.name)</code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_getinfo"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_getinfo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getInfo()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v19 R3</td><td>Added exposed property</td></tr><tr><td>v17 R5</td><td>Added</td></tr></tbody></table></details><p><strong>.getInfo()</strong> : Object</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>Result</td><td>Object</td><td>&lt;-</td><td>Information on the dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-7"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-7"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.getInfo()</code> function returns an object providinginformation about the dataclass. This function is useful forsetting up generic code.</p><p><strong>Returned object</strong></p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>exposed</td><td>Boolean</td><td>True if the dataclass is exposed in REST</td></tr><tr><td>name</td><td>Text</td><td>Name of the dataclass</td></tr><tr><td>primaryKey</td><td>Text</td><td>Name of the primary key of the dataclass</td></tr><tr><td>tableNumber</td><td>Integer</td><td>Internal 4D table number</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-1-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-1-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 1</h4><pre><code class="hljs css language-4d"> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$entity </span>: Object)<span class="hljs-keyword">   var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-function"> computeEmployeeNumber</span>(<span class="hljs-variable">$entity</span>) <span class="hljs-comment">//do some actions on entity</span> <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()<span class="hljs-function"> if</span>(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Record updated in table "</span>+<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getInfo</span>().name)<span class="hljs-keyword"> End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-2-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-2-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 2</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.ClientsSelection <span class="hljs-variable">$settings</span>:=New object <span class="hljs-variable">$settings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"receivedIds"</span>;<span class="hljs-function">getIds</span>()) <span class="hljs-variable">$settings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"pk"</span>;ds.Clients.<span class="hljs-function">getInfo</span>().primaryKey) <span class="hljs-variable">$es</span>:=ds.Clients.<span class="hljs-function">query</span>(<span class="hljs-string">":pk in :receivedIds"</span>;<span class="hljs-variable">$settings</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-3-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-3-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 3</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$pk </span>: Text<span class="hljs-keyword"> var</span> <span class="hljs-variable">$dataClassAttribute </span>: Object <span class="hljs-variable">$pk</span>:=ds.Employee.<span class="hljs-function">getInfo</span>().primaryKey <span class="hljs-variable">$dataClassAttribute</span>:=ds.Employee[<span class="hljs-variable">$pk</span>] <span class="hljs-comment">// If needed the attribute matching the primary key is accessible</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_see-also-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_see-also-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>See also</h4><p><a href="#DataClassClass.html_exposed">DataClassAttribute.exposed</a></p><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_getremotecache"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_getremotecache"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getRemoteCache()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v19 R5</td><td>Added</td></tr></tbody></table></details><p><strong>.getRemoteCache</strong>() : Object</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>result</td><td>Object</td><td>&lt;-</td><td>Object describing the contents of the ORDA cache for thedataclass.</td></tr></tbody></table><blockquote><p><strong>Advanced mode:</strong> This function is intended fordevelopers who need to customize ORDA default features for specificconfigurations. In most cases, you will not need to use it.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-8"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-8"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.getRemoteCache()</code> function returns an objectthat holds the contents of the ORDA cache for a dataclass..</p><p>Calling this function from a 4D single-user application returns<code>Null</code>.</p><p>The returned object has the following properties:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>maxEntries</td><td>Integer</td><td>Maximum number of entries collection.</td></tr><tr><td>stamp</td><td>Integer</td><td>Stamp of the cache.</td></tr><tr><td>timeout</td><td>Integer</td><td>Time remaining before the new entries in the cache are markedas expired.</td></tr><tr><td>entries</td><td>Collection</td><td>Contains an entry object for each entity in the cache.</td></tr></tbody></table><p>Each entry object in the <code>entries</code> collection has thefollowing properties:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td>Object</td><td>Object holding data on the entry.</td></tr><tr><td>expired</td><td>Boolean</td><td>True if the entry has expired.</td></tr><tr><td>key</td><td>Text</td><td>Primary key of the entity.</td></tr></tbody></table><p>The <code>data</code> object in each entry contains thefollowing properties:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>__KEY</td><td>String</td><td>Primary key of the entity</td></tr><tr><td>__STAMP</td><td>Longint</td><td>Timestamp of the entity in the database</td></tr><tr><td>__TIMESTAMP</td><td>String</td><td>Stamp of the entity in the database (format isYYYY-MM-DDTHH:MM:SS:ms:Z)</td></tr><tr><td>dataClassAttributeName</td><td>Variant</td><td>If there is data in the cache for a dataclass attribute, it isreturned in a property with the same type as in the database.</td></tr></tbody></table><p>Data concerning related entities is stored in the cache of thedata object.</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-9"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-9"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><p>In the following example, <code>$ds.Persons.all()</code> loadsthe first entity with all its attributes. Then, the requestoptimization is triggered, so only <code>firstname</code> and<code>address.city</code> are loaded.</p><p>Note that <code>address.city</code> is loaded in the cache ofthe <code>Persons</code> dataclass.</p><p>Only the first entity of the <code>Address</code> dataclass isstored in the cache. It is loaded during the first iteration of theloop.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$persons </span>: cs.PersonsSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$p </span>: cs.PersonsEntity<span class="hljs-keyword">var</span> <span class="hljs-variable">$cachePersons</span>; <span class="hljs-variable">$cacheAddress </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$persons</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">all</span>()<span class="hljs-variable">$text</span>:=<span class="hljs-string">""</span><span class="hljs-keyword">For each</span> (<span class="hljs-variable">$p</span>; <span class="hljs-variable">$persons</span>)    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$p</span>.firstname+<span class="hljs-string">" lives in "</span>+<span class="hljs-variable">$p</span>.address.city+<span class="hljs-string">" / "</span><span class="hljs-keyword">End for each</span><span class="hljs-variable">$cachePersons</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">getRemoteCache</span>()<span class="hljs-variable">$cacheAddress</span>:=<span class="hljs-variable">$ds</span>.Adress.<span class="hljs-function">getRemoteCache</span>()</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_see-also-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_see-also-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>See also</h4><p><a href="#DataClassClass.html_setremotecachesettings">.setRemoteCacheSettings()</a><br /><a href="#DataClassClass.html_clearremotecache">.clearRemoteCache()</a></p><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_new"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_new"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.new()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.new()</strong> : 4D.Entity</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>Result</td><td>4D.Entity</td><td>&lt;-</td><td>New entity matching the Dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-9"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-9"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.new()</code> function creates in memory and returns anew blank entity related to the Dataclass.</p><p>The entity object is created in memory and is not saved in thedatabase until the <a href="#DataClassClass.html_save"><code>.save()</code></a> function is called. If the entity is deleted beforebeing saved, it cannot be recovered.</p><p><strong>4D Server</strong>: In client-server, if the primary keyof the corresponding table is auto-incremented, it will becalculated when the entity is saved on the server.</p><p>All attributes of the entity are initialized with the<strong>null</strong> value.</p><blockquote><p>Attributes can be initialized with default values if the<strong>Map NULL values to blank values</strong> option is selectedat the 4D database structure level.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-10"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-10"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><p>This example creates a new entity in the "Log" Dataclass andrecords information in the "info" attribute:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.LogEntity <span class="hljs-variable">$entity</span>:=ds.Log.<span class="hljs-function">new</span>() <span class="hljs-comment">//create a reference</span> <span class="hljs-variable">$entity</span>.info:=<span class="hljs-string">"New entry"</span> <span class="hljs-comment">//store some information</span> <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//save the entity</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_newselection"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_newselection"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.newSelection()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.newSelection</strong>( { <em>keepOrder</em> : Integer }) : 4D.EntitySelection</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>keepOrder</td><td>Integer</td><td>-&gt;</td><td><code>dk keep ordered</code>: creates an ordered entityselection,<br /><code>dk non ordered</code>: creates an unordered entity selection(default if omitted)</td></tr><tr><td>Result</td><td>4D.EntitySelection</td><td>&lt;-</td><td>New blank entity selection related to the dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-10"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.newSelection()</code> function creates a new, blank,non-shareable entity selection, related to the dataclass, inmemory.</p><blockquote><p>For information on non-shareable entity selections, please referto <a href="#DataClassClass.html_shareable-or-non-shareable-entity-selections">this section</a>.</p></blockquote><p>If you want to create an ordered entity selection, pass the<code>dk keep ordered</code> selector in the <em>keepOrder</em>parameter. By default if you omit this parameter, or if you passthe <code>dk non ordered</code> selector, the method creates anunordered entity selection. Unordered entity selections are fasterbut you cannot rely on entity positions. For more information,please see <a href="#DataClassClass.html_ordered-or-unordered-entity-selection">Orderedvs Unordered entity selections</a>.</p><p>When created, the entity selection does not contain any entities(<code>mySelection.length</code> returns 0). This method lets youbuild entity selections gradually by making subsequent calls to the<a href="#DataClassClass.html_add"><code>add()</code></a>function.</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-11"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-11"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$USelection</span>; <span class="hljs-variable">$OSelection </span>: cs.EmployeeSelection <span class="hljs-variable">$USelection</span>:=ds.Employee.<span class="hljs-function">newSelection</span>() <span class="hljs-comment">//create an unordered empty entity selection</span> <span class="hljs-variable">$OSelection</span>:=ds.Employee.<span class="hljs-function">newSelection</span>(dk keep ordered) <span class="hljs-comment">//create an ordered empty entity selection</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_query"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_query"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.query()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v17 R6</td><td>Support of Formula parameters</td></tr><tr><td>v17 R5</td><td>Support of placeholders for values</td></tr><tr><td>v17</td><td>Added</td></tr></tbody></table></details><p><strong>.query</strong>( <em>queryString</em> : Text { ;<em>...value</em> : any } { ; <em>querySettings</em> : Object } ) :4D.EntitySelection<br /><strong>.query</strong>( <em>formula</em> : Object { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>queryString</td><td>Text</td><td>-&gt;</td><td>Search criteria as string</td></tr><tr><td>formula</td><td>Object</td><td>-&gt;</td><td>Search criteria as formula object</td></tr><tr><td>value</td><td>any</td><td>-&gt;</td><td>Value(s) to use for indexed placeholder(s)</td></tr><tr><td>querySettings</td><td>Object</td><td>-&gt;</td><td>Query options: parameters, attributes, args, allowFormulas,context, queryPath, queryPlan</td></tr><tr><td>Result</td><td>4D.EntitySelection</td><td>&lt;-</td><td>New entity selection made up of entities from dataclass meetingthe search criteria specified in <em>queryString</em> or<em>formula</em></td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-11"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-11"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.query()</code> function searches for entities thatmeet the search criteria specified in <em>queryString</em> or<em>formula</em> and (optionally) <em>value</em>(s), for all theentities in the dataclass, and returns a new object of type<code>EntitySelection</code> containing all the entities that arefound. Lazy loading is applied.</p><p>If no matching entities are found, an empty<code>EntitySelection</code> is returned.</p><p><strong>queryString parameter</strong></p><p>The <em>queryString</em> parameter uses the followingsyntax:</p><pre><code class="hljs css language-4d">attributePath|formula comparator value       {logicalOperator attributePath|formula comparator value}       {order by attributePath {desc | asc}}</code></pre><p>where:</p><ul><li><p><strong>attributePath</strong>: path of attribute on which youwant to execute the query. This parameter can be a simple name (forexample "country") or any valid attribute path (for example"country.name".) In case of an attribute path whose type is<code>Collection</code>, [ ] notation is used to handle all theoccurences (for example "children[ ].age").</p><blockquote><p><em>You cannot use directly attributes whose name containsspecial characters such as ".", "[ ]", or "=", "&gt;", "#"...,because they will be incorrectly evaluated in the query string. Ifyou need to query on such attributes, you must consider usingplaceholders, which allow an extended range of characters inattribute paths (see</em> <strong>Using placeholders</strong><em>below).</em></p></blockquote></li><li><p><strong>formula</strong>: a valid formula passed as<code>Text</code> or <code>Object</code>. The formula will beevaluated for each processed entity and must return a booleanvalue. Within the formula, the entity is available through the<code>This</code> object.</p><ul><li><strong>Text</strong>: the formula string must be preceeded bythe <code>eval( )</code> statement, so that the query parserevaluates the expression correctly. For example:<em>"eval(length(This.lastname) &gt;=30)"</em></li><li><strong>Object</strong>: the <a href="#FunctionClass.html">formula object</a> is passed as a<strong>placeholder</strong> (see below). The formula must havebeen created using the <a href="#DataClassClass.html_formula"><code>Formula</code></a> or <a href="#DataClassClass.html_formula-from-string"><code>Formula fromstring</code></a> command.</li></ul><blockquote><ul><li>Keep in mind that 4D formulas only support <code>&amp;</code>and <code>|</code> symbols as logical operators.</li><li>If the formula is not the only search criteria, the queryengine optimizer could prior process other criteria (e.g. indexedattributes) and thus, the formula could be evaluated for only asubset of entities.</li></ul></blockquote><p>Formulas in queries can receive parameters through $1. Thispoint is detailed in the <strong>formula parameter</strong>paragraph below.</p><blockquote><ul><li>You can also pass directy a <code>formula</code> parameterobject instead of the <code>queryString</code> parameter(recommended when formulas are more complex). See <strong>formulaparameter</strong> paragraph below.</li><li>For security reasons, formula calls within <code>query()</code>functions can be disallowed. See <code>querySettings</code>parameter description.</li></ul></blockquote></li><li><p><strong>comparator</strong>: symbol that compares<em>attributePath</em> and <em>value</em>. The following symbolsare supported:</p><table><thead><tr><th>Comparison</th><th>Symbol(s)</th><th>Comment</th></tr></thead><tbody><tr><td>Equal to</td><td>=, ==</td><td>Gets matching data, supports the wildcard (@), neithercase-sensitive nor diacritic.</td></tr><tr><td></td><td>===, IS</td><td>Gets matching data, considers the @ as a standard character,neither case-sensitive nor diacritic</td></tr><tr><td>Not equal to</td><td>#, !=</td><td>Supports the wildcard (@)</td></tr><tr><td></td><td>!==, IS NOT</td><td>Considers the @ as a standard character</td></tr><tr><td>Less than</td><td>&lt;</td><td></td></tr><tr><td>Greater than</td><td>&gt;</td><td></td></tr><tr><td>Less than or equal to</td><td>&lt;=</td><td></td></tr><tr><td>Greater than or equal to</td><td>&gt;=</td><td></td></tr><tr><td>Included in</td><td>IN</td><td>Gets data equal to at least one of the values in a collectionor in a set of values, supports the wildcard (@)</td></tr><tr><td>Not condition applied on a statement</td><td>NOT</td><td>Parenthesis are mandatory when NOT is used before a statementcontaining several operators</td></tr><tr><td>Contains keyword</td><td>%</td><td>Keywords can be used in attributes of string or picturetype</td></tr></tbody></table></li><li><p><strong>value</strong>: the value to compare to the currentvalue of the property of each entity in the entity selection orelement in the collection. It can be a <strong>placeholder</strong>(see <strong>Using placeholders</strong> below) or any expressionmatching the data type property.</p><p>When using a constant value, the following rules must berespected:</p><ul><li><strong>text</strong> type constant can be passed with orwithout simple quotes (see <strong>Using quotes</strong> below). Toquery a string within a string (a "contains" query), use thewildcard symbol (@) in value to isolate the string to be searchedfor as shown in this example: "@Smith@". The following keywords areforbidden for text constants: true, false.</li><li><strong>boolean</strong> type constants: <strong>true</strong>or <strong>false</strong> (case sensitive).</li><li><strong>numeric</strong> type constants: decimals are separatedby a '.' (period).</li><li><strong>date</strong> type constants: "YYYY-MM-DD" format</li><li><strong>null</strong> constant: using the "null" keyword willfind <strong>null</strong> and <strong>undefined</strong>properties.</li><li>in case of a query with an IN comparator, <em>value</em> mustbe a collection, or values matching the type of the attribute pathbetween [ ] separated by commas (for strings, <code>"</code>characters must be escaped with <code>\</code>).</li></ul></li><li><p><strong>logicalOperator</strong>: used to join multipleconditions in the query (optional). You can use one of thefollowing logical operators (either the name or the symbol can beused):</p><table><thead><tr><th>Conjunction</th><th>Symbol(s)</th></tr></thead><tbody><tr><td>AND</td><td>&amp;, &amp;&amp;, and</td></tr><tr><td>OR</td><td>|,||, or</td></tr></tbody></table></li><li><p><strong>order by attributePath</strong>: you can include anorder by <em>attributePath</em> statement in the query so that theresulting data will be sorted according to that statement. You canuse multiple order by statements, separated by commas (e.g., orderby <em>attributePath1</em> desc, <em>attributePath2</em> asc). Bydefault, the order is ascending. Pass 'desc' to define a descendingorder and 'asc' to define an ascending order.</p><blockquote><p>If you use this statement, the returned entity selection isordered (for more information, please refer to <a href="#DataClassClass.html_ordered-or-unordered-entity-selection">Orderedvs Unordered entity selections</a>).</p></blockquote></li></ul><p><strong>Using quotes</strong></p><p>When you use quotes within queries, you must use single quotes '' inside the query and double quotes " " to enclose the wholequery, otherwise an error is returned. For example:</p><pre><code class="hljs css language-4d"><span class="hljs-string">"employee.name = 'smith' AND employee.firstname = 'john'"</span></code></pre><blockquote><p>Single quotes (') are not supported in searched values sincethey would break the query string. For example "comp.name = 'John'spizza' " will generate an error. If you need to search on valueswith single quotes, you may consider using placeholders (seebelow).</p></blockquote><p><strong>Using parenthesis</strong></p><p>You can use parentheses in the query to give priority to thecalculation. For example, you can organize a query as follows:</p><pre><code class="hljs css language-4d"><span class="hljs-string">"(employee.age &gt;= 30 OR employee.age &lt;= 65) AND (employee.salary &lt;= 10000 OR employee.status = 'Manager')"</span></code></pre><p><strong>Using placeholders</strong></p><p>4D allows you to use placeholders for <em>attributePath</em>,<em>formula</em> and <em>value</em> arguments within the<em>queryString</em> parameter. A placeholder is a parameter thatyou insert in query strings and that is replaced by another valuewhen the query string is evaluated. The value of placeholders isevaluated once at the beginning of the query; it is not evaluatedfor each element.</p><p>Two types of placeholders can be used: <strong>indexedplaceholders</strong> and <strong>named placeholders</strong>:</p><table><thead><tr><th></th><th>Indexed placeholders</th><th>Named placeholders</th></tr></thead><tbody><tr><td>Definition</td><td>Parameters are inserted as <code>:paramIndex</code> (forexample :1, :2...) in <em>queryString</em> and their correspondingvalues are provided by the sequence of <em>value</em> parameter(s).You can use up to 128 <em>value</em> parameters</td><td>Parameters are inserted as <code>:paramName</code> (for example:myparam) and their values are provided in the attributes and/orparameters objects in the <em>querySettings</em> parameter</td></tr><tr><td>Example</td><td><code>$r:=class.query(":1=:2";"city";"Chicago")</code></td><td><code>$o.attributes:=New object("att";"city")</code><br /><code>$o.parameters:=New object("name";"Chicago")</code><br /><code>$r:=class.query(":att=:name";$o)</code></td></tr></tbody></table><p>You can mix all argument kinds in <em>queryString</em>. A<em>queryString</em> can contain, for <em>attributePath</em>,<em>formula</em> and <em>value</em> parameters:</p><ul><li>direct values (no placeholders),</li><li>indexed placeholders and/or named placeholders.</li></ul><p>Using placeholders in queries <strong>is recommended</strong>for the following reasons:</p><ol><li><p>It prevents malicious code insertion: if you directly useuser-filled variables within the query string, a user could modifiythe query conditions by entering additional query arguments. Forexample, imagine a query string like:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$vquery</span>:=<span class="hljs-string">"status = 'public' &amp; name = "</span>+myname <span class="hljs-comment">//user enters their name</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-variable">$vquery</span>)</code></pre><p>This query seems secured since non-public data are filtered.However, if the user enters in the <em>myname</em> area somethinglike <em>"smith OR status='private'</em>, the query string would bemodified at the interpretation step and could return privatedata.</p><p>When using placeholders, overriding security conditions is notpossible:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"status='public' &amp; name=:1"</span>;myname)</code></pre><p>In this case if the user enters <em>smith ORstatus='private'</em> in the <em>myname</em> area, it will not beinterpreted in the query string, but only passed as a value.Looking for a person named "smith OR status='private'" will justfail.</p></li><li><p>It prevents having to worry about formatting or characterissues, especially when handling <em>attributePath</em> or<em>value</em> parameters that might contain non-alphanumericcharacters such as ".", "['...</p></li><li><p>It allows the use of variables or expressions in queryarguments. Examples:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"address.city = :1 &amp; name =:2"</span>;<span class="hljs-variable">$city</span>;<span class="hljs-variable">$myVar</span>+<span class="hljs-string">"@"</span>)<span class="hljs-variable">$result2</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"company.name = :1"</span>;<span class="hljs-string">"John's Pizzas"</span>)</code></pre></li></ol><p><strong>Looking for null values</strong></p><p>When you look for null values, you cannot use the placeholdersyntax because the query engine considers null as an unexpectedcomparison value. For example, if you execute the followingquery:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$vSingles</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"spouse = :1"</span>;<span class="hljs-literal">Null</span>) <span class="hljs-comment">// will NOT work</span></code></pre><p>You will not get the expected result because the null value willbe evaluated by 4D as an error resulting from the parameterevaluation (for example, an attribute coming from another query).For these kinds of queries, you must use the direct querysyntax:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$vSingles</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"spouse = null"</span>) <span class="hljs-comment">//correct syntax</span></code></pre><p><strong>Linking collection attribute queryarguments</strong></p><p>When searching in collections within object attributes usingmultiple query arguments joined by the AND operator, you may wantto make sure that only entities containing elements that match allarguments are returned, and not entities where arguments can befound in different elements. To do this, you need to link queryarguments to collection elements, so that only single elementscontaining linked arguments are found.</p><p>For example, with the following two entities:</p><pre><code class="hljs">Entity <span class="hljs-number">1</span>:ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.name</span>: <span class="hljs-string">"martin"</span>ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.places</span>:    { <span class="hljs-string">"locations"</span> : [ {                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"home"</span>,                <span class="hljs-string">"city"</span>:<span class="hljs-string">"paris"</span>            } ] }Entity <span class="hljs-number">2</span>:ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.name</span>: <span class="hljs-string">"smith"</span>ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.places</span>:    { <span class="hljs-string">"locations"</span> : [ {                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"home"</span>,                <span class="hljs-string">"city"</span>:<span class="hljs-string">"lyon"</span>            } , {                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"office"</span>,                <span class="hljs-string">"city"</span>:<span class="hljs-string">"paris"</span>            } ] }</code></pre><p>You want to find people with a "home" location kind in the city"paris". If you write:</p><pre><code class="hljs css language-4d">ds.People.<span class="hljs-function">query</span>(<span class="hljs-string">"places.locations[].kind= :1 and places.locations[].city= :2"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"paris"</span>)</code></pre><p>... the query will return "martin" <strong>and</strong> "smith"because "smith" has a "locations" element whose "kind" is "home"and a "locations" element whose "city" is "paris", even though theyare different elements.</p><p>If you want to only get entities where matching arguments are inthe same collection element, you need to <strong>linkarguments</strong>. To link query arguments:</p><ul><li>Add a letter between the [] in the first path to link andrepeat the same letter in all linked arguments. For example:<code>locations[a].city and locations[a].kind</code>. You can useany letter of the Latin alphabet (not case sensitive).</li><li>To add different linked criteria in the same query, use anotherletter. You can create up to 26 combinations of criteria in asingle query.</li></ul><p>With the above entities, if you write:</p><pre><code class="hljs css language-4d">ds.People.<span class="hljs-function">query</span>(<span class="hljs-string">"places.locations[a].kind= :1 and places.locations[a].city= :2"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"paris"</span>)</code></pre><p>... the query will only return "martin" because it has a"locations" element whose "kind" is "home" and whose "city" is"paris". The query will not return "smith" because the values"home" and "paris" are not in the same collection element.</p><p><strong>Queries in many-to-many relations</strong></p><p>ORDA offers a special syntax to facilitate queries inmany-to-many relations. In this context, you may need to search fordifferent values with an <code>AND</code> operator BUT in the sameattribute. For example, take a look at the following structure:</p><p><img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/API/manytomany.png" /></p><p>Imagine that you want to search all movies in which<em>both</em> actor A and actor B have a role. If you write asimple query using an <code>AND</code> operator, it will notwork:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// invalid code</span><span class="hljs-variable">$es</span>:=ds.Movie.<span class="hljs-function">query</span>(<span class="hljs-string">"roles.actor.lastName = :1 AND roles.actor.lastName = :2"</span>;<span class="hljs-string">"Hanks"</span>;<span class="hljs-string">"Ryan"</span>)  <span class="hljs-comment">// $es is empty</span></code></pre><p>Basically, the issue is related to the internal logic of thequery: you cannot search for an attribute whose value would be both"A" and "B".</p><p>To make it possible to perform such queries, ORDA allows aspecial syntax: you just need to add a <em>class index</em> between<strong>{}</strong> in all additional relation attributes used inthe string:</p><pre><code class="hljs css language-4d"><span class="hljs-string">"relationAttribute.attribute = :1 AND relationAttribute{x}.attribute = :2 [AND relationAttribute{y}.attribute...]"</span></code></pre><p><strong>{x}</strong> tells ORDA to create another reference forthe relation attribute. It will then perform all the necessarybitmap operations internally. Note that <strong>x</strong> can beany number <strong>except 0</strong>: {1}, or {2}, or {1540}...ORDA only needs a unique reference in the query for each classindex.</p><p>In our example, it would be:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// valid code</span><span class="hljs-variable">$es</span>:=ds.Movie.<span class="hljs-function">query</span>(<span class="hljs-string">"roles.actor.lastName = :1 AND roles.actor{2}.lastName = :2"</span>;<span class="hljs-string">"Hanks"</span>;<span class="hljs-string">"Ryan"</span>)  <span class="hljs-comment">// $es contains movies (You've Got Mail, Sleepless in Seattle, Joe Versus the Volcano)</span></code></pre><p><strong>formula parameter</strong></p><p>As an alternative to formula insertion within the<em>queryString</em> parameter (see above), you can pass directly aformula object as a boolean search criteria. Using a formula objectfor queries is <strong>recommended</strong> since you benefit fromtokenization, and code is easier to search/read.</p><p>The formula must have been created using the <a href="#DataClassClass.html_formula"><code>Formula</code></a> or <a href="#DataClassClass.html_formula-from-string"><code>Formula fromstring</code></a> command. In this case:</p><ul><li><p>the <em>formula</em> is evaluated for each entity and mustreturn true or false. During the execution of the query, if theformula's result is not a boolean, it is considered as false.</p></li><li><p>within the <em>formula</em>, the entity is available through the<code>This</code> object.</p></li><li><p>if the <code>Formula</code> object is <strong>null</strong>, theerror 1626 ("Expecting a text or formula") is generated, that youcall intercept using a method installed with <code>ON ERRCALL</code>.</p><blockquote><p>For security reasons, formula calls within <code>query()</code>functions can be disallowed. See <em>querySettings</em> parameterdescription.</p></blockquote></li></ul><p><strong>Passing parameters to formulas</strong></p><p>Any <em>formula</em> called by the <code>query()</code> classfunction can receive parameters:</p><ul><li>Parameters must be passed through the <strong>args</strong>property (object) of the <em>querySettings</em> parameter.</li><li>The formula receives this <strong>args</strong> object as a<strong>$1</strong> parameter.</li></ul><p>This small code shows the principles of how parameter are passedto methods:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"args"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"exclude"</span>;<span class="hljs-string">"-"</span>)) <span class="hljs-comment">//args object to pass parameters</span> <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(checkName($1.exclude))"</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-comment">//args is received in $1</span></code></pre><p>Additional examples are provided in example 3.</p><p><strong>4D Server</strong>: In client/server, formulas areexecuted on the server. In this context, only the<code>querySettings.args</code> object is sent to the formulas.</p><p><strong>querySettings parameter</strong></p><p>In the <em>querySettings</em> parameter, you can pass an objectcontaining additional options. The following properties aresupported:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>parameters</td><td>Object</td><td><strong>Named placeholders for values</strong> used in the<em>queryString</em> or <em>formula</em>. Values are expressed asproperty / value pairs, where property is the placeholder nameinserted for a value in the <em>queryString</em> or<em>formula</em> (":placeholder") and value is the value tocompare. You can mix indexed placeholders (values directly passedin value parameters) and named placeholder values in the samequery.</td></tr><tr><td>attributes</td><td>Object</td><td><strong>Named placeholders for attribute paths</strong> used inthe <em>queryString</em> or <em>formula</em>. Attributes areexpressed as property / value pairs, where property is theplaceholder name inserted for an attribute path in the<em>queryString</em> or <em>formula</em> (":placeholder"), andvalue can be a string or a collection of strings. Each value is apath that can designate either a scalar or a related attribute ofthe dataclass or a property in an object field of the dataclass<table><tr><th>Type</th><th>Description</th></tr><tr><td>String</td><td>attributePath expressed using the dot notation, e.g. "name" or"user.address.zipCode"</td></tr><tr><td>Collection of strings</td><td>Each string of the collection represents a level ofattributePath, e.g. ["name"] or ["user","address","zipCode"]. Usinga collection allows querying on attributes with names that are notcompliant with dot notation, e.g. ["4Dv17.1","en/fr"]</td></tr></table>You can mix indexed placeholders (values directly passed in<em>value</em> parameters) and named placeholder values in the samequery.</td></tr><tr><td>args</td><td>Object</td><td>Parameter(s) to pass to formulas, if any. The<strong>args</strong> object will be received in $1 within formulasand thus its values will be available through <em>$1.property</em>(see example 3).</td></tr><tr><td>allowFormulas</td><td>Boolean</td><td>True to allow the formula calls in the query (default). Passfalse to disallow formula execution. If set to false and<code>query()</code> is given a formula, an error is sent (1278 -Formula not allowed in this member method).</td></tr><tr><td>context</td><td>Text</td><td>Label for the automatic optimization context applied to theentity selection. This context will be used by the code thathandles the entity selection so that it can benefit from theoptimization. This feature is designed for client/serverprocessing; for more information, please refer to the<strong>Client/server optimization</strong> section.</td></tr><tr><td>queryPlan</td><td>Boolean</td><td>In the resulting entity selection, returns or does not returnthe detailed description of the query just before it is executed,i.e. the planned query. The returned property is an object thatincludes each planned query and subquery (in the case of a complexquery). This option is useful during the development phase of anapplication. It is usually used in conjunction with queryPath.Default if omitted: false. <strong>Note</strong>: This property issupported only by the <code>entitySelection.query()</code> and<code>dataClass.query()</code> functions.</td></tr><tr><td>queryPath</td><td>Boolean</td><td>In the resulting entity selection, returns or does not returnthe detailed description of the query as it is actually performed.The returned property is an object that contains the actual pathused for the query (usually identical to that of the queryPlan, butmay differ if the engine manages to optimize the query), as well asthe processing time and the number of records found. This option isuseful during the development phase of an application. Default ifomitted: false. <strong>Note</strong>: This property is supportedonly by the <code>entitySelection.query()</code> and<code>dataClass.query()</code> functions.</td></tr></tbody></table><p><strong>About queryPlan and queryPath</strong></p><p>The information recorded in<code>queryPlan</code>/<code>queryPath</code> include the querytype (indexed and sequential) and each necessary subquery alongwith conjunction operators. Query paths also contain the number ofentities found and the time required to execute each searchcriterion. You may find it useful to analyze this information whiledeveloping your application(s). Generally, the description of thequery plan and its path are identical but they can differ because4D can implement dynamic optimizations when a query is executed inorder to improve performance. For example, the 4D engine candynamically convert an indexed query into a sequential one if itestimates that it is faster. This particular case can occur whenthe number of entities being searched for is low.</p><p>For example, if you execute the following query:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &lt; :1 and employer.name = :2 or employer.revenues &gt; :3"</span>;\   <span class="hljs-number">50000</span>;<span class="hljs-string">"Lima West Kilo"</span>;<span class="hljs-number">10000000</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"queryPath"</span>;<span class="hljs-literal">True</span>;<span class="hljs-string">"queryPlan"</span>;<span class="hljs-literal">True</span>))</code></pre><p>queryPlan:</p><pre><code class="hljs css language-4d">{Or:[{And:[{item:[index : Employee.salary ] &lt; <span class="hljs-number">50000</span>},      {item:Join on Table : Company  :  Employee.employerID = Company.ID,      subquery:[{item:[index : Company.name ] = Lima West Kilo}]}]},      {item:Join on Table : Company  :  Employee.employerID = Company.ID,      subquery:[{item:[index : Company.revenues ] &gt; <span class="hljs-number">10000000</span>}]}]}</code></pre><p>queryPath:</p><pre><code class="hljs css language-4d">{steps:[{description:OR,time:<span class="hljs-number">63</span>,recordsfounds:<span class="hljs-number">1388132</span>,      steps:[{description:AND,time:<span class="hljs-number">32</span>,recordsfounds:<span class="hljs-number">131</span>,      steps:[{description:[index : Employee.salary ] &lt; <span class="hljs-number">50000</span>,time:<span class="hljs-number">16</span>,recordsfounds:<span class="hljs-number">728260</span>},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">131</span>,      steps:[{steps:[{description:[index : Company.name ] = Lima West Kilo,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">1</span>}]}]}]},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:<span class="hljs-number">31</span>,recordsfounds:<span class="hljs-number">1388132</span>,      steps:[{steps:[{description:[index : Company.revenues ] &gt; <span class="hljs-number">10000000</span>,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">933</span>}]}]}]}]}</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-1-4"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-1-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 1</h4><p>This section provides various examples of queries.</p><p>Query on a string:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName = 'S@'"</span>)</code></pre><p>Query with a NOT statement:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"not(firstName=Kim)"</span>)</code></pre><p>Queries with dates:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &gt; :1"</span>;<span class="hljs-string">"1970-01-01"</span>)<span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &lt;= :1"</span>;Current date<span class="hljs-number">-10950</span>)</code></pre><p>Query with indexed placeholders for values:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)"</span>;<span class="hljs-string">"D@"</span>;<span class="hljs-string">"R@"</span>;<span class="hljs-string">"S@"</span>;<span class="hljs-string">"K@"</span>)</code></pre><p>Query with indexed placeholders for values on a relateddataclass:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1 and manager.lastName = :2"</span>;<span class="hljs-string">"M@"</span>;<span class="hljs-string">"S@"</span>)</code></pre><p>Query with indexed placeholder including a descending order bystatement:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Student.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality = :1 order by campus.name desc, lastname"</span>;<span class="hljs-string">"French"</span>)</code></pre><p>Query with named placeholders for values:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$managedCustomers </span>: cs.CustomerSelection<span class="hljs-variable">$querySettings</span>:=New object<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"userId"</span>;<span class="hljs-number">1234</span>;<span class="hljs-string">"extraInfo"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Smith"</span>))<span class="hljs-variable">$managedCustomers</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"salesperson.userId = :userId and name = :extraInfo.name"</span>;<span class="hljs-variable">$querySettings</span>)</code></pre><p>Query that uses both named and indexed placeholders forvalues:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$managedCustomers </span>: cs.CustomerSelection<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"userId"</span>;<span class="hljs-number">1234</span>)<span class="hljs-variable">$managedCustomers</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"salesperson.userId = :userId and name=:1"</span>;<span class="hljs-string">"Smith"</span>;<span class="hljs-variable">$querySettings</span>)</code></pre><p>Query with queryPlan and queryPath objects:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)"</span>;<span class="hljs-string">"D@"</span>;<span class="hljs-string">"R@"</span>;<span class="hljs-string">"S@"</span>;<span class="hljs-string">"K@"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"queryPlan"</span>;<span class="hljs-literal">True</span>;<span class="hljs-string">"queryPath"</span>;<span class="hljs-literal">True</span>))  <span class="hljs-comment">//you can then get these properties in the resulting entity selection</span><span class="hljs-keyword">var</span> <span class="hljs-variable">$queryPlan</span>; <span class="hljs-variable">$queryPath </span>: Object<span class="hljs-variable">$queryPlan</span>:=<span class="hljs-variable">$entitySelection</span>.queryPlan<span class="hljs-variable">$queryPath</span>:=<span class="hljs-variable">$entitySelection</span>.queryPath</code></pre><p>Query with an attribute path of Collection type:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extraInfo.hobbies[].name = :1"</span>;<span class="hljs-string">"horsebackriding"</span>)</code></pre><p>Query with an attribute path of Collection type and linkedattributes:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extraInfo.hobbies[a].name = :1 and extraInfo.hobbies[a].level=:2"</span>;<span class="hljs-string">"horsebackriding"</span>;<span class="hljs-number">2</span>)</code></pre><p>Query with an attribute path of Collection type and multiplelinked attributes:</p><pre><code class="hljs css language-4d">$entitySelection:=ds.Employee.query("extraInfo.hobbies[a].name = :1 and    extraInfo.hobbies[a].level = :2 and extraInfo.hobbies[b].name = :3 and    extraInfo.hobbies[b].level = :4";"horsebackriding";2;"Tennis";5)</code></pre><p>Query with an attribute path of Object type:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extra.eyeColor = :1"</span>;<span class="hljs-string">"blue"</span>)</code></pre><p>Query with an IN statement:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName in :1"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"Kim"</span>;<span class="hljs-string">"Dixie"</span>))</code></pre><p>Query with a NOT (IN) statement:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"not (firstName in :1)"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"John"</span>;<span class="hljs-string">"Jane"</span>))</code></pre><p>Query with indexed placeholders for attributes:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = 'Smith'"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>)  <span class="hljs-comment">//salesperson is a related entity</span></code></pre><p>Query with indexed placeholders for attributes and namedplaceholders for values:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-variable">$querySettings</span>:=New object<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"customerName"</span>;<span class="hljs-string">"Smith"</span>)<span class="hljs-variable">$es</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = :customerName"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-variable">$querySettings</span>)  <span class="hljs-comment">//salesperson is a related entity</span></code></pre><p>Query with indexed placeholders for attributes and values:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-variable">$es</span>:=ds.Clients.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = :3"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-string">"Smith"</span>)  <span class="hljs-comment">//salesperson is a related entity</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-2-4"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-2-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 2</h4><p>This section illustrates queries with named placeholders forattributes.</p><p>Given an Employee dataclass with 2 entities:</p><p>Entity 1:</p><pre><code class="hljs css language-4d">name: <span class="hljs-string">"Marie"</span>number: <span class="hljs-number">46</span>softwares:{<span class="hljs-string">"Word 10.2"</span>: <span class="hljs-string">"Installed"</span>,<span class="hljs-string">"Excel 11.3"</span>: <span class="hljs-string">"To be upgraded"</span>,<span class="hljs-string">"Powerpoint 12.4"</span>: <span class="hljs-string">"Not installed"</span>}</code></pre><p>Entity 2:</p><pre><code class="hljs css language-4d">name: <span class="hljs-string">"Sophie"</span>number: <span class="hljs-number">47</span>softwares:{<span class="hljs-string">"Word 10.2"</span>: <span class="hljs-string">"Not installed"</span>,<span class="hljs-string">"Excel 11.3"</span>: <span class="hljs-string">"To be upgraded"</span>,<span class="hljs-string">"Powerpoint 12.4"</span>: <span class="hljs-string">"Not installed"</span>}</code></pre><p>Query with named placeholders for attributes:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection <span class="hljs-variable">$querySettings</span>:=New object <span class="hljs-variable">$querySettings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"attName"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-string">"attWord"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"softwares"</span>;<span class="hljs-string">"Word 10.2"</span>)) <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":attName = 'Marie' and :attWord = 'Installed'"</span>;<span class="hljs-variable">$querySettings</span>)  <span class="hljs-comment">//$es.length=1 (Employee Marie)</span></code></pre><p>Query with named placeholders for attributes and values:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$name </span>: Text <span class="hljs-variable">$querySettings</span>:=New object  <span class="hljs-comment">//Named placeholders for values</span>  <span class="hljs-comment">//The user is asked for a name</span> <span class="hljs-variable">$name</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Please enter the name to search:"</span>)<span class="hljs-keyword"> If</span>(OK=<span class="hljs-number">1</span>)    <span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"givenName"</span>;<span class="hljs-variable">$name</span>)  <span class="hljs-comment">//Named placeholders for attribute paths</span>    <span class="hljs-variable">$querySettings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"attName"</span>;<span class="hljs-string">"name"</span>)    <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":attName= :givenName"</span>;<span class="hljs-variable">$querySettings</span>)<span class="hljs-keyword"> End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-3-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-3-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example 3</h4><p>These examples illustrate the various ways to use formulas withor without parameters in your queries.</p><p>The formula is given as text with <code>eval()</code> in the<em>queryString</em> parameter:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(length(This.lastname) &gt;=30) and nationality='French'"</span>)</code></pre><p>The formula is given as a <code>Formula</code> object through aplaceholder:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula </span>: Object <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)&gt;=<span class="hljs-number">30</span>) <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality='French'"</span>;<span class="hljs-variable">$formula</span>)</code></pre><p>Only a <code>Formula</code> object is given as criteria:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula </span>: Object <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)&gt;=<span class="hljs-number">30</span>) <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-variable">$formula</span>)</code></pre><p>Several formulas can be applied:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula1</span>; <span class="hljs-variable">$1</span>; <span class="hljs-variable">$formula2 </span>;<span class="hljs-variable">$0 </span>: Object <span class="hljs-variable">$formula1</span>:=<span class="hljs-variable">$1</span> <span class="hljs-variable">$formula2</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.firstname)&gt;=<span class="hljs-number">30</span>) <span class="hljs-variable">$0</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and :2 and nationality='French'"</span>;<span class="hljs-variable">$formula1</span>;<span class="hljs-variable">$formula2</span>)</code></pre><p>A text formula in <em>queryString</em> receives a parameter:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings </span>: Object <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>() <span class="hljs-variable">$settings</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"filter"</span>;<span class="hljs-string">"-"</span>) <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(checkName($1.filter)) and nationality=:1"</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)</code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">//checkName method</span> #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$exclude </span>: Text) -&gt; <span class="hljs-variable">$result </span>: Boolean <span class="hljs-variable">$result</span>:=(<span class="hljs-function">Position</span>(<span class="hljs-variable">$exclude</span>;<span class="hljs-literal">This</span>.lastname)=<span class="hljs-number">0</span>)</code></pre><p>Using the same <strong><em>checkName</em></strong> method, a<code>Formula</code> object as placeholder receives aparameter:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings</span>; <span class="hljs-variable">$formula </span>: Object <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">checkName</span>(<span class="hljs-variable">$1</span>.filter)) <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>() <span class="hljs-variable">$settings</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"filter"</span>;<span class="hljs-string">"-"</span>) <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality=:2"</span>;<span class="hljs-variable">$formula</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-variable">$settings</span>.args.filter:=<span class="hljs-string">"*"</span> <span class="hljs-comment">// change the parameters without updating the $formula object</span> <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality=:2"</span>;<span class="hljs-variable">$formula</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)</code></pre><p>We want to disallow formulas, for example when the user enterstheir query:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$queryString </span>: Text <span class="hljs-variable">$queryString</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Enter your query:"</span>)<span class="hljs-function"> if</span>(OK=<span class="hljs-number">1</span>)    <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"allowFormulas"</span>;<span class="hljs-literal">False</span>)    <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-variable">$queryString</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-comment">//An error is raised if $queryString contains a formula</span><span class="hljs-keyword"> End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_see-also-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_see-also-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>See also</h4><p><a href="#DataClassClass.html_query"><code>.query()</code></a>for entity selections</p><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_setremotecachesettings"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_setremotecachesettings"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.setRemoteCacheSettings()</h2><details><summary>History</summary><table><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v19 R5</td><td>Added</td></tr></tbody></table></details><p><strong>.setRemoteCacheSettings</strong>(<em>settings</em> :Object)</p><table><thead><tr><th>Parameter</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>settings</td><td>Object</td><td>-&gt;</td><td>Object that sets the timeout and maximum size of the ORDA cachefor the dataclass.</td></tr></tbody></table><blockquote><p><strong>Advanced mode:</strong> This function is intended fordevelopers who need to customize ORDA default features for specificconfigurations. In most cases, you will not need to use it.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-12"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-12"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>The <code>.setRemoteCacheSettings()</code> function sets thetimeout and maximum size of the ORDA cache for a dataclass..</p><p>In the <em>settings</em> parameter, pass an object with thefollowing properties:</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>timeout</td><td>Integer</td><td>Timeout in seconds.</td></tr><tr><td>maxEntries</td><td>Integer</td><td>Maximum number of entities.</td></tr></tbody></table><p><code>timeout</code> sets the timeout of the ORDA cache for thedataclass (default is 30 seconds). Once the timeout has passed, theentities of the dataclass in the cache are considered as expired.This means that:</p><ul><li>the data is still there</li><li>the next time the data is needed, it will be asked to theserver</li><li>4D automatically removes expired data when the maximum numberof entities is reached</li></ul><p>Setting a <code>timeout</code> property sets a new timeout forthe entities already present in the cache. It is useful whenworking with data that does not change very frequently, and thuswhen new requests to the server are not necessary.</p><p><code>maxEntries</code> sets the max number of entities in theORDA cache. Default is 30 000.</p><p>The minimum number of entries is 300, so the value of<code>maxEntries</code> must be equal to or higher than 300.Otherwise it is ignored and the maximum number of entries is set to300.</p><p>If no valid properties are passed as <code>timeout</code> and<code>maxEntries</code>, the cache remains unchanged, with itsdefault or previously set values.</p><p>When an entity is saved, it is updated in the cache and expiresonce the timeout is reached.</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_example-12"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_example-12"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$ds</span>.Buildings.<span class="hljs-function">setRemoteCacheSettings</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"timeout"</span>; <span class="hljs-number">60</span>; <span class="hljs-string">"maxEntries"</span>; <span class="hljs-number">350</span>))</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_see-also-4"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_see-also-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>See also</h4><p><a href="#DataClassClass.html_clearremotecache">.clearRemoteCache()</a><br /><a href="#DataClassClass.html_clearremotecache">.getRemoteCache()</a></p><style><![CDATA[ h2 { background: #d9ebff;}]]></style></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#CryptoKeyClass.html"><span class="arrow-prev">←</span><span class="function-name-prevnext">CryptoKey</span></a><a class="docs-next button" href="#DataClassAttributeClass.html"><span class="function-name-prevnext">DataClassAttribute</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#DataClassClass.html_attributename">.<em>attributeName</em></a></li><li><a href="#DataClassClass.html_all">.all()</a></li><li><a href="#DataClassClass.html_clearremotecache">.clearRemoteCache()</a></li><li><a href="#DataClassClass.html_fromcollection">.fromCollection()</a></li><li><a href="#DataClassClass.html_get">.get()</a></li><li><a href="#DataClassClass.html_getcount">.getCount()</a></li><li><a href="#DataClassClass.html_getdatastore">.getDataStore()</a></li><li><a href="#DataClassClass.html_getinfo">.getInfo()</a></li><li><a href="#DataClassClass.html_getremotecache">.getRemoteCache()</a></li><li><a href="#DataClassClass.html_new">.new()</a></li><li><a href="#DataClassClass.html_newselection">.newSelection()</a></li><li><a href="#DataClassClass.html_query">.query()</a></li><li><a href="#DataClassClass.html_setremotecachesettings">.setRemoteCacheSettings()</a></li></ul></nav></div></div></body></html>