<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="ja"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>分岐構造 · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="分岐構造は、条件をテストし、その結果に基づいて異なる流れにメソッドを導きます。" name="description" /><meta content="ja" name="docsearch:language" /><meta content="分岐構造 · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="分岐構造は、条件をテストし、その結果に基づいて異なる流れにメソッドを導きます。" property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#cf_branching.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">分岐構造<a aria-hidden="true" class="anchor" id="branching.html"></a></h1></header><article><div><p><span>分岐構造は、条件をテストし、その結果に基づいて異なる流れにメソッドを導きます。</span></p><h2><span><a aria-hidden="true" class="anchor" id="branching.html_ifelseend-if"></a><a aria-hidden="true" class="hash-link" href="#branching.html_ifelseend-if"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>If...Else...End if</span></h2><p><span><code>If...Else...End if</code>による制御フロー構造の正式な構文は以下のようになります:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-keyword"> If</span>(Boolean_Expression)<span class="hljs-function">    statement</span>(s)<span class="hljs-keyword"> Else</span><span class="hljs-function">    statement</span>(s)<span class="hljs-keyword"> End if</span></code></span></pre><p><code>Else</code> 部分はオプションであり、省略して以下のように記述できます:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> If</span>(Boolean_Expression)<span class="hljs-function">    statement</span>(s)<span class="hljs-keyword"> End if</span></code></pre><p><code>If...Else...End if</code> 構造は、条件 (ブール式) が true か falseかによって、処理の選択肢を2つメソッドに与えます。 ブール式が true の場合は、テストのすぐ後のステートメントを実行し、ブール式が FALSE の場合には、Else 文のすぐ後のステートメントを実行します。 任意の <code>Else</code>が省略されていた場合、<code>End if</code> のすぐ後のステートメント (あれば) へと実行が続行されます。</p><p>ブール式は常に全体が評価されるという点に注意してください。 たとえば、以下のような場合:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> If</span>(MethodA &amp; MethodB)    ...<span class="hljs-keyword"> End if</span></code></pre><p>この場合、両方のメソッドが true である場合に限り、式は true になります。 しかしながら<em>MethodA</em> が false であっても、4Dは<em>MethodB</em>も評価するため、これは時間の無駄になります。 この場合には、以下のような構造を使用するほうが賢明といえます:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> If</span>(MethodA)<span class="hljs-keyword">    If</span>(MethodB)       ...<span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End if</span></code></pre><p>上記の結果はほぼ同じで、<em>MethodB</em> は必要な場合にのみ評価されます。</p><blockquote><p><strong>注記:</strong> <a href="#branching.html_%25E4%25B8%2589%25E9%25A0%2585%25E6%25BC%2594%25E7%25AE%2597%25E5%25AD%2590">三項演算子</a> を使うことで、条件式を 1行で書くことができ、<a href="#branching.html_ifelseend-if">If...Else</a> 文を置き換えることもできます。</p></blockquote><h3><a aria-hidden="true" class="anchor" id="branching.html_%E4%BE%8B%E9%A1%8C"></a><a aria-hidden="true"class="hash-link" href="#branching.html_%25E4%25BE%258B%25E9%25A1%258C"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>例題</h3><pre><code class="hljs css language-4d">  <span class="hljs-comment">// ユーザーに名前の入力を求めます</span> <span class="hljs-variable">$Find</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"名前を入力してください"</span>)<span class="hljs-keyword"> If</span>(OK=<span class="hljs-number">1</span>)<span class="hljs-function">    QUERY</span>([People];[People]LastName=<span class="hljs-variable">$Find</span>)<span class="hljs-keyword"> Else</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"名前が入力されませんでした"</span>)<span class="hljs-keyword"> End if</span> </code></pre><p><strong>Tip:</strong> 一方の条件に実行ステートメントがない分岐処理を書くこともできます。下のようなコードはどちらも有効です:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> If</span>(Boolean_Expression)<span class="hljs-keyword"> Else</span><span class="hljs-function">    statement</span>(s)<span class="hljs-keyword"> End if</span></code></pre><p>または:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> If</span>(Boolean_Expression)<span class="hljs-function">    statement</span>(s)<span class="hljs-keyword"> Else</span><span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="branching.html_case-ofelseend-case"></a><a aria-hidden="true"class="hash-link" href="#branching.html_case-ofelseend-case"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Case of...Else...End case</h2><p><code>Case of...Else...End case</code>による制御フロー構造の正式な構文は以下のようになります:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)       .       .       .    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)<span class="hljs-keyword">    Else</span><span class="hljs-function">       statement</span>(s)<span class="hljs-keyword"> End case</span></code></pre><p><code>Else</code> 部分はオプションであり、省略して以下のように記述できます:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)       .       .       .    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)<span class="hljs-keyword"> End case</span></code></pre><p><code>If...Else...End if</code> と同様に、<code>Case of...Else...Endcase</code> 構造も処理の選択肢をメソッドに与えます。 <code>If...Else...End</code>との違いは、<code>Case of...Else...End case</code>構造が複数のブール式を評価し、その中から最初に true となるステートメントを実行することです。</p><p>ブール式の前にはそれぞれコロン (<code>:</code>) を付けます。 コロンとブール式の組み合わせをケースと呼びます。例えば以下の行はケースです:</p><pre><code class="hljs css language-4d">:(bValidate=<span class="hljs-number">1</span>)</code></pre><p>最初に true になったケースに続く (次のケースまでの) ステートメントだけが実行されます。 trueになるケースがない場合、どのステートメントも実行されません (<code>Else</code> 文が指定されていない場合)。</p><p>最後のケースの後に Else 文を含むことができます。 すべてのケースが FALSEの場合に、<code>Else</code> 文の後のステートメントが実行されます。</p><h3><a aria-hidden="true" class="anchor" id="branching.html_%E4%BE%8B%E9%A1%8C-1"></a><a aria-hidden="true"class="hash-link" href="#branching.html_%25E4%25BE%258B%25E9%25A1%258C-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>例題</h3><p>下記の例は数値変数を判定し、対応する数字をアラートボックスに表示します:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :(vResult=<span class="hljs-number">1</span>) <span class="hljs-comment">// 数値が1の場合</span><span class="hljs-function">       ALERT</span>(<span class="hljs-string">"一です。"</span>) <span class="hljs-comment">// 1のアラートボックスを表示します</span>    :(vResult=<span class="hljs-number">2</span>) <span class="hljs-comment">// 数値が2の場合</span><span class="hljs-function">       ALERT</span>(<span class="hljs-string">"二です。"</span>) <span class="hljs-comment">// 2のアラートボックスを表示します</span>    :(vResult=<span class="hljs-number">3</span>) <span class="hljs-comment">// 数値が3の場合</span><span class="hljs-function">       ALERT</span>(<span class="hljs-string">"三です。"</span>) <span class="hljs-comment">// 3のアラートボックスを表示します</span><span class="hljs-keyword">    Else</span> <span class="hljs-comment">// 数値が1,2,3のいずれでもない場合</span><span class="hljs-function">       ALERT</span>(<span class="hljs-string">"一、二、三のいずれでもありません。"</span>)<span class="hljs-keyword"> End case</span></code></pre><p>比較するために、同じことを <code>If...Else...End if</code>構文で記述すると以下のようになります。</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> If</span>(vResult=<span class="hljs-number">1</span>) <span class="hljs-comment">// 数値が1の場合</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"一です。"</span>) <span class="hljs-comment">// 1のアラートボックスを表示します</span><span class="hljs-keyword"> Else</span><span class="hljs-keyword">    If</span>(vResult=<span class="hljs-number">2</span>) <span class="hljs-comment">// 数値が2の場合</span><span class="hljs-function">       ALERT</span>(<span class="hljs-string">"二です。"</span>) <span class="hljs-comment">// 2のアラートボックスを表示します</span><span class="hljs-keyword">    Else</span><span class="hljs-keyword">       If</span>(vResult=<span class="hljs-number">3</span>) <span class="hljs-comment">// 数値が3の場合</span><span class="hljs-function">          ALERT</span>(<span class="hljs-string">"三です。"</span>) <span class="hljs-comment">// 3のアラートボックスを表示します</span><span class="hljs-keyword">       Else</span> <span class="hljs-comment">// 数値が1,2,3のいずれでもない場合</span><span class="hljs-function">          ALERT</span>(<span class="hljs-string">"一、二、三のいずれでもありません。"</span>)<span class="hljs-keyword">       End if</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End if</span></code></pre><p><code>Case of...Else...End case</code> 構造は、最初に trueになったケースだけを実行します。 2つ以上のケースが true の場合は、最初に trueになったケースのステートメントだけを実行します。</p><p>したがって、階層的なテストを実行するときには、階層上で低い位置にある条件がテスト順序で先に記述されていることを確認する必要があります。以下の例では、ケース2が true の場合、ケース1も必ず true であるため、ケース1は後に位置すべきです。このままの順序では、ケース2のステートメントはけっして実行されません:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :(vResult=<span class="hljs-number">1</span>)       ... <span class="hljs-comment">// ステートメントなど</span>    :((vResult=<span class="hljs-number">1</span>) &amp; (vCondition#<span class="hljs-number">2</span>)) <span class="hljs-comment">// このケースが判定されることはありません</span>       ... <span class="hljs-comment">// ステートメントなど</span><span class="hljs-keyword"> End case</span></code></pre><p>vResult = 1の判定により他の条件を見る前に分岐するので、第2のケースが判定されることはありません。コードが正しく実行されるためには次のように書きます:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :((vResult=<span class="hljs-number">1</span>) &amp; (vCondition#<span class="hljs-number">2</span>)) <span class="hljs-comment">// このケースが先に判定されます</span>       ... <span class="hljs-comment">// ステートメントなど</span>    :(vResult=<span class="hljs-number">1</span>)       ... <span class="hljs-comment">// ステートメントなど</span><span class="hljs-keyword"> End case</span></code></pre><p>さらに階層的なテストを実行したい場合、コードも階層化する必要があります。</p><p><strong>Tip:</strong> 分岐構造において、ケースに続くステートメントの記述は必須ではありません。下のようなコードはどちらも有効です:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :(Boolean_Expression)    :(Boolean_Expression)      ...    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)<span class="hljs-keyword">    Else</span><span class="hljs-function">       statement</span>(s)<span class="hljs-keyword"> End case</span></code></pre><p>または:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :(Boolean_Expression)    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)       ...    :(Boolean_Expression)<span class="hljs-function">       statement</span>(s)<span class="hljs-keyword">    Else</span><span class="hljs-keyword"> End case</span></code></pre><p>または:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span><span class="hljs-keyword">    Else</span><span class="hljs-function">       statement</span>(s)<span class="hljs-keyword"> End case</span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#control-flow.html"><span class="arrow-prev">←</span><span>制御フロー</span></a><a class="docs-next button" href="#looping.html"><span>ループ構造</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#branching.html_ifelseend-if">If...Else...End if</a><ul class="toc-headings"><li><a href="#branching.html_%25E4%25BE%258B%25E9%25A1%258C">例題</a></li></ul></li><li><a href="#branching.html_case-ofelseend-case">Caseof...Else...End case</a><ul class="toc-headings"><li><a href="#branching.html_%25E4%25BE%258B%25E9%25A1%258C-1">例題</a></li></ul></li></ul></nav></div></div></body></html>