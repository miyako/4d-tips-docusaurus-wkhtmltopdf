<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="ja"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>TLSプロトコル (HTTPS) · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="すべての 4Dサーバーは、TLS (Transport Layer Security) プロトコルを通じて、保護モードで通信する事ができます:"name="description" /><meta content="ja" name="docsearch:language" /><meta content="TLSプロトコル (HTTPS) · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="すべての 4Dサーバーは、TLS (Transport Layer Security) プロトコルを通じて、保護モードで通信する事ができます:"property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#tls.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">TLSプロトコル(HTTPS)<a aria-hidden="true" class="anchor" id="tls.html"></a></h1></header><article><div><p><span>すべての 4Dサーバーは、TLS (Transport Layer Security)プロトコルを通じて、保護モードで通信する事ができます:</span></p><ul><li><span>Webサーバー</span></li><li><span>アプリケーションサーバー (クライアントサーバー・デスクトップアプリケーション)</span></li><li><span>SQLサーバー</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="tls.html_%E6%A6%82%E8%A6%81"></a><a aria-hidden="true" class="hash-link" href="#tls.html_%25E6%25A6%2582%25E8%25A6%2581"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>概要</span></h2><p><span>TLSプロトコル (SSLプロトコルの後継版) は 2つのアプリケーション、主にWebサーバーとブラウザー間でのデータ交換を保護するために設計されています。 このプロトコルは幅広く使用されていて、多くのWebブラウザーとの互換性があります。</span></p><p><span>ネットワークレベルにおいては、TLSプロトコルは TCP/IPレイヤー (低レベル)とHTTP高レベルプロトコルとの間に挿入されます。 TLS は主に HTTP で動作するように設計されました。</span></p><p><span>TLS を用いたネットワーク設定:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/WebServer/tls1.png" /></span></p><p><span>TLSプロトコルは、送信者と受信者を認証するために設計され、交換された情報の機密性と整合性を保証します:</span></p><ul><li><span><strong>認証</strong>: 送信者と受信者の ID を確認します。</span></li><li><span><strong>機密性</strong>:送信データを暗号化します。そのため第三者はメッセージを解読することができません。</span></li><li><span><strong>整合性</strong>:受信データが偶発的にまたは故意に修正されることはありません。</span></li></ul><p><span>TLS は公開鍵暗号化技術を用います。これは、暗号化と復号化の非対称鍵のペアである公開鍵と秘密鍵に基づいています。秘密鍵はデータを暗号化するために使用されます。 送信者 (Webサイト) は、それを誰にも渡しません。公開鍵は情報を復号化するために使用され、証明書を通して受信者 (Webブラウザー) へ送信されます。 インターネットで TLSを使用する際、証明書は Verisign® などの認証機関を通して発行されます。 Webサイトは証明書を認証機関から購入します。この証明書はサーバー認証を保証し、保護モードでのデータ交換を許可する公開鍵を格納しています。</span></p><blockquote><p><span>暗号化メソッドと公開鍵および秘密鍵に関する詳細は、<code>ENCRYPT BLOB</code>コマンドの記述を参照してください。</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="tls.html_%E6%9C%80%E4%BD%8E%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3"></a><a aria-hidden="true" class="hash-link" href="#tls.html_%25E6%259C%2580%25E4%25BD%258E%25E3%2583%2590%25E3%2583%25BC%25E3%2582%25B8%25E3%2583%25A7%25E3%2583%25B3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>最低バージョン</span></h2><p><span>デフォルトで、4D でサポートされている最低限のバージョンは TLS 1.2 となります。 この値は<code>SET DATABASE PARAMETER</code> コマンドで <code>Min TLSversion</code> セレクターを使用することで変更可能です。</span></p><p><span>接続時に受け入れる <a href="#tls.html_%25E6%259C%2580%25E4%25BD%258Etls%25E3%2583%2590%25E3%2583%25BC%25E3%2582%25B8%25E3%2583%25A7%25E3%2583%25B3">最低TLSバージョン</a> を定義することで、Webサーバーのセキュリティレベルを制御することができます。</span></p><h2><span><a aria-hidden="true" class="anchor" id="tls.html_%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%AE%E5%8F%96%E5%BE%97%E6%96%B9%E6%B3%95"></a><a aria-hidden="true" class="hash-link" href="#tls.html_%25E8%25A8%25BC%25E6%2598%258E%25E6%259B%25B8%25E3%2581%25AE%25E5%258F%2596%25E5%25BE%2597%25E6%2596%25B9%25E6%25B3%2595"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>証明書の取得方法</span></h2><p><span>サーバーを保護モードで起動させるには、認証機関の電子証明書が必要です。 この証明書には、サイトIDや、サーバーとの通信に使用する公開鍵など、様々な情報が格納されます。 そのサーバーに接続した際に、証明書がクライアント (例:Webブラウザー) へ送られます。 証明書が識別され受け入れられると、保護モードで通信が開始されます。</span></p><blockquote><p><span>ブラウザーは、ルート証明書がインストールされた認証機関によって発行された証明書のみを許可します。</span></p></blockquote><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/WebServer/tls2.png" /></span></p><p><span>認証機関は複数の条件によって選択されます。認証機関が一般によく知られていると、証明書は多くのブラウザーによって許可されます。ただし、費用は高くなるかもしれません。</span></p><p><span>デジタル証明書の取得:</span></p><ol><li><span><code>GENERATE ENCRYPTION KEYPAIR</code>コマンドを使用して、秘密鍵を作成します。</span></li></ol><blockquote><p><span><strong>警告</strong>: セキュリティ上の理由により、秘密鍵は常に機密でなければなりません。実際、秘密鍵は常にサーバーマシンと一緒に存在しているべきです。 Webサーバーの場合、Key.pem ファイルはProjectフォルダーに保存されていなければなりません。</span></p></blockquote><ol start="2"><li><p><span>証明書のリクエストを発行するために <code>GENERATE CERTIFICATEREQUEST</code> コマンドを使用します。</span></p></li><li><p><span>その証明書リクエストを選択された認証機関へ送ります。</span></p><p><span>証明書リクエストを記入する際、認証機関への問い合わせが必要となる場合があります。認証機関は送信されてきた情報が正確なものかを確認します。 その証明書リクエストは base64 で暗号化された PKCSフォーマット(PEMフォーマット) を用いて BLOB に作成さ れます。この原理を使用すると、テキストとしてキーをコピー＆ペーストできます。キーの内容を修正せずに認証機関に提出します。たとえば、テキストドキュメントに証明書リクエストを含んでいる BLOB を保存します (<code>BLOB TODOCUMENT</code> コマンドを使用)。そして、コンテンツを開き、それをコピーして、認証機関へ送信するメールまたはWebフォームにペーストします。</span></p></li><li><p><span>証明書を取得したら、"cert.pem"という名前でテキストファイルを作成し、その証明書の内容をそのファイルへコピーします。</span></p><p><span>証明書は様々な方法で受け取ることができます (通常は Eメールまたは HTML形式で受け取ります)。 4Dは証明書に関しては全プラットフォームに関連したテキストフォーマットを受け付けます (OS X、Windows、Linux、等)。ただし、証明書は PEMフォーマット、つまり base64 で PKCSエンコードされている必要があります。</span></p></li></ol><blockquote><p><span>CR改行コードは、それ単体ではサポートされていません。改行コードは CRLF または LFを使用してください。</span></p></blockquote><ol start="5"><li><span>"cert.pem" ファイルを <a href="#tls.html_%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25B9%25E3%2583%2588%25E3%2583%25BC%25E3%2583%25AB%25E3%2581%25A8%25E3%2582%25A2%25E3%2582%25AF%25E3%2583%2586%25E3%2582%25A3%25E3%2583%2599%25E3%2583%25BC%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3">適切な場所</a> に保存します。</span></li></ol><p><span>4Dサーバーが保護モードで動作するようになります。 証明書は 3ヶ月から1年間の間で有効です。</span></p><h2><span><a aria-hidden="true" class="anchor" id="tls.html_%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%A8%E3%82%A2%E3%82%AF%E3%83%86%E3%82%A3%E3%83%99%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"></a><a aria-hidden="true" class="hash-link" href="#tls.html_%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25B9%25E3%2583%2588%25E3%2583%25BC%25E3%2583%25AB%25E3%2581%25A8%25E3%2582%25A2%25E3%2582%25AF%25E3%2583%2586%25E3%2582%25A3%25E3%2583%2599%25E3%2583%25BC%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>インストールとアクティベーション</span></h2><h3><span><a aria-hidden="true" class="anchor" id="tls.html_keypem-%E3%81%A8-certpem-%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"></a><a aria-hidden="true" class="hash-link" href="#tls.html_keypem-%25E3%2581%25A8-certpem-%25E3%2583%2595%25E3%2582%25A1%25E3%2582%25A4%25E3%2583%25AB%25E3%2581%25AE%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25B9%25E3%2583%2588%25E3%2583%25BC%25E3%2583%25AB"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>key.pem</code> と <code>cert.pem</code>ファイルのインストール</span></h3><p><span>サーバーと一緒に TLSプロトコルを使用するには、<strong>key.pem</strong>(秘密の暗号鍵を含むドキュメント) と <strong>cert.pem</strong> (証明書を含むドキュメント)が所定の場所にインストールされていなければなりません。 TLSを使用するサーバーによって、インストールする場所が異なります。</span></p><blockquote><p><span>デフォルトの <em>key.pem</em> と <em>cert.pem</em> は 4Dによって提供されています。より高レベルのセキュリティのためには、これらのファイルをご自身の証明書で置き換えることが強く推奨されます。</span></p></blockquote><h4><span><a aria-hidden="true" class="anchor" id="tls.html_web%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E5%A0%B4%E5%90%88"></a><a aria-hidden="true" class="hash-link" href="#tls.html_web%25E3%2582%25B5%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25BC%25E3%2581%25AE%25E5%25A0%25B4%25E5%2590%2588"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Webサーバーの場合</span></h4><p><span>4D Webサーバーで使用するには、<strong>key.pem</strong> と<strong>cert.pem</strong> を次の場所に保存します:</span></p><ul><li><span>4D (ローカル) および 4D Server では、<a href="#tls.html_project-%25E3%2583%2595%25E3%2582%25A9%25E3%2583%25AB%25E3%2583%2580%25E3%2583%25BC">Projectフォルダー</a> と同階層。</span></li><li><span>4D のリモートモードでは、これらのファイルはリモートマシンの 4D Client Databaseフォルダーに置かれなければなりません。このフォルダーの場所に関する情報は、<a href="https://doc.4d.com/4dv19/help/command/ja/page485.html"><code>Get4D Folder</code></a> コマンドの説明を参照ください。</span></li></ul><p><span>これらのファイルをリモートマシンに手動でコピーする必要があります。</span></p><h4><span><a aria-hidden="true" class="anchor" id="tls.html_%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC-%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%83%BB%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3-%E3%81%AE%E5%A0%B4%E5%90%88"></a><a aria-hidden="true" class="hash-link" href="#tls.html_%25E3%2582%25A2%25E3%2583%2597%25E3%2583%25AA%25E3%2582%25B1%25E3%2583%25BC%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3%25E3%2582%25B5%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25BC-%25E3%2582%25AF%25E3%2583%25A9%25E3%2582%25A4%25E3%2582%25A2%25E3%2583%25B3%25E3%2583%2588%25E3%2582%25B5%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25BC%25E3%2583%25BB%25E3%2583%2587%25E3%2582%25B9%25E3%2582%25AF%25E3%2583%2588%25E3%2583%2583%25E3%2583%2597%25E3%2582%25A2%25E3%2583%2597%25E3%2583%25AA%25E3%2582%25B1%25E3%2583%25BC%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3-%25E3%2581%25AE%25E5%25A0%25B4%25E5%2590%2588"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>アプリケーションサーバー (クライアントサーバー・デスクトップアプリケーション) の場合</span></h4><p><span>4D アプリケーションサーバーで使用するには、<strong>key.pem</strong> と<strong>cert.pem</strong> を次の場所に保存します:</span></p><ul><li><span>4D Server アプリケーションの <a href="#tls.html_resources"><strong>Resources</strong>フォルダー</a>。</span></li><li><span>各リモート4Dアプリケーションの <strong>Resources</strong> フォルダー(このフォルダーの場所に関する情報は、<a href="https://doc.4d.com/4dv19/help/command/ja/page485.html"><code>Get4D Folder</code></a> コマンドの説明を参照ください)。</span></li></ul><h4><span><a aria-hidden="true" class="anchor" id="tls.html_sql%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E5%A0%B4%E5%90%88"></a><a aria-hidden="true" class="hash-link" href="#tls.html_sql%25E3%2582%25B5%25E3%2583%25BC%25E3%2583%2590%25E3%2583%25BC%25E3%2581%25AE%25E5%25A0%25B4%25E5%2590%2588"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>SQLサーバーの場合</span></h4><p><span>4D SQLサーバーで使用するには、<strong>key.pem</strong> と<strong>cert.pem</strong> ファイルは<a href="#tls.html_project-%25E3%2583%2595%25E3%2582%25A9%25E3%2583%25AB%25E3%2583%2580%25E3%2583%25BC">Projectフォルダー</a> の隣に配置する必要があります。</span></p><h3><span><a aria-hidden="true" class="anchor" id="tls.html_tls%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B"></a><a aria-hidden="true" class="hash-link" href="#tls.html_tls%25E3%2582%2592%25E6%259C%2589%25E5%258A%25B9%25E3%2581%25AB%25E3%2581%2599%25E3%2582%258B"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>TLSを有効にする</span></h3><p><span><strong>key.pem</strong> と <strong>cert.pem</strong>ファイルをインストールすることにより、4Dサーバーにおける TLS の使用を可能にします。ただし、サーバーによって受け入れられるようにするには、TLS接続を有効化しなければなりません:</span></p><ul><li><span>4D Webサーバーの場合、<a href="#tls.html_https%25E3%2582%2592%25E6%259C%2589%25E5%258A%25B9%25E3%2581%25AB%25E3%2581%2599%25E3%2582%258B">HTTPSを有効</a>にする必要があります。 <a href="#tls.html_hsts%25E3%2582%2592%25E6%259C%2589%25E5%258A%25B9%25E3%2581%25AB%25E3%2581%2599%25E3%2582%258B">HSTSオプション</a>を設定して、HTTPモードで接続しようとするブラウザーをリダイレクトすることができます。</span></li><li><span>アプリケーションサーバーでは、ストラクチャー設定ダイアログボックスの "C/S (クライアントサーバー)"ページで <strong>クライアント-サーバー通信の暗号化</strong>オプションを選択する必要があります。</span></li><li><span>SQLサーバーの場合は、ストラクチャー設定ダイアログボックスの "SQL" ページで<strong>TLSを有効にする</strong> オプションを選択する必要があります。</span></li></ul><blockquote><p><span>4D Webサーバーは、セキュアな HTTPS接続のみを許可するとブラウザーに対して宣言するための <a href="#tls.html_hsts%25E3%2582%2592%25E6%259C%2589%25E5%258A%25B9%25E3%2581%25AB%25E3%2581%2599%25E3%2582%258B">HSTSオプション</a> をサポートしています。</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="tls.html_perfect-forward-secrecy-pfs"></a><a aria-hidden="true"class="hash-link" href="#tls.html_perfect-forward-secrecy-pfs"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Perfect Forward Secrecy (PFS)</span></h2><p><span><a href="https://ja.wikipedia.org/wiki/Forward_secrecy">PFS</a>は通信の中に新たなレイヤーのセキュリティを追加します。 事前準備された交換鍵を使用する代わりに、PFS はDiffie-Hellman (DH) アルゴリズムを用いて通信相手同士で協同的にセッションキーを作成します。このように協同で鍵を作成することで "共有の秘密" が作成され、外部への漏洩を防ぐことができます。</span></p><p><span>サーバー上で TLS が有効化されているとき、PFS は自動的に有効されます。<em>dhparams.pem</em> ファイル (サーバーの DH非公開鍵を含むドキュメント) がまだ存在していない場合、4Dは 2048 の鍵サイズで自動的にそれを生成します。 このファイルの生成には数分間かかる可能性があります。このファイルは、<a href="#tls.html_key-pem-%25E3%2581%25A8-cert-pem-%25E3%2583%2595%25E3%2582%25A1%25E3%2582%25A4%25E3%2583%25AB"><em>key.pem</em>および <em>cert.pem</em> ファイル</a>と同じ場所に置きます。</span></p><p><span><a href="#tls.html_%25E6%259A%2597%25E5%258F%25B7%25E3%2583%25AA%25E3%2582%25B9%25E3%2583%2588">カスタムの暗号リスト</a> を使用していて、PFS を有効化したい場合、DH あるいは ECDH (Elliptic-curveDiffie–Hellman) アルゴリズムのエントリーがそのリストに含まれている必要があります。</span></p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#cli.html"><span class="arrow-prev">←</span><span>コマンドライン・インターフェース</span></a><a class="docs-next button" href="#licenses.html"><span>4D ライセンスの管理</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#tls.html_%25E6%25A6%2582%25E8%25A6%2581">概要</a></li><li><a href="#tls.html_%25E6%259C%2580%25E4%25BD%258E%25E3%2583%2590%25E3%2583%25BC%25E3%2582%25B8%25E3%2583%25A7%25E3%2583%25B3">最低バージョン</a></li><li><a href="#tls.html_%25E8%25A8%25BC%25E6%2598%258E%25E6%259B%25B8%25E3%2581%25AE%25E5%258F%2596%25E5%25BE%2597%25E6%2596%25B9%25E6%25B3%2595">証明書の取得方法</a></li><li><a href="#tls.html_%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25B9%25E3%2583%2588%25E3%2583%25BC%25E3%2583%25AB%25E3%2581%25A8%25E3%2582%25A2%25E3%2582%25AF%25E3%2583%2586%25E3%2582%25A3%25E3%2583%2599%25E3%2583%25BC%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3">インストールとアクティベーション</a><ul class="toc-headings"><li><a href="#tls.html_keypem-%25E3%2581%25A8-certpem-%25E3%2583%2595%25E3%2582%25A1%25E3%2582%25A4%25E3%2583%25AB%25E3%2581%25AE%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25B9%25E3%2583%2588%25E3%2583%25BC%25E3%2583%25AB"><code>key.pem</code> と <code>cert.pem</code> ファイルのインストール</a></li><li><a href="#tls.html_tls%25E3%2582%2592%25E6%259C%2589%25E5%258A%25B9%25E3%2581%25AB%25E3%2581%2599%25E3%2582%258B">TLSを有効にする</a></li></ul></li><li><a href="#tls.html_perfect-forward-secrecy-pfs">Perfect ForwardSecrecy (PFS)</a></li></ul></nav></div></div></body></html>