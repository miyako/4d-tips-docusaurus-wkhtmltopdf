<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="ja"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>ポインター · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="ポインターの変数や式は、別の変数 (配列、配列要素を含む) 、テーブル、またはフィールドへの参照です。 ポインタータイプのフィールドは、存在しません。"name="description" /><meta content="ja" name="docsearch:language" /><meta content="ポインター · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="ポインターの変数や式は、別の変数 (配列、配列要素を含む) 、テーブル、またはフィールドへの参照です。 ポインタータイプのフィールドは、存在しません。"property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#dt_pointer.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">ポインター<a aria-hidden="true" class="anchor" id="pointer.html"></a></h1></header><article><div><p><span>ポインターの変数や式は、別の変数 (配列、配列要素を含む) 、テーブル、またはフィールドへの参照です。ポインタータイプのフィールドは、存在しません。</span></p><p><span>ポインターは、(プログラミングにおける) データを参照するための高度な方法を提供します。 4Dランゲージ使用時にテーブル・フィールド・変数・配列等にアクセスするには、単純に名前を用います。ですが、名前を使用しないでデータを参照する、またはアクセスした方が便利な場合もあります。ポインターを使うとこれが実現できます。</span></p><p><span>ポインターの背景にある概念は、日常生活でもよく使われています。対象物を正確に知らないまま、それを示すことがあります。 たとえば、友人に対して "登録番号123ABDの車に乗ろう" と言わずに"君の車に乗ろう" と言う場合です。 つまり、"登録番号123ABDの車" を "君の車" で示したわけです。この場合、"登録番号123ABDの車" はオブジェクトの名前で、"君の車"はオブジェクトを参照するためのポインターと考えることができます。</span></p><p><span>対象物を明示しないで参照できると、非常に便利です。 たとえば、友人が新しい車に買い替えても、同じく "君の車"と言うことができます。 ポインターも同じように機能します。 たとえば、同じポインターがある時は数値フィールド "Age"を参照し、別の時には数値変数 "Old Age" を参照することもできます。いずれの場合にもポインターは数値データを参照しており、それは計算に使用することができます。</span></p><p><span>テーブル・フィールド・変数・配列・配列要素・オブジェクトを参照するためにポインターを使用することができます。以下の表に、各タイプの例を示します:</span></p><table><thead><tr><th>タイプ</th><th>参照時</th><th>使用時</th><th>代入時</th></tr></thead><tbody><tr><td>テーブル</td><td>vpTable:=-&gt;[Table]</td><td>DEFAULT TABLE(vpTable-&gt;)</td><td>n/a</td></tr><tr><td>フィールド</td><td>vpField:=-&gt;[Table]Field</td><td>ALERT(vpField-&gt;)</td><td>vpField-&gt;:="John"</td></tr><tr><td>変数</td><td>vpVar:=-&gt;Variable</td><td>ALERT(vpVar-&gt;)</td><td>vpVar-&gt;:="John"</td></tr><tr><td>配列</td><td>vpArr:=-&gt;Array</td><td>SORT ARRAY(vpArr-&gt;;&gt;)</td><td>COPY ARRAY (Arr;vpArr-&gt;)</td></tr><tr><td>配列要素</td><td>vpElem:=-&gt;Array{1}</td><td>ALERT (vpElem-&gt;)</td><td>vpElem-&gt;:="John"</td></tr><tr><td>オブジェクト</td><td>vpObj:=-&gt;myObject</td><td>ALERT (vpObj-&gt;myProp)</td><td>vpObj-&gt;myProp:="John"</td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="pointer.html_%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%81%AE%E5%9F%BA%E6%9C%AC"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC%25E3%2581%25AE%25E5%259F%25BA%25E6%259C%25AC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>ポインターの基本</span></h2><p><span>ポインターの使用方法について例題を用いて説明します。以下の例は、ポインターを通して変数にアクセスする方法を示します。 まず、変数を作成します:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-variable">$MyVar</span>:=<span class="hljs-string">"Hello"</span></code></span></pre><p>$MyVar は、文字列 "Hello" を含む変数です。 $MyVar に対するポインターを作成します:</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$MyPointer</span>)  <span class="hljs-variable">$MyPointer</span>:=-&gt;<span class="hljs-variable">$MyVar</span></code></pre><p>ポインター記号 (-&gt;) は、"･･･に対するポインターを求める" ことを意味します。 この記号は、"ダッシュ" (-)の後に "大なり" (&gt;) を付けて構成されます。 ここでは、$MyVar を参照するポインターを取得します。このポインターは、代入演算子 (:=) で $MyPointer に対して割り当てられます。</p><p>$MyPointer は、$MyVar に対するポインターを格納する変数です。 $MyPointer は、"Hello" という$MyVar の値を含みませんが、その値を参照することはできます。 以下の式は $MyVar の値を返します:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$MyPointer</span>-&gt;</code></pre><p>前述の式は、"Hello" という文字列を返します。 ポインター記号 (-&gt;)をポインターの後につけると、参照先の値を取得することができます。 これをデリファレンス (参照外し) と呼びます。</p><p>ポインター記号 (-&gt;) を後につけたポインターは、その参照先を直接使うのと同義であることを理解することが重要です。つまり、変数 $MyVar を使用することと、$MyPointer-&gt; を使用することは、まったく同じ意味になります。たとえば、以下のステートメントはアラートボックスに文字列 "Hello" を表示します:</p><pre><code class="hljs css language-4d"><span class="hljs-function">ALERT</span>(<span class="hljs-variable">$MyPointer</span>-&gt;)</code></pre><p>$MyPointer を使用して $MyVar の値を変更することもできます。 下記のステートメントは、変数 $MyVarに文字列 "Goodbye" を代入します:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$MyPointer</span>-&gt;:=<span class="hljs-string">"Goodbye"</span></code></pre><p>この2つの $MyPointer-&gt; を使用した例のとおり、$MyVar を使用するのとまったく同じ動作が実行されます。以下の2つのステートメントも、同一の動作を実行します。両方とも、変数 $MyVar の現在の値をアラートボックスに表示します:</p><pre><code class="hljs css language-4d"><span class="hljs-function">ALERT</span>(<span class="hljs-variable">$MyPointer</span>-&gt;)<span class="hljs-function">ALERT</span>(<span class="hljs-variable">$MyVar</span>)</code></pre><p>以下の2つのステートメントも、同一の動作を実行します。両方とも $MyVar に、文字列 "Goodbye"を代入します:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$MyPointer</span>-&gt;:=<span class="hljs-string">"Goodbye"</span><span class="hljs-variable">$MyVar</span>:=<span class="hljs-string">"Goodbye"</span></code></pre><h2><a aria-hidden="true" class="anchor" id="pointer.html_%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E6%BC%94%E7%AE%97%E5%AD%90"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC%25E6%25BC%2594%25E7%25AE%2597%25E5%25AD%2590"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>ポインター演算子</h2><p>前提:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">// vPtrA と vPtrB は同じ対象を参照します</span> vPtrA:=-&gt;anObject vPtrB:=-&gt;anObject  <span class="hljs-comment">// vPtrC は別の対象を参照します</span> vPtrC:=-&gt;anotherObject</code></pre><table><thead><tr><th>演算子</th><th>シンタックス</th><th>戻り値</th><th>式</th><th>値</th></tr></thead><tbody><tr><td>等しい</td><td>ポインター = ポインター</td><td>ブール</td><td>vPtrA = vPtrB</td><td>True</td></tr><tr><td></td><td></td><td></td><td>vPtrA = vPtrC</td><td>False</td></tr><tr><td>異なる</td><td>ポインター # ポインター</td><td>ブール</td><td>vPtrA # vPtrC</td><td>True</td></tr><tr><td></td><td></td><td></td><td>vPtrA # vPtrB</td><td>False</td></tr></tbody></table><h2><a aria-hidden="true" class="anchor" id="pointer.html_%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%81%AE%E4%BD%BF%E7%94%A8%E4%BE%8B"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8%25E4%25BE%258B"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>ポインターの使用例</h2><h3><a aria-hidden="true" class="anchor" id="pointer.html_%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%B8%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E3%2583%2586%25E3%2583%25BC%25E3%2583%2596%25E3%2583%25AB%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>テーブルへのポインター</h3><p>テーブルの代わりにデリファレンスしたポインターを使用することができます。以下のようなステートメントで、テーブルのポインターを作成します:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$TablePtr</span>:=-&gt;[anyTable]</code></pre><p>あるいは、以下のように <code>Table</code>コマンドを使用してテーブルのポインターを得ることができます:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$TablePtr</span>:=<span class="hljs-function">Table</span>(<span class="hljs-number">20</span>)</code></pre><p>取得したポインターは、以下のようにデリファレンスしてコマンドに渡すことができます:</p><pre><code class="hljs css language-4d"><span class="hljs-function">DEFAULT TABLE</span>(<span class="hljs-variable">$TablePtr</span>-&gt;)</code></pre><h3><a aria-hidden="true" class="anchor" id="pointer.html_%E3%83%95%E3%82%A3%E3%83%BC%E3%83%AB%E3%83%89%E3%81%B8%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E3%2583%2595%25E3%2582%25A3%25E3%2583%25BC%25E3%2583%25AB%25E3%2583%2589%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>フィールドへのポインター</h3><p>フィールドの代わりにデリファレンスしたポインターを使用することができます。以下のようなステートメントで、フィールドのポインターを作成します:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$FieldPtr</span>:=-&gt;[aTable]<span class="hljs-literal">This</span>Field</code></pre><p>あるいは、以下のように <code>Field</code>コマンドを使用してフィールドのポインターを得ることができます:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$FieldPtr</span>:=<span class="hljs-function">Field</span>(<span class="hljs-number">1</span>;<span class="hljs-number">2</span>)</code></pre><p>取得したポインターは、以下のようにデリファレンスしてコマンドに渡すことができます:</p><pre><code class="hljs css language-4d"><span class="hljs-function">OBJECT SET FONT</span>(<span class="hljs-variable">$FieldPtr</span>-&gt;;<span class="hljs-string">"Arial"</span>)</code></pre><h3><a aria-hidden="true" class="anchor" id="pointer.html_%E5%A4%89%E6%95%B0%E3%81%B8%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E5%25A4%2589%25E6%2595%25B0%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>変数へのポインター</h3><p>プロセス変数またはローカル変数のポインターを使う場合、参照される変数はポインターが使用される時点ですでに定義されていなければなりません。ローカル変数は、それらを作成したメソッドの実行が終わると破棄され、プロセス変数もそれを作成したプロセスの終了時に削除される点に留意してください。存在しない変数をポインターで呼び出そうとすると、インタープリターモードでは (「変数が設定されていません」という内容の)シンタックスエラーが起きます。コンパイルモードでは、さらに重大なエラーが発生する可能性があります。</p><p>ローカル変数のポインターを使用すると、プロセス変数の使用を控えることができます。ローカル変数へのポインターは、同じプロセス内でのみ使用することができます。デバッガーにおいて、別のメソッドで宣言されたローカル変数へのポインターを表示すると、ポインターの後ろの括弧内にそのメソッド名が表示されます。例として、Method1 で以下のように書いたとします:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$MyVar</span>:=<span class="hljs-string">"Hello world"</span><span class="hljs-function"> Method2</span>(-&gt;<span class="hljs-variable">$MyVar</span>)</code></pre><p>Method2 実行中のデバッガーは $1 を次のように表示します:</p><table><thead><tr><th>$1</th><th>-&gt;$MyVar (Method1)</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><p>$1 の値は、次のようになります:</p><table><thead><tr><th>$MyVar (Method1)</th><th>"Hello world"</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><h3><a aria-hidden="true" class="anchor" id="pointer.html_%E9%85%8D%E5%88%97%E8%A6%81%E7%B4%A0%E3%81%B8%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E9%2585%258D%25E5%2588%2597%25E8%25A6%2581%25E7%25B4%25A0%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>配列要素へのポインター</h3><p>配列要素に対するポインターを作成することができます。 以下の例は配列を作成し、配列の最初の要素を指し示すポインターを変数$ElemPtr に割り当てます:</p><pre><code class="hljs css language-4d"><span class="hljs-function">ARRAY REAL</span>(<span class="hljs-variable">$anArray</span>;<span class="hljs-number">10</span>) <span class="hljs-comment">// 配列を作成</span><span class="hljs-variable">$ElemPtr</span>:=-&gt;<span class="hljs-variable">$anArray{1} </span><span class="hljs-comment">// 配列要素へのポインターを作成</span></code></pre><p>以下のように、ポインターの参照先である配列要素に値を代入することができます:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$ElemPtr</span>-&gt;:=<span class="hljs-number">8</span></code></pre><h3><a aria-hidden="true" class="anchor" id="pointer.html_%E9%85%8D%E5%88%97%E3%81%B8%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E9%2585%258D%25E5%2588%2597%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>配列へのポインター</h3><p>配列に対するポインターを作成することができます。 以下の例は配列を作成し、配列を指し示すポインターを変数 $ArrPtrに割り当てます:</p><pre><code class="hljs css language-4d"><span class="hljs-function">ARRAY REAL</span>(<span class="hljs-variable">$anArray</span>;<span class="hljs-number">10</span>) <span class="hljs-comment">// 配列を作成</span><span class="hljs-variable">$ArrPtr</span>:=-&gt;<span class="hljs-variable">$anArray </span><span class="hljs-comment">// 配列へのポインターを作成</span></code></pre><p>ポインターの参照先はあくまでも配列であり、配列要素ではないことを理解することが重要です。たとえば、デリファレンスしたポインターを以下のように使用できます:</p><pre><code class="hljs css language-4d"><span class="hljs-function">SORT ARRAY</span>(<span class="hljs-variable">$ArrPtr</span>-&gt;;&gt;) <span class="hljs-comment">// 配列の並べ替え</span></code></pre><p>配列の4番目の要素にアクセスするのに配列のポインターを使う場合は、以下のように記述します:</p><pre><code class="hljs css language-4d"> ArrPtr-&gt;{<span class="hljs-number">4</span>}:=<span class="hljs-number">84</span></code></pre><h3><a aria-hidden="true" class="anchor" id="pointer.html_%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E5%BC%95%E6%95%B0%E3%81%A8%E3%81%97%E3%81%A6%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E3%2583%25A1%25E3%2582%25BD%25E3%2583%2583%25E3%2583%2589%25E3%2581%25AE%25E5%25BC%2595%25E6%2595%25B0%25E3%2581%25A8%25E3%2581%2597%25E3%2581%25A6%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>メソッドの引数としてのポインター</h3><p>ポインターは引数としてメソッドに渡すことができます。 メソッド内で、ポインターの参照先の値を変更することができます。たとえば、以下のメソッド <code>takeTwo</code> は、2つのポインターを引数として受け取ります。そして、最初の引数の参照先を大文字に変換し、2つめの引数の参照先を小文字に変換します。 当該プロジェクトメソッドのコードです:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//takeTwo プロジェクトメソッド</span>  <span class="hljs-comment">//$1 – 文字列フィールドまたは変数へのポインター。 これを大文字に変換します。</span>  <span class="hljs-comment">//$2 – 文字列フィールドまたは変数へのポインター。 これを小文字に変換します。</span> <span class="hljs-variable">$1</span>-&gt;:=<span class="hljs-function">Uppercase</span>(<span class="hljs-variable">$1</span>-&gt;) <span class="hljs-variable">$2</span>-&gt;:=<span class="hljs-function">Lowercase</span>(<span class="hljs-variable">$2</span>-&gt;)</code></pre><p>以下のステートメントではメソッド <code>takeTwo</code>を使用し、フィールドの値を大文字に、変数の値を小文字に変換します:</p><pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">takeTwo</span><span class="hljs-params">(-&gt;[myTable]myField;-&gt;<span class="hljs-variable">$MyVar</span>)</span></span></code></pre><p>このフィールド [myTable]myField の値が "jones" であれば、"JONES" に変更されます。 他方、変数$MyVar の値が "HELLO" であれば、"hello" に変更されます。</p><p>メソッド takeTwoで宣言されている引数の型と、引数として渡したポインターの参照先のデータタイプが一致していることが重要です。この例では、ポインターの参照先は必ず文字列またはテキスト型でなければなりません。</p><h3><a aria-hidden="true" class="anchor" id="pointer.html_%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%81%B8%E3%81%AE%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC"></a><a aria-hidden="true" class="hash-link" href="#pointer.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>ポインターへのポインター</h3><p>より複雑な使い方として、ポインターを参照するポインターを使うことができます。 以下の例を考えます:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$MyVar</span>:=<span class="hljs-string">"Hello"</span> <span class="hljs-variable">$PointerOne</span>:=-&gt;<span class="hljs-variable">$MyVar</span> <span class="hljs-variable">$PointerTwo</span>:=-&gt;<span class="hljs-variable">$PointerOne</span> (<span class="hljs-variable">$PointerTwo</span>-&gt;)-&gt;:=<span class="hljs-string">"Goodbye"</span><span class="hljs-function"> ALERT</span>((<span class="hljs-variable">$PointerTwo</span>-&gt;)-&gt;)</code></pre><p>この例はアラートボックスに "Goodbye" を表示します。</p><p>各行について見ていきましょう:</p><ul><li>$MyVar:="Hello" --&gt; この行は、変数 $MyVar に "Hello"という文字列を代入しています。</li><li>$PointerOne:=-&gt;$MyVar --&gt; 変数 $PointerOne に、変数 $MyVarへのポインターを代入します。</li><li>$PointerTwo:=-&gt;$PointerOne --&gt; 新たな変数 $PointerTwo に、$MyVarを参照する $PointerOne へのポインターを代入します。</li><li>($PointerTwo-&gt;)-&gt;:="Goodbye" --&gt; $PointerTwo-&gt; は$PointerOne を示し、$PointerOne は $MyVarを示します。つまり、($PointerTwo-&gt;)-&gt; は、$MyVar を示しています。 結果として、文字列 "Goodbye" が$MyVar に代入されます。</li><li>ALERT (($PointerTwo-&gt;)-&gt;) --&gt; 先の説明と同様に$PointerTwo-&gt; は $PointerOne を示し、$PointerOne は $MyVarを示しています。つまり、($PointerTwo-&gt;)-&gt; は、$MyVar を示しています。 結果としてアラートボックスには$MyVar の内容が表示されます。</li></ul><p>以下の例では、$MyVar に "Hello" が代入されます:</p><pre><code class="hljs css language-4d">(<span class="hljs-variable">$PointerTwo</span>-&gt;)-&gt;:=<span class="hljs-string">"Hello"</span></code></pre><p>以下のステートメントは、$NewVar に $MyVar の値である "Hello" が代入されます:</p><pre><code class="hljs"><span class="hljs-variable">$NewVar</span><span class="hljs-symbol">:</span>=(<span class="hljs-variable">$PointerTwo</span>-&gt;)-&gt;</code></pre><p><strong>重要:</strong> デリファレンスを複数おこなうには括弧が必要です。</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#picture.html"><span class="arrow-prev">←</span><span>ピクチャー</span></a><a class="docs-next button" href="#string.html"><span>文字列</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#pointer.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC%25E3%2581%25AE%25E5%259F%25BA%25E6%259C%25AC">ポインターの基本</a></li><li><a href="#pointer.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC%25E6%25BC%2594%25E7%25AE%2597%25E5%25AD%2590">ポインター演算子</a></li><li><a href="#pointer.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8%25E4%25BE%258B">ポインターの使用例</a><ul class="toc-headings"><li><a href="#pointer.html_%25E3%2583%2586%25E3%2583%25BC%25E3%2583%2596%25E3%2583%25AB%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC">テーブルへのポインター</a></li><li><a href="#pointer.html_%25E3%2583%2595%25E3%2582%25A3%25E3%2583%25BC%25E3%2583%25AB%25E3%2583%2589%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC">フィールドへのポインター</a></li><li><a href="#pointer.html_%25E5%25A4%2589%25E6%2595%25B0%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC">変数へのポインター</a></li><li><a href="#pointer.html_%25E9%2585%258D%25E5%2588%2597%25E8%25A6%2581%25E7%25B4%25A0%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC">配列要素へのポインター</a></li><li><a href="#pointer.html_%25E9%2585%258D%25E5%2588%2597%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC">配列へのポインター</a></li><li><a href="#pointer.html_%25E3%2583%25A1%25E3%2582%25BD%25E3%2583%2583%25E3%2583%2589%25E3%2581%25AE%25E5%25BC%2595%25E6%2595%25B0%25E3%2581%25A8%25E3%2581%2597%25E3%2581%25A6%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC">メソッドの引数としてのポインター</a></li><li><a href="#pointer.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC%25E3%2581%25B8%25E3%2581%25AE%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC">ポインターへのポインター</a></li></ul></li></ul></nav></div></div></body></html>