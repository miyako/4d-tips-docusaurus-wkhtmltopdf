<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>EntitySelection · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Una entity selection es un objeto que contiene una o más referencias a [entidades](/docs/Rx/es/ORDA/dsmapping.html#entity) pertenecientes a la misma [Dataclass](/docs/Rx/es/ORDA/dsmapping.html#dataclass). Una entity selection puede contener 0, 1 o X entidades de la dataclass -- donde X puede representar el número total de entidades contenidas en la dataclass."name="description" /><meta content="es" name="docsearch:language" /><meta content="EntitySelection · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Una entity selection es un objeto que contiene una o más referencias a [entidades](/docs/Rx/es/ORDA/dsmapping.html#entity) pertenecientes a la misma [Dataclass](/docs/Rx/es/ORDA/dsmapping.html#dataclass). Una entity selection puede contener 0, 1 o X entidades de la dataclass -- donde X puede representar el número total de entidades contenidas en la dataclass."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#EntitySelectionClass.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">EntitySelection<a aria-hidden="true" class="anchor" id="EntitySelectionClass.html"></a></h1></header><article><div><p><span>Una entity selection es un objeto que contiene una o másreferencias a <a href="#EntitySelectionClass.html_entity">entidades</a> pertenecientes ala misma <a href="#EntitySelectionClass.html_dataclass">Dataclass</a>. Una entityselection puede contener 0, 1 o X entidades de la dataclass --donde X puede representar el número total de entidades contenidasen la dataclass.</span></p><p><span>Las selecciones de entidades pueden crearse a partir deselecciones existentes utilizando varias funciones de la clase<a href="#DataClassClass.html"><code>DataClass</code> class</a>tales como <a href="#EntitySelectionClass.html_all"><code>.all()</code></a> o <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>, o dela clase <code>EntityClass</code> misma, tal como <a href="#EntitySelectionClass.html_and"><code>.and()</code></a> o <a href="#EntitySelectionClass.html_orderby"><code>orderBy()</code></a>.También puede crear entity selections vacías utilizando la función<a href="#EntitySelectionClass.html_newselection"><code>dataClass.newSelection()</code></a>o el comando <a href="#EntitySelectionClass.html_create-new-selection"><code>Create newselection</code></a>.</span></p><h3><span><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_resumen"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_resumen"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Resumen</span></h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#EntitySelectionClass.html_91index93"><strong><em>[index]</em></strong>: 4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;permite acceder a las entidades dentrode la selección de entidades utilizando la sintaxis de colecciónestándar</p></td></tr><tr><td><a href="#EntitySelectionClass.html_attributename"><strong><em>.attributeName</em></strong>: Collection<br /><strong><em>.attributeName</em></strong> : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp; una "proyección" de los valores delatributo en la entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_add"><strong>.add</strong>(<em>entity</em> : 4D.Entity ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;añade la <em>entity</em> especificada ala entity selection y devuelve la selección de entidadesmodificada</p></td></tr><tr><td><a href="#EntitySelectionClass.html_and"><strong>.and</strong>(<em>entity</em> : 4D.Entity ) : 4D.EntitySelection<br /><strong>.and</strong>( <em>entitySelection</em> :4D.EntitySelection ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;combina la entity selection con elparámetro <em>entity</em> o <em>entitySelection</em> utilizando eloperador lógico AND</p></td></tr><tr><td><a href="#EntitySelectionClass.html_average"><strong>.average</strong>(<em>attributePath</em> : Text ) : Real</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve la media aritmética (promedio)de todos los valores no nulos de <em>attributePath</em> en laentity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_contains"><strong>.contains</strong>(<em>entity</em> : 4D.Entity ) : Boolean</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve true si la referencia deentidad pertenece a la entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_count"><strong>.count</strong>(<em>attributePath</em> : Text ) : Real</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve el número de entidades en laentity selection con un valor no null en <em>attributePath</em></p></td></tr><tr><td><a href="#EntitySelectionClass.html_distinct"><strong>.distinct</strong>(<em>attributePath</em> : Text { ; <em>option</em> : Integer } ) :Collection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;devuelve una colección que contiene sólovalores distintos (diferentes) del <em>attributePath</em> en laselección de la entidad</p></td></tr><tr><td><a href="#EntitySelectionClass.html_drop"><strong>.drop</strong>( {<em>mode</em> : Integer } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp; elimina las entidades pertenecientes ala selección de entidades de la tabla relacionada con su dataclassen el datastore</p></td></tr><tr><td><a href="#EntitySelectionClass.html_extract"><strong>.extract</strong>(<em>attributePath</em> : Text { ; <em>option</em> : Integer } ) :Collection<br /><strong>.extract</strong>( <em>attributePath</em> { ;<em>targetPath</em> } { ; <em>...attributePathN</em> : Text ;<em>targetPathN</em> : Text } ) : Collection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retorna una colección que contiene losvalores de <em>attributePath</em> extraídos de la entityselection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_first"><strong>.first()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve una referencia a la entidad enla primera posición de la entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_getdataclass"><strong>.getDataClass()</strong>: 4D.DataClass</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve la dataclass de la entityselection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_getremotecontextattributes">Devuelve:</a><p>&nbsp;&nbsp;&nbsp;&nbsp;</p></td></tr><tr><td><a href="#EntitySelectionClass.html_isalterable"><strong>.isAlterable()</strong>: Boolean</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve True si la entity selection esmodificable</p></td></tr><tr><td><a href="#EntitySelectionClass.html_isordered"><strong>.isOrdered()</strong>: Boolean</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve True si la entity selectionestá ordenada</p></td></tr><tr><td><a href="#EntitySelectionClass.html_last"><strong>.last()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve una referencia a la entidad enúltima posición de la entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_length"><strong>.length</strong>:Integer</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve el número de entidades en laentity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_max"><strong>.max</strong>(<em>attributePath</em> : Text ) : any</a><p>&nbsp;&nbsp;&nbsp;&nbsp;devuelve el valor más alto (o máximo)entre todos los valores de <em>attributePath</em> en la entityselection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_min"><strong>.min</strong>(<em>attributePath</em> : Text ) : any</a><p>&nbsp;&nbsp;&nbsp;&nbsp; devuelve el valor más bajo (o mínimo)entre todos los valores de attributePath en la entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_minus"><strong>.minus</strong>(<em>entity</em> : 4D.Entity ) : 4D.EntitySelection<br /><strong>.minus</strong>( <em>entitySelection</em> :4D.EntitySelection ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;excluye de la entity selection a la quese aplica la <em>entity</em> o las entidades de<em>entitySelection</em> y devuelve la entity selectionresultante</p></td></tr><tr><td><a href="#EntitySelectionClass.html_or"><strong>.or</strong>(<em>entity</em> : 4D.Entity ) : 4D.EntitySelection<br /><strong>.or</strong>( <em>entitySelection</em> : 4D.EntitySelection) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;combina la entity selection con elparámetro <em>entity</em> o <em>entitySelection</em> utilizando eloperador lógico (no excluyente) OR</p></td></tr><tr><td><a href="#EntitySelectionClass.html_orderby"><strong>.orderBy</strong>(<em>pathString</em> : Text ) : 4D.EntitySelection<br /><strong>.orderBy</strong>( <em>pathObjects</em> : Collection ) :4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;devuelve una nueva entity selectionordenada que contiene todas las entidades de la entity selection enel orden especificado por los criterios <em>pathString</em> o<em>pathObjects</em></p></td></tr><tr><td><a href="#EntitySelectionClass.html_orderbyformula"><strong>.orderByFormula</strong>(<em>formulaString</em> : Text { ; <em>sortOrder</em> : Integer } {; <em>settings</em> : Object} ) : 4D.EntitySelection<br /><strong>.orderByFormula</strong>( <em>formulaObj</em> : Object { ;<em>sortOrder</em> : Integer } { ; <em>settings</em> : Object} ) :4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;devuelve una nueva entity selectionordenada</p></td></tr><tr><td><a href="#EntitySelectionClass.html_query"><strong>.query</strong>(<em>queryString</em> : Text { ; <em>...value</em> : any } { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection<br /><strong>.query</strong>( <em>formula</em> : Object { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;busca entidades que cumplan loscriterios de búsqueda especificados en <em>queryString</em> o<em>formula</em> y (opcionalmente) <em>value</em>(s) entre todaslas entidades de la selección de entidades</p></td></tr><tr><td><a href="#EntitySelectionClass.html_querypath"><strong>.queryPath</strong>: Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp;contiene una descripción detallada de labúsqueda tal y como fue realizada por 4D</p></td></tr><tr><td><a href="#EntitySelectionClass.html_queryplan"><strong>.queryPlan</strong>: Text</a><p>&nbsp;&nbsp;&nbsp;&nbsp; contiene una descripción detallada dela búsqueda justo antes de su ejecución (es decir, la búsquedaplaneada)</p></td></tr><tr><td><a href="#EntitySelectionClass.html_refresh"><strong>.refresh()</strong></a><p>&nbsp;&nbsp;&nbsp;&nbsp;invalida inmediatamente los datos de laentity selection en la caché local de ORDA</p></td></tr><tr><td><a href="#EntitySelectionClass.html_selected"><strong>.selected</strong>(<em>selectedEntities</em> : 4D.EntitySelection ) : Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;devuelve un objeto que describe la(s)posición(es) de <em>selectedEntities</em> en la selección deentidades original</p></td></tr><tr><td><a href="#EntitySelectionClass.html_slice"><strong>.slice</strong>(<em>startFrom</em> : Integer { ; <em>end</em> : Integer } ) :4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;devuelve una parte de una selección deentidades en una nueva entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_sum"><strong>.sum</strong>(<em>attributePath</em> : Text ) : Real</a><p>&nbsp;&nbsp;&nbsp;&nbsp;devuelve la suma de todos los valores de<em>attributePath</em> en la entity selection</p></td></tr><tr><td><a href="#EntitySelectionClass.html_tocollection"><strong>.toCollection</strong>({ <em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer } } ) : <em>Collection</em><br /><strong>.toCollection</strong>( <em>filterString</em> : Text {;<em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer }}} ) : <em>Collection</em><br /><strong>.toCollection</strong>( <em>filterCol</em> : Collection {;<em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer }}} ) : <em>Collection</em></a><p>&nbsp;&nbsp;&nbsp;&nbsp;crea y devuelve una colección donde cadaelemento es un objeto que contiene un conjunto de propiedades yvalores</p></td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_crear-una-entity-selection"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_crear-una-entity-selection"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Crear una entity selection</span></h2><p><span><strong>Create entity selection</strong> (<em>dsTable</em> : Table { ; <em>settings</em> : Object } ) :4D.EntitySelection</span></p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>dsTable</td><td>Tabla</td><td style="text-align:center">-&gt;</td><td>Tabla de la base 4D cuya selección actual se utilizará paraconstruir la selección de entidades</td></tr><tr><td>parámetros</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Opciones de construcción: context</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Selección de entidades que coinciden con la clase de datosrelacionada con la tabla dada</td></tr></tbody></table><h4><span><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</span></h4><p><span>El comando <code>Create entity selection</code> construyey devuelve una nueva, <a href="#EntitySelectionClass.html_shareable-or-alterable-entity-selections">alterable</a> selección de entidad relacionada con la clase dedatos que coincide con la tabla <em>dsTable</em> dada, según laselección actual de esta tabla.</span></p><p><span>Si la selección actual está ordenada, se crea unaselección de entidades <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">ordenada</a>(se mantiene el orden de la selección actual). Si la selecciónactual no está ordenada, se crea una selección de entidades noordenada.</span></p><p><span>Si la tabla <em>dsTable</em> no está expuesto en <a href="#EntitySelectionClass.html_ds"><code>ds</code></a>, se devuelve unerror. Este comando no puede utilizarse con un datastoreremoto.</span></p><p><span>En el parámetro opcional <em>settings</em>, puede pasar unobjeto que contenga la siguiente propiedad:</span></p><table><thead><tr><th>Propiedad</th><th>Tipo</th><th>Descripción</th></tr></thead><tbody><tr><td>context</td><td>Texto</td><td>Etiqueta para el <a href="#EntitySelectionClass.html_clientserver-optimization">contexto deoptimización</a> aplicado a la entity selection.</td></tr></tbody></table><h4><span><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</span></h4><pre><span><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-function">ALL RECORDS</span>([Employee])<span class="hljs-variable">$employees</span>:=<span class="hljs-function">Create entity selection</span>([Employee]) <span class="hljs-comment">// La entity selection $employees ahora contiene un conjunto de referencias</span><span class="hljs-comment">// en todas las entidades relacionadas con la clase de datos Employee</span></code></span></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ver-tambi%C3%A9n"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_ver-tambi%25C3%25A9n"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ver también</h4><p><a href="#EntitySelectionClass.html_newselection"><code>dataClass.newSelection()</code></a></p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_use-entity-selection"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_use-entity-selection"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>USE ENTITY SELECTION</h2><p><strong>USE ENTITY SELECTION</strong>(<em>entitySelection</em>)</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>entitySelection</td><td>EntitySelection</td><td style="text-align:center">-&gt;</td><td>Una entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-1"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>El comando <code>USE ENTITY SELECTION</code> actualiza laselección actual de la tabla que coincide con la dataclass delparámetro <em>entitySelection</em>, según el contenido de la entityselection.</p><p>Este comando no puede utilizarse con un <a href="#datastores.html">datastore remoto</a>.</p><blockquote><p>Después de una llamada a <code>USE ENTITY SELECTION</code>, elprimer registro de la selección actual actualizada (si no estávacío) se convierte en el registro actual, pero no se carga en lamemoria. Si necesita utilizar los valores de los campos delregistro actual, utilice el comando <code>LOAD RECORD</code>después del comando <code>USE ENTITY SELECTION</code>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$entitySel </span>: Object<span class="hljs-variable">$entitySel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"M@"</span>) <span class="hljs-comment">//$entitySel está asociado a la dataclass Employee </span><span class="hljs-function">REDUCE SELECTION</span>([Employee];<span class="hljs-number">0</span>)<span class="hljs-function">USE ENTITY SELECTION</span>(<span class="hljs-variable">$entitySel</span>) <span class="hljs-comment">//Se actualiza la selección actual de la tabla Employee</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_91index93"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_91index93"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>[<em>index</em>]</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong><em>[index]</em></strong> : 4D.Entity</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-2"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La notación <code>EntitySelection[index]</code> permite accedera las entidades dentro de la selección de entidades utilizando lasintaxis de colección estándar: pase la posición de la entidad quedesea obtener en el parámetro <em>index</em>.</p><p>Tenga en cuenta que la entidad correspondiente se vuelve acargar desde el almacén de datos.</p><p><em>index</em> puede ser cualquier número entre 0 y<code>.length</code>-1.</p><ul><li>Si <em>index</em> está fuera de rango, se devuelve unerror.</li><li>Si <em>index</em> corresponde a una entidad descartada, sedevuelve un valor Null.</li></ul><blockquote><blockquote><p><strong>Atención</strong>: <code>EntitySelection[index]</code>es una expresión no asignable, lo que significa que no puedeutilizarse como referencia editable de la entidad con métodos como<a href="#EntitySelectionClass.html_lock"><code>.lock()</code></a>o <a href="#EntitySelectionClass.html_save"><code>.save()</code></a>. Paratrabajar con la entidad correspondiente, es necesario asignar laexpresión devuelta a una expresión asignable, como una variable.Ejemplos:</p></blockquote></blockquote><pre><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-comment">//creación de la entity selection</span>  <span class="hljs-comment">//declaraciones no válidas:</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$sel</span>[<span class="hljs-number">0</span>].<span class="hljs-function">lock</span>() <span class="hljs-comment">//NO funcionará</span> <span class="hljs-variable">$sel</span>[<span class="hljs-number">0</span>].lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">//NO funcionará</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$sel</span>[<span class="hljs-number">0</span>].<span class="hljs-function">save</span>() <span class="hljs-comment">//NO funcionará</span>  <span class="hljs-comment">//valid code:</span> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$sel</span>[<span class="hljs-number">0</span>]  <span class="hljs-comment">//OK</span> <span class="hljs-variable">$entity</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-comment">//OK</span> <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//OK</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-variable">$employee</span>:=<span class="hljs-variable">$employees</span>[<span class="hljs-number">2</span>]  <span class="hljs-comment">// La tercera entidad de la selección de entidades $employees se recarga de la base de datos</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_attributename"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_attributename"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.<em>attributeName</em></h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong><em>.attributeName</em></strong> : Collection<br /><strong><em>.attributeName</em></strong> : 4D.EntitySelection</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-3"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>Todo atributo de dataclass puede ser utilizado como unapropiedad de una entity selection para devolver una "proyección" delos valores del atributo en la entity selection. Los valoresproyectados pueden ser una colección o una nueva selección deentidades, dependiendo de <a href="#EntitySelectionClass.html_kind">kind</a> (<code>storage</code> o<code>relation</code>) del atributo.</p><ul><li>Si el "kind" de <em>attributeName</em> es <code>storage</code>:<code>.attributeName</code> devuelve una colección de valores delmismo tipo que <em>attributeName</em>.</li><li>Si el "kind" de <em>attributeName</em> es<code>relatedEntity</code>: <code>.attributeName</code> devuelveuna nueva entity selection de valores relacionados del mismo tipoque <em>attributeName</em>. Se eliminan los duplicados (se devuelveuna entity selection desordenada).</li><li>Si el "kind" de <em>attributeName</em> es<code>relatedEntities</code>: <code>.attributeName</code> devuelveuna nueva entity selection de valores relacionados del mismo tipoque <em>attributeName</em>. Se eliminan los duplicados (se devuelveuna entity selection desordenada).</li></ul><p>Cuando se utiliza un atributo de relación como propiedad de unaselección de entidades, el resultado es siempre otra selección deentidades, aunque sólo se devuelva una entidad. Cuando se utilizaun atributo de relación como propiedad de una selección deentidades, el resultado es siempre otra selección de entidades,aunque sólo se devuelva una entidad.</p><p>Si el atributo no existe en la selección de entidades, sedevuelve un error.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><p>Proyección de valores de almacenamiento:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$firstNames </span>: Collection <span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-variable">$firstNames</span>:=<span class="hljs-variable">$entitySelection</span>.firstName <span class="hljs-comment">// firstName es un string</span></code></pre><p>La colección resultante es una colección de cadenas, porejemplo:</p><pre><code class="hljs css language-4d">[    <span class="hljs-string">"Joanna"</span>,    <span class="hljs-string">"Alexandra"</span>,    <span class="hljs-string">"Rick"</span>]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Proyección de la entidad relacionada:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es</span>; <span class="hljs-variable">$entitySelection </span>: cs.EmployeeSelection <span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-variable">$es</span>:=<span class="hljs-variable">$entitySelection</span>.employer <span class="hljs-comment">// employer está relacionado a la dataClass Company</span></code></pre><p>El objeto resultante es una selección de entidades de la empresacon los duplicados eliminados (si los hay).</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-3"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 3</h4><p>Proyección de entidades relacionadas:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">all</span>().directReports <span class="hljs-comment">// directReports está relacionado a la dataclass Employee</span></code></pre><p>El objeto resultante es una entity selection de la dataclassEmployee sin duplicados (si los hay).</p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_add"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_add"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.add()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v18 R5</td><td>Sólo soporta las entity selections alterables</td></tr><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.add</strong>( <em>entity</em> : 4D.Entity ) :4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entidad que debe añadirse a la entity selection</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Selección de entidades incluyendo la <em>entity</em>añadida</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-4"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.add()</code> añade la <em>entity</em>especificada a la entity selection y devuelve la selección deentidades modificada.</p><blockquote><p>Los valores de tipo Date se convierten en valores numéricos(segundos) y se utilizan para calcular la media.</p></blockquote><p><strong>Atención:</strong> la entity selection debe ser<em>alterable</em>, es decir, ha sido creado, por ejemplo, por<a href="#EntitySelectionClass.html_newselection"><code>.newSelection()</code></a>o <code>Create entity selection</code>, de lo contrario<code>.add()</code> devolverá un error. Las entity selectionscompartibles no aceptan la adición de entidades. Para másinformación, consulte la sección <a href="#EntitySelectionClass.html_shareable-or-alterable-entity-selections">Entity selections compartibles o modificables</a> section.</p><ul><li>Si la entity selection está ordenada, <em>entity</em> se añadeal final de la selección. Si una referencia a la misma entidad yapertenece a la selección de entidades, se duplica y se añade unanueva referencia.</li><li>Si la entity selection no está ordenada, <em>entity</em> seañade en cualquier lugar de la selección, sin un ordenespecífico.</li></ul><blockquote><p>Para más información, consulte la sección <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">Entityselections ordenada o no ordenadas</a>.</p></blockquote><p>La entity selection modificada es devuelta por la función, demodo que las llamadas a la función pueden encadenarse.</p><p>Se produce un error si <em>entity</em> y la entity selection noestán relacionadas con la misma dataclass. Si <em>entity</em> esNull, no se produce ningún error.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-2"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"S@"</span>) <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">new</span>() <span class="hljs-variable">$employee</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$employee</span>.<span class="hljs-function">save</span>() <span class="hljs-variable">$employees</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-comment">//La entidad $employee se añade a la entity selection $employees</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-2"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Las llamadas a la función se pueden encadenar:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel </span>: cs.ProductSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$p1</span>;<span class="hljs-variable">$p2</span>;<span class="hljs-variable">$p3 </span>: cs.ProductEntity <span class="hljs-variable">$p1</span>:=ds.Product.<span class="hljs-function">get</span>(<span class="hljs-number">10</span>) <span class="hljs-variable">$p2</span>:=ds.Product.<span class="hljs-function">get</span>(<span class="hljs-number">11</span>) <span class="hljs-variable">$p3</span>:=ds.Product.<span class="hljs-function">get</span>(<span class="hljs-number">12</span>) <span class="hljs-variable">$sel</span>:=ds.Product.<span class="hljs-function">query</span>(<span class="hljs-string">"ID &gt; 50"</span>) <span class="hljs-variable">$sel</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$p1</span>).<span class="hljs-function">add</span>(<span class="hljs-variable">$p2</span>).<span class="hljs-function">add</span>(<span class="hljs-variable">$p3</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_and"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_and"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.and()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.and</strong>( <em>entity</em> : 4D.Entity ) :4D.EntitySelection<br /><strong>.and</strong>( <em>entitySelection</em> :4D.EntitySelection ) : 4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entidad a intersectar</td></tr><tr><td>entitySelection</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Entity selection a intersectar</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection resultante de la intersección con el operadorlógico AND</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-5"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.and()</code> combina la entity selection conel parámetro <em>entity</em> o <em>entitySelection</em> utilizandoel operador lógico AND; devuelve una nueva entity selection noordenada que contiene sólo las entidades a las que se hacereferencia tanto en la entity selection y el parámetro.</p><ul><li>Si pasa <em>entity</em> como parámetro, se combina esta entidadcon la entity selection. Si la entidad pertenece a la entityselection, se devuelve una nueva entity selection que sólo contienela entidad. En caso contrario, se devuelve una selección deentidades vacía.</li><li>Si pasa <em>entitySelection</em> como parámetro, combina ambasentity selections. Se devuelve una nueva selección de entidades quecontiene sólo las entidades a las que se hace referencia en ambasselecciones. Si no hay ninguna entidad intersectada, se devuelveuna entity selection vacía.</li></ul><blockquote><blockquote><p>Puede comparar <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">entityselections ordenadas y/o desordenadas</a>. La selección resultantees siempre desordenada.</p></blockquote></blockquote><p>Si la entity selection inicial o el parámetro<em>entitySelection</em> están vacíos, o si <em>entity</em> esNull, se devuelve una entity selection vacía.</p><p>Si la entity selection inicial y el parámetro no estánrelacionados con la misma dataclass, se produce un error.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-3"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$result </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>)     <span class="hljs-comment">//la entity selection $employees contiene la entidad</span>  <span class="hljs-comment">//con la llave primaria 710 y otras entidades</span>  <span class="hljs-comment">//por ejemplo. "Colin Hetrick" / "Grady Harness" / "Sherlock Holmes" (primary key 710)</span> <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">710</span>) <span class="hljs-comment">// Devuelve "Sherlock Holmes"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">and</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-comment">//$result es una selección de entidades que contiene   </span>  <span class="hljs-comment">//sólo la entidad con llave primaria 710 ("Sherlock Holmes")</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-3"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Queremos tener una selección de empleados llamados "Jones" quevivan en Nueva York:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel1</span>; <span class="hljs-variable">$sel2</span>; <span class="hljs-variable">$sel3 </span>: cs.EmployeeSelection <span class="hljs-variable">$sel1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"name =:1"</span>;<span class="hljs-string">"Jones"</span>) <span class="hljs-variable">$sel2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"city=:1"</span>;<span class="hljs-string">"New York"</span>) <span class="hljs-variable">$sel3</span>:=<span class="hljs-variable">$sel1</span>.<span class="hljs-function">and</span>(<span class="hljs-variable">$sel2</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_average"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_average"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.average()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v18 R6</td><td>Devuelve undefined si la entity selection está vacía</td></tr><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.average</strong>( <em>attributePath</em> : Text ) :Real</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>attributePath</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Ruta del atributo a utilizar para el cálculo</td></tr><tr><td>Resultado</td><td>Real</td><td style="text-align:center">&lt;-</td><td>Media aritmética (promedio) de los valores de las entidadespara el atributo (No se define para una entity selectionvacía)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-6"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.average()</code> devuelve la media aritmética(promedio) de todos los valores no nulos de <em>attributePath</em>en la entity selection.</p><p>Pase en el parámetro <em>attributePath</em> la ruta del atributoa evaluar.</p><p>Sólo se tienen en cuenta los valores numéricos para el cálculo.Tenga en cuenta, sin embargo, que si el <em>attributePath</em> dela selección de entidades contiene tipos de valores mixtos,<code>.average()</code> tiene en cuenta todos los elementosescalares para calcular el valor medio.</p><blockquote><p>Para más información sobre propiedad compartible de entityselections, consulte la sección <a href="#EntitySelectionClass.html_shareable-or-alterable-entity-selections">Entity selections compartibles o modificables</a>.</p></blockquote><p><code>.average()</code> devuelve <strong>undefined</strong> sila entity selection está vacía o <em>attributePath</em> no contienevalores numéricos.</p><p>Se devuelve un error si:</p><ul><li><em>&gt;attributePath</em> es un atributo relativo,</li><li><em>attributePath</em> designa un atributo que no existe en ladataclass de la entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-4"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Queremos obtener una lista de empleados cuyo salario es superioral salario medio:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$averageSalary </span>: Real<span class="hljs-keyword"> var</span> <span class="hljs-variable">$moreThanAv </span>: cs.EmployeeSelection <span class="hljs-variable">$averageSalary</span>:=ds.Employee.<span class="hljs-function">all</span>().<span class="hljs-function">average</span>(<span class="hljs-string">"salary"</span>) <span class="hljs-variable">$moreThanAv</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-variable">$averageSalary</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_contains"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_contains"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.contains()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.contains</strong>( <em>entity</em> : 4D.Entity ) :Boolean</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entidad a evaluar</td></tr><tr><td>Resultado</td><td>Booleano</td><td style="text-align:center">&lt;-</td><td>True si la entidad pertenece a la entity selection, de locontrario False</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-7"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.contains()</code> devuelve true si lareferencia de entidad pertenece a la entity selection, y false encaso contrario.</p><p>En <em>entity</em>, especifique la entidad a buscar en la entityselection. Si la entidad es Null, la función devolverá false.</p><p>Si <em>entity</em> y la entity selection no pertenecen a lamisma dataclass, se produce un error.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-5"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName=:1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">610</span>)<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$employees</span>.<span class="hljs-function">contains</span>(<span class="hljs-variable">$employee</span>))<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"La entidad con llave primaria 610 tiene un apellido que empieza por H"</span>)<span class="hljs-keyword"> Else</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"La entidad con llave primaria 610 no tiene un apellido que empiece por H"</span>)<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_count"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_count"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.count()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.count</strong>( <em>attributePath</em> : Text ) :Real</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>attributePath</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Ruta del atributo que se utilizará para el cálculo</td></tr><tr><td>Resultado</td><td>Real</td><td style="text-align:center">&lt;-</td><td>Número de valores de <em>attributePath</em> no null en laentity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-8"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.count()</code> devuelve el número de entidadesen la entity selection con un valor no null en<em>attributePath</em>.</p><blockquote><p>Sólo se tienen en cuenta los valores escalares. Los valores detipo objeto o colección se consideran valores nulos.</p></blockquote><p>Se devuelve un error si:</p><ul><li><em>&gt;attributePath</em> es un atributo relativo,</li><li><em>attributePath</em> no se encuentra en la clase de datos dela entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-6"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Queremos averiguar el número total de empleados de una empresasin contar a los que no se les ha especificado el cargo:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$count </span>: Real <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"employer = :1"</span>;<span class="hljs-string">"Acme, Inc"</span>) <span class="hljs-variable">$count</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">count</span>(<span class="hljs-string">"jobtitle"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_copy"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_copy"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.copy()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v18 R5</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.copy</strong>( { <em>option</em> : Integer } ) :4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>option</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>ck shared</code>: devuelve una entity selectioncompartible</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Copia de la entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-9"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.copy()</code> devuelve una copia de la entityselection original.</p><blockquote><p>Las entidades de una colección de entidades a las que se accedepor medio de [ ] no se recargan desde la base de datos.</p></blockquote><p>Por defecto, si se omite el parámetro <em>option</em>, lafunción devuelve una nueva entity selection alterable (incluso sila función se aplica a una entity selection compartible). Pasa laconstante <code>ck shared</code> en el parámetro <em>option</em> siquiere crear una entity selection compartible.</p><blockquote><p>Esta función siempre devuelve True cuando la entity selectionproviene de un datastore remoto.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-7"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Se crea una nueva entidad vacía de selección de productos cuandose carga el formulario:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Case of</span>    :(Form event code=On Load)       Form.products:=ds.Products.<span class="hljs-function">newSelection</span>()<span class="hljs-keyword"> End case</span></code></pre><p>A continuación, esta selección de entidades se actualiza conproductos y se desea compartir los productos entre varios procesos.Se copia la selección de la entidad Form.products comocompartible:</p><pre><code class="hljs css language-4d"> ...  <span class="hljs-comment">// La selección de entidades de Form.products se actualiza</span> Form.products.<span class="hljs-function">add</span>(Form.selectedProduct)<span class="hljs-keyword"> Use</span>(Storage)<span class="hljs-keyword">    If</span>(Storage.products=<span class="hljs-literal">Null</span>)       Storage.products:=<span class="hljs-function">New shared object</span>()<span class="hljs-keyword">    End if</span><span class="hljs-keyword">    Use</span>(Storage.products)       Storage.products:=Form.products.<span class="hljs-function">copy</span>(ck shared)<span class="hljs-keyword">    End use</span><span class="hljs-keyword"> End use</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_distinct"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_distinct"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.distinct()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.distinct</strong>( <em>attributePath</em> : Text { ;<em>option</em> : Integer } ) : Collection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>attributePath</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Ruta del atributo cuyos valores distintos desea obtener</td></tr><tr><td>option</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk diacrítico</code>: evaluación diacrítica ("A" # "a"por ejemplo)</td></tr><tr><td>Resultado</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Colección con sólo valores distintos</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-10"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.distinct()</code> devuelve una colección quecontiene sólo valores distintos (diferentes) del<em>attributePath</em> en la selección de la entidad.</p><p>La colección devuelta se clasifica automáticamente. Los valores<strong>Null</strong> no se devuelven.</p><p>En el parámetro <em>attributePath</em>, pase el atributo deentidad cuyos valores distintos quiere obtener. Sólo se puedenmanejar valores escalares (texto, número, booleano o fecha). Lostipos se devuelven en el siguiente orden: Si <em>attributePath</em>lleva a una propiedad de objeto que contiene valores de diferentestipos, primero se agrupan por tipo y se ordenan después.</p><ol><li>booleanos</li><li>strings</li><li>numbers</li><li>fechas</li></ol><p>Se puede utilizar la notación <code>[]</code> para designar unacolección cuando <em>attributePath</em> es una ruta dentro de unobjeto (ver ejemplos).</p><p>Por defecto, se realiza una evaluación no diacrítica. Si deseaque la evaluación distinga entre mayúsculas y minúsculas o quediferencie los caracteres acentuados, pase la constante <code>dkdiacritical</code> en el parámetro <em>option</em>.</p><p>Se devuelve un error si:</p><ul><li><em>&gt;attributePath</em> es un atributo relativo,</li><li><em>attributePath</em> no se encuentra en la clase de datos dela entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplos"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplos"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplos</h4><p>Quiere obtener una colección que contenga un solo elemento pornombre de país:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$countries </span>: Collection <span class="hljs-variable">$countries</span>:=ds.Employee.<span class="hljs-function">all</span>().<span class="hljs-function">distinct</span>(<span class="hljs-string">"address.country"</span>)</code></pre><p><code>nicknames</code> es una colección y <code>extra</code> esun atributo de objeto:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$values</span>:=ds.Employee.<span class="hljs-function">all</span>().<span class="hljs-function">distinct</span>(<span class="hljs-string">"extra.nicknames[].first"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_drop"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_drop"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.drop()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.drop</strong>( { <em>mode</em> : Integer } ) :4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>mode</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk stop dropping on first error</code>: detiene laejecución del método en la primera entidad no suprimible</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection vacía si se ejecuta con éxito, si no entityselection que contengan las entidades no eliminables</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-11"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-11"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.drop()</code> elimina las entidadespertenecientes a la selección de entidades de la tabla relacionadacon su dataclass en el datastore. La entity selection permanece enla memoria.</p><blockquote><p>La eliminación de entidades es permanente y no se puededeshacer. Se recomienda llamar a esta acción en una transacciónpara tener una opción de recuperación.</p></blockquote><p>Si se encuentra una entidad bloqueada durante la ejecución de<code>.drop()</code>, no se elimina. Por defecto, el método procesatodas las entidades de la selección de entidades y devuelve lasentidades no eliminables en la selección de entidades. Si quiereque el método detenga la ejecución en la primera entidad nosuprimible encontrada, pase la constante <code>dk stop dropping onfirst error</code> en el parámetro <em>mode</em>.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-8"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Ejemplo sin la opción <code>dk stop dropping on firsterror</code>:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$notDropped </span>: cs.EmployeeSelection <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName=:1"</span>;<span class="hljs-string">"S@"</span>) <span class="hljs-variable">$notDropped</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">drop</span>() <span class="hljs-comment">// $notDropped es una entity selection que contiene todas las entidades que no suprimidas</span><span class="hljs-keyword"> If</span>(<span class="hljs-variable">$notDropped</span>.length=<span class="hljs-number">0</span>) <span class="hljs-comment">//La acción de eliminación es exitosa, todas las entidades han sido eliminadas</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employees</span>.length)+<span class="hljs-string">" employees"</span>) <span class="hljs-comment">//La selección de entidades eliminada permanece en la memoria</span><span class="hljs-keyword"> Else</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Problem during drop, try later"</span>)<span class="hljs-keyword"> End if</span></code></pre><p>Ejemplo con la opción <code>dk stop dropping on firsterror</code>:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$notDropped </span>: cs.EmployeeSelection <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName=:1"</span>;<span class="hljs-string">"S@"</span>) <span class="hljs-variable">$notDropped</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">drop</span>(dk stop dropping on first error) <span class="hljs-comment">//$notDropped es una entity selection que contiene la primera entidad no suprimida</span><span class="hljs-keyword"> If</span>(<span class="hljs-variable">$notDropped</span>.length=<span class="hljs-number">0</span>) <span class="hljs-comment">//La acción de eliminación es exitosa, todas las entidades han sido eliminadas</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"You have dropped "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employees</span>.length)+<span class="hljs-string">" employees"</span>) <span class="hljs-comment">//La selección de entidades eliminada permanece en la memoria</span><span class="hljs-keyword"> Else</span><span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Problem during drop, try later"</span>)<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_extract"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_extract"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.extract()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v18 R3</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.extract</strong>( <em>attributePath</em> : Text { ;<em>option</em> : Integer } ) : Collection<br /><strong>.extract</strong>( <em>attributePath</em> { ;<em>targetPath</em> } { ; <em>...attributePathN</em> : Text ;<em>targetPathN</em> : Text } ) : Collection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>attributePath</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Ruta del atributo cuyos valores deben ser extraídos en la nuevacolección</td></tr><tr><td>targetPath</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Ruta o nombre del atributo objetivo</td></tr><tr><td>option</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>ck keep null</code>: incluye los atributos null en lacolección devuelta (ignorados por defecto)</td></tr><tr><td>Resultado</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Colección que contiene los valores extraídos</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-12"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-12"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.extract()</code> retorna una colección quecontiene los valores de <em>attributePath</em> extraídos de laentity selection.</p><p><em>attributePath</em> puede referirse a:</p><ul><li>un atributo escalar de dataclass,</li><li>entidad relacionada,</li><li>entidades relacionadas.</li></ul><p>Si <em>attributePath</em> no es válido, se devuelve unacolección vacía.</p><p>Esta función acepta dos sintaxis.</p><p><strong>.extract( attributePath : Text { ; option : Integer } ): Collection</strong></p><p>Con esta sintaxis, <code>.extract()</code> llena la coleccióndevuelta con los valores <em>attributePath</em> de la entityselection.</p><p>Por defecto, las entidades para las que <em>attributePath</em>es <em>null</em> o indefinida se ignoran en la colecciónresultante. Puede pasar la constante <code>ck keep null</code> enel parámetro <em>option</em> para incluir estos valores comoelementos <strong>null</strong> en la colección devuelta.</p><ul><li>Los atributos dataclass <a href="#EntitySelectionClass.html_kind">.kind</a> = "relatedEntity" seextraen como una colección de entidades (se mantienen lasduplicaciones).</li><li>Los atributos dataclass con <a href="#EntitySelectionClass.html_kind">.kind</a> = "relatedEntities" seextraen como una colección de entity selections.</li></ul><p><strong>.extract ( attributePath ; targetPath { ;...attributePathN ; ... targetPathN}) : Collection</strong></p><p>Con esta sintaxis, <code>.extract()</code> llena la coleccióndevuelta con las propiedades <em>attributePath</em>. Cada elementode la colección devuelta es un objeto con las propiedades<em>targetPath</em> llenadas con las propiedades<em>attributePath</em> correspondientes. Se mantienen los valoresnull (el parámetro <em>option</em> se ignora) con estasintaxis.</p><p>Si se dan varios <em>attributePath</em>, debe darse un<em>targetPath</em> para cada uno. Sólo se extraen los paresválidos [<em>attributePath</em>, <em>targetPath</em>].</p><ul><li>Los atributos dataclass con <a href="#EntitySelectionClass.html_kind">.kind</a> = "relatedEntity" seextraen como una entidad.</li><li>Los atributos dataclass con <a href="#EntitySelectionClass.html_kind">.kind</a> = "relatedEntities" seextraen como una entity selection.</li></ul><blockquote><p>Los valores Null se evalúan como inferiores a los otrosvalores.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-9"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Dada la siguiente tabla y relación:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/entityselection.PNG" /></p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$firstnames</span>; <span class="hljs-variable">$addresses</span>; <span class="hljs-variable">$mailing</span>; <span class="hljs-variable">$teachers </span>: Collection  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">//$firstnames es una colección de cadenas</span> <span class="hljs-variable">$firstnames</span>:=ds.Teachers.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"firstname"</span>)  <span class="hljs-comment">//  //$addresses es una colección de entidades relacionadas con la dataclass Address</span>  <span class="hljs-comment">//Se extraen los valores null de Address</span> <span class="hljs-variable">$addresses</span>:=ds.Teachers.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"address"</span>;ck keep null)  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">//$mailing es una colección de objetos con las propiedades "who" y "to"</span>  <span class="hljs-comment">//El contenido de la propiedad "who" es de tipo Cadena</span>  <span class="hljs-comment">//El contenido de la propiedad "to" es de tipo entity (dataclass Address)</span> <span class="hljs-variable">$mailing</span>:=ds.Teachers.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"lastname"</span>;<span class="hljs-string">"who"</span>;<span class="hljs-string">"address"</span>;<span class="hljs-string">"to"</span>)  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">//$mailing es una colección de objetos con las propiedades "who" y "city"</span>  <span class="hljs-comment">//El contenido de la propiedad "who" es de tipo Cadena</span>  <span class="hljs-comment">//El contenido de la propiedad "city" es de tipo Cadena</span> <span class="hljs-variable">$mailing</span>:=ds.Teachers.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"lastname"</span>;<span class="hljs-string">"who"</span>;<span class="hljs-string">"address.city"</span>;<span class="hljs-string">"city"</span>)  <span class="hljs-comment">//  //$teachers es una colección de objetos con las propiedades "where" y "who"</span>  <span class="hljs-comment">//El contenido de la propiedad "where" es de tipo Cadena</span>  <span class="hljs-comment">//El contenido de la propiedad "who" es una entity selection (dataclass Teachers)</span> <span class="hljs-variable">$teachers</span>:=ds.Address.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"city"</span>;<span class="hljs-string">"where"</span>;<span class="hljs-string">"teachers"</span>;<span class="hljs-string">"who"</span>)  <span class="hljs-comment">//  //$teachers es una colección de entity selections</span> <span class="hljs-variable">$teachers</span>:=ds.Address.<span class="hljs-function">all</span>().<span class="hljs-function">extract</span>(<span class="hljs-string">"teachers"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_first"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_first"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.first()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.first()</strong> : 4D.Entity</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>Resultado</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Referencia a la primera entidad de la entity selection (Null sila selección está vacía)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-13"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-13"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.first()</code> devuelve una referencia a laentidad en la primera posición de la entity selection.</p><p>El resultado de esta función es similar a:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySel</span>[<span class="hljs-number">0</span>]</code></pre><p>Sin embargo, hay una diferencia entre ambas afirmaciones cuandola selección está vacía:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entitySel </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity <span class="hljs-variable">$entitySel</span>:=ds.Emp.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"Nonexistentname"</span>) <span class="hljs-comment">//ninguna entidad correspondiente</span>  <span class="hljs-comment">//entity selection is then empty</span> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySel</span>.<span class="hljs-function">first</span>() <span class="hljs-comment">//devuelve Null</span> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySel</span>[<span class="hljs-number">0</span>]  <span class="hljs-comment">//genera un error</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-10"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entitySelection </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity <span class="hljs-variable">$entitySelection</span>:=ds.Emp.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-number">100000</span>)<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$entitySelection</span>.length#<span class="hljs-number">0</span>)    <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">first</span>()<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_getdataclass"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_getdataclass"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getDataClass()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17 R5</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.getDataClass()</strong> : 4D.DataClass</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>Resultado</td><td>4D.DataClass</td><td style="text-align:center">&lt;-</td><td>DataClass a la que pertenece la entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-14"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-14"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.getDataClass()</code> devuelve la dataclass dela entity selection.</p><p>Esta función es principalmente útil en el contexto del códigogenérico.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-11"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-11"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>El siguiente código genérico duplica todas las entidades de laentity selection:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//método duplicate_entities </span>  <span class="hljs-comment">//duplicate_entities($entity_selection)</span> #<span class="hljs-function">DECLARE </span>( <span class="hljs-variable">$entitySelection </span>: 4D.EntitySelection )<span class="hljs-keyword">   var</span> <span class="hljs-variable">$dataClass </span>: 4D.DataClass<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity</span>; <span class="hljs-variable">$duplicate </span>: 4D.Entity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$status </span>: Object <span class="hljs-variable">$dataClass</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">getDataClass</span>()<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$entity</span>;<span class="hljs-variable">$entitySelection</span>)    <span class="hljs-variable">$duplicate</span>:=<span class="hljs-variable">$dataClass</span>.<span class="hljs-function">new</span>()    <span class="hljs-variable">$duplicate</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$entity</span>.<span class="hljs-function">toObject</span>())    <span class="hljs-variable">$duplicate</span>[<span class="hljs-variable">$dataClass</span>.<span class="hljs-function">getInfo</span>().primaryKey]:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//restablecer la llave primaria</span>    <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$duplicate</span>.<span class="hljs-function">save</span>()<span class="hljs-keyword"> End for each</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_getremotecontextattributes"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_getremotecontextattributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getRemoteContextAttributes()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v19R5</td><td>Añadidos</td></tr></tbody></table></details><p>Devuelve:</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th></th><th>Descripción</th></tr></thead><tbody><tr><td>result</td><td>Texto</td><td>&lt;-</td><td>Atributos de contexto vinculados a la entity selection,separados por una coma</td></tr></tbody></table><blockquote><p><strong>Modo avanzado:</strong> esta función está pensada paralos desarrolladores que necesitan personalizar las funcionalidadespor defecto de ORDA para configuraciones específicas. En la mayoríade los casos, no será necesario utilizarla.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-15"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-15"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.getRemoteContextAttributes()</code> devuelveinformación sobre el contexto de optimización utilizado por laentity selection.</p><p>Si no hay <a href="#EntitySelectionClass.html_clientserver-optimization">contexto deoptimización</a> para la entity selection, la función devuelve untexto vacío.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-12"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-12"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$persons </span>: cs.PersonsSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$p </span>: cs.PersonsEntity<span class="hljs-keyword">var</span> <span class="hljs-variable">$info </span>: Text<span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$persons</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">all</span>()<span class="hljs-variable">$text</span>:=<span class="hljs-string">""</span><span class="hljs-keyword"> For each</span> (<span class="hljs-variable">$p</span>; <span class="hljs-variable">$persons</span>)    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$p</span>.firstname+<span class="hljs-string">" lives in "</span>+<span class="hljs-variable">$p</span>.address.city+<span class="hljs-string">" / "</span><span class="hljs-keyword"> End for each</span> <span class="hljs-variable">$info</span>:=<span class="hljs-variable">$persons</span>.<span class="hljs-function">getRemoteContextAttributes</span>()<span class="hljs-comment">//$info = "firstname,address,address.city"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ver-tambi%C3%A9n-1"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_ver-tambi%25C3%25A9n-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ver también</h4><p><a href="#EntitySelectionClass.html_getRemoteContextAttributes">Entity.getRemoteContextAttributes()</a><br /><a href="#EntitySelectionClass.html_clearallremotecontexts">.clearAllRemoteContexts()</a><br /><a href="#EntitySelectionClass.html_getremotecontextinfo">.getRemoteContextInfo()</a><br /><a href="#EntitySelectionClass.html_getallremotecontexts">.getAllRemoteContexts()</a><br /><a href="#EntitySelectionClass.html_setremotecontextinfo">.setRemoteContextInfo()</a></p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_isalterable"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_isalterable"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.isAlterable()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v18 R5</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.isAlterable()</strong> : Boolean</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>Resultado</td><td>Booleano</td><td style="text-align:center">&lt;-</td><td>True si la entity selection es modificable, de lo contrarioFalse</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-16"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-16"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.isAlterable()</code> devuelve True si laentity selection es modificable, y False si no lo es.</p><p>Para más información, consulte la sección <a href="#EntitySelectionClass.html_shareable-or-alterable-entity-selections">Entity selections compartibles o modificables</a>.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-13"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-13"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Va a mostrar <code>Form.products</code> en un <a href="#listboxOverview.html">list box</a> para que el usuario puedaañadir nuevos productos. Quiere asegurarse de que es modificablepara que el usuario pueda añadir nuevos productos sin error:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">If</span> (<span class="hljs-function">Not</span>(Form.products.<span class="hljs-function">isAlterable</span>()))    Form.products:=Form.products.<span class="hljs-function">copy</span>()<span class="hljs-keyword">End if</span>...Form.products.<span class="hljs-function">add</span>(Form.product)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_isordered"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_isordered"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.isOrdered()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.isOrdered()</strong> : Boolean</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>Resultado</td><td>Booleano</td><td style="text-align:center">&lt;-</td><td>True si la entity selection es ordenada, de lo contrarioFalse</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-17"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-17"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.isOrdered()</code> devuelve True si la entityselection está ordenada, y False si está desordenada.</p><blockquote><p>Esta función no modifica la selección de entidades original.</p></blockquote><p>Para más información, consulte <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">Entityselection ordenadas o desordenadas</a>.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-14"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-14"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$isOrdered </span>: Boolean <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">newSelection</span>(dk keep ordered) <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">714</span>) <span class="hljs-comment">// Obtiene la entidad con llave primaria 714</span>  <span class="hljs-comment">//En una entity selection ordenada, podemos añadir la misma entidad varias veces (los duplicados se mantienen)</span> <span class="hljs-variable">$employees</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-variable">$employees</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-variable">$employees</span>.<span class="hljs-function">add</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-variable">$isOrdered</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">isOrdered</span>()<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$isOrdered</span>)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"The entity selection is ordered and contains "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$employees</span>.length)+<span class="hljs-string">" employees"</span>)<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_last"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_last"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.last()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.last()</strong> : 4D.Entity</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>Resultado</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Referencia a la última entidad de la entity selection (Null sila entity selection está vacía)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-18"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-18"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.last()</code> devuelve una referencia a laentidad en última posición de la entity selection.</p><p>El resultado de esta función es similar a:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySel</span>[length<span class="hljs-number">-1</span>]</code></pre><p>Si la entity selection está vacía, la función devuelve Null.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-15"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-15"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entitySelection </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmpEntity <span class="hljs-variable">$entitySelection</span>:=ds.Emp.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &lt; :1"</span>;<span class="hljs-number">50000</span>)<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$entitySelection</span>.length#<span class="hljs-number">0</span>)    <span class="hljs-variable">$entity</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">last</span>()<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_length"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_length"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.length</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.length</strong>: Integer</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-19"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-19"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La propiedad <code>.length</code> devuelve el número deentidades en la entity selection. Si la entity selection estávacía, devuelve 0.</p><p>Las entity selections siempre tienen una propiedad<code>.length</code>.</p><blockquote><p>Las entidades de una colección de entidades a las que se accedepor medio de [ ] no se recargan desde la base de datos.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-16"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-16"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$vSize </span>: Integer <span class="hljs-variable">$vSize</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"gender = :1"</span>;<span class="hljs-string">"male"</span>).length<span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(vSize)+<span class="hljs-string">" male employees found."</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_max"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_max"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.max()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr><tr><td>v18 R6</td><td>Devuelve undefined si la entity selection está vacía</td></tr></tbody></table></details><p><strong>.max</strong>( <em>attributePath</em> : Text ) : any</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th></th><th>Descripción</th></tr></thead><tbody><tr><td>attributePath</td><td>Texto</td><td>-&gt;</td><td>Ruta del atributo que se utilizará para el cálculo</td></tr><tr><td>Resultado</td><td>any</td><td>&lt;-</td><td>Valor más alto del atributo</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-20"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-20"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.max()</code> devuelve el valor más alto (omáximo) entre todos los valores de <em>attributePath</em> en laentity selection. En realidad devuelve el valor de la últimaentidad de la selección de entidades tal y como se ordenaría deforma ascendente utilizando la función <a href="#EntitySelectionClass.html_orderby"><code>.orderBy()</code></a>.</p><p>Si se pasa en <em>attributePath</em> una ruta a una propiedad deobjeto que contiene diferentes tipos de valores, la función<code>.max()</code> devolverá el valor máximo dentro del primertipo escalar en el orden de la lista de tipos 4D por defecto (verla descripción de <a href="#EntitySelectionClass.html_sort"><code>.sort()</code></a>).</p><p><code>.max()</code> devuelve <strong>undefined</strong> si laentity selection está vacía o si <em>attributePath</em> no seencuentra en el atributo objeto.</p><p>Se devuelve un error si:</p><ul><li><em>&gt;attributePath</em> es un atributo relativo,</li><li><em>attributePath</em> designa un atributo que no existe en ladataclass de la entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-17"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-17"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Queremos encontrar el salario más alto entre todas lasempleadas:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$maxSalary </span>: Real <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"gender = :1"</span>;<span class="hljs-string">"female"</span>) <span class="hljs-variable">$maxSalary</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">max</span>(<span class="hljs-string">"salary"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_min"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_min"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.min()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr><tr><td>v18 R6</td><td>Devuelve undefined si la entity selection está vacía</td></tr></tbody></table></details><p><strong>.min</strong>( <em>attributePath</em> : Text ) : any</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>attributePath</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Ruta del atributo que se utilizará para el cálculo</td></tr><tr><td>Resultado</td><td>any</td><td style="text-align:center">&lt;-</td><td>Valor más bajo del atributo</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-21"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-21"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.min()</code> devuelve el valor más bajo (omínimo) entre todos los valores de attributePath en la entityselection. En realidad devuelve el valor de la primera entidad dela selección si se ordenara de forma ascendente utilizando lafunción <a href="#EntitySelectionClass.html_orderby"><code>.orderBy()</code></a>(excluyendo los valores <strong>null</strong>).</p><p>Si se pasa en <em>attributePath</em> una ruta a una propiedadobjeto que contiene diferentes tipos de valores, la función<code>.min()</code> devolverá el valor mínimo dentro del primertipo de valor escalar en el orden de la lista de tipos (ver ladescripción de <a href="#EntitySelectionClass.html_sort"><code>.sort()</code></a>).</p><p><code>.min()</code> devuelve <strong>undefined</strong> si laentity selection está vacía o si <em>attributePath</em> no seencuentra en el atributo objeto.</p><p>Se devuelve un error si:</p><ul><li><em>&gt;attributePath</em> es un atributo relativo,</li><li><em>attributePath</em> designa un atributo que no existe en ladataclass de la entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-18"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-18"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>En este ejemplo, queremos encontrar el salario más bajo entretodas las empleadas:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel </span>: cs.EmpSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$minSalary </span>: Real <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"gender = :1"</span>;<span class="hljs-string">"female"</span>) <span class="hljs-variable">$minSalary</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">min</span>(<span class="hljs-string">"salary"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_minus"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_minus"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.minus()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.minus</strong>( <em>entity</em> : 4D.Entity ) :4D.EntitySelection<br /><strong>.minus</strong>( <em>entitySelection</em> :4D.EntitySelection ) : 4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entidad a sustraer</td></tr><tr><td>entitySelection</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Entity selection a sustraer</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nueva entity selection o una nueva referencia en la entityselection existente</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-22"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-22"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.minus()</code> excluye de la entity selectiona la que se aplica la <em>entity</em> o las entidades de<em>entitySelection</em> y devuelve la entity selectionresultante.</p><ul><li>Si se pasa <em>entity</em> como parámetro, la función crea unanueva entity selection sin <em>entity</em> (si <em>entity</em>pertenece a la entity selection). Si <em>entity</em> no estabaincluida en la entity selection original, se devuelve una nuevareferencia a la entity selection.</li><li>Si se pasa <em>entitySelection</em> como parámetro, la funcióndevuelve una entity selection que contiene las entidadespertenecientes a la entity selection original sin las entidadespertenecientes a <em>entitySelection</em>.</li></ul><blockquote><blockquote><p>Puede comparar <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">entityselections ordenadas y/o desordenadas</a>. La selección resultantees siempre desordenada.</p></blockquote></blockquote><p>Si la entity selection inicial o la entity selection inicial yla del parámetro <em>entitySelection</em> están vacías, se devuelveuna entity selection vacía.</p><p>Si <em>entitySelection</em> está vacía o si <em>entity</em> esNull, se devuelve una nueva referencia a la entity selectionoriginal.</p><p>Si la entity selection inicial y el parámetro no estánrelacionados con la misma dataclass, se produce un error.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-4"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$result </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>)   <span class="hljs-comment">// la entity selection $employees contiene la entidad con llave primaria 710 y otras entidades</span>  <span class="hljs-comment">// por ejemplo. "Colin Hetrick", "Grady Harness", "Sherlock Holmes" (primary key 710)</span> <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">710</span>) <span class="hljs-comment">// Devuelve "Sherlock Holmes"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">minus</span>(<span class="hljs-variable">$employee</span>) <span class="hljs-comment">//$result contiene "Colin Hetrick", "Grady Harness"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-4"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Queremos tener una selección de empleadas llamadas "Jones" quevivan en Nueva York :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sel1</span>; <span class="hljs-variable">$sel2</span>; <span class="hljs-variable">$sel3 </span>: cs.EmployeeSelection <span class="hljs-variable">$sel1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"name =:1"</span>;<span class="hljs-string">"Jones"</span>) <span class="hljs-variable">$sel2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"city=:1"</span>;<span class="hljs-string">"New York"</span>) <span class="hljs-variable">$sel3</span>:=<span class="hljs-variable">$sel1</span>.<span class="hljs-function">and</span>(<span class="hljs-variable">$sel2</span>).<span class="hljs-function">minus</span>(ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"gender='male'"</span>))</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_or"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_or"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.or()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.or</strong>( <em>entity</em> : 4D.Entity ) :4D.EntitySelection<br /><strong>.or</strong>( <em>entitySelection</em> : 4D.EntitySelection) : 4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>entity</td><td>4D.Entity</td><td style="text-align:center">-&gt;</td><td>Entidad a intersectar</td></tr><tr><td>entitySelection</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Entity selection a intersectar</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nueva entity selection o una nueva referencia a la entityselection de origen</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-23"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-23"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.or()</code> combina la entity selection con elparámetro <em>entity</em> o <em>entitySelection</em> utilizando eloperador lógico (no excluyente) OR; devuelve una nuevaentitySelection no ordenada que contiene todas las entidades de laentitySelection y del parámetro.</p><ul><li>Si pasa <em>entity</em> como parámetro, se compara esta entidadcon la entity selection. Si la entidad pertenece a la entityselection, se devuelve una nueva referencia a la entity selection.En caso contrario, se devuelve una nueva entity selection quecontiene la entity selection original y la entidad.</li><li>Si pasa <em>entitySelection</em> como parámetro, compara ambasentity selections. Se devuelve una nueva entity selection quecontiene las entidades pertenecientes a la selección de entidadesoriginal o <em>entitySelection</em> (o no es exclusiva, lasentidades referenciadas en ambas selecciones no se duplican en laselección resultante).</li></ul><blockquote><blockquote><p>Puede comparar <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">entityselections ordenadas y/o desordenadas</a>. La selección resultantees siempre desordenada.</p></blockquote></blockquote><p>Si la entity selection inicial y la del parámetro<em>entitySelection</em> están vacías, se devuelve una entityselection vacía. Si la entity selection original está vacía, sedevuelve una referencia a <em>entitySelection</em> o una entityselection que sólo contiene <em>entity</em>.</p><p>Si <em>entitySelection</em> está vacía o si <em>entity</em> esNull, se devuelve una nueva referencia a la entity selectionoriginal.</p><p>Si la entity selection inicial y el parámetro no estánrelacionados con la misma dataclass, se produce un error.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-5"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees1</span>; <span class="hljs-variable">$employees2</span>; <span class="hljs-variable">$result </span>: cs.EmployeeSelection <span class="hljs-variable">$employees1</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">//Devuelve "Colin Hetrick","Grady Harness"</span> <span class="hljs-variable">$employees2</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName = :1"</span>;<span class="hljs-string">"C@"</span>) <span class="hljs-comment">//Devuelve "Colin Hetrick", "Cath Kidston"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employees1</span>.or(<span class="hljs-variable">$employees2</span>) <span class="hljs-comment">//$result contiene "Colin Hetrick", "Grady Harness","Cath Kidston"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-5"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees</span>; <span class="hljs-variable">$result </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employee </span>: cs.EmployeeEntity <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"H@"</span>) <span class="hljs-comment">// Devuelve "Colin Hetrick","Grady Harness", "Sherlock Holmes"</span> <span class="hljs-variable">$employee</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">686</span>) <span class="hljs-comment">//la entidad con llave primaria 686 no pertenece a la entity selection $employees </span>  <span class="hljs-comment">//Coincide con la empleada "Mary Smith"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$employees</span>.or(<span class="hljs-variable">$employee</span>) <span class="hljs-comment">//$result contiene "Colin Hetrick", "Grady Harness", "Sherlock Holmes", "Mary Smith"</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_orderby"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_orderby"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.orderBy()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.orderBy</strong>( <em>pathString</em> : Text ) :4D.EntitySelection<br /><strong>.orderBy</strong>( <em>pathObjects</em> : Collection ) :4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>pathString</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Ruta(s) de atributos e instrucciones de clasificación para laentity selection</td></tr><tr><td>pathObjects</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Colección de objetos criterio</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nueva entity selection en el orden especificado</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-24"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-24"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.orderBy()</code> devuelve una nueva entityselection ordenada que contiene todas las entidades de la entityselection en el orden especificado por los criterios<em>pathString</em> o <em>pathObjects</em>.</p><blockquote><ul><li>Este método no modifica la selección de entidadesoriginal.</li></ul></blockquote><ul><li>Para más información, consulte la sección <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">Entityselections ordenada o no ordenadas</a>.</li></ul><p>Debe utilizar un parámetro de criterio para definir cómo debenordenarse las entidades. Se soportan dos parámetros diferentes:</p><ul><li><em>pathString</em> (Texto): este parámetro contiene unafórmula compuesta de rutas de atributo de 1 a x y (opcionalmente)órdenes de clasificación, separados por comas. La sintaxis es:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-string">"attributePath1 {desc or asc}, attributePath2 {desc or asc},..."</span></code></pre><p>El orden en que se pasan los atributos determina la prioridad deordenación de las entidades. Por defecto, los atributos seclasifican en orden ascendente. Puede definir el orden declasificación de una propiedad en la cadena de criterios, separadode la ruta de la propiedad por un solo espacio: pase "asc" paraordenar en orden ascendente o "desc" en orden descendente.</p><ul><li><em>pathObjects</em> (collection): cada elemento de lacolección contiene un objeto estructurado de la siguientemanera:</li></ul><pre><code class="hljs css language-4d">{    <span class="hljs-string">"propertyPath"</span>: string,    <span class="hljs-string">"descending"</span>: boolean}</code></pre><p>Por defecto, los atributos se clasifican en orden ascendente("descending" es false).</p><p>Puede añadir tantos objetos en la colección de criterios comosea necesario.</p><blockquote><p>Esta función sólo funciona con un datastore remoto(cliente/servidor o conexión <code>Open datastore</code>).</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-19"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-19"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-comment">// orden con fórmula</span> <span class="hljs-variable">$sortedEntitySelection</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">orderBy</span>(<span class="hljs-string">"firstName asc, salary desc"</span>) <span class="hljs-variable">$sortedEntitySelection</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">orderBy</span>(<span class="hljs-string">"firstName"</span>)  <span class="hljs-comment">// orden con collection con o sin órdenes de clasificación</span> <span class="hljs-variable">$orderColl</span>:=New collection <span class="hljs-variable">$orderColl</span>.<span class="hljs-function">push</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"propertyPath"</span>;<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"descending"</span>;<span class="hljs-literal">False</span>)) <span class="hljs-variable">$orderColl</span>.<span class="hljs-function">push</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"propertyPath"</span>;<span class="hljs-string">"salary"</span>;<span class="hljs-string">"descending"</span>;<span class="hljs-literal">True</span>)) <span class="hljs-variable">$sortedEntitySelection</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">orderBy</span>(<span class="hljs-variable">$orderColl</span>) <span class="hljs-variable">$orderColl</span>:=New collection <span class="hljs-variable">$orderColl</span>.<span class="hljs-function">push</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"propertyPath"</span>;<span class="hljs-string">"manager.lastName"</span>)) <span class="hljs-variable">$orderColl</span>.<span class="hljs-function">push</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"propertyPath"</span>;<span class="hljs-string">"salary"</span>)) <span class="hljs-variable">$sortedEntitySelection</span>:=<span class="hljs-variable">$entitySelection</span>.<span class="hljs-function">orderBy</span>(<span class="hljs-variable">$orderColl</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_orderbyformula"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_orderbyformula"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.orderByFormula()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17 R6</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.orderByFormula</strong>( <em>formulaString</em> : Text{ ; <em>sortOrder</em> : Integer } { ; <em>settings</em> : Object}) : 4D.EntitySelection<br /><strong>.orderByFormula</strong>( <em>formulaObj</em> : Object { ;<em>sortOrder</em> : Integer } { ; <em>settings</em> : Object} ) :4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>formulaString</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Cadena formula</td></tr><tr><td>formulaObj</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Objeto formula</td></tr><tr><td>sortOrder</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk ascending</code> (por defecto) o<code>dkdescending</code></td></tr><tr><td>parámetros</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Parámetros de la fórmula</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nueva entity selection ordenada</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-25"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-25"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.orderByFormula()</code> devuelve una nuevaentity selection ordenada que contiene todas las entidades de laentity selection en el orden definido a través de los parámetros<em>formulaString</em> o <em>formulaObj</em> y, opcionalmente,<em>sortOrder</em> y <em>settings</em>.</p><blockquote><p>Las entidades de una colección de entidades a las que se accedepor medio de [ ] no se recargan desde la base de datos.</p></blockquote><p>Puede utilizar un parámetro <em>formulaString</em> o unparámetro <em>formulaObj</em>:</p><ul><li><em>formulaString</em>: se pasa una expresión 4D como "Yearof(this.birthDate)".</li><li><em>formulaObj</em>: pase un objeto fórmula válido creado conel comando <code>Formula</code> o <code>Formula fromstring</code>.</li></ul><p>La fórmula de <em>formulaString</em> o <em>formulaObj</em> seejecuta para cada entidad de la entity selection y su resultado seutiliza para definir la posición de la entidad en la entityselection devuelta. El resultado debe ser de un tipo ordenable(booleano, fecha, número, texto, hora, null).</p><blockquote><p>Un resultado null es siempre el valor más pequeño.</p></blockquote><p>Por defecto, si se omite el parámetro <em>sortOrder</em>, laselección de entidades resultante se clasifica en orden ascendente.Opcionalmente, puede pasar uno de los siguientes valores en elparámetro <em>sortOrder</em>:</p><table><thead><tr><th>Constante</th><th>Valor</th><th>Comentario</th></tr></thead><tbody><tr><td>dk ascending</td><td>0</td><td>Orden ascendente (por defecto)</td></tr><tr><td>dk descending</td><td>1</td><td>Orden descendente</td></tr></tbody></table><p>Dentro de <em>formulaString</em> o <em>formulaObj</em>, laentidad procesada y, por tanto, sus atributos están disponibles através del comando <code>This</code> (por ejemplo,<code>This.lastName</code>).</p><p>Puede pasar parámetros a la fórmula utilizando la propiedad<code>args/0&gt; (objeto) del parámetro&lt;code&gt;settings</code>: la fórmula recibe el objeto<code>settings.args</code> en $1.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-6"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><p>Clasificar a los alumnos mediante una fórmula dada comotexto:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es1</span>; <span class="hljs-variable">$es2 </span>: cs.StudentsSelection <span class="hljs-variable">$es1</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality=:1"</span>;<span class="hljs-string">"French"</span>) <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.<span class="hljs-function">orderByFormula</span>(<span class="hljs-string">"length(this.lastname)"</span>) <span class="hljs-comment">//ascendente por defecto</span> <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.<span class="hljs-function">orderByFormula</span>(<span class="hljs-string">"length(this.lastname)"</span>;dk descending)</code></pre><p>El mismo orden de clasificación pero utilizando un objetofórmula:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es1</span>; <span class="hljs-variable">$es2 </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula </span>: Object <span class="hljs-variable">$es1</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality=:1"</span>;<span class="hljs-string">"French"</span>) <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)) <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.<span class="hljs-function">orderByFormula</span>(<span class="hljs-variable">$formula</span>) <span class="hljs-comment">// ascendente por defecto</span> <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.<span class="hljs-function">orderByFormula</span>(<span class="hljs-variable">$formula</span>;dk descending)</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-6"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Una fórmula se da como un objeto fórmula con parámetros; elobjeto <code>settings.args</code> se recibe como $1 en el método<strong><em>computeAverage</em></strong>.</p><p>En este ejemplo, el campo objeto "marks" de la dataClass<strong>Students</strong> contiene las notas de los estudiantespara cada asignatura. Se utiliza un solo objeto fórmula paracalcular la nota media de un alumno con diferentes coeficientespara schoolA y schoolB.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es1</span>; <span class="hljs-variable">$es2 </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula</span>; <span class="hljs-variable">$schoolA</span>; <span class="hljs-variable">$schoolB </span>: Object <span class="hljs-variable">$es1</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality=:1"</span>;<span class="hljs-string">"French"</span>) <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">computeAverage</span>(<span class="hljs-variable">$1</span>)) <span class="hljs-variable">$schoolA</span>:=<span class="hljs-function">New object</span>() <span class="hljs-comment">//settings object</span> <span class="hljs-variable">$schoolA</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"english"</span>;<span class="hljs-number">1</span>;<span class="hljs-string">"math"</span>;<span class="hljs-number">1</span>;<span class="hljs-string">"history"</span>;<span class="hljs-number">1</span>) <span class="hljs-comment">// Coeficientes para calcular una media</span>  <span class="hljs-comment">//Ordenar a los estudiantes según los criterios de la escuela A</span> <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.entitySelection.<span class="hljs-function">orderByFormula</span>(<span class="hljs-variable">$formula</span>;<span class="hljs-variable">$schoolA</span>) <span class="hljs-variable">$schoolB</span>:=<span class="hljs-function">New object</span>() <span class="hljs-comment">//object settings </span> <span class="hljs-variable">$schoolB</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"english"</span>;<span class="hljs-number">1</span>;<span class="hljs-string">"math"</span>;<span class="hljs-number">2</span>;<span class="hljs-string">"history"</span>;<span class="hljs-number">3</span>) <span class="hljs-comment">// Coeficientes para calcular un promedio</span>  <span class="hljs-comment">//Ordenar a los estudiantes según los criterios de la escuela B</span> <span class="hljs-variable">$es2</span>:=<span class="hljs-variable">$es1</span>.entitySelection.<span class="hljs-function">orderByFormula</span>(<span class="hljs-variable">$formula</span>;dk descending;<span class="hljs-variable">$schoolB</span>)</code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">//  // método computeAverage </span>  <span class="hljs-comment">// -----------------------------</span> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$coefList </span>: Object) -&gt; <span class="hljs-variable">$result </span>: Integer<span class="hljs-keyword"> var</span> <span class="hljs-variable">$subject </span>: Text<span class="hljs-keyword"> var</span> <span class="hljs-variable">$average</span>; <span class="hljs-variable">$sum </span>: Integer <span class="hljs-variable">$average</span>:=<span class="hljs-number">0</span> <span class="hljs-variable">$sum</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$subject</span>;<span class="hljs-variable">$coefList</span>)    <span class="hljs-variable">$sum</span>:=<span class="hljs-variable">$sum</span>+<span class="hljs-variable">$coefList</span>[<span class="hljs-variable">$subject</span>]<span class="hljs-keyword"> End for each</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$subject</span>;<span class="hljs-literal">This</span>.marks)    <span class="hljs-variable">$average</span>:=<span class="hljs-variable">$average</span>+(<span class="hljs-literal">This</span>.marks[<span class="hljs-variable">$subject</span>]*<span class="hljs-variable">$coefList</span>[<span class="hljs-variable">$subject</span>])<span class="hljs-keyword"> End for each</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$average</span>/<span class="hljs-variable">$sum</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_query"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_query"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.query()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17 R6</td><td>Soporte de los parámetros Formula</td></tr><tr><td>v17 R5</td><td>Soporte de los marcadores para los valores</td></tr><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.query</strong>( <em>queryString</em> : Text { ;<em>...value</em> : any } { ; <em>querySettings</em> : Object } ) :4D.EntitySelection<br /><strong>.query</strong>( <em>formula</em> : Object { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>queryString</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Criterios de búsqueda como cadena</td></tr><tr><td>formula</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Criterios de búsqueda como objeto fórmula</td></tr><tr><td>value</td><td>any</td><td style="text-align:center">-&gt;</td><td>Valor(es) a utilizar para los marcadores de posiciónindexados</td></tr><tr><td>querySettings</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Opciones de búsqueda: parameters, attributes, args,allowFormulas, context, queryPath, queryPlan</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nueva selección de entidades formada por las entidades de laentity selection que cumplen los criterios de búsquedaespecificados en <em>queryString</em> o<em>formula</em></td><td></td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-26"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-26"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.query()</code> busca entidades que cumplan loscriterios de búsqueda especificados en <em>queryString</em> o<em>formula</em> y (opcionalmente) <em>value</em>(s) entre todaslas entidades de la selección de entidades, y devuelve un nuevoobjeto de tipo <code>EntitySelection</code> que contiene todas lasentidades encontradas. Se aplica carga diferida.</p><blockquote><p>Las entidades de una colección de entidades a las que se accedepor medio de [ ] no se recargan desde la base de datos.</p></blockquote><p>Si no se encuentran entidades coincidentes, se devuelve una<code>EntitySelection</code> vacía.</p><p>Si no se encuentran entidades coincidentes, se devuelve una<code>EntitySelection</code> vacía.</p><blockquote><p>Por defecto, si se omite la declaración <strong>orderby</strong> en <em>queryString</em>, la entity selection devueltaes <a href="#EntitySelectionClass.html_ordered-or-unordered-entity-selection">noordenada</a>. Sin embargo, tenga en cuenta que, en modoCliente/Servidor, se comporta como una selección de entidadesordenada (las entidades se añaden al final de la selección).</p></blockquote><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-7"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entitySelectionTemp </span>: cs.EmployeeSelection <span class="hljs-variable">$entitySelectionTemp</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1"</span>;<span class="hljs-string">"M@"</span>) Form.emps:=<span class="hljs-variable">$entitySelectionTemp</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"manager.lastName = :1"</span>;<span class="hljs-string">"S@"</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-7"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Para obtener información detallada sobre cómo construir unaconsulta utilizando los parámetros <em>queryString</em>,<em>value&lt;</em> y <em>querySettings</em>, consulte ladescripción de la función de dataClass <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ver-tambi%C3%A9n-2"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_ver-tambi%25C3%25A9n-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ver también</h4><p>Se pueden encontrar más ejemplos de búsquedas en la página<a href="#EntitySelectionClass.html_query"><code>.query()</code></a>DataClass.</p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_querypath"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_querypath"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.queryPath</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.queryPath</strong> : Text</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-27"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-27"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La propiedad <code>.queryPath</code> contiene una descripcióndetallada de la búsqueda tal y como fue realizada por 4D. Estapropiedad está disponible para los objetos de tipo<code>EntitySelection</code> generados a través de búsquedas si lapropiedad <code>"queryPath":true</code> fue pasada en el parámetro<em>querySettings</em> de la función <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>.</p><p>Para más información, consulte el párrafo<strong>querySettings</strong> en la página <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>Dataclass.</p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_queryplan"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_queryplan"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.queryPlan</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.queryPlan</strong> : Text</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-28"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-28"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La propiedad <code>.queryPlan</code> contiene una descripcióndetallada de la búsqueda justo antes de su ejecución (es decir, labúsqueda planeada). Esta propiedad está disponible para los objetosde tipo <code>EntitySelection</code> generados a través debúsquedas si la propiedad <code>"queryPlan":true</code> fue pasadaen el parámetro <em>querySettings</em> de la función <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>.</p><p>Para más información, consulte el párrafo<strong>querySettings</strong> en la página <a href="#EntitySelectionClass.html_query"><code>.query()</code></a>Dataclass.</p><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_refresh"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_refresh"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.refresh()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v18 R3</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.refresh()</strong></p><p>| Parámetros | Tipo | | Descripción | | ---------- | ---- |::|---------------------------- | | | | | No requiere ningún parámetro|</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-29"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-29"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><blockquote><p>Esta función sólo funciona con un datastore remoto(cliente/servidor o conexión <code>Open datastore</code>).</p></blockquote><p>La función <code>.refresh()</code> invalida inmediatamente losdatos de la entity selection en la caché local de ORDA para que lapróxima vez que 4D requiera la entity selection, ésta sea recargadadesde la base.</p><p>Por defecto, la caché local de ORDA se invalida después de 30segundos. En el contexto de las aplicaciones cliente/servidor queutilizan tanto ORDA como el lenguaje clásico, este método lepermite asegurarse de que una aplicación remota siempre funcionarácon los datos más recientes.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-8"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><p>En este ejemplo, el código clásico y el código ORDA modificanlos mismos datos simultáneamente:</p><pre><code class="hljs css language-4d"> <span class="hljs-comment">//En un 4D remoto</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$selection </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$student </span>: cs.StudentsEntity <span class="hljs-variable">$selection</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"lastname=:1"</span>;<span class="hljs-string">"Collins"</span>)  <span class="hljs-comment">//La primera entidad se carga en la caché de ORDA</span> <span class="hljs-variable">$student</span>:=<span class="hljs-variable">$selection</span>.<span class="hljs-function">first</span>()  <span class="hljs-comment">//Actualización con un 4D clásico, la caché ORDA no es consciente de si</span><span class="hljs-function"> QUERY</span>([Students];[Students]lastname=<span class="hljs-string">"Collins"</span>) [Students]lastname:=<span class="hljs-string">"Colin"</span><span class="hljs-function"> SAVE RECORD</span>([Students])  <span class="hljs-comment">//para obtener la última versión, hay que invalidar la caché de ORDA</span> <span class="hljs-variable">$selection</span>.<span class="hljs-function">refresh</span>()  <span class="hljs-comment">// Aunque la caché no haya caducado, la primera entidad se recarga desde el disco</span> <span class="hljs-variable">$student</span>:=<span class="hljs-variable">$selection</span>.<span class="hljs-function">first</span>()  <span class="hljs-comment">//$student.lastname contains "Colin"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-8"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>En este ejemplo, el código clásico y el código ORDA modificanlos mismos datos simultáneamente:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Método formulario: Case of</span>    :(Form event code=On Load)       Form.students:=ds.Students.<span class="hljs-function">all</span>()<span class="hljs-keyword"> End case</span>  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">// En client #1, el usuario carga, actualiza y guarda la primera entidad</span>  <span class="hljs-comment">// En client #2, el usuario carga, actualiza y guarda la misma entidad</span>  <span class="hljs-comment">//  //</span>  <span class="hljs-comment">// En client #1:</span> Form.students.<span class="hljs-function">refresh</span>() <span class="hljs-comment">// Invalida la caché ORDA para la entity selection Form.students </span>  <span class="hljs-comment">// El contenido del list box se refresca desde la base con la actualización realizada por el cliente #2</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_selected"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_selected"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.selected()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v19 R3</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.selected</strong>( <em>selectedEntities</em> :4D.EntitySelection ) : Object</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>selectedEntities</td><td>4D.EntitySelection</td><td style="text-align:center">-&gt;</td><td>Selección de entidades con entidades para las cuales conocer elrango en la selección de entidades</td></tr><tr><td>Resultado</td><td>Objeto</td><td style="text-align:center">&lt;-</td><td>Rango(s) de entidades seleccionadas en la selección deentidades</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-30"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-30"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.selected()</code> devuelve un objeto quedescribe la(s) posición(es) de <em>selectedEntities</em> en laselección de entidades original.</p><blockquote><p>Las entidades de una colección de entidades a las que se accedepor medio de [ ] no se recargan desde la base de datos.</p></blockquote><p>Pase en el parámetro <em>selectedEntities</em> una selección deentidades que contenga entidades de las que desee conocer laposición en la selección de entidades original.<em>selectedEntities</em> debe ser una selección de entidades quepertenezca a la misma clase de datos que la selección de entidadesoriginal, de lo contrario se produce un error 1587 - "La selecciónde entidades procede de una clase de datos incompatible".</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_resultado"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_resultado"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Resultado</h4><p>El objeto devuelto contiene las siguientes propiedades:</p><table><thead><tr><th>Propiedad</th><th>Tipo</th><th>Descripción</th></tr></thead><tbody><tr><td>ranges</td><td>Collection</td><td>Colección de objetos de rango</td></tr><tr><td>ranges[].start</td><td>Integer</td><td>Primer índice de entidad en el rango</td></tr><tr><td>ranges[].end</td><td>Integer</td><td>Último índice de la entidad en el rango</td></tr></tbody></table><p>Si una propiedad <code>ranges</code> contiene una sola entidad,<code>start</code> = <code>end</code>. El índice comienza en 0.</p><p>La función devuelve una colección vacía en la propiedad<code>ranges</code> si la selección de entidades original o laselección de entidades <em>selectedEntities</em> está vacía.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-20"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-20"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$invoices</span>; <span class="hljs-variable">$cashSel</span>; <span class="hljs-variable">$creditSel </span>: cs.Invoices<span class="hljs-keyword">var</span> <span class="hljs-variable">$result1</span>; <span class="hljs-variable">$result2 </span>: Object<span class="hljs-variable">$invoices</span>:=ds.Invoices.<span class="hljs-function">all</span>()<span class="hljs-variable">$cashSelection</span>:=ds.Invoices.<span class="hljs-function">query</span>(<span class="hljs-string">"payment = :1"</span>; <span class="hljs-string">"Cash"</span>)<span class="hljs-variable">$creditSel</span>:=ds.Invoices.<span class="hljs-function">query</span>(<span class="hljs-string">"payment IN :1"</span>;<span class="hljs-function"> New collection</span>(<span class="hljs-string">"Cash"</span>; <span class="hljs-string">"Credit Card"</span>))<span class="hljs-variable">$result1</span>:=<span class="hljs-variable">$invoices</span>.<span class="hljs-function">selected</span>(<span class="hljs-variable">$cashSelection</span>)<span class="hljs-variable">$result2</span>:=<span class="hljs-variable">$invoices</span>.<span class="hljs-function">selected</span>(<span class="hljs-variable">$creditSel</span>)<span class="hljs-comment">//$result1 = {ranges:[{start:0;end:0},{start:3;end:3},{start:6;end:6}]}</span><span class="hljs-comment">//$result2 = {ranges:[{start:0;end:1},{start:3;end:4},{start:6;end:7}]}</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_slice"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_slice"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.slice()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.slice</strong>( <em>startFrom</em> : Integer { ;<em>end</em> : Integer } ) : 4D.EntitySelection</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>startFrom</td><td>Integer</td><td style="text-align:center">-&gt;</td><td>Índice para iniciar la operación (incluído)</td></tr><tr><td>end</td><td>Integer</td><td style="text-align:center">-&gt;</td><td>Índice final (no incluido)</td></tr><tr><td>Resultado</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Nueva entity selection que contiene la entidades extraídas(shallow copy)</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-31"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-31"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.slice()</code> devuelve una parte de unaselección de entidades en una nueva entity selection, seleccionadadesde el índice <em>startFrom</em> hasta el índice <em>end</em>(<em>end</em> no se incluye) o hasta la última entidad de la entityselection. Este método devuelve una shallow copy (copiasuperficial) de la entity selection (utiliza las mismas referenciasde entidades).</p><blockquote><p>Las entidades de una colección de entidades a las que se accedepor medio de [ ] no se recargan desde la base de datos.</p></blockquote><p>La entity selection devuelta contiene las entidadesespecificadas por <em>startFrom</em> y todas las entidadessubsiguientes hasta, pero sin incluir, la entidad especificada por<em>end</em>. Si sólo se especifica el parámetro<em>startFrom</em>, la entity selection devuelta contiene todas lasentidades entre <em>startFrom</em> y la última entidad de la entityselection original.</p><ul><li>Si <em>startFrom</em> &lt; 0, se recalcula como<em>startFrom:=startFrom+length</em>(se considera el desplazamientodesde el final de la entity selection). Si el valor calculado &lt;0, <em>startFrom</em> toma el valor 0.</li><li>Si <em>startFrom &gt;= length</em>, la función devuelve unaselección de entidades vacía.</li><li>Si <em>end</em> &lt; 0, se recalcula como<em>end:=end+length</em>.</li><li>Si <em>end &lt; startFrom</em> (valores pasados o calculados),el método no hace nada.</li></ul><p><code>.sum()</code> devuelve 0 si la entity selection estávacía.</p><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-9"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><p>Si la entity selection contiene entidades que se han eliminadomientras tanto, también se devuelven.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$sel</span>; <span class="hljs-variable">$sliced </span>: cs.EmployeeSelection<span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-number">50000</span>)<span class="hljs-variable">$sliced</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">slice</span>(<span class="hljs-number">0</span>;<span class="hljs-number">9</span>) <span class="hljs-comment">//</span></code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-9"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Quiere obtener una selección de las primeras 9 entidades de laentity selection:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$slice </span>: cs.EmployeeSelection<span class="hljs-variable">$slice</span>:=ds.Employee.<span class="hljs-function">all</span>().<span class="hljs-function">slice</span>(<span class="hljs-number">-1</span>;<span class="hljs-number">-2</span>) <span class="hljs-comment">//intenta devolver entidades del índice 9 al 8, pero como 9 &gt; 8, devuelve una entity selection vacía</span></code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_sum-"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_sum-"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.sum( )</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.sum</strong>( <em>attributePath</em> : Text ) :Real</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>attributePath</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Ruta del atributo que se utilizará para el cálculo</td></tr><tr><td>Resultado</td><td>Real</td><td style="text-align:center">&lt;-</td><td>Suma de los valores de la entity selection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-32"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-32"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.toCollection()</code> crea y devuelve unacolección donde cada elemento es un objeto que contiene un conjuntode propiedades y valores correspondientes a los nombres y valoresde los atributos de la entity selection.</p><p>La función <code>.sum()</code> devuelve la suma de todos losvalores de <em>attributePath</em> en la entity selection.</p><p>La suma sólo puede hacerse en valores de tipo numérico. Si<em>attributePath</em> es una propiedad objeto, sólo se tienen encuenta los valores numéricos para el cálculo (se ignoran otrostipos de valores). En este caso, si <em>attributePath</em> lleva auna propiedad que no existe en el objeto o no contiene ningún valornumérico, <code>.sum()</code> devuelve 0.</p><p>Se devuelve un error si:</p><ul><li><em>attributePath&lt;</em> no es un atributo numérico o unobjeto,</li><li><em>&gt;attributePath</em> es un atributo relativo,</li><li><em>attributePath</em> no se encuentra en la clase de datos dela entity selection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-21"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-21"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$sel </span>: cs.EmployeeSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$sum </span>: Real<span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &lt; :1"</span>;<span class="hljs-number">20000</span>)<span class="hljs-variable">$sum</span>:=<span class="hljs-variable">$sel</span>.<span class="hljs-function">sum</span>(<span class="hljs-string">"salary"</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_tocollection-"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_tocollection-"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.toCollection( )</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.toCollection</strong>( { <em>options</em> : Integer { ;<em>begin</em> : Integer { ; <em>howMany</em> : Integer } } ) :<em>Collection</em><br /><strong>.toCollection</strong>( <em>filterString</em> : Text {;<em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer }}} ) : <em>Collection</em><br /><strong>.toCollection</strong>( <em>filterCol</em> : Collection {;<em>options</em> : Integer { ; <em>begin</em> : Integer { ;<em>howMany</em> : Integer }}} ) : <em>Collection</em></p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>filterString</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Cadena con la(s) ruta(s) de atributos de la entidad aextraer</td></tr><tr><td>filterCol</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Colección de rutas de atributos de entidad a extraer</td></tr><tr><td>options</td><td>Integer</td><td style="text-align:center">-&gt;</td><td><code>dk with primary key</code>: añade la llave primaria<br /><code>dk with stamp&lt;</code>: añade el sello</td></tr><tr><td>begin</td><td>Integer</td><td style="text-align:center">-&gt;</td><td>Designa el índice inicial</td></tr><tr><td>howMany</td><td>Integer</td><td style="text-align:center">-&gt;</td><td>Número de entidades a extraer</td></tr><tr><td>Resultado</td><td>Collection</td><td style="text-align:center">&lt;-</td><td>Colección de objetos que contienen atributos y valores de laselección de entidades</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_descripci%C3%B3n-33"></a><a aria-hidden="true" class="hash-link" href="#EntitySelectionClass.html_descripci%25C3%25B3n-33"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.toCollection()</code> crea y devuelve unacolección donde cada elemento es un objeto que contiene un conjuntode propiedades y valores correspondientes a los nombres y valoresde los atributos de la entity selection.</p><p>Si no se pasa ningún parámetro de filtro o si el primerparámetro contiene una cadena vacía o "*", se extraen todos losatributos. Los atributos con la propiedad <a href="#EntitySelectionClass.html_kind">kind</a> como "relatedEntity" seextraen con el formulario simple: un objeto con la propiedad __KEY(llave primaria). Los atributos con la propiedad kind como"relatedEntities" no se extraen.</p><p>O bien, puede designar los atributos de la entidad a extraerutilizando un parámetro de filtro. Puede utilizar uno de estos dosfiltros:</p><ul><li><em>filterString&lt;</em> --una cadena con rutas de propiedadesseparadas por comas: "propertyPath1, propertyPath2, ...".</li><li><em>filterCol</em>: --una colección de cadenas que contiene larutas de propiedades: ["propertyPath1","propertyPath2",...]</li></ul><p>Si se especifica un filtro para un atributo de tipo<code>relatedEntity</code>:</p><ul><li>propertyPath = "relatedEntity" -&gt; se extrae con una formasimple</li><li>propertyPath = "relatedEntity.*" -&gt; se extraen todas laspropiedades</li><li>propertyPath = "relatedEntity.propertyName1,relatedEntity.propertyName2, ..." -&gt; sólo se extraen esaspropiedades</li></ul><p>Si se especifica un filtro para un atributo de tipo<code>relatedEntity</code>:</p><ul><li>propertyPath = "relatedEntities.*" -&gt; se extraen todas laspropiedades</li><li>propertyPath = "relatedEntities.propertyName1,relatedEntities.propertyName2, ..." -&gt; sólo se extraen esaspropiedades</li></ul><p>Si se especifica un filtro para un atributo de tipo<code>relatedEntities</code>:</p><p>El parámetro <em>begin</em> permite indicar el índice de iniciode las entidades a extraer. Puede pasar cualquier valor entre 0 yla longitud de la entity selection -1.</p><p>El parámetro <em>howMany</em> permite especificar el número deentidades a extraer, empezando por la especificada en<em>begin</em>. Las entidades descartadas no se devuelven pero setienen en cuenta en <em>howMany</em>. Por ejemplo, si<em>howMany</em>= 3 y hay 1 entidad descartada, sólo se extraen 2entidades.</p><p>Si el "kind" de <em>attributeName</em> es <code>storage</code>:<code>.attributeName</code> devuelve una colección de valores delmismo tipo que <em>attributeName</em>.</p><p>Si <em>howMany</em> &gt; longitud de la entity selection, elmétodo devuelve (length - <em>begin</em>) objetos.</p><ul><li>la entity selection está vacía, o</li><li><em>begin</em> es mayor que la longitud de la entityselection.</li></ul><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-1-10"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-1-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><p>En todos los ejemplos de esta sección se utilizará la siguienteestructura:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/dataclassAttribute4.png" /></p><p>Ejemplo sin parámetros de filtro ni de opciones:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$employeesCollection</span>:=New collection <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>()</code></pre><p>Devuelve:</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"ID"</span>: <span class="hljs-number">416</span>,        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"salary"</span>: <span class="hljs-number">79100</span>,        <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,        <span class="hljs-string">"woman"</span>: false,        <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,        <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,        <span class="hljs-string">"extra"</span>: null,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        },        <span class="hljs-string">"manager"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>        }    },    {        <span class="hljs-string">"ID"</span>: <span class="hljs-number">417</span>,        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"salary"</span>: <span class="hljs-number">47000</span>,        <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1992-06-16T00:00:00.000Z"</span>,        <span class="hljs-string">"woman"</span>: true,        <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,        <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,        <span class="hljs-string">"extra"</span>: null,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        },        <span class="hljs-string">"manager"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>        }    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-2-10"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-2-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Devuelve:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-keyword">var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">all</span>()<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">""</span>;dk with primary key+dk with stamp)</code></pre><p>Devuelve:</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">416</span>,        <span class="hljs-string">"__STAMP"</span>: <span class="hljs-number">1</span>,        <span class="hljs-string">"ID"</span>: <span class="hljs-number">416</span>,        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"salary"</span>: <span class="hljs-number">79100</span>,        <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1963-02-01T00:00:00.000Z"</span>,        <span class="hljs-string">"woman"</span>: false,        <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,        <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,        <span class="hljs-string">"extra"</span>: null,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        },        <span class="hljs-string">"manager"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>        }    },    {        <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">417</span>,        <span class="hljs-string">"__STAMP"</span>: <span class="hljs-number">1</span>,        <span class="hljs-string">"ID"</span>: <span class="hljs-number">417</span>,        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"salary"</span>: <span class="hljs-number">47000</span>,        <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1992-06-16T00:00:00.000Z"</span>,        <span class="hljs-string">"woman"</span>: true,        <span class="hljs-string">"managerID"</span>: <span class="hljs-number">412</span>,        <span class="hljs-string">"employerID"</span>: <span class="hljs-number">20</span>,        <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,        <span class="hljs-string">"extra"</span>: null,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        },        <span class="hljs-string">"manager"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">412</span>        }    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-3-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-3-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 3</h4><p>Devuelve:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection</span>; <span class="hljs-variable">$filter </span>: Collection<span class="hljs-keyword">var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$filter</span>:=New collection<span class="hljs-variable">$filter</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"firstName"</span>)<span class="hljs-variable">$filter</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"lastName"</span>)<span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">all</span>()<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-variable">$filter</span>;<span class="hljs-number">0</span>;<span class="hljs-number">0</span>;<span class="hljs-number">2</span>)</code></pre><p>Devuelve:</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-4-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-4-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 4</h4><p>Devuelve:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">"firstName,lastName,employer"</span>)</code></pre><p>Ejemplo con el tipo <code>relatedEntity</code> con una formasimple:</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">20</span>        }    }   ]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-5-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-5-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 5</h4><p>devuelve:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection</span>; <span class="hljs-variable">$coll </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$coll</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"firstName"</span>;<span class="hljs-string">"lastName"</span>)<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-variable">$coll</span>)</code></pre><p>Devuelve:</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Joanna"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Cabrera"</span>    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Alexandra"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Coleman"</span>    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-6-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-6-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 6</h4><p>Devuelve:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection</span>; <span class="hljs-variable">$coll </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$coll</span>:=New collection<span class="hljs-variable">$coll</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"firstName"</span>)<span class="hljs-variable">$coll</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"lastName"</span>)<span class="hljs-variable">$coll</span>.<span class="hljs-function">push</span>(<span class="hljs-string">"employer.*"</span>)<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-variable">$coll</span>)</code></pre><p>Devuelve:</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,            <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,            <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,            <span class="hljs-string">"extra"</span>: null        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,            <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,            <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,            <span class="hljs-string">"extra"</span>: null        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"ID"</span>: <span class="hljs-number">20</span>,            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>,            <span class="hljs-string">"creationDate"</span>: <span class="hljs-string">"1984-08-25T00:00:00.000Z"</span>,            <span class="hljs-string">"revenues"</span>: <span class="hljs-number">12000000</span>,            <span class="hljs-string">"extra"</span>: null        }    }  ]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-7-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-7-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 7</h4><p>Devuelve:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">"firstName, lastName, employer.name"</span>)</code></pre><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Irma"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Durham"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>        }    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lorena"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Boothe"</span>,        <span class="hljs-string">"employer"</span>: {            <span class="hljs-string">"name"</span>: <span class="hljs-string">"India Astral Secretary"</span>        }    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-8-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-8-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 8</h4><p>Ejemplo con la extracción de algunas las propiedades derelatedEntity:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$employeesCollection </span>: Collection <span class="hljs-variable">$employeesCollection</span>:=New collection <span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">"firstName, lastName, directReports.firstName"</span>)</code></pre><p>Devuelve:</p><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"directReports"</span>: []    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mike"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Phan"</span>,        <span class="hljs-string">"directReports"</span>: [            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gary"</span>            },            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Sadie"</span>            },            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Christie"</span>            }        ]    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gary"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Reichert"</span>,        <span class="hljs-string">"directReports"</span>: [            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Rex"</span>            },            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Jenny"</span>            },            {                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Lowell"</span>            }        ]    }]</code></pre><h4><a aria-hidden="true" class="anchor" id="EntitySelectionClass.html_ejemplo-9-1"></a><a aria-hidden="true"class="hash-link" href="#EntitySelectionClass.html_ejemplo-9-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 9</h4><p>Devuelve:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$employeesCollection </span>: Collection<span class="hljs-variable">$employeesCollection</span>:=New collection<span class="hljs-variable">$employeesCollection</span>:=<span class="hljs-variable">$employees</span>.<span class="hljs-function">toCollection</span>(<span class="hljs-string">"firstName, lastName, directReports.*"</span>)</code></pre><pre><code class="hljs css language-4d">[    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gregg"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Wahl"</span>,        <span class="hljs-string">"directReports"</span>: []    },        {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Mike"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Phan"</span>,        <span class="hljs-string">"directReports"</span>: [            {                <span class="hljs-string">"ID"</span>: <span class="hljs-number">425</span>,                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gary"</span>,                <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Reichert"</span>,                <span class="hljs-string">"salary"</span>: <span class="hljs-number">65800</span>,                <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1957-12-23T00:00:00.000Z"</span>,                <span class="hljs-string">"woman"</span>: false,                <span class="hljs-string">"managerID"</span>: <span class="hljs-number">424</span>,                <span class="hljs-string">"employerID"</span>: <span class="hljs-number">21</span>,                <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,                <span class="hljs-string">"extra"</span>: null,                <span class="hljs-string">"employer"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">21</span>                },                <span class="hljs-string">"manager"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">424</span>                }            },            {                <span class="hljs-string">"ID"</span>: <span class="hljs-number">426</span>,                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Sadie"</span>,                <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Gallant"</span>,                <span class="hljs-string">"salary"</span>: <span class="hljs-number">35200</span>,                <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"2022-01-03T00:00:00.000Z"</span>,                <span class="hljs-string">"woman"</span>: true,                <span class="hljs-string">"managerID"</span>: <span class="hljs-number">424</span>,                <span class="hljs-string">"employerID"</span>: <span class="hljs-number">21</span>,                <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,                <span class="hljs-string">"extra"</span>: null,                <span class="hljs-string">"employer"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">21</span>                },                <span class="hljs-string">"manager"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">424</span>                }            }                   ]    },    {        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Gary"</span>,        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Reichert"</span>,        <span class="hljs-string">"directReports"</span>: [            {                <span class="hljs-string">"ID"</span>: <span class="hljs-number">428</span>,                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Rex"</span>,                <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Chance"</span>,                <span class="hljs-string">"salary"</span>: <span class="hljs-number">71600</span>,                <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1968-08-09T00:00:00.000Z"</span>,                <span class="hljs-string">"woman"</span>: false,                <span class="hljs-string">"managerID"</span>: <span class="hljs-number">425</span>,                <span class="hljs-string">"employerID"</span>: <span class="hljs-number">21</span>,                <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,                <span class="hljs-string">"extra"</span>: null,                <span class="hljs-string">"employer"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">21</span>                },                <span class="hljs-string">"manager"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">425</span>                }            },            {                <span class="hljs-string">"ID"</span>: <span class="hljs-number">429</span>,                <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"Jenny"</span>,                <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Parks"</span>,                <span class="hljs-string">"salary"</span>: <span class="hljs-number">51300</span>,                <span class="hljs-string">"birthDate"</span>: <span class="hljs-string">"1984-05-25T00:00:00.000Z"</span>,                <span class="hljs-string">"woman"</span>: true,                <span class="hljs-string">"managerID"</span>: <span class="hljs-number">425</span>,                <span class="hljs-string">"employerID"</span>: <span class="hljs-number">21</span>,                <span class="hljs-string">"photo"</span>: <span class="hljs-string">"[object Picture]"</span>,                <span class="hljs-string">"extra"</span>: null,                <span class="hljs-string">"employer"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">21</span>                },                <span class="hljs-string">"manager"</span>: {                    <span class="hljs-string">"__KEY"</span>: <span class="hljs-number">425</span>                }            }           ] }]</code></pre><style><![CDATA[ h2 { background: #d9ebff;}]]></style></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#EntityClass.html"><span class="arrow-prev">←</span><span>Entity</span></a><a class="docs-next button" href="#FileClass.html"><span>File</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#EntitySelectionClass.html_crear-una-entity-selection">Crear unaentity selection</a></li><li><a href="#EntitySelectionClass.html_use-entity-selection">USEENTITY SELECTION</a></li><li><a href="#EntitySelectionClass.html_91index93">[<em>index</em>]</a></li><li><a href="#EntitySelectionClass.html_attributename">.<em>attributeName</em></a></li><li><a href="#EntitySelectionClass.html_add">.add()</a></li><li><a href="#EntitySelectionClass.html_and">.and()</a></li><li><a href="#EntitySelectionClass.html_average">.average()</a></li><li><a href="#EntitySelectionClass.html_contains">.contains()</a></li><li><a href="#EntitySelectionClass.html_count">.count()</a></li><li><a href="#EntitySelectionClass.html_copy">.copy()</a></li><li><a href="#EntitySelectionClass.html_distinct">.distinct()</a></li><li><a href="#EntitySelectionClass.html_drop">.drop()</a></li><li><a href="#EntitySelectionClass.html_extract">.extract()</a></li><li><a href="#EntitySelectionClass.html_first">.first()</a></li><li><a href="#EntitySelectionClass.html_getdataclass">.getDataClass()</a></li><li><a href="#EntitySelectionClass.html_getremotecontextattributes">.getRemoteContextAttributes()</a></li><li><a href="#EntitySelectionClass.html_isalterable">.isAlterable()</a></li><li><a href="#EntitySelectionClass.html_isordered">.isOrdered()</a></li><li><a href="#EntitySelectionClass.html_last">.last()</a></li><li><a href="#EntitySelectionClass.html_length">.length</a></li><li><a href="#EntitySelectionClass.html_max">.max()</a></li><li><a href="#EntitySelectionClass.html_min">.min()</a></li><li><a href="#EntitySelectionClass.html_minus">.minus()</a></li><li><a href="#EntitySelectionClass.html_or">.or()</a></li><li><a href="#EntitySelectionClass.html_orderby">.orderBy()</a></li><li><a href="#EntitySelectionClass.html_orderbyformula">.orderByFormula()</a></li><li><a href="#EntitySelectionClass.html_query">.query()</a></li><li><a href="#EntitySelectionClass.html_querypath">.queryPath</a></li><li><a href="#EntitySelectionClass.html_queryplan">.queryPlan</a></li><li><a href="#EntitySelectionClass.html_refresh">.refresh()</a></li><li><a href="#EntitySelectionClass.html_selected">.selected()</a></li><li><a href="#EntitySelectionClass.html_slice">.slice()</a></li><li><a href="#EntitySelectionClass.html_sum-">.sum( )</a></li><li><a href="#EntitySelectionClass.html_tocollection-">.toCollection()</a></li></ul></nav></div></div></body></html>