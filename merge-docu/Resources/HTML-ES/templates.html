<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Páginas de plantillas · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="El servidor web de 4D le permite utilizar las páginas de plantillas HTML que contengan etiquetas, es decir, una mezcla de código HTML estático y de referencias 4D añadidas mediante [etiquetas de transformación](/docs/Rx/es/Tags/tags.html) como 4DTEXT, 4DIF o 4DINCLUDE. Estas etiquetas suelen insertarse como comentarios de tipo HTML (`&lt;!--#4DTagName TagValue--&gt;`) en el código fuente HTML."name="description" /><meta content="es" name="docsearch:language" /><meta content="Páginas de plantillas · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="El servidor web de 4D le permite utilizar las páginas de plantillas HTML que contengan etiquetas, es decir, una mezcla de código HTML estático y de referencias 4D añadidas mediante [etiquetas de transformación](/docs/Rx/es/Tags/tags.html) como 4DTEXT, 4DIF o 4DINCLUDE. Estas etiquetas suelen insertarse como comentarios de tipo HTML (`&lt;!--#4DTagName TagValue--&gt;`) en el código fuente HTML."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#templates.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Páginas deplantillas<a aria-hidden="true" class="anchor" id="templates.html"></a></h1></header><article><div><p><span>El servidor web de 4D le permite utilizar las páginas deplantillas HTML que contengan etiquetas, es decir, una mezcla decódigo HTML estático y de referencias 4D añadidas mediante <a href="#tags.html">etiquetas de transformación</a> como 4DTEXT, 4DIF o4DINCLUDE. Estas etiquetas suelen insertarse como comentarios detipo HTML (<code>&lt;!--#4DTagName TagValue--&gt;</code>) en elcódigo fuente HTML.</span></p><p><span>Cuando estas páginas son enviadas por el servidor HTTP,son analizadas y las etiquetas que contienen son ejecutadas ysustituidas por los datos resultantes. Las páginas que reciben losnavegadores son una combinación de elementos estáticos y valoresprocedentes del procesamiento 4D.</span></p><p><span>Por ejemplo, si se escribe en una página HTML:</span></p><pre><span><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">P</span>&gt;</span>Welcome to <span class="hljs-comment">&lt;!--#4DTEXT vtSiteName--&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">P</span>&gt;</span></code></span></pre><p>El valor de la variable 4D <em>vtSiteName</em> se insertará enla página HTML.</p><h2><a aria-hidden="true" class="anchor" id="templates.html_etiquetas-para-las-plantillas"></a><a aria-hidden="true" class="hash-link" href="#templates.html_etiquetas-para-las-plantillas"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Etiquetas para las plantillas</h2><p>Las siguientes etiquetas 4D están disponibles:</p><ul><li>4DTEXT, para insertar variables y expresiones 4D comotexto,</li><li>4DHTML, para insertar el código HTML,</li><li>4DEVAL, para evaluar toda expresión 4D,</li><li>4DSCRIPT, para ejecutar un método 4D,</li><li>4DINCLUDE, para incluir una página dentro de otra,</li><li>4DBASE, para modificar la carpeta por defecto utilizada por laetiqueta 4DINCLUDE,</li><li>4DCODE, para insertar el código 4D,</li><li>4DIF, 4DELSE, 4DELSEIF y 4DENDIF, para insertar condiciones enel código HTML,</li><li>4DLOOP y 4DENDLOOP, para hacer bucles en el código HTML,</li><li>4DEACH y 4DENDEACH, para hacer bucles en colecciones,selecciones de entidades o propiedades de objetos.</li></ul><p>Estas etiquetas se describen en la página <a href="#tags.html">Etiquetas de transformación</a>.</p><p>Es posible combinar etiquetas. Por ejemplo, el siguiente códigoHTML es permitido:</p><pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">HTML</span>&gt;</span>...<span class="hljs-tag">&lt;<span class="hljs-name">BODY</span>&gt;</span><span class="hljs-comment">&lt;!--#4DSCRIPT/PRE_PROCESS--&gt;</span>   (Method call)<span class="hljs-comment">&lt;!--#4DIF (myvar=1)--&gt;</span>   (If condition)   <span class="hljs-comment">&lt;!--#4DINCLUDE banner1.html--&gt;</span>   (Subpage insertion)<span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span>   (End if)<span class="hljs-comment">&lt;!--#4DIF (myvar=2)--&gt;</span>   <span class="hljs-comment">&lt;!--#4DINCLUDE banner2.html--&gt;</span><span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span><span class="hljs-comment">&lt;!--#4DLOOP [TABLE]--&gt;</span>   (loop on the current selection)<span class="hljs-comment">&lt;!--#4DIF ([TABLE]ValNum&gt;10)--&gt;</span>   (If [TABLE]ValNum&gt;10)   <span class="hljs-comment">&lt;!--#4DINCLUDE subpage.html--&gt;</span>   (subpage insertion)<span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>   (Else)   <span class="hljs-tag">&lt;<span class="hljs-name">B</span>&gt;</span>Value: <span class="hljs-comment">&lt;!--#4DTEXT [TABLE]ValNum--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">B</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span>      (Field display)<span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span><span class="hljs-comment">&lt;!--#4DENDLOOP--&gt;</span>   (End for)<span class="hljs-tag">&lt;/<span class="hljs-name">BODY</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">HTML</span>&gt;</span></code></pre><h2><a aria-hidden="true" class="anchor" id="templates.html_an%C3%A1lisis-de-etiquetas"></a><a aria-hidden="true" class="hash-link" href="#templates.html_an%25C3%25A1lisis-de-etiquetas"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Análisis de etiquetas</h2><p>Por razones de optimización, el servidor web de 4D no realiza elanálisis del código fuente HTML cuando se llama a las páginas HTMLutilizando URLs simples con el sufijo ".HTML" o ".HTM".</p><p>El análisis del contenido de las páginas plantillas enviadas porel servidor web de 4D tiene lugar cuando se llaman los comandos<code>WEB SEND FILE</code> (.htm, .html, .shtm, .shtml), <code>WEBSEND BLOB</code> (text/html type BLOB) o <code>WEB SENDTEXT</code>, así como cuando se envían páginas llamadas medianteURLs. En este último caso, por razones de optimización, las páginascon sufijo ".htm" y ".html" NO se analizan. Para "forzar" elanálisis de las páginas HTML en este caso, debe añadir el sufijo".shtm" o ".shtml" (por ejemplo,<code>http://www.server.com/dir/page.shtm</code>). Un ejemplo deluso de este tipo de página se da en la descripción del comando<code>WEB GET STATISTICS</code>. Las páginas XML (.xml, .xsl)también son compatibles y siempre son analizadas por 4D.</p><p>También puede llevar a cabo el análisis sintáctico fuera delcontexto web cuando utilice el comando <code>PROCESS 4DTAGS</code>.</p><p>Internamente, el analizador funciona con cadenas UTF-16, perolos datos a analizar pueden haber sido codificados de formadiferente. Cuando las etiquetas contienen texto (por ejemplo<code>4DHTML</code>), 4D convierte los datos cuando es necesariodependiendo de su origen y de la información disponible (charset).A continuación se muestran los casos en los que 4D analiza lasetiquetas contenidas en las páginas HTML, así como las conversionesrealizadas:</p><table><thead><tr><th>Acción / Comando</th><th>Análisis del contenido de las páginas enviadas</th><th>Soporte de la sintaxis $(*)</th><th>Conjunto de caracteres utilizados para el análisis sintácticode las etiquetas</th></tr></thead><tbody><tr><td>Páginas llamadas a través de URLs</td><td>X, excepto las páginas con extensiones ".htm" o ".html"</td><td>X, excepto las páginas con extensiones ".htm" o ".html"</td><td>Uso del conjunto de caracteres pasado como parámetro delencabezado "Content-Type" de la página. Si no hay ninguna, buscauna etiqueta META-HTTP EQUIV con un conjunto de caracteres. En casocontrario, uso del conjunto de caracteres por defecto para elservidor HTTP</td></tr><tr><td><code>WEB SEND FILE</code></td><td>X</td><td>-</td><td>Uso del conjunto de caracteres pasado como parámetro delencabezado "Content-Type" de la página. Si no hay ninguna, buscauna etiqueta META-HTTP EQUIV con un conjunto de caracteres. En casocontrario, uso del conjunto de caracteres por defecto para elservidor HTTP</td></tr><tr><td><code>WEB SEND TEXT</code></td><td>X</td><td>-</td><td>No es necesaria la conversión</td></tr><tr><td><code>WEB SEND BLOB</code></td><td>X, si el BLOB es de tipo "text/html</td><td>-</td><td>Uso del conjunto de caracteres definido en el encabezado"Content-Type" de la respuesta. En caso contrario, uso del conjuntode caracteres por defecto para el servidor HTTP</td></tr><tr><td>Inclusión por la etiqueta<code>&lt;!--#4DINCLUDE--&gt;</code></td><td>X</td><td>X</td><td>Uso del conjunto de caracteres pasado como parámetro delencabezado "Content-Type" de la página. Si no hay ninguna, buscauna etiqueta META-HTTP EQUIV con un conjunto de caracteres. En casocontrario, uso del conjunto de caracteres por defecto para elservidor HTTP</td></tr><tr><td><code>PROCESS 4D TAGS</code></td><td>X</td><td>X</td><td>Datos de texto: no hay conversión. Datos BLOB: conversiónautomática del conjunto de caracteres Mac-Roman porcompatibilidad</td></tr></tbody></table><p>(*) La sintaxis alternativa basada en $ está disponible para lasetiquetas 4DHTML, 4DTEXT y 4DEVAL.</p><h2><a aria-hidden="true" class="anchor" id="templates.html_acceso-a-los-m%C3%A9todos-4d-a-trav%C3%A9s-de-la-web"></a><a aria-hidden="true" class="hash-link" href="#templates.html_acceso-a-los-m%25C3%25A9todos-4d-a-trav%25C3%25A9s-de-la-web"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Acceso a los métodos 4D a través de la web</h2><p>La ejecución de un método 4D con <code>4DEACH</code>,<code>4DELSEIF</code>, <code>4DEVAL</code>, <code>4DHTML</code>,<code>4DIF</code>, <code>4DLOOP</code>, <code>4DSCRIPT</code>, o<code>4DTEXT</code> a partir de una petición web está sujeta alvalor del atributo <a href="#allowProject.html">disponible vía lasetiquetas 4D y las URL (4DACTION...)</a> definida en laspropiedades del método. Si no se comprueba el atributo para elmétodo, éste no puede ser llamado desde una petición web.</p><h2><a aria-hidden="true" class="anchor" id="templates.html_prevenci%C3%B3n-de-la-inserci%C3%B3n-de-c%C3%B3digos-maliciosos"></a><a aria-hidden="true" class="hash-link" href="#templates.html_prevenci%25C3%25B3n-de-la-inserci%25C3%25B3n-de-c%25C3%25B3digos-maliciosos"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Prevención de la inserción de códigos maliciosos</h2><p>Las etiquetas 4D aceptan diferentes tipos de datos comoparámetros: texto, variables, métodos, nombres de comandos, etc.Cuando estos datos son proporcionados por su propio código, no hayriesgo de inserción de código malicioso ya que usted controla laentrada. Sin embargo, el código de su base de datos suele trabajarcon datos que, en un momento u otro, fueron introducidos a travésde una fuente externa (entrada del usuario, importación, etc.).</p><p>En este caso, es aconsejable <strong>no utilizar</strong>etiquetas como <code>4DEVAL</code> o <code>4DSCRIPT</code>, queevalúan parámetros, directamente con este tipo de datos.</p><p>Además, según el <a href="#templates.html_recursive-processing">principio derecursividad</a>, el código malicioso puede incluir a su vezetiquetas de transformación. En este caso, es imprescindibleutilizar la etiqueta <code>4DTEXT</code>. Imagine, por ejemplo, uncampo de formulario web llamado "Name", donde los usuarios debenintroducir su nombre. Este nombre se muestra mediante una etiqueta<code>&lt;!--#4DHTML vName--&gt;</code> en la página. Si se insertaun texto del tipo "&lt;!--#4DEVAL QUIT 4D--&gt;" en lugar delnombre, la interpretación de esta etiqueta provocará la salida dela aplicación. Para evitar este riesgo, basta con utilizarsistemáticamente la etiqueta <code>4DTEXT</code> en este caso. Comoesta etiqueta escapa a los caracteres especiales de HTML, cualquiercódigo recursivo malicioso que pueda haberse insertado no seráreinterpretado. Para referirnos al ejemplo anterior, el campo"Name" contendrá, en este caso, "<code>&amp;lt;!--#4DEVAL QUIT4D--&amp;gt;</code>" que no será transformado.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#gettingStarted.html"><span class="arrow-prev">←</span><span>Comencemos</span></a><a class="docs-next button" href="#httpRequests.html"><span>Procesamiento de peticiones HTTP</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#templates.html_etiquetas-para-las-plantillas">Etiquetas para lasplantillas</a></li><li><a href="#templates.html_an%25C3%25A1lisis-de-etiquetas">Análisis deetiquetas</a></li><li><a href="#templates.html_acceso-a-los-m%25C3%25A9todos-4d-a-trav%25C3%25A9s-de-la-web">Acceso a los métodos 4D a través de la web</a></li><li><a href="#templates.html_prevenci%25C3%25B3n-de-la-inserci%25C3%25B3n-de-c%25C3%25B3digos-maliciosos">Prevención de la inserción de códigos maliciosos</a></li></ul></nav></div></div></body></html>