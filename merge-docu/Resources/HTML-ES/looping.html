<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Estructuras repetitivas (bucles) · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Las estructuras en bucle repiten una secuencia de instrucciones hasta que se cumple una condición o se alcanza un número de veces."name="description" /><meta content="es" name="docsearch:language" /><meta content="Estructuras repetitivas (bucles) · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Las estructuras en bucle repiten una secuencia de instrucciones hasta que se cumple una condición o se alcanza un número de veces."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#cf_looping.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Estructurasrepetitivas (bucles)<a aria-hidden="true" class="anchor" id="looping.html"></a></h1></header><article><div><p><span>Las estructuras en bucle repiten una secuencia deinstrucciones hasta que se cumple una condición o se alcanza unnúmero de veces.</span></p><h2><span><a aria-hidden="true" class="anchor" id="looping.html_whileend-while"></a><a aria-hidden="true" class="hash-link" href="#looping.html_whileend-while"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>While...End while</span></h2><p><span>La sintaxis de la estructura condicional <code>While...Endwhile</code> es:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-keyword"> While</span>(Boolean_Expression)<span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword"> End while</span></code></span></pre><p>Un bucle <code>While...End while</code> ejecuta lasinstrucciones dentro del bucle mientras la expresión booleana seaTRUE. Comprueba la expresión booleana al inicio del bucle y noentra en el bucle si la expresión es FALSE.</p><p>Las instrucciones <code>break</code> y <code>continue</code> se<a href="#looping.html_break-and-continue">describen acontinuación</a>.</p><p>Es común inicializar el valor probado en la expresión booleanainmediatamente antes de entrar en el bucle <code>While...Endwhile</code>. Inicializar el valor significa asignarle un contenidoadecuado, normalmente para que la expresión booleana sea TRUE y<code>While...End while</code> ejecute el bucle.</p><p>El valor de la expresión booleana debe poder ser modificado porun elemento dentro del bucle, de lo contrario se ejecutaráindefinidamente. El siguiente bucle continúa para siempre porque<em>NeverStop</em> es siempre TRUE:</p><pre><code class="hljs css language-4d"> NeverStop:=<span class="hljs-literal">True</span><span class="hljs-keyword"> While</span>(NeverStop)<span class="hljs-keyword"> End while</span></code></pre><p>Si se encuentra en una situación de este tipo, en la que unmétodo se ejecuta de forma incontrolada, puede utilizar lasfunciones de rastreo para detener el bucle y localizar el problema.Para más información sobre el seguimiento de un método, consulte lapágina <a href="#error-handling.html">Gestión de errores</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_ejemplo"></a><a aria-hidden="true" class="hash-link"href="#looping.html_ejemplo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h3><pre><code class="hljs css language-4d"><span class="hljs-function"> CONFIRM</span>(<span class="hljs-string">"¿Añadir un nuevo registro?"</span>) <span class="hljs-comment">//¿El usuario quiere añadir un registro?</span><span class="hljs-keyword"> While</span>(OK=<span class="hljs-number">1</span>) <span class="hljs-comment">//Bucle mientras el usuario quiera</span><span class="hljs-function">    ADD RECORD</span>([aTable]) /Añadir un nuevo registro<span class="hljs-keyword"> End while</span> <span class="hljs-comment">//El bucle siempre termina con End while</span></code></pre><p>En este ejemplo, el valor de la variable sistema <code>OK</code>es definido por el comando <code>CONFIRM</code> antes de que seinicie el bucle. Si el usuario hace clic en el botón<strong>OK</strong> de la caja de diálogo de confirmación, lavariable del sistema <code>OK</code> toma el valor 1 y se inicia elbucle. En caso contrario, la variable del sistema <code>OK</code>toma el valor 0 y se omite el bucle. Una vez se inicia el bucle, elcomando <code>ADD RECORD</code> permite continuar la ejecución delbucle porque se define la variable sistema <code>OK</code> en 1cuando el usuario guarda el registro. Cuando el usuario cancela (noguarda) el último registro, la variable del sistema <code>OK</code>toma el valor 0 y el bucle se detiene.</p><h2><a aria-hidden="true" class="anchor" id="looping.html_repeatuntil"></a><a aria-hidden="true" class="hash-link" href="#looping.html_repeatuntil"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Repeat...Until</h2><p>La sintaxis de la estructura condicional<code>Repeat...Until</code> es:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Repeat</span><span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword">Until</span>(Boolean_Expression)</code></pre><p>Un bucle <code>Repeat...Until</code> es similar a un bucle<a href="#looping.html_whileend-while">While...End while</a>,excepto que comprueba la expresión booleana después del bucle enlugar de antes. Así, un bucle <code>Repeat...Until</code> siempreejecuta el bucle una vez, mientras que si la expresión booleana esinicialmente False, un bucle <code>While...End while</code> noejecuta el bucle en absoluto.</p><p>La otra diferencia con un bucle <code>Repeat...Until</code> esque el bucle continúa hasta que la expresión booleana sea TRUE.</p><p>Las instrucciones <code>break</code> y <code>continue</code> se<a href="#looping.html_break-and-continue">describen acontinuación</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_ejemplo-1"></a><a aria-hidden="true" class="hash-link" href="#looping.html_ejemplo-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h3><p>Compara el siguiente ejemplo con el ejemplo del bucle<code>While...End while</code>. Tenga en cuenta que la expresiónbooleana no necesita ser inicializada-no hay un comando<code>CONFIRM</code> para inicializar la variable<code>OK</code>.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Repeat</span><span class="hljs-function">    ADD RECORD</span>([aTable])<span class="hljs-keyword"> Until</span>(OK=<span class="hljs-number">0</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_forend-for"></a><a aria-hidden="true" class="hash-link" href="#looping.html_forend-for"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>For...End for</h2><p>La sintaxis de la estructura condicional <code>For...Endfor</code> es:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">For</span>(Counter_Variable;Start_Expression;End_Expression{;Increment_Expression})<span class="hljs-function">   statement</span>(s)    {break}      {continue}<span class="hljs-keyword">End for</span></code></pre><p>El bucle <code>For...End for</code> es un bucle controlado porun contador:</p><ul><li>La variable contador <em>Counter_Variable</em> es una variablenumérica (Real o Entero largo) inicializada por <code>For...Endfor</code> con el valor especificado por<em>Start_Expression</em>.</li><li>Cada vez que se ejecuta el bucle, la variable del contador seincrementa en el valor especificado en el valor opcional<em>Increment_Expression</em>. Si no se especifica<em>Increment_Expression</em>, la variable del contador seincrementa en uno (1), que es el valor predeterminado.</li><li>Cuando la variable del contador pasa el valor<em>End_Expression</em>, el bucle se detiene.</li></ul><p><strong>Importante:</strong> las expresiones numéricas<em>Start_Expression</em>, <em>End_Expression</em> y<em>Increment_Expression</em> se evalúan una vez al principio delbucle. Si estas expresiones son variables, el cambio de una deestas variables dentro del bucle no afectará al bucle.</p><p><strong>Consejo:</strong> Sin embargo, para fines especiales,puede cambiar el valor de la variable <em>Counter_Variable</em>dentro del bucle; esto afectará al bucle.</p><ul><li>Normalmente <em>Start_Expression</em> es menor que<em>End_Expression</em>.</li><li>Si <em>Start_Expression</em> y <em>End_Expression</em> soniguales, el bucle se ejecutará sólo una vez.</li><li>Si <em>Start_Expression</em> es mayor que<em>End_Expression</em>, el bucle no se ejecutará en absoluto amenos que se especifique una <em>Increment_Expression</em>negativa. Ver los ejemplos.</li></ul><p>Las instrucciones <code>break</code> y <code>continue</code> se<a href="#looping.html_break-and-continue">describen acontinuación</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_ejemplos-b%C3%A1sicos"></a><a aria-hidden="true"class="hash-link" href="#looping.html_ejemplos-b%25C3%25A1sicos"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplos básicos</h3><ol><li>El siguiente ejemplo ejecuta 100 iteraciones:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)  <span class="hljs-comment">//Hacer algo</span><span class="hljs-keyword"> End for</span></code></pre><ol start="2"><li>El siguiente ejemplo recorre todos los elementos del arrayanArray:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray))  <span class="hljs-comment">//Hacer algo con el elemento</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><ol start="3"><li>El siguiente ejemplo recorre todos los caracteres del textovtSomeText:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlChar</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Length</span>(vtSomeText))  <span class="hljs-comment">//Hacer algo con el carácter si es un TAB</span><span class="hljs-keyword">    If</span>(<span class="hljs-function">Character code</span>(vtSomeText<span class="hljs-variable">[[$vlChar]]</span>)=Tab)  <span class="hljs-comment">//...</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><ol start="4"><li>El siguiente ejemplo recorre los registros seleccionados parala tabla [aTable]:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> FIRST RECORD</span>([aTable])<span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlRecord</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Records in selection</span>([aTable]))  <span class="hljs-comment">//Hacer algo con el registro</span><span class="hljs-function">    SEND RECORD</span>([aTable])  <span class="hljs-comment">//...</span>  <span class="hljs-comment">//Ir al siguiente registro</span><span class="hljs-function">    NEXT RECORD</span>([aTable])<span class="hljs-keyword"> End for</span></code></pre><p>La mayoría de los bucles <code>For...End for</code> queescribirá en sus proyectos se parecerán a los que se presentan enestos ejemplos.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_disminuir-la-variable-contador"></a><a aria-hidden="true" class="hash-link" href="#looping.html_disminuir-la-variable-contador"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Disminuir la variable contador</h3><p>En algunos casos, puede querer tener un bucle cuya variable decontador sea decreciente en lugar de creciente. Para ello, debeespecificar <em>Start_Expression</em> mayor que<em>End_Expression</em> y <em>Increment_Expression</em> debe sernegativa. Los siguientes ejemplos hacen lo mismo que losanteriores, pero en orden inverso:</p><ol start="5"><li>El siguiente ejemplo ejecuta 100 iteraciones:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">100</span>;<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Hacer algo</span><span class="hljs-keyword"> End for</span></code></pre><ol start="6"><li>El siguiente ejemplo recorre todos los elementos del arrayanArray:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-function">Size of array</span>(anArray);<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Hacer algo con el elemento</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><ol start="7"><li>El siguiente ejemplo recorre todos los caracteres del textovtSomeText:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlChar</span>;<span class="hljs-function">Length</span>(vtSomeText);<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Hacer algo con el carácter si es un TAB</span><span class="hljs-keyword">    If</span>(<span class="hljs-function">Character code</span>(vtSomeText<span class="hljs-variable">[[$vlChar]]</span>)=Tab)  <span class="hljs-comment">//...</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><ol start="8"><li>El siguiente ejemplo recorre los registros seleccionados parala tabla [aTable]:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> LAST RECORD</span>([aTable])<span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlRecord</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Records in selection</span>([aTable]))  <span class="hljs-comment">//Hacer algo con el registro</span><span class="hljs-function">    SEND RECORD</span>([aTable])  <span class="hljs-comment">//...</span>  <span class="hljs-comment">//Ir al registro anterior</span><span class="hljs-function">    PREVIOUS RECORD</span>([aTable])<span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_incrementar-la-variable-del-contador-en-m%C3%A1s-de-uno"></a><a aria-hidden="true" class="hash-link" href="#looping.html_incrementar-la-variable-del-contador-en-m%25C3%25A1s-de-uno"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Incrementar la variable del contador en más de uno</h3><p>Si lo requiere, puede utilizar una <em>Increment_Expression</em>(positiva o negativa) cuyo valor absoluto sea mayor que uno.</p><ol start="9"><li>El siguiente bucle aborda sólo los elementos pares del arrayanArray:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">2</span>;<span class="hljs-function">Size of array</span>(anArray);<span class="hljs-number">2</span>)  <span class="hljs-comment">//Hacer algo con el elemento #2,#4...#2n</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_comparaci%C3%B3n-de-estructuras-de-bucle"></a><a aria-hidden="true"class="hash-link" href="#looping.html_comparaci%25C3%25B3n-de-estructuras-de-bucle"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Comparación de estructuras de bucle</h3><p>Volvamos al primer ejemplo de <code>For...End for</code>. Elsiguiente ejemplo ejecuta 100 iteraciones:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)  <span class="hljs-comment">//Hacer algo</span><span class="hljs-keyword"> End for</span></code></pre><p>Es interesante ver cómo el bucle <code>While...End while</code>y el bucle <code>Repeat...Until</code> realizarían la misma acción.Aquí está el bucle equivalente <code>While...End while</code>:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$i</span>:=<span class="hljs-number">1</span> <span class="hljs-comment">//Inicializar el contador</span><span class="hljs-keyword"> While</span>(<span class="hljs-variable">$i</span>&lt;=<span class="hljs-number">100</span>) <span class="hljs-comment">//Bucle 100 veces</span>  <span class="hljs-comment">//Hacer algo</span>    <span class="hljs-variable">$i</span>:=<span class="hljs-variable">$i</span>+<span class="hljs-number">1</span> <span class="hljs-comment">//Necesita incrementar el contador</span><span class="hljs-keyword"> End while</span></code></pre><p>Aquí está el bucle equivalente <code>Repeat...Until</code>:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$i</span>:=<span class="hljs-number">1</span> <span class="hljs-comment">//Inicializar el contador</span><span class="hljs-keyword"> Repeat</span>  <span class="hljs-comment">//Hacer algo</span>    <span class="hljs-variable">$i</span>:=<span class="hljs-variable">$i</span>+<span class="hljs-number">1</span> <span class="hljs-comment">//Necesita incrementar el contador</span><span class="hljs-keyword"> Until</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">100</span>) <span class="hljs-comment">//Bucle 100 veces</span></code></pre><p><strong>Consejo:</strong> el bucle <code>For...End for</code>suele ser más rápido que los bucles <code>While...End while</code>y <code>Repeat...Until</code>, porque 4D comprueba la condicióninternamente en cada ciclo del bucle e incrementa el contador. Porlo tanto, utilice el bucle <code>For...End for</code> siempre quesea posible.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_optimizar-la-ejecuci%C3%B3n-de-los-bucles-for-end-for"></a><a aria-hidden="true" class="hash-link" href="#looping.html_optimizar-la-ejecuci%25C3%25B3n-de-los-bucles-for-end-for"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Optimizar la ejecución de los bucles For... End for</h3><p>Puede utilizar variables reales y enteras, así como contadoresinterproceso, de proceso y de variables locales. Para buclesrepetitivos largos, especialmente en modo compilado, utilicevariables locales de tipo Entero largo.</p><ol start="10"><li>Aquí un ejemplo:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> C_LONGINT</span>(<span class="hljs-variable">$vlCounter</span>) <span class="hljs-comment">//Utilización de variables locales de tipo Entero largo</span><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlCounter</span>;<span class="hljs-number">1</span>;<span class="hljs-number">10000</span>)  <span class="hljs-comment">//Hacer algo</span><span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_estructuras-for-end-anidadas"></a><a aria-hidden="true" class="hash-link" href="#looping.html_estructuras-for-end-anidadas"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Estructuras For... End anidadas</h3><p>Puede anidar tantas estructuras de control como necesite(razonablemente). Esto incluye la anidación de bucles<code>For...End for</code>. Para evitar errores, asegúrese deutilizar diferentes variables de contador para cada estructura debucle.</p><p>He aquí dos ejemplos:</p><ol><li>El siguiente ejemplo recorre todos los elementos de un array dedos dimensiones:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray))  <span class="hljs-comment">//...</span>  <span class="hljs-comment">//Hacer algo con la línea</span>  <span class="hljs-comment">//...</span><span class="hljs-keyword">    For</span>(<span class="hljs-variable">$vlSubElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray{<span class="hljs-variable">$vlElem}</span>))  <span class="hljs-comment">//Hacer algo con el elemento</span>       anArray{<span class="hljs-variable">$vlElem}{</span><span class="hljs-variable">$vlSubElem}</span>:=...<span class="hljs-keyword">    End for</span><span class="hljs-keyword"> End for</span></code></pre><ol start="2"><li>El siguiente ejemplo construye un array de punteros a todos loscampos de fecha presentes en la base:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY POINTER</span>(<span class="hljs-variable">$apDateFields</span>;<span class="hljs-number">0</span>) <span class="hljs-variable">$vlElem</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-number">1</span>;Get last table number)<span class="hljs-keyword">    If</span>(<span class="hljs-function">Is table number valid</span>(<span class="hljs-variable">$vlTable</span>))<span class="hljs-keyword">       For</span>(<span class="hljs-variable">$vlField</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Get last field number</span>(<span class="hljs-variable">$vlTable</span>))<span class="hljs-keyword">          If</span>(<span class="hljs-function">Is field number valid</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-variable">$vlField</span>))             <span class="hljs-variable">$vpField</span>:=<span class="hljs-function">Field</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-variable">$vlField</span>)<span class="hljs-keyword">             If</span>(<span class="hljs-function">Type</span>(<span class="hljs-variable">$vpField</span>-&gt;)=Is date)                <span class="hljs-variable">$vlElem</span>:=<span class="hljs-variable">$vlElem</span>+<span class="hljs-number">1</span><span class="hljs-function">                INSERT IN ARRAY</span>(<span class="hljs-variable">$apDateFields</span>;<span class="hljs-variable">$vlElem</span>)                <span class="hljs-variable">$apDateFields{</span><span class="hljs-variable">$vlElem}</span>:=<span class="hljs-variable">$vpField</span><span class="hljs-keyword">             End if</span><span class="hljs-keyword">          End if</span><span class="hljs-keyword">       End for</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_for-each-end-for-each"></a><a aria-hidden="true"class="hash-link" href="#looping.html_for-each-end-for-each"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>For each... End for each</h2><p>La sintaxis de la estructura condicional <code>For each... Endfor each</code> es:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For each</span>(Current_Item;Expression{;begin{;end}}){<span class="hljs-keyword">Until</span>|<span class="hljs-keyword">While</span>}(Boolean_Expression)}<span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword"> End for each</span></code></pre><p>La estructura <code>For each... End for each</code> ejecuta un<em>Current_item</em> especificado sobre todos los valores de<em>Expression</em>. El tipo <em>Current_item</em> depende del tipo<em>Expression</em>. El bucle <code>For each... End for each</code>puede iterar a través de tres tipos de <em>Expression</em>:</p><ul><li>colecciones: bucle en cada elemento de la colección,</li><li>selecciones de entidades: bucle en cada entidad,</li><li>objetos: bucle en cada propiedad del objeto.</li></ul><p>La siguiente tabla compara los tres tipos de <code>For each...End for each</code>:</p><table><thead><tr><th></th><th>Bucle en las colecciones</th><th>Bucle en las selecciones de entidades</th><th>Bucle en los objetos</th></tr></thead><tbody><tr><td>Tipo Current_Item</td><td>Variable del mismo tipo que los elementos de la colección</td><td>Entity</td><td>Variable texto</td></tr><tr><td>Tipos de expresiones</td><td>Colección (con elementos del mismo tipo)</td><td>Entity selection</td><td>Objeto</td></tr><tr><td>Número de bucles (por defecto)</td><td>Número de elementos de la colección</td><td>Número de entidades en la selección</td><td>Número de propiedades del objeto</td></tr><tr><td>Soporte de parámetros begin / end</td><td>Sí</td><td>Sí</td><td>No</td></tr></tbody></table><ul><li>El número de bucles se evalúa al inicio y no cambiará duranteel proceso. La adición o eliminación de elementos durante el bucleno suele ser recomendable, ya que puede resultar en redundancia operdidas de iteraciones.</li><li>Por defecto, la(s) <em>instrucciones</em> adjuntas se ejecutanpara cada valor de <em>Expresión</em>. Sin embargo, es posiblesalir del bucle comprobando una condición al principio del bucle (<code>While</code>) o al final del bucle (<code>Until</code>).</li><li>Los parámetros opcionales <em>begin</em> y <em>end</em> puedenutilizarse con colecciones y selecciones de entidades para definirlos límites del bucle.</li><li>El bucle <code>For each... End for each</code> puede utilizarseen una <strong>colección compartida</strong> o en un <strong>objetocompartido</strong>. Si su código necesita modificar uno o máselementos de la colección o de las propiedades del objeto, debeutilizar las palabras clave <code>Use...End use</code>. Dependiendode sus necesidades, puede llamar a las palabras clave<code>Use...End use</code>:<ul><li>antes de entrar en el bucle, si los elementos deben modificarsejuntos por razones de integridad, o</li><li>dentro del bucle cuando sólo hay que modificar algunoselementos/propiedades y no es necesario gestionar laintegridad.</li></ul></li></ul><p>Las instrucciones <code>break</code> y <code>continue</code> se<a href="#looping.html_break-and-continue">describen acontinuación</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_bucle-en-las-colecciones"></a><a aria-hidden="true"class="hash-link" href="#looping.html_bucle-en-las-colecciones"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Bucle en las colecciones</h3><p>Cuando <code>For each...End for each</code> se utiliza con una<em>Expression</em> del tipo <em>Collection</em>, el parámetro<em>Current_Item</em> es una variable del mismo tipo que loselementos de la colección. Si algún elemento de la colección no esdel mismo tipo que la variable, se genera un error y el bucle sedetiene.</p><p>La colección debe contener sólo elementos del mismo tipo, de locontrario se devolverá un error en cuanto a la variable<em>Current_Item</em> se le asigne el primer tipo de valordiferente.</p><p>En cada iteración del bucle, la variable <em>Current_Item</em>se llena automáticamente con el elemento correspondiente de lacolección. Hay que tener en cuenta los siguientes puntos:</p><ul><li>Si la variable <em>Current_Item</em> es de tipo objeto o detipo colección (es decir, si <em>Expresión</em> es una colección deobjetos o de colecciones), al modificar esta variable se modificaráautomáticamente el elemento coincidente de la colección (porque losobjetos y las colecciones comparten las mismas referencias). Si lavariable es de tipo escalar, sólo se modificará la variable.</li><li>La variable <em>Current_Item</em> debe ser del mismo tipo quelos elementos de la colección. Si algún elemento de la colección noes del mismo tipo que la variable, se genera un error y el bucle sedetiene.</li><li>Si la colección contiene elementos con un valor<strong>Null</strong>, se generará un error si el tipo de variable<em>Current_Item</em> no soporta valores <strong>Null</strong>(como las variables de tipo entero largo).</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_ejemplo-2"></a><a aria-hidden="true" class="hash-link" href="#looping.html_ejemplo-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Usted quiere calcular algunas estadísticas para una colección denúmeros:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_COLLECTION</span>(<span class="hljs-variable">$nums</span>) <span class="hljs-variable">$nums</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">10</span>;<span class="hljs-number">5001</span>;<span class="hljs-number">6665</span>;<span class="hljs-number">33</span>;<span class="hljs-number">1</span>;<span class="hljs-number">42</span>;<span class="hljs-number">7850</span>)<span class="hljs-function"> C_LONGINT</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$vEven</span>;<span class="hljs-variable">$vOdd</span>;<span class="hljs-variable">$vUnder</span>;<span class="hljs-variable">$vOver</span>)<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$nums</span>)<span class="hljs-keyword">    If</span>(<span class="hljs-variable">$item</span>%<span class="hljs-number">2</span>=<span class="hljs-number">0</span>)       <span class="hljs-variable">$vEven</span>:=<span class="hljs-variable">$vEven</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    Else</span>       <span class="hljs-variable">$vOdd</span>:=<span class="hljs-variable">$vOdd</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword">    Case of</span>       :(<span class="hljs-variable">$item</span>&lt;<span class="hljs-number">5000</span>)          <span class="hljs-variable">$vUnder</span>:=<span class="hljs-variable">$vUnder</span>+<span class="hljs-number">1</span>       :(<span class="hljs-variable">$item</span>&gt;<span class="hljs-number">6000</span>)          <span class="hljs-variable">$vOver</span>:=<span class="hljs-variable">$vOver</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    End case</span><span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$vEven=3, $vOdd=4</span>  <span class="hljs-comment">//$vUnder=4,$vOver=2</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_bucle-en-las-selecciones-de-entidades"></a><a aria-hidden="true"class="hash-link" href="#looping.html_bucle-en-las-selecciones-de-entidades"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Bucle en las selecciones de entidades</h3><p>Cuando <code>For each... End for each</code> se utiliza con una<em>Expression</em> del tipo <em>Collection</em>, el parámetro<em>Current_Item</em> es una variable del mismo tipo que loselementos de la colección.</p><p>El número de bucles se basa en el número de entidades de laselección de entidades. En cada iteración del bucle, el parámetro<em>Current_Item</em> se llena automáticamente con la entidad de laselección de entidades que se procesa actualmente.</p><p><strong>Nota:</strong> si la selección de entidades contiene unaentidad que fue eliminada mientras tanto por otro proceso, se saltaautomáticamente durante el bucle.</p><p>Tenga en cuenta que cualquier modificación aplicada en laentidad actual debe ser guardada explícitamente utilizando<code>entity.save( )</code>.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_ejemplo-3"></a><a aria-hidden="true" class="hash-link" href="#looping.html_ejemplo-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Quiere aumentar el salario de todos los empleados británicos enuna selección de entidades:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_OBJECT</span>(emp)<span class="hljs-keyword"> For each</span>(emp;ds.Employees.<span class="hljs-function">query</span>(<span class="hljs-string">"country='UK'"</span>))    emp.salary:=emp.salary*<span class="hljs-number">1</span>,<span class="hljs-number">03</span>    emp.<span class="hljs-function">save</span>()<span class="hljs-keyword"> End for each</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_bucles-en-las-propiedades-de-objetos"></a><a aria-hidden="true"class="hash-link" href="#looping.html_bucles-en-las-propiedades-de-objetos"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Bucles en las propiedades de objetos</h3><p>Cuando se utiliza <code>For each... End for each</code> con una<em>Expression</em> de tipo Object, el parámetro<em>Current_Item</em> es una variable texto que se llenaautomáticamente con el nombre de la propiedad actualmenteprocesada.</p><p>Las propiedades del objeto se procesan de acuerdo con su ordende creación. Durante el bucle, se pueden añadir o eliminarpropiedades en el objeto, sin modificar el número de bucles quequedarán en función del número original de propiedades delobjeto.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_ejemplo-4"></a><a aria-hidden="true" class="hash-link" href="#looping.html_ejemplo-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>Quiere pasar los nombres a mayúsculas en el siguienteobjeto:</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"firstname"</span>: <span class="hljs-string">"gregory"</span>,    <span class="hljs-string">"lastname"</span>: <span class="hljs-string">"badikora"</span>,    <span class="hljs-string">"age"</span>: <span class="hljs-number">20</span>}</code></pre><p>Puede escribir:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For each</span>(property;vObject)<span class="hljs-keyword">    If</span>(<span class="hljs-function">Value type</span>(vObject[property])=Is text)       vObject[property]:=<span class="hljs-function">Uppercase</span>(vObject[property])<span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for each</span></code></pre><pre><code class="hljs">{    <span class="hljs-attr">"firstname"</span>: <span class="hljs-string">"GREGORY"</span>,    <span class="hljs-attr">"lastname"</span>: <span class="hljs-string">"BADIKORA"</span>,    <span class="hljs-attr">"age"</span>: <span class="hljs-number">20</span>}</code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_par%C3%A1metros-begin--end"></a><a aria-hidden="true"class="hash-link" href="#looping.html_par%25C3%25A1metros-begin--end"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Parámetros begin / end</h3><p>Puede definir los límites de la iteración utilizando losparámetros opcionales inicio y fin.</p><p><strong>Nota:</strong>los parámetros <em>inicio</em> y<em>fin</em> sólo pueden utilizarse en iteraciones a través decolecciones y selecciones de entidades (se ignoran en laspropiedades de objetos).</p><ul><li>En el parámetro <em>begin</em>, pase la posición del elementoen <em>Expression</em> en la que se iniciará la iteración (seincluye <em>begin</em>).</li><li>En el parámetro <em>end</em>, también se puede pasar laposición del elemento en <em>Expression</em> en la que se debedetener la iteración (se excluye <em>end</em>).</li></ul><p>Si se omite <em>fin</em> o si <em>fin</em>es mayor que el númerode elementos de <em>Expression</em>, se iteran los elementos desde<em>inicio</em> hasta el último (incluido). Si los parámetros<em>inicio</em> y <em>fin</em> son valores positivos, representanposiciones reales de elementos en <em>Expression</em>. Si<em>comienzo</em> es un valor negativo, se recalcula como<code>comienzo:=comienzo+tamaño de la expresión</code> (seconsidera como el desplazamiento desde el final de<em>Expression</em>). Si el valor calculado es negativo,<em>inicio</em> toma el valor 0. <strong>Nota:</strong> aunqueinicio sea negativo, la iteración se sigue realizando en el ordenestándar. Si <em>fin</em> es un valor negativo, se recalcula como<code>fin:=fin+tamaño de la expresión</code></p><p>Por ejemplo:</p><ul><li>una colección contiene 10 elementos (numerados de 0 a 9)</li><li>begin=-4 &gt; -&gt; begin=-4+10=6 &gt;-&gt; la iteracióncomienza en el sexto elemento (#5)</li><li>end=-2 -&gt; end=-2+10=8 -&gt; la iteración se detiene antesdel 8º elemento (#7), es decir, en el 7º elemento.</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_ejemplo-5"></a><a aria-hidden="true" class="hash-link" href="#looping.html_ejemplo-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-function"> C_COLLECTION</span>(<span class="hljs-variable">$col</span>;<span class="hljs-variable">$col2</span>) <span class="hljs-variable">$col</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"a"</span>;<span class="hljs-string">"b"</span>;<span class="hljs-string">"c"</span>;<span class="hljs-string">"d"</span>;<span class="hljs-string">"e"</span>) <span class="hljs-variable">$col2</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">1</span>;<span class="hljs-number">2</span>;<span class="hljs-number">3</span>)<span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$col</span>;<span class="hljs-number">0</span>;<span class="hljs-number">3</span>)    <span class="hljs-variable">$col2</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$col2=[1,2,3,"a","b","c"]</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$col</span>;<span class="hljs-number">-2</span>;<span class="hljs-number">-1</span>)    <span class="hljs-variable">$col2</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$col2=[1,2,3,"a","b","c","d"]</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_condiciones-until-y-while"></a><a aria-hidden="true"class="hash-link" href="#looping.html_condiciones-until-y-while"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Condiciones Until y While</h3><p>Puede controlar la ejecución de <code>For each... End foreach</code> añadiendo una condición <code>Until</code> o unacondición <code>While</code> al bucle. Cuando una instrucción<code>Until(condición)</code> está asociada al bucle, la iteraciónse detendrá tan pronto como la condición se evalúe como<code>True</code>, mientras que cuando se trata de una instrucción<code>While(condición)</code>, la iteración se detendrá cuando lacondición se evalúe por primera vez como <code>False</code>.</p><p>Puede pasar cualquiera de las dos palabras clave en función desus necesidades:</p><ul><li>La condición <code>Until</code> se comprueba al final de cadaiteración, por lo que si <em>Expression</em> no está vacía o esnula, el bucle se ejecutará al menos una vez.</li><li>La condición <code>While</code> se prueba al principio de cadaiteración, por lo que según el resultado de la condición, el buclepuede no ejecutarse en absoluto.</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_ejemplo-6"></a><a aria-hidden="true" class="hash-link" href="#looping.html_ejemplo-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"> <span class="hljs-variable">$colNum</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">1</span>;<span class="hljs-number">2</span>;<span class="hljs-number">3</span>;<span class="hljs-number">4</span>;<span class="hljs-number">5</span>;<span class="hljs-number">6</span>;<span class="hljs-number">7</span>;<span class="hljs-number">8</span>;<span class="hljs-number">9</span>;<span class="hljs-number">10</span>) <span class="hljs-variable">$total</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$num</span>;<span class="hljs-variable">$colNum</span>)<span class="hljs-keyword">While</span>(<span class="hljs-variable">$total</span>&lt;<span class="hljs-number">30</span>) <span class="hljs-comment">//probada al inicio</span>    <span class="hljs-variable">$total</span>:=<span class="hljs-variable">$total</span>+<span class="hljs-variable">$num</span><span class="hljs-keyword"> End for each</span><span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$total</span>)) <span class="hljs-comment">//$total = 36 (1+2+3+4+5+6+7+8)</span> <span class="hljs-variable">$total</span>:=<span class="hljs-number">1000</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$num</span>;<span class="hljs-variable">$colNum</span>)<span class="hljs-keyword">Until</span>(<span class="hljs-variable">$total</span>&gt;<span class="hljs-number">30</span>) <span class="hljs-comment">//probada al final</span>    <span class="hljs-variable">$total</span>:=<span class="hljs-variable">$total</span>+<span class="hljs-variable">$num</span><span class="hljs-keyword"> End for each</span><span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$total</span>)) <span class="hljs-comment">//$total = 1001 (1000+1)</span></code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_break-y-continue"></a><a aria-hidden="true" class="hash-link" href="#looping.html_break-y-continue"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>break</code> y <code>continue</code></h2><p>Todas las estructuras de bucle anteriores soportan lasinstrucciones <code>break</code> y <code>continue</code>. Estasinstrucciones le dan más control sobre los bucles al permitir salirdel bucle y pasar por alto la iteración actual en cualquiermomento.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_break"></a><a aria-hidden="true" class="hash-link"href="#looping.html_break"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>break</h3><p>La instrucción <code>break</code> termina el bucle que lacontiene. El control del programa fluye hacia la instruccióninmediatamente posterior al cuerpo del bucle.</p><p>Si la instrucción <code>break</code> está dentro de un bucle alinterior de un <a href="#looping.html_nested-forend-for-looping-structures">bucleanidado</a> (bucle dentro de otro bucle), la instrucción<code>break</code> terminará el bucle más interno.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_ejemplo-7"></a><a aria-hidden="true" class="hash-link" href="#looping.html_ejemplo-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">For</span> (vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$tab{vCounter}</span>=<span class="hljs-string">""</span>) <span class="hljs-comment">//si una condición es verdadera</span>        break <span class="hljs-comment">//end of the for loop</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword">End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_continue"></a><a aria-hidden="true" class="hash-link"href="#looping.html_continue"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>continue</h3><p>La instrucción <code>continue</code> termina la ejecución de lasinstrucciones en la iteración actual del bucle actual, y continúala ejecución del bucle con la siguiente iteración.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-keyword">For</span> (<span class="hljs-variable">$i</span>; <span class="hljs-number">0</span>; <span class="hljs-number">9</span>)<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$i</span>=<span class="hljs-number">3</span>)        continue <span class="hljs-comment">//pasar directamente a la siguiente iteración</span><span class="hljs-keyword">    End if</span>    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$text</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$i</span>)<span class="hljs-keyword">End for</span><span class="hljs-comment">// $text="012456789" </span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#branching.html"><span class="arrow-prev">←</span><span>Estructuras condicionales</span></a><a class="docs-next button" href="#error-handling.html"><span>Gestión deerrores</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#looping.html_whileend-while">While...End while</a><ul class="toc-headings"><li><a href="#looping.html_ejemplo">Ejemplo</a></li></ul></li><li><a href="#looping.html_repeatuntil">Repeat...Until</a><ul class="toc-headings"><li><a href="#looping.html_ejemplo-1">Ejemplo</a></li></ul></li><li><a href="#looping.html_forend-for">For...End for</a><ul class="toc-headings"><li><a href="#looping.html_ejemplos-b%25C3%25A1sicos">Ejemplosbásicos</a></li><li><a href="#looping.html_disminuir-la-variable-contador">Disminuir lavariable contador</a></li><li><a href="#looping.html_incrementar-la-variable-del-contador-en-m%25C3%25A1s-de-uno">Incrementar la variable del contador en más de uno</a></li><li><a href="#looping.html_comparaci%25C3%25B3n-de-estructuras-de-bucle">Comparaciónde estructuras de bucle</a></li><li><a href="#looping.html_optimizar-la-ejecuci%25C3%25B3n-de-los-bucles-for-end-for">Optimizar la ejecución de los bucles For... End for</a></li><li><a href="#looping.html_estructuras-for-end-anidadas">Estructuras For... Endanidadas</a></li></ul></li><li><a href="#looping.html_for-each-end-for-each">For each... Endfor each</a><ul class="toc-headings"><li><a href="#looping.html_bucle-en-las-colecciones">Bucle en lascolecciones</a></li><li><a href="#looping.html_bucle-en-las-selecciones-de-entidades">Bucle en lasselecciones de entidades</a></li><li><a href="#looping.html_bucles-en-las-propiedades-de-objetos">Bucles en laspropiedades de objetos</a></li><li><a href="#looping.html_par%25C3%25A1metros-begin--end">Parámetros begin /end</a></li><li><a href="#looping.html_condiciones-until-y-while">CondicionesUntil y While</a></li></ul></li><li><a href="#looping.html_break-y-continue"><code>break</code> y<code>continue</code></a><ul class="toc-headings"><li><a href="#looping.html_break">break</a></li><li><a href="#looping.html_continue">continue</a></li></ul></li></ul></nav></div></div></body></html>