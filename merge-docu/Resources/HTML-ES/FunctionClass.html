<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Formula · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Los comandos [Formula](#formula) y [Formula from string](#formula-from-string) le permiten crear los [objetos `4D.Function`](#about-4dfunction-objects) para ejecutar toda expresión o código 4D expresado como texto."name="description" /><meta content="es" name="docsearch:language" /><meta content="Formula · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Los comandos [Formula](#formula) y [Formula from string](#formula-from-string) le permiten crear los [objetos `4D.Function`](#about-4dfunction-objects) para ejecutar toda expresión o código 4D expresado como texto."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#FunctionClass.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Formula<a aria-hidden="true" class="anchor" id="FunctionClass.html"></a></h1></header><article><div><p><span>Los comandos <a href="#FunctionClass.html_formula">Formula</a> y <a href="#FunctionClass.html_formula-from-string">Formula from string</a>le permiten crear los <a href="#FunctionClass.html_about-4dfunction-objects">objetos<code>4D.Function</code></a> para ejecutar toda expresión o código4D expresado como texto.</span></p><h3><span><a aria-hidden="true" class="anchor" id="FunctionClass.html_objetos-formula"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_objetos-formula"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Objetos Formula</span></h3><p><span>Los objetos Formula pueden encapsularse en las propiedadesde objeto:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$f</span>:=New object <span class="hljs-variable">$f</span>.message:=<span class="hljs-function">Formula</span>(<span class="hljs-function">ALERT</span>(<span class="hljs-string">"Hello world"</span>))</code></span></pre><p>Esta propiedad es una "función objeto", es decir una función queestá vinculada a su objeto padre. Para ejecutar una funciónalmacenada en una propiedad objeto, utilice el operador<strong>()</strong> después del nombre de la propiedad, como:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$f</span>.<span class="hljs-function">message</span>() <span class="hljs-comment">//muestra "Hello world"</span></code></pre><p>También se admite la sintaxis con paréntesis:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$f</span>[<span class="hljs-string">"message"</span>]() <span class="hljs-comment">//muestra "Hello world"</span></code></pre><p>Tenga en cuenta que, aunque no tenga parámetros (ver arriba),una función objeto a ejecutar debe ser llamada con paréntesis ( ).Llamar sólo a la propiedad del objeto devolverá una nuevareferencia a la fórmula (y no la ejecutará):</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$o</span>:=<span class="hljs-variable">$f</span>.message <span class="hljs-comment">//devuelve el objeto fórmula en $o </span></code></pre><p>Para ejecutar una función utilizando las funciones <a href="#FunctionClass.html_apply"><code>apply()</code></a> y <a href="#FunctionClass.html_call"><code>call()</code></a>:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$f</span>.message.<span class="hljs-function">apply</span>() <span class="hljs-comment">//muestra "Hello world"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_paso-de-par%C3%A1metros"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_paso-de-par%25C3%25A1metros"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Paso de parámetros</h4><p>Puede pasar parámetros a sus fórmulas utilizando la <a href="#FunctionClass.html_sequential-parameters">sintaxis secuencial delos parámetros</a> basada en $1, $2...$n. Por ejemplo, puedeescribir:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: Object <span class="hljs-variable">$f</span>:=New object <span class="hljs-variable">$f</span>.message:=<span class="hljs-function">Formula</span>(<span class="hljs-function">ALERT</span>(<span class="hljs-string">"Hello "</span>+<span class="hljs-variable">$1</span>)) <span class="hljs-variable">$f</span>.<span class="hljs-function">message</span>(<span class="hljs-string">"John"</span>) <span class="hljs-comment">//muestra "Hello John"</span></code></pre><p>O utilizando la función <a href="#FunctionClass.html_call">.call()</a>:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: Object <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-variable">$1</span>+<span class="hljs-string">" "</span>+<span class="hljs-variable">$2</span>) <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>(<span class="hljs-literal">Null</span>;<span class="hljs-string">"Hello"</span>;<span class="hljs-string">"World"</span>) <span class="hljs-comment">//devuelve "Hello World"</span> <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>(<span class="hljs-literal">Null</span>;<span class="hljs-string">"Welcome to"</span>;<span class="hljs-function">String</span>(<span class="hljs-function">Year of</span>(Current date))) <span class="hljs-comment">//devuelve "Welcome to 2019" (por ejemplo)</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_par%C3%A1metros-de-un-solo-m%C3%A9todo"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_par%25C3%25A1metros-de-un-solo-m%25C3%25A9todo"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Parámetros de un solo método</h4><p>Para mayor comodidad, cuando la fórmula se compone de un únicométodo proyecto, se pueden omitir los parámetros en lainicialización del objeto fórmula. Simplemente se pueden pasar lafórmula se llama. Por ejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(myMethod)  <span class="hljs-comment">//Writing Formula(myMethod($1;$2)) no es necesario</span> <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>(<span class="hljs-literal">Null</span>;<span class="hljs-string">"Hello"</span>;<span class="hljs-string">"World"</span>) <span class="hljs-comment">//devuelve "Hello World"</span> <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>() <span class="hljs-comment">//devuelve "How are you?"</span>  <span class="hljs-comment">//myMethod</span> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$param1 </span>: Text; <span class="hljs-variable">$param2 </span>: Text)-&gt;<span class="hljs-variable">$return </span>: Text<span class="hljs-keyword"> If</span>(Count parameters=<span class="hljs-number">2</span>)    <span class="hljs-variable">$return</span>:=<span class="hljs-variable">$param1</span>+<span class="hljs-string">" "</span>+<span class="hljs-variable">$param2</span><span class="hljs-keyword"> Else</span>    <span class="hljs-variable">$return</span>:=<span class="hljs-string">"How are you?"</span><span class="hljs-keyword"> End if</span></code></pre><p>Los parámetros se reciben en el método, en el orden en que seespecifican en la llamada.</p><h3><a aria-hidden="true" class="anchor" id="FunctionClass.html_sobre-los-objetos-4dfunction"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_sobre-los-objetos-4dfunction"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Sobre los objetos 4D.Function</h3><p>Un objeto <code>4D.Function</code> contiene un trozo de códigoque puede ser ejecutado desde un objeto, ya sea utilizando eloperador <code>()</code>, o utilizando las funciones <a href="#FunctionClass.html_apply"><code>apply()</code></a> y <a href="#FunctionClass.html_call"><code>call()</code></a>. 4D propone trestipos de objetos Function:</p><ul><li>las funciones nativas, es decir, las funciones integradas devarias clases 4D tales como <code>collection.sort()</code> o<code>file.copyTo()</code>.</li><li>las funciones usuario, creadas en las <a href="#classes.html">clases</a> usuario utilizando la <a href="#FunctionClass.html_function">palabra clave Function</a>.</li><li>las funciones de fórmula, es decir, las funciones que puedenejecutar cualquier fórmula 4D.</li></ul><h3><a aria-hidden="true" class="anchor" id="FunctionClass.html_resumen"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_resumen"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Resumen</h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#FunctionClass.html_apply"><strong>.apply</strong>() :any<br /><strong>.apply</strong>( <em>thisObj</em> : Object { ;<em>formulaParams</em> : Collection } ) : any</a><p>&nbsp;&nbsp;&nbsp;&nbsp;ejecuta el objeto <code>formula</code>al que se aplica y devuelve el valor resultante&lt;!-- END REF --.El objeto fórmula puede ser creado con los comandos<code>Formula</code> o</p></td></tr></tbody></table><p><code>Formula from string</code>.</p><p>En el parámetro <em>thisObj</em>, puede pasar una referencia alobjeto que se utilizará como <code>This</code> dentro de lafórmula.</p><p>También puede pasar una colección que se utilizará comoparámetros $1...$n en la fórmula utilizando el parámetro opcional<em>formulaParams</em>.</p><p>Tenga en cuenta que <code>.apply()</code> es similar a <a href="#FunctionClass.html_call"><code>.call()</code></a> excepto que losparámetros se pasan como una colección. Esto puede ser útil parapasar los resultados calculados.</p><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-1"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-variable">$1</span>+<span class="hljs-variable">$2</span>+<span class="hljs-variable">$3</span>) <span class="hljs-variable">$c</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>;<span class="hljs-number">30</span>) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">apply</span>(<span class="hljs-literal">Null</span>;<span class="hljs-variable">$c</span>) <span class="hljs-comment">// devuelve 60</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-2"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$calc </span>: 4D.<span class="hljs-keyword">Function</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$feta</span>; <span class="hljs-variable">$robot </span>: Object <span class="hljs-variable">$robot</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Robot"</span>;<span class="hljs-string">"price"</span>;<span class="hljs-number">543</span>;<span class="hljs-string">"quantity"</span>;<span class="hljs-number">2</span>) <span class="hljs-variable">$feta</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Feta"</span>;<span class="hljs-string">"price"</span>;<span class="hljs-number">12.5</span>;<span class="hljs-string">"quantity"</span>;<span class="hljs-number">5</span>) <span class="hljs-variable">$calc</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-literal">This</span>.total:=<span class="hljs-literal">This</span>.price*<span class="hljs-literal">This</span>.quantity) <span class="hljs-variable">$calc</span>.<span class="hljs-function">apply</span>(<span class="hljs-variable">$feta</span>) <span class="hljs-comment">// $feta={name:Feta,price:12.5,quantity:5,total:62.5}</span> <span class="hljs-variable">$calc</span>.<span class="hljs-function">apply</span>(<span class="hljs-variable">$robot</span>) <span class="hljs-comment">// $robot={name:Robot,price:543,quantity:2,total:1086}</span></code></pre><p>| | <a href="#FunctionClass.html_call"><strong>.call</strong>(): any<br /><strong>.call</strong>( <em>thisObj</em> : Object { ;...<em>params</em> : any } ) : any</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;ejecuta el objeto <code>formula</code>al que se aplica y devuelve el valor resultante&lt;!-- END REF --.El objeto fórmula puede ser creado con los comandos<code>Formula</code> o</p><p><code>Formula from string</code>.</p><p>En el parámetro <em>thisObj</em>, puede pasar una referencia alobjeto que se utilizará como <code>This</code> dentro de lafórmula.</p><p>También puede pasar los valores a utilizar como parámetros<em>$1...$n</em> en la fórmula utilizando el parámetro opcional<em>params</em>).</p><p>Tenga en cuenta que <code>.call()</code> es similar a <a href="#FunctionClass.html_apply"><code>.apply()</code></a> excepto quelos parámetros se pasan directamente.</p><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-1-1"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-1-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Uppercase</span>(<span class="hljs-variable">$1</span>)) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>(<span class="hljs-literal">Null</span>;<span class="hljs-string">"hello"</span>) <span class="hljs-comment">// devuelve "HELLO"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-2-1"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-2-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><pre><code class="hljs css language-4d"> <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"value"</span>;<span class="hljs-number">50</span>) <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-literal">This</span>.value*<span class="hljs-number">2</span>) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>(<span class="hljs-variable">$o</span>) <span class="hljs-comment">// devuelve 100</span></code></pre><pre><code class="hljs">|</code></pre><p>| <a href="#FunctionClass.html_source"><strong>.source</strong>: Text</a></p><p>&nbsp;&nbsp;&nbsp;&nbsp;contiene la expresión fuente de la<code>fórmula</code> como texto |</p><h2><a aria-hidden="true" class="anchor" id="FunctionClass.html_formula"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_formula"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Formula</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17 R6</td><td>Renombrado (New formula -&gt; Formula)</td></tr><tr><td>v17 R3</td><td>Añadidos</td></tr></tbody></table></details><p><strong>Formula</strong> ( <em>formulaExp</em> : Expression ) :4D.Function</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>formulaExp</td><td>Expresión</td><td style="text-align:center">-&gt;</td><td>Fórmula a devolver como objeto</td></tr><tr><td>Resultado</td><td>4D.Function</td><td style="text-align:center">&lt;-</td><td>Función nativa que encapsula la fórmula</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_descripci%C3%B3n"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_descripci%25C3%25B3n"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>El comando <code>Formula</code> crea un objeto <code>4DFunction</code> basado en la expresión <em>formulaExp</em>.<em>formulaExp</em> puede ser tan simple como un valor único ocomplejo, como un método proyecto con parámetros.</p><p>Tener una fórmula como objeto permite pasarla como parámetro(atributo calculado) a los comandos o a los métodos o ejecutarladesde varios componentes sin necesidad de declararla como"compartida por los componentes y la base de datos local". Cuandose llama, el objeto fórmula se evalúa en el contexto de la base dedatos o del componente que lo creó.</p><p>La fórmula devuelta puede ser llamada con:</p><ul><li>los métodos <a href="#FunctionClass.html_call"><code>.call()</code></a> o <a href="#FunctionClass.html_apply"><code>.apply()</code></a>, o</li><li>object notation syntax (see <a href="#FunctionClass.html_formula-object">formula object</a>).</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-number">1</span>+<span class="hljs-number">2</span>) <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"myFormula"</span>;<span class="hljs-variable">$f</span>)  <span class="hljs-comment">//tres formas diferentes de llamar a la fórmula</span> <span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>(<span class="hljs-variable">$o</span>) <span class="hljs-comment">//devuelve 3</span> <span class="hljs-variable">$f</span>.<span class="hljs-function">apply</span>(<span class="hljs-variable">$o</span>) <span class="hljs-comment">//devuelve 3</span> <span class="hljs-variable">$o</span>.<span class="hljs-function">myFormula</span>() <span class="hljs-comment">//devuelve 3</span></code></pre><p>Puede pasar los <a href="#FunctionClass.html_passing-parameters">parámetros</a> a<code>Formula</code>, como se muestra en <a href="#FunctionClass.html_example-4">example-4"&gt;ejemplo 4</a>abajo.</p><p>Se puede especificar el objeto sobre el que se ejecuta lafórmula, como se ve en el <a href="#FunctionClass.html_ejemplo-5">ejemplo 5</a>. Se puede acceder alas propiedades del objeto mediante el comando<code>This</code>.</p><p>Si <em>formulaExp</em> utiliza variables locales, sus valores secopian y almacenan en el objeto fórmula devuelto durante sucreación. Cuando se ejecuta, la fórmula utiliza estos valorescopiados en lugar del valor actual de las variables locales. Tengaen cuenta que no se soporta el uso de arrays como variableslocales.</p><p>El objeto creado por <code>Formula</code> puede guardarse, porejemplo, en un campo de la base de datos o en un documentoblob.</p><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-1-2"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-1-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><p>Una fórmula simple:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-number">1</span>+<span class="hljs-number">2</span>)<span class="hljs-keyword"> var</span> <span class="hljs-variable">$o </span>: Object <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"f"</span>;<span class="hljs-variable">$f</span>) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$o</span>.f() <span class="hljs-comment">// devuelve 3</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-2-2"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-2-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><p>Una fórmula utilizando variables locales:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$value</span>:=<span class="hljs-number">10</span> <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"f"</span>;<span class="hljs-function">Formula</span>(<span class="hljs-variable">$value</span>)) <span class="hljs-variable">$value</span>:=<span class="hljs-number">20</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$o</span>.f() <span class="hljs-comment">// devuelve 10</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-3"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 3</h4><p>Una fórmula sencilla que utiliza parámetros:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"f"</span>;<span class="hljs-function">Formula</span>(<span class="hljs-variable">$1</span>+<span class="hljs-variable">$2</span>)) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$o</span>.f(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>) <span class="hljs-comment">//devuelve 30</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-4"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 4</h4><p>Una fórmula utilizando un método proyecto con parámetros:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"f"</span>;<span class="hljs-function">Formula</span>(myMethod)) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$o</span>.f(<span class="hljs-string">"param1"</span>;<span class="hljs-string">"param2"</span>) <span class="hljs-comment">// equivalente a $result:=myMethod("param1";"param2")</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-5"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 5</h4><p>Utilizando <code>This</code>:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"fullName"</span>;<span class="hljs-function">Formula</span>(<span class="hljs-literal">This</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-literal">This</span>.lastName)) <span class="hljs-variable">$o</span>.firstName:=<span class="hljs-string">"John"</span> <span class="hljs-variable">$o</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$o</span>.<span class="hljs-function">fullName</span>() <span class="hljs-comment">//devuelve "John Smith"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-6"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 6</h4><p>Llamar a una fórmula utilizando la notación de objetos:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$feta</span>; <span class="hljs-variable">$robot </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$calc </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$robot</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Robot"</span>;<span class="hljs-string">"price"</span>;<span class="hljs-number">543</span>;<span class="hljs-string">"quantity"</span>;<span class="hljs-number">2</span>) <span class="hljs-variable">$feta</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Feta"</span>;<span class="hljs-string">"price"</span>;<span class="hljs-number">12.5</span>;<span class="hljs-string">"quantity"</span>;<span class="hljs-number">5</span>) <span class="hljs-variable">$calc</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-literal">This</span>.total:=<span class="hljs-literal">This</span>.price*<span class="hljs-literal">This</span>.quantity)  <span class="hljs-comment">//define la fórmula de las propiedades del objeto</span> <span class="hljs-variable">$feta</span>.calc:=<span class="hljs-variable">$calc</span> <span class="hljs-variable">$robot</span>.calc:=<span class="hljs-variable">$calc</span>  <span class="hljs-comment">//llama la fórmula</span> <span class="hljs-variable">$feta</span>.<span class="hljs-function">calc</span>() <span class="hljs-comment">// $feta={name:Feta,price:12.5,quantity:5,total:62.5,calc:"[object Formula]"}</span> <span class="hljs-variable">$robot</span>.<span class="hljs-function">calc</span>() <span class="hljs-comment">// $robot={name:Robot,price:543,quantity:2,total:1086,calc:"[object Formula]"}</span></code></pre><h2><a aria-hidden="true" class="anchor" id="FunctionClass.html_formula-from-string"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_formula-from-string"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Formula from string</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17 R6</td><td>Renombrado: New formula from string -&gt; Formula fromstring</td></tr><tr><td>v17 R3</td><td>Añadidos</td></tr></tbody></table></details><p><strong>Formula from string</strong>( <em>formulaString</em> :Text ) : 4D.Function</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>formulaString</td><td>Texto</td><td style="text-align:center">-&gt;</td><td>Fórmula texto a devolver como objeto</td></tr><tr><td>Resultado</td><td>4D.Function</td><td style="text-align:center">&lt;-</td><td>Objeto nativo que encapsula la fórmula</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_descripci%C3%B3n-1"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_descripci%25C3%25B3n-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>The <code>Formula from string</code> command creates a4D.Function object based upon the <em>formulaString</em>.<em>formulaString</em> puede ser tan simple como un valor único ocomplejo, como un método proyecto con parámetros.</p><p>Este comando es similar a <a href="#FunctionClass.html_formula"><code>Formula</code></a>, excepto quemaneja una fórmula basada en texto. En la mayoría de los casos, serecomienda utilizar el comando <code>Formula</code>. <code>Formulafrom string</code> sólo debe utilizarse cuando la fórmula originalfue expresada como texto (por ejemplo, almacenada externamente enun archivo JSON). En este contexto, el uso de la sintaxis contokens es muy aconsejable.</p><blockquote><p>Dado que no se puede acceder al contenido de las variableslocales por su nombre en el modo compilado, no se pueden utilizaren <em>formulaString</em>. Un intento de acceder a una variablelocal con <code>Formula from string</code> dará lugar a un error(-10737).</p></blockquote><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><p>El siguiente código creará un diálogo que acepta una fórmula enformato texto:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$textFormula </span>: Text<span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$textFormula</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Por favor, escriba una fórmula"</span>)<span class="hljs-keyword"> If</span>(ok=<span class="hljs-number">1</span>)    <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula from string</span>(<span class="hljs-variable">$textFormula</span>)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Result = "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>()))<span class="hljs-keyword"> End if</span></code></pre><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/formulaDialog.png" /></p><p>...y ejecuta la fórmula:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/formulaAlert.png" /></p><h2><a aria-hidden="true" class="anchor" id="FunctionClass.html_apply"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_apply"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.apply()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17 R3</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.apply</strong>() : any<br /><strong>.apply</strong>( <em>thisObj</em> : Object { ;<em>formulaParams</em> : Collection } ) : any</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>thisObj</td><td>Objeto</td><td style="text-align:center">-&gt;</td><td>Objeto a devolver por el comando This en la fórmula</td></tr><tr><td>formulaParams</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Colección de valores que se pasan como $1...$n cuando seejecuta la <code>fórmula</code></td></tr><tr><td>Resultado</td><td>any</td><td style="text-align:center">&lt;-</td><td>Valor obtenido de la ejecución de la fórmula</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_descripci%C3%B3n-2"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_descripci%25C3%25B3n-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.apply()</code> ejecuta el objeto<code>formula</code> al que se aplica y devuelve el valorresultante&lt;!-- END REF --. El objeto fórmula puede ser creadocon los comandos <code>Formula</code> o</p><p><code>Formula from string</code>.</p><p>En el parámetro <em>thisObj</em>, puede pasar una referencia alobjeto que se utilizará como <code>This</code> dentro de lafórmula.</p><p>También puede pasar una colección que se utilizará comoparámetros $1...$n en la fórmula utilizando el parámetro opcional<em>formulaParams</em>.</p><p>Tenga en cuenta que <code>.apply()</code> es similar a <a href="#FunctionClass.html_call"><code>.call()</code></a> excepto que losparámetros se pasan como una colección. Esto puede ser útil parapasar los resultados calculados.</p><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-1-3"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-1-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-variable">$1</span>+<span class="hljs-variable">$2</span>+<span class="hljs-variable">$3</span>) <span class="hljs-variable">$c</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>;<span class="hljs-number">30</span>) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">apply</span>(<span class="hljs-literal">Null</span>;<span class="hljs-variable">$c</span>) <span class="hljs-comment">// devuelve 60</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-2-3"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-2-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$calc </span>: 4D.<span class="hljs-keyword">Function</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$feta</span>; <span class="hljs-variable">$robot </span>: Object <span class="hljs-variable">$robot</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Robot"</span>;<span class="hljs-string">"price"</span>;<span class="hljs-number">543</span>;<span class="hljs-string">"quantity"</span>;<span class="hljs-number">2</span>) <span class="hljs-variable">$feta</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Feta"</span>;<span class="hljs-string">"price"</span>;<span class="hljs-number">12.5</span>;<span class="hljs-string">"quantity"</span>;<span class="hljs-number">5</span>) <span class="hljs-variable">$calc</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-literal">This</span>.total:=<span class="hljs-literal">This</span>.price*<span class="hljs-literal">This</span>.quantity) <span class="hljs-variable">$calc</span>.<span class="hljs-function">apply</span>(<span class="hljs-variable">$feta</span>) <span class="hljs-comment">// $feta={name:Feta,price:12.5,quantity:5,total:62.5}</span> <span class="hljs-variable">$calc</span>.<span class="hljs-function">apply</span>(<span class="hljs-variable">$robot</span>) <span class="hljs-comment">// $robot={name:Robot,price:543,quantity:2,total:1086}</span></code></pre><h2><a aria-hidden="true" class="anchor" id="FunctionClass.html_call"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_call"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.call()</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v17 R3</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.call</strong>() : any<br /><strong>.call</strong>( <em>thisObj</em> : Object { ;...<em>params</em> : any } ) : any</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th></th><th>Descripción</th></tr></thead><tbody><tr><td>thisObj</td><td>Objeto</td><td>-&gt;</td><td>Objeto a devolver por el comando This en la fórmula</td></tr><tr><td>params</td><td>any</td><td>-&gt;</td><td>Valor(es) que se pasa(n) como $1...$n cuando se ejecuta lafórmula</td></tr><tr><td>Resultado</td><td>any</td><td>&lt;-</td><td>Valor obtenido de la ejecución de la fórmula</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_descripci%C3%B3n-3"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_descripci%25C3%25B3n-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La función <code>.call()</code> ejecuta el objeto<code>formula</code> al que se aplica y devuelve el valorresultante&lt;!-- END REF --. El objeto fórmula puede ser creadocon los comandos <code>Formula</code> o</p><p><code>Formula from string</code>.</p><p>En el parámetro <em>thisObj</em>, puede pasar una referencia alobjeto que se utilizará como <code>This</code> dentro de lafórmula.</p><p>También puede pasar los valores a utilizar como parámetros<em>$1...$n</em> en la fórmula utilizando el parámetro opcional<em>params</em>).</p><p>Tenga en cuenta que <code>.call()</code> es similar a <a href="#FunctionClass.html_apply"><code>.apply()</code></a> excepto quelos parámetros se pasan directamente.</p><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-1-4"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-1-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$f </span>: 4D.<span class="hljs-keyword">Function</span> <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Uppercase</span>(<span class="hljs-variable">$1</span>)) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>(<span class="hljs-literal">Null</span>;<span class="hljs-string">"hello"</span>) <span class="hljs-comment">// devuelve "HELLO"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-2-4"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-2-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo 2</h4><pre><code class="hljs css language-4d"> <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"value"</span>;<span class="hljs-number">50</span>) <span class="hljs-variable">$f</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-literal">This</span>.value*<span class="hljs-number">2</span>) <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$f</span>.<span class="hljs-function">call</span>(<span class="hljs-variable">$o</span>) <span class="hljs-comment">// devuelve 100</span></code></pre><h2><a aria-hidden="true" class="anchor" id="FunctionClass.html_source"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_source"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.source</h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v18 R2</td><td>Añadidos</td></tr></tbody></table></details><p><strong>.source</strong> : Text</p><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_descripci%C3%B3n-4"></a><a aria-hidden="true"class="hash-link" href="#FunctionClass.html_descripci%25C3%25B3n-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h4><p>La propiedad <code>.source</code> contiene la expresión fuentede la <code>fórmula</code> como texto.</p><p>Esta propiedad es <strong>de sólo lectura</strong>.</p><h4><a aria-hidden="true" class="anchor" id="FunctionClass.html_ejemplo-7"></a><a aria-hidden="true" class="hash-link" href="#FunctionClass.html_ejemplo-7"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$of </span>: 4D.<span class="hljs-keyword">Function</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$tf </span>: Text <span class="hljs-variable">$of</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">String</span>(Current time;HH MM AM PM)) <span class="hljs-variable">$tf</span>:=<span class="hljs-variable">$of</span>.source <span class="hljs-comment">//"String(Current time;HH MM AM PM)"</span></code></pre><style><![CDATA[ h2 { background: #d9ebff;}]]></style></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#FolderClass.html"><span class="arrow-prev">←</span><span>Folder</span></a><a class="docs-next button" href="#IMAPTransporterClass.html"><span>IMAPTransporter</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#FunctionClass.html_formula">Formula</a></li><li><a href="#FunctionClass.html_formula-from-string">Formula fromstring</a></li><li><a href="#FunctionClass.html_apply">.apply()</a></li><li><a href="#FunctionClass.html_call">.call()</a></li><li><a href="#FunctionClass.html_source">.source</a></li></ul></nav></div></div></body></html>