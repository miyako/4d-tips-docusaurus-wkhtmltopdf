<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>$method · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Este parámetro permite definir la operación a ejecutar con la entidad o selección de entidades devuelta."name="description" /><meta content="es" name="docsearch:language" /><meta content="$method · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Este parámetro permite definir la operación a ejecutar con la entidad o selección de entidades devuelta."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#%24method.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">$method<a aria-hidden="true" class="anchor" id="method.html"></a></h1></header><article><div><p><span>Este parámetro permite definir la operación a ejecutar conla entidad o selección de entidades devuelta.</span></p><h2><span><a aria-hidden="true" class="anchor" id="method.html_sintaxis-disponible"></a><a aria-hidden="true" class="hash-link" href="#method.html_sintaxis-disponible"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Sintaxis disponible</span></h2><table><thead><tr><th>Sintaxis</th><th>Ejemplo</th><th>Descripción</th></tr></thead><tbody><tr><td><a href="#method.html_methoddelete"><strong>$method=delete</strong></a></td><td><code>POST /Employee?$filter="ID=11"&amp;$method=delete</code></td><td>Elimina la entidad actual, la colección de entidades o laselección de entidades</td></tr><tr><td><a href="#method.html_methodentityset"><strong>$method=entityset</strong></a></td><td><code>GET /People/?$filter="ID&gt;320"&amp;$method=entityset&amp; $timeout=600</code></td><td>Crea un conjunto de entidades en la caché de 4D Server basadoen la colección de entidades definidas en la solicitud REST</td></tr><tr><td><a href="#method.html_methodrelease"><strong>$method=release</strong></a></td><td><code>GET/Employee/$entityset/&lt;entitySetID&gt;?$method=release</code></td><td>Libera un conjunto de entidades existente almacenado en lacaché de 4D Server</td></tr><tr><td><a href="#method.html_methodsubentityset"><strong>$method=subentityset</strong></a></td><td><code>GET /Company(1)/staff?$expand=staff&amp;$method=subentityset&amp; $subOrderby=lastName ASC</code></td><td>Crea un conjunto de entidades basado en la colección deentidades relativas definidas en la petición REST</td></tr><tr><td><a href="#method.html_methodupdate"><strong>$method=update</strong></a></td><td><code>POST /Person/?$method=update</code></td><td>Actualiza y/o crea una o varias entidades</td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="method.html_methoddelete"></a><a aria-hidden="true" class="hash-link" href="#method.html_methoddelete"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=delete</span></h2><p><span>Elimina la entidad actual, la colección de entidades o laselección de entidad actual (creada vía REST)</span></p><h3><span><a aria-hidden="true" class="anchor" id="method.html_descripci%C3%B3n"></a><a aria-hidden="true" class="hash-link" href="#method.html_descripci%25C3%25B3n"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</span></h3><p><span>Con <code>$method=delete</code>, puede eliminar unaentidad o una colección de entidades entera. Puede definir lacolección de entidades utilizando, por ejemplo,<a href="#filter.html"><code>$filter</code></a> o especificando unodirectamente mediante <a href="#method.html_dataclasskey"><code>{dataClass}({key})</code></a><em>(por ejemplo</em>, /Employee(22)).</span></p><p><span>También puede eliminar las entidades de un conjunto deentidades, llamando a <a href="#method.html_entitysetentitysetid"><code>$entityset/{entitySetID}</code></a>.</span></p><h2><span><a aria-hidden="true" class="anchor" id="method.html_ejemplo"></a><a aria-hidden="true" class="hash-link"href="#method.html_ejemplo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</span></h2><p><span>A continuación, puede escribir la siguiente petición RESTpara eliminar la entidad cuya llave es 22:</span></p><p><span><code>POST/rest/Employee(22)/?$method=delete</code></span></p><p><span>También se puede hacer una petición de informaciónutilizando $filter:</span></p><p><span><code>POST/rest/Employee?$filter="ID=11"&amp;$method=delete</code></span></p><p><span>También puede eliminar un conjunto de entidades utilizando$entityset/{entitySetID}:</span></p><p><span><code>POST/rest/Employee/$entityset/73F46BE3A0734EAA9A33CA8B14433570?$method=delete</code></span></p><p><span>Respuesta:</span></p><pre><span><code class="hljs">{    <span class="hljs-attr">"ok"</span>: <span class="hljs-literal">true</span>}</code></span></pre><h2><a aria-hidden="true" class="anchor" id="method.html_methodentityset"></a><a aria-hidden="true" class="hash-link" href="#method.html_methodentityset"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=entityset</h2><p>Crea un conjunto de entidades en la caché de 4D Server basado enla colección de entidades definidas en la solicitud REST</p><h3><a aria-hidden="true" class="anchor" id="method.html_descripci%C3%B3n-1"></a><a aria-hidden="true" class="hash-link" href="#method.html_descripci%25C3%25B3n-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h3><p>Cuando se crea una colección de entidades en REST, también sepuede crear un conjunto de entidades que se guardará en la caché de4D Server. El conjunto de entidades tendrá un número de referenciaque puede pasar a <code>$entityset/{entitySetID}</code> paraacceder a él. Por defecto, es válido durante dos horas; sinembargo, puede modificar esa cantidad de tiempo pasando un valor(en segundos) a $timeout.</p><p>Si ha utilizado <code>$savedfilter</code> y/o<code>$savedorderby</code> (junto con <code>$filter</code> y/o<code>$orderby</code>) cuando creó su conjunto de entidades, puedevolver a crearlo con el mismo ID de referencia aunque se hayaeliminado de la caché de 4D Server.</p><h3><a aria-hidden="true" class="anchor" id="method.html_ejemplo-1"></a><a aria-hidden="true" class="hash-link"href="#method.html_ejemplo-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h3><p>Para crear un conjunto de entidades, que se guardará en la cachéde 4D Server durante dos horas, añada<code>$method=entityset</code> al final de su petición REST:</p><p><code>GET/rest/People/?$filter="ID&gt;320"&amp;$method=entityset</code></p><p>Puede crear un conjunto de entidades que se almacenará en lacaché de 4D Server durante sólo diez minutos pasando un nuevotiempo de espera a <code>$timeout</code>:</p><p><code>GET/rest/People/?$filter="ID&gt;320"&amp;$method=entityset&amp;$timeout=600</code></p><p>También puede guardar el filtro y ordenar por, pasando true a<code>$savedfilter</code> y <code>$savedorderby</code>.</p><blockquote><p><code>$skip</code> y <code>$top/$limit</code> no se tienen encuenta al guardar un conjunto de entidades.</p></blockquote><p>Después de crear un conjunto de entidades, el primer elemento,<code>__ENTITYSET</code>, se añade al objeto devuelto e indica laURI a utilizar para acceder al conjunto de entidades:</p><p><code>__ENTITYSET:"http://127.0.0.1:8081/rest/Employee/$entityset/9718A30BF61343C796345F3BE5B01CE7"</code></p><h2><a aria-hidden="true" class="anchor" id="method.html_methodrelease"></a><a aria-hidden="true" class="hash-link" href="#method.html_methodrelease"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=release</h2><p>Libera un conjunto de entidades existente almacenado en la cachéde 4D Server.</p><h3><a aria-hidden="true" class="anchor" id="method.html_descripci%C3%B3n-2"></a><a aria-hidden="true" class="hash-link" href="#method.html_descripci%25C3%25B3n-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h3><p>Puede liberar un conjunto de entidades, que creó utilizando<a href="#method.html_methodentityset"><code>$method=entityset</code></a>,de la caché de 4D Server.</p><h3><a aria-hidden="true" class="anchor" id="method.html_ejemplo-2"></a><a aria-hidden="true" class="hash-link"href="#method.html_ejemplo-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h3><p>Muestra un conjunto de entidades existente:</p><p><code>GET/rest/Employee/$entityset/4C51204DD8184B65AC7D79F09A077F24?$method=release</code></p><h4><a aria-hidden="true" class="anchor" id="method.html_respuesta"></a><a aria-hidden="true" class="hash-link"href="#method.html_respuesta"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Respuesta:</h4><p>Si la petición fue exitosa, se devuelve la siguienterespuesta:</p><pre><code class="hljs">{    <span class="hljs-string">"ok"</span>: true}Si <span class="hljs-keyword">no</span> <span class="hljs-keyword">se</span> encuentra el conjunto <span class="hljs-keyword">de</span> entidades, <span class="hljs-keyword">se</span> devuelve un <span class="hljs-keyword">error</span>:{    <span class="hljs-string">"__ERROR"</span>: [        {             <span class="hljs-string">"message"</span>: <span class="hljs-string">"Error code: 1802\nEntitySet  \"</span>4C51204DD8184B65AC7D79F09A077F24\<span class="hljs-string">" cannot be found\ncomponent:  'dbmg'\ntask 22, name: 'HTTP connection handler'\n"</span>,            <span class="hljs-string">"componentSignature"</span>: <span class="hljs-string">"dbmg"</span>,            <span class="hljs-string">"errCode"</span>: 1802        }    ]}</code></pre><h2><a aria-hidden="true" class="anchor" id="method.html_methodsubentityset"></a><a aria-hidden="true" class="hash-link" href="#method.html_methodsubentityset"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=subentityset</h2><p>Crea un conjunto de entidades en la caché de 4D Server basado enla colección de entidades relativas definidas en la peticiónREST</p><h3><a aria-hidden="true" class="anchor" id="method.html_descripci%C3%B3n-3"></a><a aria-hidden="true" class="hash-link" href="#method.html_descripci%25C3%25B3n-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h3><p><code>$method=subentityset</code> permite ordenar los datosdevueltos por el atributo relacional definido en la peticiónREST.</p><p>Para ordenar los datos, se utiliza la propiedad<code>$subOrderby</code>. Para cada atributo, se define el ordencomo ASC (o asc) para el orden ascendente y DESC (desc) para elorden descendente. Por defecto, los datos se clasifican en ordenascendente.</p><p>Si desea especificar varios atributos, puede delimitarlos conuna coma, µ, <code>$subOrderby="lastName desc, firstNameasc"</code>.</p><h3><a aria-hidden="true" class="anchor" id="method.html_ejemplo-3"></a><a aria-hidden="true" class="hash-link"href="#method.html_ejemplo-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h3><p>Si quiere recuperar sólo las entidades relacionadas para unaentidad específica, puede hacer la siguiente petición REST dondepersonal es el atributo de relación en la clase de datos Companyvinculada a la clase de datos Employee:</p><p><code>GET/rest/Company(1)/staff?$expand=staff&amp;$method=subentityset&amp;$subOrderby=lastNameASC</code></p><h4><a aria-hidden="true" class="anchor" id="method.html_respuesta-1"></a><a aria-hidden="true" class="hash-link" href="#method.html_respuesta-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Respuesta:</h4><pre><code class="hljs">{    <span class="hljs-attr">"__ENTITYSET"</span>: <span class="hljs-string">"/rest/Employee/$entityset/FF625844008E430B9862E5FD41C741AB"</span>,    <span class="hljs-attr">"__entityModel"</span>: <span class="hljs-string">"Employee"</span>,    <span class="hljs-attr">"__COUNT"</span>: <span class="hljs-number">2</span>,    <span class="hljs-attr">"__SENT"</span>: <span class="hljs-number">2</span>,    <span class="hljs-attr">"__FIRST"</span>: <span class="hljs-number">0</span>,    <span class="hljs-attr">"__ENTITIES"</span>: [        {            <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"4"</span>,            <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">1</span>,            <span class="hljs-attr">"ID"</span>: <span class="hljs-number">4</span>,            <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Linda"</span>,            <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Jones"</span>,            <span class="hljs-attr">"birthday"</span>: <span class="hljs-string">"1970-10-05T14:23:00Z"</span>,            <span class="hljs-attr">"employer"</span>: {                <span class="hljs-attr">"__deferred"</span>: {                    <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Company(1)"</span>,                    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>                }            }        },        {            <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>,            <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">3</span>,            <span class="hljs-attr">"ID"</span>: <span class="hljs-number">1</span>,            <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"John"</span>,            <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Smith"</span>,            <span class="hljs-attr">"birthday"</span>: <span class="hljs-string">"1985-11-01T15:23:00Z"</span>,            <span class="hljs-attr">"employer"</span>: {                <span class="hljs-attr">"__deferred"</span>: {                    <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Company(1)"</span>,                    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>                }            }        }    ]}</code></pre><h2><a aria-hidden="true" class="anchor" id="method.html_methodupdate"></a><a aria-hidden="true" class="hash-link" href="#method.html_methodupdate"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=update</h2><p>Actualiza y/o crea una o varias entidades</p><h3><a aria-hidden="true" class="anchor" id="method.html_descripci%C3%B3n-4"></a><a aria-hidden="true" class="hash-link" href="#method.html_descripci%25C3%25B3n-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Descripción</h3><p><code>$method=update</code> le permite actualizar y/o crear unao más entidades en un solo <strong>POST</strong>. Si se actualizay/o crea una entidad, se efectúa en un objeto con, para cadapropiedad, un atributo y su valor, <em>por ejemplo</em> <code>{lastName: "Smith" }</code>. Si actualiza y/o crea varias entidades,debe crear una colección de objetos.</p><p>En cualquier caso, debe definir los <strong>POST</strong> datosen el <strong>body</strong> de la petición.</p><p>Para actualizar una entidad, debes pasar los parámetros<code>__KEY</code> y <code>__STAMP</code> en el objeto junto contodos los atributos modificados. Si faltan ambos parámetros, seañadirá una entidad con los valores del objeto que envíe en elcuerpo de su <strong>POST</strong>.</p><p>Los triggers se ejecutan inmediatamente al guardar la entidad enel servidor. La respuesta contiene todos los datos tal y comoexisten en el servidor.</p><p>También puede poner estas solicitudes para crear o actualizarentidades en una transacción llamando a<code>$atomic/$atonce</code>. Si se produce algún error durante lavalidación de los datos, no se guarda ninguna de las entidades.También puede utilizar $method=validate para validar las entidadesantes de crearlas o actualizarlas.</p><p>Si surge un problema al añadir o modificar una entidad, se ledevolverá un error con esa información.</p><blockquote><p>Notas para tipos de atributos específicos:</p><ul><li><strong>Las fechas</strong> deben expresarse en formato JS:YYYY-MM-DDTHH:MM:SSZ (por ejemplo, "2010-10-05T23:00:00Z"). Si haseleccionado la propiedad Fecha únicamente para su atributo Fecha,se eliminará la zona horaria y la hora (hora, minutos y segundos).En este caso, también puede enviar la fecha en el formato que se ledevuelve dd!mm!aaaa (por ejemplo, 05!10!2013).</li><li><strong>Booleanos</strong> son true o false.</li><li>Los archivos subidos mediante <code>$upload</code> puedenaplicarse a un atributo de tipo Imagen o BLOB pasando el objetodevuelto en el siguiente formato {"ID":"D507BC03E613487E9B4C2F6A0512FE50"}</li></ul></blockquote><h3><a aria-hidden="true" class="anchor" id="method.html_ejemplo-4"></a><a aria-hidden="true" class="hash-link"href="#method.html_ejemplo-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h3><p>Para actualizar una entidad específica, se utiliza la siguienteURL:</p><p><code>POST /rest/Person/?$method=update</code></p><p><strong>Datos POST:</strong></p><pre><code class="hljs">{    <span class="hljs-attribute">__KEY</span>: <span class="hljs-string">"340"</span>,    __STAMP: <span class="hljs-number">2</span>,    firstName: <span class="hljs-string">"Pete"</span>,    lastName: <span class="hljs-string">"Miller"</span>}</code></pre><p>Los atributos firstName y lastName de la entidad indicadaanteriormente se modificarán dejando todos los demás atributos(excepto los calculados basados en estos atributos) sincambios.</p><p>Si quiere crear una entidad, puede enviar, vía POST losatributos utilizando esta URL:</p><p><code>POST /rest/Person/?$method=update</code></p><p><strong>Datos POST:</strong></p><pre><code class="hljs">{     <span class="hljs-attribute">firstName</span>: <span class="hljs-string">"John"</span>,    lastName: <span class="hljs-string">"Smith"</span>}</code></pre><p>También puede crear y actualizar múltiples entidades al mismotiempo utilizando la misma URL anterior pasando múltiples objetosen un array al POST:</p><p><code>POST /rest/Person/?$method=update</code></p><p><strong>Datos POST:</strong></p><pre><code class="hljs">[{     <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"309"</span>,    <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">5</span>,    <span class="hljs-attr">"ID"</span>: <span class="hljs-string">"309"</span>,    <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Penelope"</span>,    <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Miller"</span>}, {     <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Ann"</span>,    <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Jones"</span>}]</code></pre><p><strong>Respuesta:</strong></p><p>Cuando añade o modifica una entidad, se devuelve con losatributos modificados. Por ejemplo, si se crea el nuevo empleadoanterior, se devolverá lo siguiente:</p><pre><code class="hljs">{    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"622"</span>,     <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">1</span>,     <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"http://127.0.0.1:8081/rest/Employee(622)"</span>,     <span class="hljs-attr">"__TIMESTAMP"</span>: <span class="hljs-string">"!!2020-04-03!!"</span>,    <span class="hljs-attr">"ID"</span>: <span class="hljs-number">622</span>,     <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"John"</span>,     <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Smith"</span>}</code></pre><p>Si, por ejemplo, el sello no es correcto, se devuelve elsiguiente error:</p><pre><code class="hljs">{    <span class="hljs-attr">"__STATUS"</span>: {        <span class="hljs-attr">"status"</span>: <span class="hljs-number">2</span>,        <span class="hljs-attr">"statusText"</span>: <span class="hljs-string">"Stamp has changed"</span>,        <span class="hljs-attr">"success"</span>: <span class="hljs-literal">false</span>    },    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>,    <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">12</span>,    <span class="hljs-attr">"__TIMESTAMP"</span>: <span class="hljs-string">"!!2020-03-31!!"</span>,    <span class="hljs-attr">"ID"</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">"firstname"</span>: <span class="hljs-string">"Denise"</span>,    <span class="hljs-attr">"lastname"</span>: <span class="hljs-string">"O'Peters"</span>,    <span class="hljs-attr">"isWoman"</span>: <span class="hljs-literal">true</span>,    <span class="hljs-attr">"numberOfKids"</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">"addressID"</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">"gender"</span>: <span class="hljs-literal">true</span>,    <span class="hljs-attr">"imageAtt"</span>: {        <span class="hljs-attr">"__deferred"</span>: {            <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Persons(1)/imageAtt?$imageformat=best&amp;$version=12&amp;$expand=imageAtt"</span>,            <span class="hljs-attr">"image"</span>: <span class="hljs-literal">true</span>        }    },    <span class="hljs-attr">"extra"</span>: {        <span class="hljs-attr">"num"</span>: <span class="hljs-number">1</span>,        <span class="hljs-attr">"alpha"</span>: <span class="hljs-string">"I am 1"</span>    },    <span class="hljs-attr">"address"</span>: {        <span class="hljs-attr">"__deferred"</span>: {            <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Address(1)"</span>,            <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>        }    },    <span class="hljs-attr">"__ERROR"</span>: [        {            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Given stamp does not match current one for record# 0 of table Persons"</span>,            <span class="hljs-attr">"componentSignature"</span>: <span class="hljs-string">"dbmg"</span>,            <span class="hljs-attr">"errCode"</span>: <span class="hljs-number">1263</span>        },        {            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Cannot save record 0 in table Persons of database remote_dataStore"</span>,            <span class="hljs-attr">"componentSignature"</span>: <span class="hljs-string">"dbmg"</span>,            <span class="hljs-attr">"errCode"</span>: <span class="hljs-number">1046</span>        },        {            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"The entity# 1 in the \"Persons\" dataclass cannot be saved"</span>,            <span class="hljs-attr">"componentSignature"</span>: <span class="hljs-string">"dbmg"</span>,            <span class="hljs-attr">"errCode"</span>: <span class="hljs-number">1517</span>        }    ]}{}</code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#lock.html"><span class="arrow-prev">←</span><span>$lock</span></a><a class="docs-next button" href="#orderby.html"><span>$orderby</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#method.html_sintaxis-disponible">Sintaxisdisponible</a></li><li><a href="#method.html_methoddelete">$method=delete</a><ul class="toc-headings"><li><a href="#method.html_descripci%25C3%25B3n">Descripción</a></li></ul></li><li><a href="#method.html_ejemplo">Ejemplo</a></li><li><a href="#method.html_methodentityset">$method=entityset</a><ul class="toc-headings"><li><a href="#method.html_descripci%25C3%25B3n-1">Descripción</a></li><li><a href="#method.html_ejemplo-1">Ejemplo</a></li></ul></li><li><a href="#method.html_methodrelease">$method=release</a><ul class="toc-headings"><li><a href="#method.html_descripci%25C3%25B3n-2">Descripción</a></li><li><a href="#method.html_ejemplo-2">Ejemplo</a></li></ul></li><li><a href="#method.html_methodsubentityset">$method=subentityset</a><ul class="toc-headings"><li><a href="#method.html_descripci%25C3%25B3n-3">Descripción</a></li><li><a href="#method.html_ejemplo-3">Ejemplo</a></li></ul></li><li><a href="#method.html_methodupdate">$method=update</a><ul class="toc-headings"><li><a href="#method.html_descripci%25C3%25B3n-4">Descripción</a></li><li><a href="#method.html_ejemplo-4">Ejemplo</a></li></ul></li></ul></nav></div></div></body></html>