<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Parámetros · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="A menudo encontrará que necesita pasar datos a sus métodos y funciones. Esto se hace fácilmente con parámetros."name="description" /><meta content="es" name="docsearch:language" /><meta content="Parámetros · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="A menudo encontrará que necesita pasar datos a sus métodos y funciones. Esto se hace fácilmente con parámetros."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#parameters.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Parámetros<a aria-hidden="true" class="anchor" id="parameters.html"></a></h1></header><article><div><p><span>A menudo encontrará que necesita pasar datos a sus métodosy funciones. Esto se hace fácilmente con parámetros.</span></p><h2><span><a aria-hidden="true" class="anchor" id="parameters.html_generalidades"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_generalidades"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Generalidades</span></h2><p><span><strong>Los parámetros</strong> (o<strong>argumentos</strong>) son piezas de datos que un método ouna función de clase necesita para realizar su tarea. Los términos<em>parámetros</em> y <em>argumentos</em> se utilizanindistintamente en este manual. Los parámetros también se pasan alos comandos integrados de 4D. En este ejemplo, la cadena "Hello"es un argumento para el comando integrado<code>ALERT</code>:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-function">ALERT</span>(<span class="hljs-string">"Hello"</span>)</code></span></pre><p>Los parámetros se pasan de la misma manera a los métodos o lasfunciones de clase. Por ejemplo, si una función de clase llamada<code>getArea()</code> acepta dos parámetros, una llamada a lafunción de clase podría verse así:</p><pre><code class="hljs"><span class="hljs-variable">$area</span>:=<span class="hljs-variable">$o</span>.<span class="hljs-function">getArea</span>(<span class="hljs-number">50</span>;<span class="hljs-number">100</span>)</code></pre><p>O, si un método proyecto llamado <code>DO_SOMETHING</code>acepta tres parámetros, una llamada al método podría verse así:</p><pre><code class="hljs css language-4d"><span class="hljs-function">DO_SOMETHING</span>(<span class="hljs-variable">$WithThis</span>;<span class="hljs-variable">$AndThat</span>;<span class="hljs-variable">$ThisWay</span>)</code></pre><p>Los parámetros de entrada están separados por punto y coma(;).</p><p>Los mismos principios se aplican cuando los métodos se ejecutana través de comandos dedicados, por ejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-function">EXECUTE METHOD IN SUBFORM</span>(<span class="hljs-string">"Cal2"</span>;<span class="hljs-string">"SetCalendarDate"</span>;*;<span class="hljs-literal">!05/05/20!</span>)  <span class="hljs-comment">//pase la fecha !05/05/20! como parámetro de SetCalendarDate  </span><span class="hljs-comment">//en el contexto de un subformulario  </span><span class="hljs-comment">//pase la fecha !05/05/20! como parámetro de SetCalendarDate  </span><span class="hljs-comment">//en el contexto de un subformulario</span></code></pre><p>Los datos también pueden ser <strong>devueltos</strong>desdemétodos y funciones de clase. Por ejemplo, la siguiente línea deinstrucción utiliza el comando integrado, <code>Length</code>, paradevolver la longitud de una cadena. La instrucción pone el valordevuelto por <code>Length</code> en una variable llamada<em>MyLength</em>. Esta es la instrucción:</p><pre><code class="hljs css language-4d">MyLength:=<span class="hljs-function">Length</span>(<span class="hljs-string">"How did I get here?"</span>)</code></pre><p>Toda subrutina puede devolver un valor. Sólo se puede declararun único parámetro de salida por método o función de clase.</p><p>Los valores de entrada y salida son <a href="#parameters.html_values-or-references">evaluados</a> en el momentode la llamada y copiados en variables locales dentro de la funcióno método de la clase llamada. Se proponen dos sintaxis paradeclarar los parámetros de las variables en el código llamado:</p><ul><li><a href="#parameters.html_named-parameters">named variables</a>(recomendado en la mayoría de los casos) o</li><li><a href="#parameters.html_sequential-parameters">variablesnumeradas secuencialmente</a>.</li></ul><p>Las sintaxis <a href="#parameters.html_named-parameters">nombradas</a> y <a href="#parameters.html_sequential-parameters">secuenciales</a> se puedencombinar sin restricción para declarar los parámetros. Porejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">```4d</span><span class="hljs-keyword">  Function</span><span class="hljs-function"> add</span>(<span class="hljs-variable">$x </span>: Integer)<span class="hljs-keyword">    var</span> <span class="hljs-variable">$0</span>;<span class="hljs-variable">$2 </span>: Integer    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$x</span>+<span class="hljs-variable">$2</span></code></pre><h2><a aria-hidden="true" class="anchor" id="parameters.html_par%C3%A1metro-con-nombre"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_par%25C3%25A1metro-con-nombre"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Parámetro con nombre</h2><p>En los métodos y funciones de clase llamados, los valores de losparámetros se asignan a variables locales. Puedes declararparámetros utilizando un <strong>nombre de parámetro</strong> conun <strong>tipo de parámetro</strong>, separados por dospuntos.</p><ul><li>Para las funciones de clase, los parámetros se declaran juntocon la palabra clave <code>Function</code>.</li><li>Para los métodos (métodos proyecto, métodos objeto formulario,métodos base y triggers), los parámetros se declaran utilizando lapalabra clave <code>#DECLARE</code> al principio del código delmétodo.</li></ul><p>Ejemplos:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> getArea</span>(<span class="hljs-variable">$width </span>: Integer; <span class="hljs-variable">$height </span>: Integer) -&gt; <span class="hljs-variable">$area </span>: Integer</code></pre><pre><code class="hljs css language-4d"> <span class="hljs-comment">//myProjectMethod</span>#<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$i </span>: Integer) -&gt; <span class="hljs-variable">$myResult </span>: Object</code></pre><p>Se aplican las siguientes reglas:</p><ul><li>La línea de declaración debe ser la primera línea del códigodel método o de la función, de lo contrario se mostrará un error(sólo los comentarios o los saltos de línea pueden preceder ladeclaración).</li><li>Los nombres de los parámetros deben comenzar con un carácter<code>$</code> y cumplir con <a href="#parameters.html_object-properties">reglas de denominación de laspropiedades</a>.</li><li>Múltiples parámetros (y tipos) están separados por punto y coma(;).</li><li>Las sintaxis multilínea están soportadas (utilizando elcarácter "\").</li></ul><p>Por ejemplo, cuando se llama a una función<code>getArea()</code> con dos parámetros:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$area</span>:=<span class="hljs-variable">$o</span>.<span class="hljs-function">getArea</span>(<span class="hljs-number">50</span>;<span class="hljs-number">100</span>)</code></pre><p>En el código de la función clase, el valor de cada parámetro secopia en el parámetro declarado correspondiente:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Class: Polygon</span><span class="hljs-keyword">Function</span><span class="hljs-function"> getArea</span>(<span class="hljs-variable">$width </span>: Integer; <span class="hljs-variable">$height </span>: Integer)-&gt; <span class="hljs-variable">$area </span>: Integer    <span class="hljs-variable">$area</span>:=<span class="hljs-variable">$width</span>*<span class="hljs-variable">$height</span></code></pre><blockquote><p>Si no se define el tipo, el parámetro se definirá como <a href="dt_variant.md"><code>Variant</code></a>.</p></blockquote><p>Todos los tipos de métodos de 4D soportan la palabra clave<code>#DECLARE</code>, incluidos los métodos base. Por ejemplo, enel método base <code>On Web Authentication</code>, puede declararparámetros temporales:</p><pre><code class="hljs css language-4d">    <span class="hljs-comment">// Método base On Web Authentication</span>#<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$url </span>: Text; <span class="hljs-variable">$header </span>: Text; \  <span class="hljs-variable">$BrowserIP </span>: Text; <span class="hljs-variable">$ServerIP </span>: Text; \  <span class="hljs-variable">$user </span>: Text; <span class="hljs-variable">$password </span>: Text) \  -&gt; <span class="hljs-variable">$RequestAccepted </span>: Boolean<span class="hljs-variable">$entitySelection</span>:=ds.User.<span class="hljs-function">query</span>(<span class="hljs-string">"login=:1"</span>; <span class="hljs-variable">$user</span>)<span class="hljs-comment">// Verificar la contraseña hash...</span></code></pre><h3><a aria-hidden="true" class="anchor" id="parameters.html_valor-devuelto"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_valor-devuelto"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Valor devuelto</h3><p>El parámetro de retorno de una función se declara añadiendo unaflecha (-&gt;) y la definición del parámetro después de la lista deparámetros de entrada. Por ejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> add</span>(<span class="hljs-variable">$x </span>: Variant; <span class="hljs-variable">$y </span>: Integer) -&gt; <span class="hljs-variable">$result </span>: Integer</code></pre><p>También se puede declarar el parámetro de retorno sólo añadiendo<code>: tipo</code>, en cuyo caso se puede manejar mediante una<a href="#parameters.html_return-expression">instrucción deretorno</a> o a través de <code>$0</code> en la <a href="#parameters.html_returned-value-1">sintaxis secuencial</a>). Porejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> add</span>(<span class="hljs-variable">$x </span>: Variant; <span class="hljs-variable">$y </span>: Integer): Integer    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$x</span>+<span class="hljs-variable">$y</span></code></pre><h3><a aria-hidden="true" class="anchor" id="parameters.html_tipos-de-datos-soportados"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_tipos-de-datos-soportados"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Tipos de datos soportados</h3><p>Con los parámetros con nombre, puede utilizar los mismos tiposde datos <a href="#parameters.html_using-the-var-keyword">soportados por la palabraclave <code>var</code></a>, incluidos los objetos de las clases.Por ejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> saveToFile</span>(<span class="hljs-variable">$entity </span>: cs.ShapesEntity; <span class="hljs-variable">$file </span>: 4D.File)</code></pre><h2><a aria-hidden="true" class="anchor" id="parameters.html_par%C3%A1metros-secuenciales"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_par%25C3%25A1metros-secuenciales"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Parámetros secuenciales</h2><p>Como alternativa a la sintaxis <a href="#parameters.html_named-parameters">parámetros nombrados</a>, puededeclarar los parámetros utilizando variables numeradassecuencialmente: <strong>$1</strong>, <strong>$2</strong>,<strong>$3</strong>, etc. La numeración de las variables localesrepresenta el orden de los parámetros.</p><blockquote><p>Aunque esta sintaxis es soportada por las funciones clase, serecomienda utilizar la sintaxis <a href="#parameters.html_named-parameters">parámetros nombrados</a> eneste caso.</p></blockquote><p>Por ejemplo, cuando se llama a un método proyecto<code>DO_SOMETHING</code> con tres parámetros:</p><pre><code class="hljs css language-4d"><span class="hljs-function">DO_SOMETHING</span>(<span class="hljs-variable">$WithThis</span>;<span class="hljs-variable">$AndThat</span>;<span class="hljs-variable">$ThisWay</span>)</code></pre><p>En el código del método, el valor de cada parámetro se copiaautomáticamente en las variables $1, $2, $3:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//Código del método DO_SOMETHING</span>  <span class="hljs-comment">//Asumiendo que todos los parámetros son de tipo texto</span><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$1</span>;<span class="hljs-variable">$2</span>;<span class="hljs-variable">$3</span>)<span class="hljs-function"> ALERT</span>(<span class="hljs-string">"I received "</span>+<span class="hljs-variable">$1</span>+<span class="hljs-string">" and "</span>+<span class="hljs-variable">$2</span>+<span class="hljs-string">" and also "</span>+<span class="hljs-variable">$3</span>)  <span class="hljs-comment">//$1 contiene el parámetro $WithThis</span>  <span class="hljs-comment">//$2 contiene el parámetro $AndThat</span>  <span class="hljs-comment">//$3 contiene el parámetro $ThisWay</span></code></pre><h3><a aria-hidden="true" class="anchor" id="parameters.html_valor-devuelto-1"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_valor-devuelto-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Valor devuelto</h3><p>El valor a devolver se pone automáticamente en la variable local<code>$0</code>.</p><p>Por ejemplo, el siguiente método, llamado<code>Uppercase4</code>, devuelve una cadena con los cuatroprimeros caracteres de la cadena que se han pasado enmayúsculas:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$0</span>:=<span class="hljs-function">Uppercase</span>(<span class="hljs-function">Substring</span>(<span class="hljs-variable">$1</span>;<span class="hljs-number">1</span>;<span class="hljs-number">4</span>))+<span class="hljs-function">Substring</span>(<span class="hljs-variable">$1</span>;<span class="hljs-number">5</span>)</code></pre><p>El siguiente es un ejemplo que utiliza el método Uppercase4:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$NewPhrase</span>:=<span class="hljs-function">Uppercase4</span>(<span class="hljs-string">"This is good."</span>)</code></pre><p>En este ejemplo, la variable <em>$NewPhrase</em> recibe “THIS isgood.”</p><p>El valor devuelto, <code>$0</code>, es una variable local dentrode la subrutina. Puede utilizarse como tal dentro de la subrutina.Por ejemplo, puede escribir:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Do_something</span><span class="hljs-variable">$0</span>:=<span class="hljs-function">Uppercase</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function">ALERT</span>(<span class="hljs-variable">$0</span>)</code></pre><p>En este ejemplo, <code>$0</code> se le asignó primero el valorde <code>$1</code>, y luego se usó como parámetro del comando<code>ALERT</code>. Dentro de la subrutina, puede utilizar<code>$0</code> de la misma manera que utilizaría cualquier otravariable local. Es 4D quien devuelve el valor de <code>$0</code>(tal y como está cuando la subrutina termina) al métodollamado.</p><h3><a aria-hidden="true" class="anchor" id="parameters.html_tipos-de-datos-soportados-1"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_tipos-de-datos-soportados-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Tipos de datos soportados</h3><p>Puede utilizar toda <a href="#parameters.html_expression-types">expresión</a> como parámetrosecuencial, excepto:</p><ul><li>tablas</li><li>arrays</li></ul><p>Las expresiones de tablas o arrays sólo pueden pasarse <a href="#parameters.html_pointers-as-parameters-to-methods">comoreferencia utilizando un puntero</a>.</p><h2><a aria-hidden="true" class="anchor" id="parameters.html_return-expression"></a><a aria-hidden="true"class="hash-link" href="#parameters.html_return-expression"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>return {expression}</code></h2><details><summary>Histórico</summary><table><thead><tr><th>Versión</th><th>Modificaciones</th></tr></thead><tbody><tr><td>v19 R4</td><td>Añadidos</td></tr></tbody></table></details><p>The <code>return</code> statement ends function or methodexecution and can be used to return an expression to thecaller.</p><p>For example, the following function returns the square of itsargument, $x, where $x is a number.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> square</span>(<span class="hljs-variable">$x </span>: Integer)    return <span class="hljs-variable">$x </span>* <span class="hljs-variable">$x</span></code></pre><blockquote><p>Internally, <code>return x</code> executes <code>$0:=x</code> or(if declared) <code>myReturnValue:=x</code>, and returns to thecaller. If <code>return</code> is used without an expression, thefunction or method returns a null value of the declared return type(if any), otherwise <em>undefined</em>.</p></blockquote><p>The <code>return</code> statement can be used along with thestandard syntax for <a href="#parameters.html_returned-value">returned values</a> (the returnedvalue must be of the declared type). However, note that it endsimmediately the code execution. Por ejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span> getValue    <span class="hljs-variable">$0</span>:=<span class="hljs-number">10</span>    return <span class="hljs-number">20</span>    <span class="hljs-comment">// devuelve 20</span><span class="hljs-keyword">Function</span> getValue -&gt; <span class="hljs-variable">$v </span>: Integer    return <span class="hljs-number">10</span>    <span class="hljs-variable">$v</span>:=<span class="hljs-number">20</span> <span class="hljs-comment">// nunca se ejecuta</span>    <span class="hljs-comment">// devuelve 10</span></code></pre><h2><a aria-hidden="true" class="anchor" id="parameters.html_indirecci%C3%B3n-de-par%C3%A1metros-n"></a><a aria-hidden="true"class="hash-link" href="#parameters.html_indirecci%25C3%25B3n-de-par%25C3%25A1metros-n"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Indirección de parámetros (${N})</h2><p>Los métodos proyecto 4D aceptan un número variable deparámetros. Puede dirigirse a esos parámetros con un bucle<code>For...End for</code>, el comando <a href="https://doc.4d.com/4dv19/help/command/en/page259.html"><code>Countparameters</code></a>y <strong>la sintaxis de indirección deparámetros</strong>. Dentro del método, una dirección deindirección tiene el formato <code>${N}</code>, donde<code>N</code> es una expresión numérica. <code>${N}</code> sedenomina <strong>parámetro genérico</strong>.</p><h3><a aria-hidden="true" class="anchor" id="parameters.html_utilizaci%C3%B3n-de-los-par%C3%A1metros-gen%C3%A9ricos"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_utilizaci%25C3%25B3n-de-los-par%25C3%25A1metros-gen%25C3%25A9ricos"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utilización de los parámetros genéricos</h3><p>Por ejemplo, considere un método que suma valores y devuelve lasuma formateada según un formato que se pasa como parámetro. Cadavez que se llama a este método, el número de valores a sumar puedevariar. Debemos pasar los valores como parámetros al método y elformato en forma de cadena de caracteres. El número de valorespuede variar de una llamada a otra.</p><p>Aquí está el método, llamado <code>MySum</code>:</p><pre><code class="hljs css language-4d"> #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$format </span>: Text) -&gt; <span class="hljs-variable">$result </span>: Text <span class="hljs-variable">$sum</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$i</span>;<span class="hljs-number">2</span>;Count parameters)    <span class="hljs-variable">$sum</span>:=<span class="hljs-variable">$sum</span>+<span class="hljs-variable">${</span><span class="hljs-variable">$i}</span><span class="hljs-keyword"> End for</span> <span class="hljs-variable">$result</span>:=<span class="hljs-function">String</span>(<span class="hljs-variable">$sum</span>;<span class="hljs-variable">$format</span>)</code></pre><p>Los parámetros del método deben pasarse en el orden correcto,primero el formato y luego un número variable de valores:</p><pre><code class="hljs css language-4d"> Result:=<span class="hljs-function">MySum</span>(<span class="hljs-string">"##0.00"</span>;<span class="hljs-number">125</span>,<span class="hljs-number">2</span>;<span class="hljs-number">33</span>,<span class="hljs-number">5</span>;<span class="hljs-number">24</span>) <span class="hljs-comment">//"182.70"</span> Result:=<span class="hljs-function">MySum</span>(<span class="hljs-string">"000"</span>;<span class="hljs-number">1</span>;<span class="hljs-number">2</span>;<span class="hljs-number">200</span>) <span class="hljs-comment">//"203"</span></code></pre><p>Tenga en cuenta que aunque haya declarado 0, 1 o más parámetrosen el método, siempre puede pasar el número de parámetros quedesee. Los parámetros están disponibles dentro del método llamado através de la sintaxis <code>${N}</code> y el tipo de los parámetrosextra es <a href="dt_variant.md">Variant</a> por defecto (puededeclararlos utilizando una <a href="#parameters.html_declaring-generic-parameters">directiva delcompilador</a>). Sólo hay que asegurarse de que los parámetrosexisten, gracias al comando <a href="https://doc.4d.com/4dv19/help/command/en/page259.html"><code>Countparameters</code></a>. Por ejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//método foo</span>#<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$p1</span>: Text;<span class="hljs-variable">$p2 </span>: Text; <span class="hljs-variable">$p3 </span>: Date)<span class="hljs-keyword"> For</span>(<span class="hljs-variable">$i</span>;<span class="hljs-number">1</span>;Count parameters)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"param "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$i</span>)+<span class="hljs-string">" = "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">${</span><span class="hljs-variable">$i}</span>))<span class="hljs-keyword">End for</span></code></pre><p>Este método se puede llamar:</p><pre><code class="hljs css language-4d"><span class="hljs-function">foo</span>(<span class="hljs-string">"hello"</span>;<span class="hljs-string">"world"</span>;<span class="hljs-literal">!01/01/2021!</span>;<span class="hljs-number">42</span>;<span class="hljs-literal">?12:00:00?</span>) <span class="hljs-comment">//se pasan parámetros adicionales //se pasan parámetros adicionales</span></code></pre><blockquote><p>La indirección de parámetros se gestiona mejor si se respeta lasiguiente convención: si sólo algunos de los parámetros se dirigenpor indirección, deben pasarse después de los demás.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="parameters.html_declaraci%C3%B3n-de-par%C3%A1metros-gen%C3%A9ricos"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_declaraci%25C3%25B3n-de-par%25C3%25A1metros-gen%25C3%25A9ricos"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Declaración de parámetros genéricos</h3><p>Al igual que con otras variables locales, no es obligatoriodeclarar los parámetros genéricos mediante una directiva delcompilador. Sin embargo, se recomienda para evitar toda ambigüedad.Los parámetros genéricos no declarados obtienen automáticamente eltipo <a href="dt_variant.md">Variant</a>.</p><p>Para declarar parámetros genéricos, se utiliza una directiva delcompilador a la que se pasa ${N} como parámetro, donde N especificael primer parámetro genérico.</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">${4}</span>)</code></pre><blockquote><p>La declaración de parámetros genéricos sólo puede hacerse con<a href="#parameters.html_sequential-parameters">la sintaxissecuencial</a>.</p></blockquote><p>Este comando significa que a partir del cuarto parámetro(incluido), el método puede recibir un número variable deparámetros de tipo texo. $1, $2 y $3 pueden ser de cualquier tipode datos. Sin embargo, si se utiliza $2 por indirección, el tipo dedatos utilizado será el tipo genérico. Así, será del tipo de datostexto, aunque para usted fuera, por ejemplo, del tipo de datosReal.</p><blockquote><p>El número en la declaración tiene que ser una constante y no unavariable.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="parameters.html_declaraci%C3%B3n-de-los-par%C3%A1metros-para-el-modo-compilado"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_declaraci%25C3%25B3n-de-los-par%25C3%25A1metros-para-el-modo-compilado"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Declaración de los parámetros para el modo compilado</h2><p>Aunque no sea obligatorio en <a href="interpreted.md">modointerpretado</a>, debe declarar cada parámetro en los métodos ofunciones llamados para evitar problemas.</p><p>Cuando se utiliza la <a href="#parameters.html_named-parameters">sintaxis de variablesnombradas</a>, los parámetros se declaran automáticamente a travésde la palabra clave <code>#DECLARE</code> o del prototipo<code>Function</code>. Por ejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> add</span>(<span class="hljs-variable">$x </span>: Variant; <span class="hljs-variable">$y </span>: Integer)-&gt; <span class="hljs-variable">$result </span>: Integer    <span class="hljs-comment">// todos los parámetros se declaran con su tipo</span></code></pre><p>Cuando se utiliza <a href="#parameters.html_sequential-parameters">la sintaxis de la variablesecuencial</a>, hay que asegurarse de que todos los parámetros sedeclaran correctamente. En el siguiente ejemplo, el método<code>Capitalize</code> proyecto acepta un parámetro texto ydevuelve un resultado texto:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">// Método proyecto Mayusculas</span>  <span class="hljs-comment">// Mayusculas( Texto ) -&gt; Texto</span>  <span class="hljs-comment">// Mayusculas( Cadena fuente ) -&gt; Cadena con la primera letra en mayúscula</span><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$0</span>;<span class="hljs-variable">$1</span>) <span class="hljs-variable">$0</span>:=<span class="hljs-function">Uppercase</span>(<span class="hljs-function">Substring</span>(<span class="hljs-variable">$1</span>;<span class="hljs-number">1</span>;<span class="hljs-number">1</span>))+<span class="hljs-function">Lowercase</span>(<span class="hljs-function">Substring</span>(<span class="hljs-variable">$1</span>;<span class="hljs-number">2</span>))</code></pre><p>La utilización de comandos tales como <code>New process</code>con métodos proceso que aceptan parámetros también requiere que losparámetros se declaren explícitamente en el método llamado. Porejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$string</span>)<span class="hljs-function">C_LONGINT</span>(<span class="hljs-variable">$idProc</span>;<span class="hljs-variable">$int</span>)<span class="hljs-function">C_OBJECT</span>(<span class="hljs-variable">$obj</span>)<span class="hljs-variable">$idProc</span>:=<span class="hljs-function">New process</span>(<span class="hljs-string">"foo_method"</span>;<span class="hljs-number">0</span>;<span class="hljs-string">"foo_process"</span>;<span class="hljs-variable">$string</span>;<span class="hljs-variable">$int</span>;<span class="hljs-variable">$obj</span>)</code></pre><p>Este código puede ser ejecutado en modo compilado sólo si"foo_method" declara sus parámetros:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//foo_method</span><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function">C_LONGINT</span>(<span class="hljs-variable">$2</span>)<span class="hljs-function">C_OBJECT</span>(<span class="hljs-variable">$3</span>)...</code></pre><blockquote><p>En modo compilado, puede agrupar todos los parámetros de lasvariables locales de los métodos proyecto en un método específicocon un nombre que empiece por "Compiler". Dentro de este método, sepueden predeclarar los parámetros de cada método, por ejemplo:</p></blockquote><pre><code class="hljs css language-4d"> <span class="hljs-comment">// Compiler_method</span><span class="hljs-function"> C_REAL</span>(OneMethodAmongOthers;<span class="hljs-variable">$1</span>) </code></pre><p>Ver la página <a href="interpreted.md">Modos interpretado ycompilado</a> para más información.</p><p>La declaración de parámetros también es obligatoria en lossiguientes contextos (estos contextos no soportan la declaración enun método "Compiler"):</p><ul><li>Métodos base - Por ejemplo, el <code>método base On WebConnection</code> recibe seis parámetros, de $1 a $6, de tipoTexto. Al principio del método base, debe escribir (incluso si nose utilizan todos los parámetros):</li></ul><pre><code class="hljs css language-4d"><span class="hljs-comment">// On Web Connection</span><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$1</span>;<span class="hljs-variable">$2</span>;<span class="hljs-variable">$3</span>;<span class="hljs-variable">$4</span>;<span class="hljs-variable">$5</span>;<span class="hljs-variable">$6</span>)</code></pre><blockquote><p>También puede utilizar <a href="#parameters.html_named-parameters">parámetros nombrados</a> con lapalabra clave <code>#DECLARE</code>.</p></blockquote><ul><li><p>Triggers - El parámetro $0 (Entero largo), que es el resultadode un trigger, será digitado por el compilador si el parámetro noha sido declarado explícitamente. Sin embargo, si quieredeclararlo, debe hacerlo en el propio trigger.</p></li><li><p>Objetos formulario que aceptan el evento formulario <code>OnDrag Over</code> - El parámetro $0 (Entero largo), que es elresultado del evento formulario <code>On Drag Over</code>, serádigitado por el compilador si el parámetro no ha sido declaradoexplícitamente. Sin embargo, si quiere declararlo, debe hacerlo enel propio método proyecto. <strong>Nota:</strong> el compilador noinicializa el parámetro $0. Por lo tanto, tan pronto como utiliceel evento formulario <code>On Drag Over</code>, debe inicializar$0. Por ejemplo:</p></li></ul><pre><code class="hljs css language-4d"><span class="hljs-function"> C_LONGINT</span>(<span class="hljs-variable">$0</span>)<span class="hljs-keyword"> If</span>(Form event=On Drag Over)    <span class="hljs-variable">$0</span>:=<span class="hljs-number">0</span>    ...<span class="hljs-keyword">    If</span>(<span class="hljs-variable">$DataType</span>=Is picture)       <span class="hljs-variable">$0</span>:=<span class="hljs-number">-1</span><span class="hljs-keyword">    End if</span>    ...<span class="hljs-keyword"> End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="parameters.html_tipo-de-par%C3%A1metro-equivocado"></a><a aria-hidden="true"class="hash-link" href="#parameters.html_tipo-de-par%25C3%25A1metro-equivocado"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Tipo de parámetro equivocado</h2><p>Llamar a un parámetro con un tipo incorrecto es un <a href="error-handling.md">error</a> que impide la correcta ejecución. Porejemplo, si escribe los siguientes métodos:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// method1</span>#<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$value </span>: Text)</code></pre><pre><code class="hljs css language-4d"><span class="hljs-comment">// method2</span><span class="hljs-function">method1</span>(<span class="hljs-number">42</span>) <span class="hljs-comment">//tipo incorrecto, texto esperado</span></code></pre><p>Este caso es tratado por 4D en función del contexto:</p><ul><li>en <a href="interpreted.md">proyectos compilados</a>, se generaun error en el paso de compilación siempre que sea posible. En casocontrario, se genera un error cuando se llama al método.</li><li>en los proyectos interpretados:<ul><li>si el parámetro se declaró utilizando la <a href="#parameters.html_named-parameters">sintaxis nombrada</a>(<code>#DECLARE</code> o <code>Function</code>), se genera un errorcuando se llama al método.</li><li>si el parámetro fue declarado utilizando <a href="#parameters.html_sequential-parameters">la sintaxis secuencial</a>(<code>C_XXX</code>), no se genera ningún error, el método llamadorecibe un valor vacío del tipo esperado.</li></ul></li></ul><h2><a aria-hidden="true" class="anchor" id="parameters.html_variables-de-entradasalida"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_variables-de-entradasalida"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Variables de entrada/salida</h2><p>Dentro de la subrutina, puede utilizar los parámetros $1, $2...de la misma manera que utilizaría cualquier otra variable local.Sin embargo, en el caso de que utilice comandos que modifiquen elvalor de la variable pasada como parámetro (por ejemplo <code>Findin field</code>), los parámetros $1, $2, etc. no pueden utilizarsedirectamente. Primero debe copiarlos en las variables localesestándar (por ejemplo: <code>$myvar:=$1</code>).</p><h2><a aria-hidden="true" class="anchor" id="parameters.html_utilizaci%C3%B3n-de-las-propiedades-de-objeto-como-par%C3%A1metros-con-nombre"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_utilizaci%25C3%25B3n-de-las-propiedades-de-objeto-como-par%25C3%25A1metros-con-nombre"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utilización de las propiedades de objeto como parámetroscon nombre</h2><p>La utilización de objetos como parámetros permite manejar<strong>parámetros con nombre</strong>. Este estilo de programaciónes simple, flexible y fácil de leer.</p><p>Por ejemplo, utilizando el método <code>CreatePerson</code>:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//CreatePerson</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$person </span>: Object <span class="hljs-variable">$person</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"Name"</span>;<span class="hljs-string">"Smith"</span>;<span class="hljs-string">"Age"</span>;<span class="hljs-number">40</span>)<span class="hljs-function"> ChangeAge</span>(<span class="hljs-variable">$person</span>)<span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$person</span>.Age))  </code></pre><p>En el método <code>ChangeAge</code> puede escribir:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//ChangeAge</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$1</span>; <span class="hljs-variable">$para </span>: Object <span class="hljs-variable">$para</span>:=<span class="hljs-variable">$1  </span> <span class="hljs-variable">$para</span>.Age:=<span class="hljs-variable">$para</span>.Age+<span class="hljs-number">10</span><span class="hljs-function"> ALERT</span>(<span class="hljs-variable">$para</span>.Name+<span class="hljs-string">" is "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$para</span>.Age)+<span class="hljs-string">" years old."</span>)</code></pre><p>Esto ofrece una poderosa manera de definir <a href="#parameters.html_optional-parameters">parámetros opcionales</a>(ver también abajo). Para manejar los parámetros que faltan,puede:</p><ul><li>verificar si se suministran todos los parámetros esperadoscomparándolos con el valor <code>Null</code>, o</li><li>predefinir los valores de los parámetros, o</li><li>utilizarlos como valores vacíos.</li></ul><p>En el método <code>ChangeAge</code> anterior, las propiedadesAge y Name son obligatorias y producirían errores si faltaran. Paraevitar este caso, puede escribir simplemente:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//ChangeAge</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$1</span>; <span class="hljs-variable">$para </span>: Object <span class="hljs-variable">$para</span>:=<span class="hljs-variable">$1  </span> <span class="hljs-variable">$para</span>.Age:=<span class="hljs-function">Num</span>(<span class="hljs-variable">$para</span>.Age)+<span class="hljs-number">10</span><span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$para</span>.Name)+<span class="hljs-string">" is "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$para</span>.Age)+<span class="hljs-string">" years old."</span>)</code></pre><p>Entonces ambos parámetros son opcionales; si no se llenan, elresultado será " is 10 years old", pero no se generará ningúnerror.</p><p>Por último, con los parámetros con nombre, el mantenimiento o lareproducción de las aplicaciones es muy sencillo y seguro. Imagineque más adelante se da cuenta de que añadir 10 años no siempre esapropiado. Necesita otro parámetro para definir cuántos años hayque añadir. Escriba:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$person</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"Name"</span>;<span class="hljs-string">"Smith"</span>;<span class="hljs-string">"Age"</span>;<span class="hljs-number">40</span>;<span class="hljs-string">"toAdd"</span>;<span class="hljs-number">10</span>)<span class="hljs-function">ChangeAge</span>(<span class="hljs-variable">$person</span>)<span class="hljs-comment">//ChangeAge</span><span class="hljs-keyword">var</span> <span class="hljs-variable">$1</span>;<span class="hljs-variable">$para </span>: Object<span class="hljs-variable">$para</span>:=<span class="hljs-variable">$1  </span><span class="hljs-keyword">If</span> (<span class="hljs-variable">$para</span>.toAdd=<span class="hljs-literal">Null</span>)    <span class="hljs-variable">$para</span>.toAdd:=<span class="hljs-number">10</span><span class="hljs-keyword">End if</span><span class="hljs-variable">$para</span>.Age:=<span class="hljs-function">Num</span>(<span class="hljs-variable">$para</span>.Age)+<span class="hljs-variable">$para</span>.toAdd<span class="hljs-function">ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$para</span>.Name)+<span class="hljs-string">" is "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$para</span>.Age)+<span class="hljs-string">" years old."</span>)</code></pre><p>El poder aquí es que no tendrá que cambiar su código existente.Siempre funcionará como en la versión anterior, pero si esnecesario, puede utilizar otro valor que no sea 10 años.</p><p>Con las variables con nombre, cualquier parámetro puede seropcional. En el ejemplo anterior, todos los parámetros sonopcionales y se puede dar cualquiera, en cualquier orden.</p><h2><a aria-hidden="true" class="anchor" id="parameters.html_par%C3%A1metros-opcionales"></a><a aria-hidden="true" class="hash-link" href="#parameters.html_par%25C3%25A1metros-opcionales"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Parámetros opcionales</h2><p>En el manual <em>Lenguaje de 4D</em>, los caracteres { }(llaves) indican parámetros opcionales. Por ejemplo, <code>ALERT(message{; okButtonTitle})</code> significa que el parámetro<em>okButtonTitle</em> puede omitirse al llamar al comando. Sepuede llamar de las siguientes maneras:</p><pre><code class="hljs css language-4d"><span class="hljs-function">ALERT</span>(<span class="hljs-string">"Are you sure?"</span>;<span class="hljs-string">"Yes I am"</span>) <span class="hljs-comment">//2 parámetros</span><span class="hljs-function">ALERT</span>(<span class="hljs-string">"Time is over"</span>) <span class="hljs-comment">//1 parámetro</span></code></pre><p>Los métodos y las funciones 4D también aceptan estos parámetrosopcionales. Tenga en cuenta que aunque haya declarado 0, 1 o másparámetros en el método, siempre puede pasar el número deparámetros que desee. Si llama a un método o función con menosparámetros que los declarados, los parámetros que faltan seprocesan como valores por defecto en el código llamado, <a href="#parameters.html_default-values">según su tipo</a>. Porejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// función "concate" de myClass</span><span class="hljs-keyword">Function</span><span class="hljs-function"> concate </span>(<span class="hljs-variable">$param1 </span>: Text ; <span class="hljs-variable">$param2 </span>: Text)-&gt;<span class="hljs-variable">$result </span>: Text<span class="hljs-variable">$result</span>:=<span class="hljs-variable">$param1</span>+<span class="hljs-string">" "</span>+<span class="hljs-variable">$param2</span></code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">// Método llamante</span> <span class="hljs-variable">$class</span>:=cs.myClass.<span class="hljs-function">new</span>() <span class="hljs-variable">$class</span>.<span class="hljs-function">concate</span>(<span class="hljs-string">"Hello"</span>) <span class="hljs-comment">// "Hello "</span> <span class="hljs-variable">$class</span>.<span class="hljs-function">concate</span>() <span class="hljs-comment">// Displays " "</span></code></pre><blockquote><p>También puede llamar a un método o función con más parámetros delos declarados. Estarán disponibles en el código llamado a travésde la sintaxis <a href="#parameters.html_parameter-indirection-n">${N}</a>.</p></blockquote><p>Utilizando el comando <code>Count parameters</code> desde dentrodel método llamado, puede detectar el número real de parámetros yrealizar diferentes operaciones dependiendo de lo que hayarecibido.</p><p>El siguiente ejemplo muestra un mensaje de texto y puedeinsertar el texto en un documento en el disco o en un área de 4DWrite Pro:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// APPEND TEXT Project Method</span><span class="hljs-comment">// APPEND TEXT ( Text { ; Text { ; Object } } )</span><span class="hljs-comment">// APPEND TEXT ( Message { ; Path { ; 4DWPArea } } )</span><span class="hljs-function"> Method</span>(<span class="hljs-variable">$message </span>: Text; <span class="hljs-variable">$path </span>: Text; <span class="hljs-variable">$wpArea </span>: Object)<span class="hljs-function"> ALERT</span>(<span class="hljs-variable">$message</span>)<span class="hljs-keyword"> If</span>(Count parameters&gt;=<span class="hljs-number">3</span>)<span class="hljs-function">    WP SET TEXT</span>(<span class="hljs-variable">$wpArea</span>;<span class="hljs-variable">$1</span>;wk append)<span class="hljs-keyword"> Else</span><span class="hljs-keyword">    If</span>(Count parameters&gt;=<span class="hljs-number">2</span>)<span class="hljs-function">       TEXT TO DOCUMENT</span>(<span class="hljs-variable">$path</span>;<span class="hljs-variable">$message</span>)<span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End if</span></code></pre><p>Después de añadir este método proyecto a su aplicación, puedeescribir:</p><pre><code class="hljs css language-4d"><span class="hljs-function">APPEND TEXT</span>(vtSomeText) <span class="hljs-comment">//Sólo mostrará el mensaje</span><span class="hljs-function">APPEND TEXT</span>(vtSomeText;<span class="hljs-variable">$path</span>) <span class="hljs-comment">//Muestra el mensaje y el anexo al documento en $path</span><span class="hljs-function">APPEND TEXT</span>(vtSomeText;<span class="hljs-string">""</span>;<span class="hljs-variable">$wpArea</span>) <span class="hljs-comment">//Muestra el mensaje y lo escribe en $wpArea</span></code></pre><blockquote><p>Cuando los parámetros opcionales son necesarios en sus métodos,también puede considerar el uso de <a href="#parameters.html_using-objects-properties-as-named-parameters">propiedadesde objeto como parámetros con nombre</a> que ofrecen una formaflexible de manejar un número variable de parámetros.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="parameters.html_valores-o-referencias"></a><a aria-hidden="true"class="hash-link" href="#parameters.html_valores-o-referencias"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Valores o referencias</h2><p>Cuando pasa un parámetro, 4D siempre evalúa la expresión delparámetro en el contexto del método que llama y define el<strong>valor resultante</strong> en las variables locales en lafunción de clase o la subrutina. Las variables/parámetros localesno son los campos, variables o expresiones reales pasados por elmétodo que llama; sólo contienen los valores que se han pasado. Lasvariables/parámetros locales no son los campos, variables oexpresiones reales pasados por el método que llama; sólo contienenlos valores que se han pasado. Por ejemplo:</p><pre><code class="hljs css language-4d">    <span class="hljs-comment">//Esta es una parte del código del método MY_METHOD</span><span class="hljs-function">DO_SOMETHING</span>([People]Name) <span class="hljs-comment">//Let's say [People]Name value is "williams"</span><span class="hljs-function">ALERT</span>([People]Name)    <span class="hljs-comment">//Este es el código del método DO_SOMETHING</span> <span class="hljs-variable">$1</span>:=<span class="hljs-function">Uppercase</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function"> ALERT</span>(<span class="hljs-variable">$1</span>)</code></pre><p>La caja de alerta mostrada por <code>DO_SOMETHING</code> dirá"WILLIAMS" y la caja de alerta mostrada por <code>MY_METHOD</code>dirá "williams". El método cambió localmente el valor del parámetro$1, pero esto no afecta al valor del campo<code>[People]Name</code> pasado como parámetro por el método<code>MY_METHOD</code>.</p><p>Hay dos formas de hacer que el método <code>DO_SOMETHING</code>cambie el valor del campo:</p><ol><li>En lugar de pasar el campo al método, se pasa un puntero almismo, por lo que se escribiría:</li></ol><pre><code class="hljs css language-4d">  <span class="hljs-comment">//Esta es una parte del código del método MY_METHOD</span><span class="hljs-function"> DO_SOMETHING</span>(-&gt;[People]Name) <span class="hljs-comment">//Let's say [People]Name value is "williams"</span><span class="hljs-function"> ALERT</span>([People]Last Name)  <span class="hljs-comment">//Este es el código del método DO_SOMETHING</span> <span class="hljs-variable">$1</span>-&gt;:=<span class="hljs-function">Uppercase</span>(<span class="hljs-variable">$1</span>-&gt;)<span class="hljs-function"> ALERT</span>(<span class="hljs-variable">$1</span>-&gt;)</code></pre><p>Aquí el parámetro no es el campo, sino un puntero al mismo. Porlo tanto, dentro del método <code>DO SOMETHING</code>, $1 ya no esel valor del campo sino un puntero al campo. El objeto<strong>referenciado</strong> por $1 ($1-&gt; en el códigoanterior) es el campo real. Por lo tanto, cambiar el objetoreferenciado va más allá del alcance de la subrutina, y el camporeal se ve afectado. En este ejemplo, las dos cajas de alerta dirán"WILLIAMS".</p><ol start="2"><li>En lugar de que el método <code>DO_SOMETHING</code> "hagaalgo", puede reescribir el método para que devuelva un valor. Porlo tanto, escribiría:</li></ol><pre><code class="hljs css language-4d">    <span class="hljs-comment">//Esta es una parte del código del método MY_METHO</span> [People]Name:=<span class="hljs-function">DO_SOMETHING</span>([People]Name) <span class="hljs-comment">//Let's say [People]Name value is "williams"</span><span class="hljs-function"> ALERT</span>([People]Name)    <span class="hljs-comment">//Este es el código del método DO_SOMETHING</span> <span class="hljs-variable">$0</span>:=<span class="hljs-function">Uppercase</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function"> ALERT</span>(<span class="hljs-variable">$0</span>)</code></pre><p>Esta segunda técnica de retornar un valor por una subrutina sellama " utilizar una función" Se describe en el párrafo <a href="#parameters.html_functions">Funciones</a>. Se describe en elpárrafo <a href="#parameters.html_returning-values">Valoresdevueltos</a>.</p><h3><a aria-hidden="true" class="anchor" id="parameters.html_casos-particulares-objetos-y-colecciones"></a><a aria-hidden="true"class="hash-link" href="#parameters.html_casos-particulares-objetos-y-colecciones"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Casos particulares: objetos y colecciones</h3><p>Debe prestar atención al hecho de que los tipos de datos Objetoy Colección sólo pueden manejarse a través de una referencia (esdecir, un <em>puntero</em> interno).</p><p>Por consiguiente, cuando se utilizan estos tipos de datos comoparámetros, <code>$1, $2...</code> no contienen <em>valores</em>sino <em>referencias</em>. La modificación del valor de losparámetros <code>$1, $2...</code> dentro de la subrutina sepropagará a cualquier lugar donde se utilice el objeto o colecciónfuente. Este es el mismo principio que para <a href="#parameters.html_pointers-as-parameters-to-methods">lospunteros</a>, excepto que los parámetros <code>$1, $2...</code> nonecesitan ser desreferenciados en la subrutina.</p><p>Por ejemplo, considere el método <code>CreatePerson</code> quecrea un objeto y lo envía como parámetro:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//CreatePerson</span><span class="hljs-keyword"> var</span> <span class="hljs-variable">$person </span>: Object <span class="hljs-variable">$person</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"Name"</span>;<span class="hljs-string">"Smith"</span>;<span class="hljs-string">"Age"</span>;<span class="hljs-number">40</span>)<span class="hljs-function"> ChangeAge</span>(<span class="hljs-variable">$person</span>)<span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$person</span>.Age))  </code></pre><p>El método <code>ChangeAge</code> añade 10 al atributo Age delobjeto recibido</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//ChangeAge</span> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$person </span>: Object) <span class="hljs-variable">$person</span>.Age:=<span class="hljs-variable">$person</span>.Age+<span class="hljs-number">10</span><span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$person</span>.Age))</code></pre><p>Cuando se ejecuta el método <code>CreatePerson</code>, las doscajas de alerta dirán "50" ya que la misma referencia de objeto esmanejada por ambos métodos.</p><p><strong>4D Server:</strong> cuando se pasan parámetros entremétodos que no se ejecutan en la misma máquina (utilizando porejemplo la opción "Ejecutar en el servidor"), las referencias noson utilizables. En estos casos, se envían copias de los parámetrosde objetos y colecciones en lugar de referencias.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#methods.html"><span class="arrow-prev">←</span><span>Métodos</span></a><a class="docs-next button" href="#shared.html"><span>Objetos y colecciones compartidos</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#parameters.html_generalidades">Generalidades</a></li><li><a href="#parameters.html_par%25C3%25A1metro-con-nombre">Parámetro connombre</a><ul class="toc-headings"><li><a href="#parameters.html_valor-devuelto">Valordevuelto</a></li><li><a href="#parameters.html_tipos-de-datos-soportados">Tipos dedatos soportados</a></li></ul></li><li><a href="#parameters.html_par%25C3%25A1metros-secuenciales">Parámetrossecuenciales</a><ul class="toc-headings"><li><a href="#parameters.html_valor-devuelto-1">Valordevuelto</a></li><li><a href="#parameters.html_tipos-de-datos-soportados-1">Tipos dedatos soportados</a></li></ul></li><li><a href="#parameters.html_return-expression"><code>return{expression}</code></a></li><li><a href="#parameters.html_indirecci%25C3%25B3n-de-par%25C3%25A1metros-n">Indirecciónde parámetros (${N})</a><ul class="toc-headings"><li><a href="#parameters.html_utilizaci%25C3%25B3n-de-los-par%25C3%25A1metros-gen%25C3%25A9ricos">Utilización de los parámetros genéricos</a></li><li><a href="#parameters.html_declaraci%25C3%25B3n-de-par%25C3%25A1metros-gen%25C3%25A9ricos">Declaración de parámetros genéricos</a></li></ul></li><li><a href="#parameters.html_declaraci%25C3%25B3n-de-los-par%25C3%25A1metros-para-el-modo-compilado">Declaración de los parámetros para el modo compilado</a></li><li><a href="#parameters.html_tipo-de-par%25C3%25A1metro-equivocado">Tipo deparámetro equivocado</a></li><li><a href="#parameters.html_variables-de-entradasalida">Variablesde entrada/salida</a></li><li><a href="#parameters.html_utilizaci%25C3%25B3n-de-las-propiedades-de-objeto-como-par%25C3%25A1metros-con-nombre">Utilización de las propiedades de objeto como parámetros connombre</a></li><li><a href="#parameters.html_par%25C3%25A1metros-opcionales">Parámetrosopcionales</a></li><li><a href="#parameters.html_valores-o-referencias">Valores oreferencias</a><ul class="toc-headings"><li><a href="#parameters.html_casos-particulares-objetos-y-colecciones">Casosparticulares: objetos y colecciones</a></li></ul></li></ul></nav></div></div></body></html>