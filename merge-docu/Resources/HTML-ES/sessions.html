<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Sesiones usuario · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="El servidor web de 4D ofrece funciones integradas para la gestión de **sesiones de usuario**. La creación y el mantenimiento de sesiones de usuario le permiten controlar y mejorar la experiencia del usuario en su aplicación web. Cuando se activan las sesiones de usuario, los clientes web pueden reutilizar el mismo contexto de servidor de una solicitud a otra."name="description" /><meta content="es" name="docsearch:language" /><meta content="Sesiones usuario · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="El servidor web de 4D ofrece funciones integradas para la gestión de **sesiones de usuario**. La creación y el mantenimiento de sesiones de usuario le permiten controlar y mejorar la experiencia del usuario en su aplicación web. Cuando se activan las sesiones de usuario, los clientes web pueden reutilizar el mismo contexto de servidor de una solicitud a otra."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#sessions.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Sesionesusuario<a aria-hidden="true" class="anchor" id="sessions.html"></a></h1></header><article><div><p><span>El servidor web de 4D ofrece funciones integradas para lagestión de <strong>sesiones de usuario</strong>. La creación y elmantenimiento de sesiones de usuario le permiten controlar ymejorar la experiencia del usuario en su aplicación web. Cuando seactivan las sesiones de usuario, los clientes web pueden reutilizarel mismo contexto de servidor de una solicitud a otra.</span></p><p><span>Las sesiones de usuario del servidor webpermiten:</span></p><ul><li><span>manejar múltiples peticiones simultáneamente desde elmismo cliente web a través de un número ilimitado de procesosapropiativos (las sesiones del servidor web son<strong>escalables</strong>),</span></li><li><span>compartir datos entre los procesos de un clienteweb,</span></li><li><span>asociar privilegios a las sesiones deusuario,</span></li><li><span>gestionan el acceso a través de un objeto<code>Session</code> y de la <a href="#SessionClass.html">SessionAPI</a>.</span></li></ul><blockquote><p><span><strong>Nota:</strong> la implementación actual es sólo elprimer paso de una próxima funcionalidad completa que permitirá alos desarrolladores gestionar los permisos jerárquicos de losusuarios a través de las sesiones en toda la aplicaciónweb.</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="sessions.html_activaci%C3%B3n-de-sesiones"></a><a aria-hidden="true" class="hash-link" href="#sessions.html_activaci%25C3%25B3n-de-sesiones"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Activación de sesiones</span></h2><p><span>La funcionalidad de gestión de sesiones puede ser activaday desactivada en su servidor web 4D. Hay diferentes maneras dehabilitar la gestión de la sesión:</span></p><ul><li><span>Utilizando la opción <strong>Sesiones escalables</strong>en la página "Web/Opciones (I)" de la Configuración (configuraciónpermanente): <img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/WebServer/settingsSession.png" /></span></li></ul><p><span>Esta opción está seleccionada por defecto en los nuevosproyectos. Sin embargo, se puede desactivar seleccionando la opción<strong>Sin sesiones</strong>, en cuyo caso las funcionalidades dela sesión web se desactivan (no hay ningún objeto<code>Session</code> disponible).</span></p><ul><li><span>Utilizando la propiedad <a href="#sessions.html_scalablesession"><code>.scalableSession</code></a>del objeto Web Server (para pasar el parámetro <em>settings</em> dela función <a href="#sessions.html_start"><code>.start()</code></a>). En este caso,esta configuración anula la opción definida en la caja de diálogoConfiguración del objeto Servidor Web (no se almacena en eldisco).</span></li></ul><blockquote><p><span>El comando <code>WEB SET OPTION</code> también puedeestablecer el modo de sesión para el servidor webprincipal.</span></p></blockquote><p><span>En cualquier caso, la configuración es local para lamáquina; por lo que puede ser diferente en el servidor web de 4DServer y en los servidores web de las máquinas 4Dremotas.</span></p><blockquote><p><span><strong>Compatibilidad</strong>: una opción<strong>Sesiones legacy</strong> está disponible en proyectoscreados con una versión de 4D anterior a 4D v18 R6 (para másinformación, consulte el sitio web <a href="https://doc.4d.com">doc.4d.com</a>).</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="sessions.html_implementaci%C3%B3n-de-la-sesi%C3%B3n"></a><a aria-hidden="true"class="hash-link" href="#sessions.html_implementaci%25C3%25B3n-de-la-sesi%25C3%25B3n"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Implementación de la sesión</span></h2><p><span>Cuando <a href="#sessions.html_enabling-sessions">sehabilitan las sesiones</a>, se implementan mecanismos automáticos,basados en una cookie privada establecida por el propio 4D:"4DSID_<em>AppName</em>", donde <em>AppName</em> es el nombre delproyecto de la aplicación. Esta cookie hace referencia a la sesiónweb actual de la aplicación.</span></p><blockquote><p><span>El nombre de la cookie puede obtenerse utilizando lapropiedad <a href="#sessions.html_sessioncookiename"><code>.sessionCookieName</code></a>.</span></p></blockquote><ol><li><p><span>En cada petición del cliente web, el servidor webcomprueba la presencia y el valor de la cookie privada"4DSID_<em>AppName</em>".</span></p></li><li><p><span>Si la cookie tiene un valor, 4D busca la sesión que creóesta cookie entre las sesiones existentes; si se encuentra estasesión, se reutiliza para la llamada.</span></p></li><li><p><span>Si la solicitud del cliente no corresponde a una sesión yaabierta:</span></p></li></ol><ul><li><span>se crea una nueva sesión con una cookie privada"4DSID_<em>AppName</em>" en el servidor web</span></li><li><span>se crea un nuevo objeto Guest <code>Session</code>dedicado a la sesión web escalable.</span></li></ul><p><span>El objeto <code>Session</code> actual puede entonces seraccedido a través del comando <a href="#sessions.html_session"><code>Session</code></a> en el código decualquier proceso web.</span></p><p><span><img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/WebServer/schemaSession.png" /></span></p><p><span>Los procesos web no suelen terminar, sino que se reciclanen un fondo común para ser más eficientes. Cuando un procesotermina de ejecutar una petición, se devuelve al pool y quedadisponible para la siguiente petición. Dado que un proceso webpuede ser reutilizado por cualquier sesión, <a href="#sessions.html_process-variables">las variables de proceso</a>deben ser borradas por su código al final de su ejecución(utilizando <a href="https://doc.4d.com/4dv18/help/command/en/page89.html"><code>CLEARVARIABLE</code></a> por ejemplo). Esta limpieza es necesaria paracualquier información relacionada con el proceso, como unareferencia a un archivo abierto. Esta es la razón por la que<strong>se recomienda</strong> utilizar el objeto <a href="#SessionClass.html">Sesión</a> cuando se quiera guardarinformación relacionada con la sesión.</span></p><h3><span><a aria-hidden="true" class="anchor" id="sessions.html_modo-apropiativo"></a><a aria-hidden="true" class="hash-link" href="#sessions.html_modo-apropiativo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Modo apropiativo</span></h3><p><span>En 4D Server, las sesiones del servidor web se manejanautomáticamente a través de procesos apropiativos, <strong>inclusoen modo interpretado</strong>. Debe asegurarse de que el código desu servidor web es <a href="#sessions.html_writing-thread-safe-web-server-code">compatible conuna ejecución apropiativa</a>.</span></p><blockquote><p><span>Para depurar el código web interpretado en la máquina delservidor, asegúrese de que el depurador está <a href="#debugging-remote.html">adjuntado al servidor</a> o <a href="#sessions.html_attaching-the-debugger-to-a-remote-4d-client">a unamáquina remota</a>. Los procesos web pasan entonces al modocooperativo y se puede depurar el código del servidorweb.</span></p></blockquote><p><span>Con 4D monopuesto, el código interpretado siempre seejecuta en modo cooperativo.</span></p><h2><span><a aria-hidden="true" class="anchor" id="sessions.html_compartir-informaci%C3%B3n"></a><a aria-hidden="true" class="hash-link" href="#sessions.html_compartir-informaci%25C3%25B3n"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Compartir información</span></h2><p><span>Cada objeto <code>Session</code> ofrece una propiedad<a href="#sessions.html_storage"><code>.storage</code></a> que esun <a href="#shared.html">objeto compartido</a>. Esta propiedadpermite compartir información entre todos los procesos manejadospor la sesión.</span></p><h2><span><a aria-hidden="true" class="anchor" id="sessions.html_fecha-de-caducidad-de-la-sesi%C3%B3n"></a><a aria-hidden="true"class="hash-link" href="#sessions.html_fecha-de-caducidad-de-la-sesi%25C3%25B3n"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fecha de caducidad de la sesión</span></h2><p><span>Una sesión web escalable se cierra cuando:</span></p><ul><li><span>el servidor web está detenido,</span></li><li><span>se ha alcanzado el tiempo de espera de la cookie desesión.</span></li></ul><p><span>La vida útil de una cookie inactiva es de 60 minutos pordefecto, lo que significa que el servidor web cerraráautomáticamente las sesiones inactivas después de 60minutos.</span></p><p><span>Este tiempo de espera se puede establecer utilizando lapropiedad <a href="#sessions.html_idletimeout"><code>.idleTimeout</code></a> delobjeto <code>Session</code> (el tiempo de espera no puede serinferior a 60 minutos).</span></p><p><span>Cuando se cierra una sesión web escalable, si después sellama al comando <a href="#sessions.html_session"><code>Session</code></a>:</span></p><ul><li><span>el objeto <code>Session</code> no contiene privilegios(es una sesión de invitado)</span></li><li><span>la propiédad <a href="#sessions.html_storage"><code>.storage</code></a> estávacía</span></li><li><span>se asocia una nueva cookie de sesión a lasesión</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="sessions.html_privilegios"></a><a aria-hidden="true" class="hash-link" href="#sessions.html_privilegios"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Privilegios</span></h2><p><span>Los privilegios pueden asociarse a las sesiones. En elservidor web, puede proporcionar un acceso o unas funcionalidadesespecíficas en función de los privilegios de la sesión.</span></p><p><span>Puede asignar privilegios utilizando la función <a href="#sessions.html_setprivileges"><code>.setPrivileges()</code></a>.En su código, puede comprobar los privilegios de la sesión parapermitir o denegar el acceso utilizando la función <a href="#sessions.html_hasprivilege"><code>.hasPrivilege()</code></a>. Pordefecto, las nuevas sesiones no tienen ningún privilegio: sonsesiones <strong>invitados</strong> (la función <a href="#sessions.html_isguest"><code>.isGuest()</code></a> devuelvetrue).</span></p><blockquote><p><span>En la implementación actual (v18 R6), sólo está disponibleel privilegio "WebAdmin".</span></p></blockquote><p><span>Ejemplo:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-keyword">If</span> (Session.<span class="hljs-function">hasPrivilege</span>(<span class="hljs-string">"WebAdmin"</span>))    <span class="hljs-comment">//El acceso está concedido, no haga nada</span><span class="hljs-keyword">Else</span>    <span class="hljs-comment">//Mostrar una página de autenticación</span><span class="hljs-keyword">End if</span></code></span></pre><h2><a aria-hidden="true" class="anchor" id="sessions.html_ejemplo"></a><a aria-hidden="true" class="hash-link"href="#sessions.html_ejemplo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h2><p>En una aplicación CRM, cada vendedor gestiona su propia carterade clientes. El almacén de datos contiene al menos dos clases dedatos vinculadas: Customers y SalesPersons (un vendedor tienevarios clientes).</p><p><img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/WebServer/exampleSession.png" /></p><p>Queremos que un vendedor se autentique, abra una sesión en elservidor web y que se carguen los 3 primeros clientes en lasesión.</p><ol><li>Ejecutamos esta URL para abrir una sesión:</li></ol><pre><code class="hljs"><span class="hljs-symbol">http:</span><span class="hljs-comment">//localhost:8044/authenticate.shtml</span></code></pre><blockquote><p>En un entorno de producción, es necesario utilizar una conexión<a href="#sessions.html_httpsenabled">HTTPS</a> para evitar quecualquier información no cifrada circule por la red.</p></blockquote><ol start="2"><li>La página <code>authenticate.shtml</code> es un formulario quecontiene los campos de entrada <em>userId</em> y <em>password</em>y envía una acción 4DACTION POST:</li></ol><pre><code class="hljs css language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">bgcolor</span>=<span class="hljs-string">"#ffffff"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">FORM</span> <span class="hljs-attr">ACTION</span>=<span class="hljs-string">"/4DACTION/authenticate"</span> <span class="hljs-attr">METHOD</span>=<span class="hljs-string">POST</span>&gt;</span>    UserId: <span class="hljs-tag">&lt;<span class="hljs-name">INPUT</span> <span class="hljs-attr">TYPE</span>=<span class="hljs-string">TEXT</span> <span class="hljs-attr">NAME</span>=<span class="hljs-string">userId</span> <span class="hljs-attr">VALUE</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span>    Password: <span class="hljs-tag">&lt;<span class="hljs-name">INPUT</span> <span class="hljs-attr">TYPE</span>=<span class="hljs-string">TEXT</span> <span class="hljs-attr">NAME</span>=<span class="hljs-string">password</span> <span class="hljs-attr">VALUE</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">INPUT</span> <span class="hljs-attr">TYPE</span>=<span class="hljs-string">SUBMIT</span> <span class="hljs-attr">NAME</span>=<span class="hljs-string">OK</span> <span class="hljs-attr">VALUE</span>=<span class="hljs-string">"Log In"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">FORM</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><p><img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/WebServer/authenticate.png" /></p><ol start="3"><li>El método authenticate project busca la persona <em>userID</em>y valida la contraseña contra el valor hash ya almacenado en latabla <em>SalesPersons</em>:</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$indexUserId</span>; <span class="hljs-variable">$indexPassword</span>; <span class="hljs-variable">$userId </span>: Integer<span class="hljs-keyword">var</span> <span class="hljs-variable">$password </span>: Text<span class="hljs-keyword">var</span> <span class="hljs-variable">$userTop3</span>; <span class="hljs-variable">$sales</span>; <span class="hljs-variable">$info </span>: Object<span class="hljs-function">ARRAY TEXT</span>(<span class="hljs-variable">$anames</span>; <span class="hljs-number">0</span>)<span class="hljs-function">ARRAY TEXT</span>(<span class="hljs-variable">$avalues</span>; <span class="hljs-number">0</span>)<span class="hljs-function">WEB GET VARIABLES</span>(<span class="hljs-variable">$anames</span>; <span class="hljs-variable">$avalues</span>)<span class="hljs-variable">$indexUserId</span>:=<span class="hljs-function">Find in array</span>(<span class="hljs-variable">$anames</span>; <span class="hljs-string">"userId"</span>)<span class="hljs-variable">$userId</span>:=<span class="hljs-function">Num</span>(<span class="hljs-variable">$avalues{</span><span class="hljs-variable">$indexUserId}</span>)<span class="hljs-variable">$indexPassword</span>:=<span class="hljs-function">Find in array</span>(<span class="hljs-variable">$anames</span>; <span class="hljs-string">"password"</span>)<span class="hljs-variable">$password</span>:=<span class="hljs-variable">$avalues{</span><span class="hljs-variable">$indexPassword}</span><span class="hljs-variable">$sales</span>:=ds.SalesPersons.<span class="hljs-function">query</span>(<span class="hljs-string">"userId = :1"</span>; <span class="hljs-variable">$userId</span>).<span class="hljs-function">first</span>()<span class="hljs-keyword">If</span> (<span class="hljs-variable">$sales</span>#<span class="hljs-literal">Null</span>)<span class="hljs-keyword">    If</span> (<span class="hljs-function">Verify password hash</span>(<span class="hljs-variable">$password</span>; <span class="hljs-variable">$sales</span>.password))        <span class="hljs-variable">$info</span>:=<span class="hljs-function">New object</span>()        <span class="hljs-variable">$info</span>.userName:=<span class="hljs-variable">$sales</span>.firstname+<span class="hljs-string">" "</span>+<span class="hljs-variable">$sales</span>.lastname        Session.<span class="hljs-function">setPrivileges</span>(<span class="hljs-variable">$info</span>)<span class="hljs-keyword">        Use</span> (Session.storage)<span class="hljs-keyword">            If</span> (Session.storage.myTop3=<span class="hljs-literal">Null</span>)                <span class="hljs-variable">$userTop3</span>:=<span class="hljs-variable">$sales</span>.customers.<span class="hljs-function">orderBy</span>(<span class="hljs-string">"totalPurchase desc"</span>).<span class="hljs-function">slice</span>(<span class="hljs-number">0</span>; <span class="hljs-number">3</span>)                Session.storage.myTop3:=<span class="hljs-variable">$userTop3</span><span class="hljs-keyword">            End if</span><span class="hljs-keyword">        End use</span><span class="hljs-function">        WEB SEND HTTP REDIRECT</span>(<span class="hljs-string">"/authenticationOK.shtml"</span>)<span class="hljs-keyword">    Else</span><span class="hljs-function">        WEB SEND TEXT</span>(<span class="hljs-string">"This password is wrong"</span>)<span class="hljs-keyword">    End if</span><span class="hljs-keyword">Else</span><span class="hljs-function">    WEB SEND TEXT</span>(<span class="hljs-string">"This userId is unknown"</span>)<span class="hljs-keyword">End if</span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#authentication.html"><span class="arrow-prev">←</span><span>Autenticación</span></a><a class="docs-next button" href="#preemptiveWeb.html"><span>Uso de procesos web apropiativos</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#sessions.html_activaci%25C3%25B3n-de-sesiones">Activación desesiones</a></li><li><a href="#sessions.html_implementaci%25C3%25B3n-de-la-sesi%25C3%25B3n">Implementaciónde la sesión</a><ul class="toc-headings"><li><a href="#sessions.html_modo-apropiativo">Modoapropiativo</a></li></ul></li><li><a href="#sessions.html_compartir-informaci%25C3%25B3n">Compartirinformación</a></li><li><a href="#sessions.html_fecha-de-caducidad-de-la-sesi%25C3%25B3n">Fecha decaducidad de la sesión</a></li><li><a href="#sessions.html_privilegios">Privilegios</a></li><li><a href="#sessions.html_ejemplo">Ejemplo</a></li></ul></nav></div></div></body></html>