<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Autenticación · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="La autentificación de los usuarios es necesaria cuando se desea ofrecer derechos de acceso específicos a los usuarios Web. La autenticación designa el modo en que se recoge y procesa la información relativa a las credenciales del usuario (normalmente nombre y contraseña)."name="description" /><meta content="es" name="docsearch:language" /><meta content="Autenticación · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="La autentificación de los usuarios es necesaria cuando se desea ofrecer derechos de acceso específicos a los usuarios Web. La autenticación designa el modo en que se recoge y procesa la información relativa a las credenciales del usuario (normalmente nombre y contraseña)."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#authentication.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Autenticación<a aria-hidden="true" class="anchor" id="authentication.html"></a></h1></header><article><div><p><span>La autentificación de los usuarios es necesaria cuando sedesea ofrecer derechos de acceso específicos a los usuarios Web. Laautenticación designa el modo en que se recoge y procesa lainformación relativa a las credenciales del usuario (normalmentenombre y contraseña).</span></p><h2><span><a aria-hidden="true" class="anchor" id="authentication.html_modos-de-autenticaci%C3%B3n"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_modos-de-autenticaci%25C3%25B3n"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Modos de autenticación</span></h2><p><span>El servidor web 4D ofrece tres modos de autenticación, quepuede seleccionar en la página<strong>Web</strong>/<strong>Opciones (I)</strong> de la ventanaPropiedades:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/WebServer/authentication.png" /></span></p><blockquote><p><span>Se recomienda utilizar una autenticación<strong>personalizada</strong>.</span></p></blockquote><h3><span><a aria-hidden="true" class="anchor" id="authentication.html_generalidades"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_generalidades"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Generalidades</span></h3><p><span>El funcionamiento del sistema de acceso del servidor web4D se resume en el siguiente diagrama:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/WebServer/serverAccess.png" /></span></p><blockquote><p><span>Las peticiones que comienzan por <code>rest/</code> songestionadas directamente por el <a href="#configuration.html">servidor REST</a>.</span></p></blockquote><h3><span><a aria-hidden="true" class="anchor" id="authentication.html_personalizado-por-defecto"></a><a aria-hidden="true" class="hash-link" href="#authentication.html_personalizado-por-defecto"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Personalizado (por defecto)</span></h3><p><span>Básicamente, en este modo, depende del desarrolladordefinir cómo autenticar a los usuarios. 4D sólo evalúa laspeticiones HTTP <a href="#authentication.html_method-calls">querequieren una autenticación</a>.</span></p><p><span>Este modo de autenticación es el más flexible porquepermite:</span></p><ul><li><span>o bien, delegar la autenticación del usuario a unaaplicación de terceros (por ejemplo, una red social,SSO);</span></li><li><span>o bien, ofrecer una interfaz al usuario (por ejemplo, unformulario web) para que pueda crear su cuenta en su base de datosclientes; luego, puede autenticar a los usuarios con cualquieralgoritmo personalizado (ver <a href="#authentication.html_example">este ejemplo</a> del capítulo"Sesiones Usuario"). Lo importante es que nunca guarde lacontraseña en claro, utilizando ese código:</span></li></ul><pre><span><code class="hljs css language-4d"><span class="hljs-comment">//... creación de cuenta de usuario</span>ds.webUser.password:=<span class="hljs-function">Generate password hash</span>(<span class="hljs-variable">$password</span>)  ds.webUser.<span class="hljs-function">save</span>()</code></span></pre><p>Ver también <a href="#authentication.html_authenticating-users">este ejemplo</a> delcapítulo "Cómo comenzar".</p><p>Si no se facilita una autenticación personalizada, 4D llama almétodo de base de datos <a href="#authentication.html_on-web-authentication"><code>On WebAuthentication</code></a> (si existe). Además de $1 y $2, sólo sefacilitan las direcciones IP del navegador y del servidor ($3 y$4), el nombre de usuario y la contraseña ($5 y $6) están vacíos.El método debe devolver <strong>True</strong> en $0 si el usuariose autentifica con éxito, entonces se sirve el recurso solicitado,o <strong>False</strong> en $0 si la autenticación falló.</p><blockquote><p><strong>Atención</strong>: si el método de base de datos<code>On Web Authentication</code> no existe, las conexiones seaceptan automáticamente (modo de prueba).</p></blockquote><h3><a aria-hidden="true" class="anchor" id="authentication.html_protocolo-basic"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_protocolo-basic"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Protocolo Basic</h3><p>Cuando un usuario se conecta al servidor, aparece una caja dediálogo estándar en su navegador para que introduzca su nombre deusuario y contraseña.</p><blockquote><p>El nombre y la contraseña introducidos por el usuario se envíansin cifrar en el encabezado de la petición HTTP. Este modo suelerequerir HTTPS para ofrecer confidencialidad.</p></blockquote><p>A continuación, se evalúan los valores introducidos:</p><ul><li><p>Si la opción <strong>Incluir contraseñas de 4D</strong> estámarcada, las credenciales de los usuarios se evaluarán primerocontra la <a href="#overview.html">tabla interna de usuarios4D</a>.</p><ul><li>Si el nombre de usuario enviado por el navegador existe en latabla de usuarios 4D y la contraseña es correcta, se acepta laconexión. Si la contraseña es incorrecta, se rechaza laconexión.</li><li>Si el nombre de usuario no existe en la tabla de usuarios 4D,se llama al método base <a href="#authentication.html_on-web-authentication"><code>On WebAuthentication</code></a>. Si el método base <code>On WebAuthentication</code> no existe, se rechazan las conexiones.</li></ul></li><li><p>Si la opción <strong>Incluir las contraseñas de 4D</strong> noestá marcada, las credenciales de usuario se envían al método base<a href="#authentication.html_on-web-authentication"><code>On WebAuthentication</code></a> junto con los demás parámetros deconexión (dirección y puerto IP, URL...) para que puedaprocesarlas. Si el método base <code>On Web Authentication</code>no existe, se rechazan las conexiones.</p></li></ul><blockquote><p>Con el servidor Web del cliente 4D, tenga en cuenta que todoslos sitios publicados por las máquinas 4D Client compartirán lamisma tabla de usuarios. La validación de los usuarios/contraseñasla realiza la aplicación 4D Server.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="authentication.html_protocolo-digest"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_protocolo-digest"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Protocolo DIGEST</h3><p>Este modo ofrece un mayor nivel de seguridad, ya que lainformación de autenticación se procesa mediante un procesounidireccional llamado hashing que hace que su contenido seaimposible de descifrar.</p><p>Al igual que en el modo BASIC, los usuarios deben introducir sunombre y contraseña al conectarse. A continuación, se llama almétodo base <a href="#authentication.html_on-web-authentication"><code>On WebAuthentication</code></a>. Cuando se activa el modo DIGEST, elparámetro $6 (contraseña) se devuelve siempre vacío. De hecho,cuando se utiliza este modo, esta información no pasa por la redcomo texto claro (sin encriptar). Por lo tanto, en este caso esimprescindible evaluar las solicitudes de conexión mediante elcomando <code>WEB Validate digest</code>.</p><blockquote><p>Debe reiniciar el servidor web para que se tengan en cuenta loscambios realizados en estos parámetros.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="authentication.html_on-web-authentication"></a><a aria-hidden="true" class="hash-link" href="#authentication.html_on-web-authentication"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>On Web Authentication</h2><p>El método de base de datos <code>On Web Authentication</code> seencarga de gestionar el acceso al motor del servidor web. Esllamado por 4D o 4D Server cuando se recibe una petición HTTPdinámica.</p><h3><a aria-hidden="true" class="anchor" id="authentication.html_llamadas-a-m%C3%A9todos-base"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_llamadas-a-m%25C3%25A9todos-base"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Llamadas a métodos base</h3><p>El método base <code>On Web Authentication</code> se llamaautomáticamente cuando una solicitud o procesamiento requiere laejecución de algún código 4D (excepto para las llamadas REST).También se llama cuando el servidor web recibe una URL estática noválida (por ejemplo, si la página estática solicitada noexiste).</p><p>Por tanto, se llama al método base <code>On WebAuthentication</code>:</p><ul><li>cuando el servidor web recibe una URL que solicita un recursoque no existe</li><li>cuando el servidor web recibe una URL que empieza por<code>4DACTION/</code>, <code>4DCGI/</code>...</li><li>cuando el servidor web recibe una URL de acceso a la raíz y nose ha definido ninguna página de inicio en la Configuración omediante el comando <code>WEB SET HOME PAGE</code></li><li>cuando el servidor web procesa una etiqueta que ejecuta código(por ejemplo, <code>4DSCRIPT</code>) en una páginasemidinámica.</li></ul><p>Por tanto, NO se llama al método base <code>On WebAuthentication</code>:</p><ul><li>cuando el servidor web recibe una URL que solicita una páginaestática válida.</li><li>cuando el servidor web recibe una URL que empieza por<code>rest/</code> y se lanza el servidor REST (en este caso, laautenticación se gestiona a través del método base <a href="#authentication.html_using-the-on-rest-authentication-database-method"><code>On REST Authentication</code></a> o las <a href="#authentication.html_using-the-structure-settings">Propiedades dela base</a>).</li></ul><h3><a aria-hidden="true" class="anchor" id="authentication.html_sintaxis"></a><a aria-hidden="true" class="hash-link" href="#authentication.html_sintaxis"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Sintaxis</h3><p><strong>On Web Authentication</strong>( <em>$1</em> : Text ;<em>$2</em> : Text ; <em>$3</em> : Text ; <em>$4</em> : Text ;<em>$5</em> : Text ; <em>$6</em> : Text ) -&gt; $0 : Boolean</p><table><thead><tr><th>Parámetros</th><th>Tipo</th><th style="text-align:center"></th><th>Descripción</th></tr></thead><tbody><tr><td>$1</td><td>Texto</td><td style="text-align:center">&lt;-</td><td>URL</td></tr><tr><td>$2</td><td>Texto</td><td style="text-align:center">&lt;-</td><td>Encabezados HTTP + cuerpo HTTP (hasta un límite de 32 kb)</td></tr><tr><td>$3</td><td>Texto</td><td style="text-align:center">&lt;-</td><td>Dirección IP del cliente web (navegador)</td></tr><tr><td>$4</td><td>Texto</td><td style="text-align:center">&lt;-</td><td>Dirección IP del servidor</td></tr><tr><td>$5</td><td>Texto</td><td style="text-align:center">&lt;-</td><td>Nombre de usuario</td></tr><tr><td>$6</td><td>Texto</td><td style="text-align:center">&lt;-</td><td>Contraseña</td></tr><tr><td>$0</td><td>Booleano</td><td style="text-align:center">-&gt;</td><td>True = solicitud aceptada, False = solicitud rechazada</td></tr></tbody></table><p>Debe declarar estos parámetros de la siguiente manera:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">//Método base On Web Authentication </span><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$1</span>;<span class="hljs-variable">$2</span>;<span class="hljs-variable">$3</span>;<span class="hljs-variable">$4</span>;<span class="hljs-variable">$5</span>;<span class="hljs-variable">$6</span>)<span class="hljs-function"> C_BOOLEAN</span>(<span class="hljs-variable">$0</span>)<span class="hljs-comment">//Código para el método</span></code></pre><p>Como alternativa, puede utilizar la sintaxis <a href="#authentication.html_named-parameters">parámetrosnombrados</a>:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Método base On Web Authentication</span>#<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$url </span>: Text; <span class="hljs-variable">$header </span>: Text; \  <span class="hljs-variable">$BrowserIP </span>: Text; <span class="hljs-variable">$ServerIP </span>: Text; \  <span class="hljs-variable">$user </span>: Text; <span class="hljs-variable">$password </span>: Text) \  -&gt; <span class="hljs-variable">$RequestAccepted </span>: Boolean</code></pre><blockquote><p>Todos los parámetros del método base <code>On WebAuthentication</code> no están necesariamente rellenados. Lainformación recibida por el método base depende del <a href="#authentication.html_authentication-mode">modo deautenticación</a> seleccionado).</p></blockquote><h4><a aria-hidden="true" class="anchor" id="authentication.html_1---url"></a><a aria-hidden="true" class="hash-link" href="#authentication.html_1---url"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$1 - URL</h4><p>El primer parámetro (<code>$1</code>) es la URL recibida por elservidor, de la que se ha eliminado la dirección del host.</p><p>Tomemos el ejemplo de una conexión a la Intranet. Supongamos quela dirección IP de su máquina 4D Web Server es 123.45.67.89. Lasiguiente tabla muestra los valores de $1 en función de la URLintroducida en el navegador web:</p><table><thead><tr><th>URL introducida en el navegador web</th><th>Valor del parámetro $1</th></tr></thead><tbody><tr><td>123.45.67.89</td><td>/</td></tr><tr><td><a href="http://123.45.67.89">http://123.45.67.89</a></td><td>/</td></tr><tr><td>123.45.67.89/Customers</td><td>/Customers</td></tr><tr><td><a href="http://123.45.67.89/Customers/Add">http://123.45.67.89/Customers/Add</a></td><td>/Customers/Add</td></tr><tr><td>123.45.67.89/Do_This/If_OK/Do_That</td><td>/Do_This/If_OK/Do_That</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="authentication.html_2---encabezado-y-cuerpo-de-la-petici%C3%B3n-http"></a><a aria-hidden="true" class="hash-link" href="#authentication.html_2---encabezado-y-cuerpo-de-la-petici%25C3%25B3n-http"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$2 - Encabezado y cuerpo de la petición HTTP</h4><p>El segundo parámetro (<code>$2</code>) es el encabezado y elcuerpo de la petición HTTP enviada por el navegador web. Tenga encuenta que esta información se pasa a su método base <code>On WebAuthentication</code> tal cual. Su contenido variará en función dela naturaleza del navegador web que intenta la conexión.</p><p>Si su aplicación utiliza esta información, deberá analizar elencabezado y el cuerpo. Puede utilizar los comandos <code>WEB GETHTTP HEADER</code> y <code>WEB GET HTTP BODY</code>.</p><blockquote><p>Por razones de rendimiento, el tamaño de los datos que pasan porel parámetro $2 no debe superar los 32 KB. Más allá de este tamaño,son truncados por el servidor HTTP de 4D.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="authentication.html_3---direcci%C3%B3n-ip-del-cliente-web"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_3---direcci%25C3%25B3n-ip-del-cliente-web"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$3 - Dirección IP del cliente web</h4><p>El parámetro <code>$3</code> recibe la dirección IP de lamáquina del navegador. Esta información puede permitirle distinguirentre las conexiones a la intranet y a Internet.</p><blockquote><p>4D devuelve las direcciones IPv4 en un formato híbrido IPv6/IPv4escrito con un prefijo de 96 bits, por ejemplo ::ffff:192.168.2.34para la dirección IPv4 192.168.2.34. Para más información, consultela sección <a href="#authentication.html_about-ipv6-support">Soporte IPv6</a>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="authentication.html_4---direcci%C3%B3n-ip-del-servidor"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_4---direcci%25C3%25B3n-ip-del-servidor"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$4 - Dirección IP del servidor</h4><p>El parámetro <code>$4</code> recibe la dirección IP utilizadapara llamar al servidor web. 4D permite el multi-homing, quepermite explotar máquinas con más de una dirección IP. Para másinformación, consulte la <a href="#authentication.html_ip-address-to-listen">páginaConfiguración</a>.</p><h4><a aria-hidden="true" class="anchor" id="authentication.html_5-y-6---nombre-de-usuario-y-contrase%C3%B1a"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_5-y-6---nombre-de-usuario-y-contrase%25C3%25B1a"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$5 y $6 - Nombre de usuario y contraseña</h4><p>Los parámetros <code>$5</code> y <code>$6</code> reciben elnombre de usuario y la contraseña introducidos por el usuario en lacaja de diálogo de identificación estándar que muestra elnavegador. Esta caja de diálogo aparece para cada conexión, si seselecciona la autenticación <a href="#authentication.html_basic-protocol">basic</a> o <a href="#authentication.html_digest-protocol">digest</a>.</p><blockquote><p>Si el nombre de usuario enviado por el navegador existe en 4D,el parámetro $6 (la contraseña del usuario) no se devuelve porrazones de seguridad.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="authentication.html_par%C3%A1metro-0"></a><a aria-hidden="true"class="hash-link" href="#authentication.html_par%25C3%25A1metro-0"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Parámetro $0</h4><p>El método base <code>On Web Authentication</code> devuelve unbooleano en $0:</p><ul><li><p>Si $0 es True, la conexión es aceptada.</p></li><li><p>Si $0 es False, la conexión es rechazada.</p></li></ul><p>El método base <code>On Web Connection</code> sólo se ejecuta sila conexión ha sido aceptada por <code>On WebAuthentication</code>.</p><blockquote><p><strong>ADVERTENCIA</strong><br />Si no se define ningún valor en $0 o si $0 no está definido en elmétodo base <code>On Web Authentication</code>, la conexión seconsidera aceptada y se ejecuta el método base <code>On WebConnection</code>.</p><ul><li>No llame a ningún elemento de la interfaz en el método base<code>On Web Authentication</code> (<code>ALERT</code>,<code>DIALOG</code>, etc.) porque, de lo contrario, se interrumpirásu ejecución y se rechazará la conexión. Lo mismo ocurrirá si seproduce un error durante su procesamiento.</li></ul></blockquote><h3><a aria-hidden="true" class="anchor" id="authentication.html_ejemplo"></a><a aria-hidden="true" class="hash-link" href="#authentication.html_ejemplo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Ejemplo</h3><p>Ejemplo del método base <code>On Web Authentication</code> en<a href="#authentication.html_digest-protocol">Modo DIGEST</a>:</p><pre><code class="hljs css language-4d"> <span class="hljs-comment">// Método bas On Web Authentication</span> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$url </span>: Text; <span class="hljs-variable">$header </span>: Text; <span class="hljs-variable">$ipB </span>: Text; <span class="hljs-variable">$ipS </span>: Text; \    <span class="hljs-variable">$user </span>: Text; <span class="hljs-variable">$pw </span>: Text) -&gt; <span class="hljs-variable">$valid </span>: Boolean<span class="hljs-keyword"> var</span> <span class="hljs-variable">$found </span>: cs.WebUserSelection <span class="hljs-variable">$valid</span>:=<span class="hljs-literal">False</span> <span class="hljs-variable">$found</span>:=ds.WebUser.<span class="hljs-function">query</span>(<span class="hljs-string">"User === :1"</span>;<span class="hljs-variable">$user</span>)<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$found</span>.length=<span class="hljs-number">1</span>) <span class="hljs-comment">// User is found</span>    <span class="hljs-variable">$valid</span>:=<span class="hljs-function">WEB Validate digest</span>(<span class="hljs-variable">$user</span>;[WebUser]password)<span class="hljs-keyword"> Else</span>    <span class="hljs-variable">$valid</span>:=<span class="hljs-literal">False</span> <span class="hljs-comment">// El usuario no existe</span><span class="hljs-keyword"> End if</span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#errorPages.html"><span class="arrow-prev">←</span> <span>Páginasde error HTTP personalizadas</span></a><a class="docs-next button"href="#sessions.html"><span>Sesiones usuario</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#authentication.html_modos-de-autenticaci%25C3%25B3n">Modos deautenticación</a><ul class="toc-headings"><li><a href="#authentication.html_generalidades">Generalidades</a></li><li><a href="#authentication.html_personalizado-por-defecto">Personalizado (pordefecto)</a></li><li><a href="#authentication.html_protocolo-basic">ProtocoloBasic</a></li><li><a href="#authentication.html_protocolo-digest">ProtocoloDIGEST</a></li></ul></li><li><a href="#authentication.html_on-web-authentication">On WebAuthentication</a><ul class="toc-headings"><li><a href="#authentication.html_llamadas-a-m%25C3%25A9todos-base">Llamadas amétodos base</a></li><li><a href="#authentication.html_sintaxis">Sintaxis</a></li><li><a href="#authentication.html_ejemplo">Ejemplo</a></li></ul></li></ul></nav></div></div></body></html>