<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="es"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Objeto del modelo de datos · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="The ORDA technology is based upon an automatic mapping of an underlying database structure. It also provides access to data through entity and entity selection objects. As a result, ORDA exposes the whole database as a set of data model objects."name="description" /><meta content="es" name="docsearch:language" /><meta content="Objeto del modelo de datos · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="The ORDA technology is based upon an automatic mapping of an underlying database structure. It also provides access to data through entity and entity selection objects. As a result, ORDA exposes the whole database as a set of data model objects."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#dsMapping.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Objeto del modelo dedatos<a aria-hidden="true" class="anchor" id="dsmapping.html"></a></h1></header><article><div><p><span>The ORDA technology is based upon an automatic mapping ofan underlying database structure. It also provides access to datathrough entity and entity selection objects. As a result, ORDAexposes the whole database as a set of data modelobjects.</span></p><h2><span><a aria-hidden="true" class="anchor" id="dsmapping.html_cartograf%C3%ADa-de-la-estructura"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_cartograf%25C3%25ADa-de-la-estructura"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Cartografía de la estructura</span></h2><p><span>When you call a datastore using the <a href="#dsmapping.html_ds"><code>ds</code></a> or the <a href="#dsmapping.html_open-datastore"><code>Open datastore</code></a>command, 4D automatically references tables and fields of thecorresponding 4D structure as properties of the returned <a href="#dsmapping.html_datastore">datastore</a> object:</span></p><ul><li><span>Las tablas correspondientes a lasdataclasses.</span></li><li><span>Los campos corresponden a los atributos dealmacenamiento.</span></li><li><span>Relations are mapped to relation attributes - relationnames, defined in the Structure editor, are used as relationattribute names.</span></li></ul><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/datastoreMapping.png" /></span></p><h3><span><a aria-hidden="true" class="anchor" id="dsmapping.html_reglas-generales"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_reglas-generales"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Reglas generales</span></h3><p><span>Se aplican las siguientes reglas para todas lasconversiones:</span></p><ul><li><span>Los nombres de tabla, campo y relación se mapean a losnombres de propiedad de objeto. Asegúrese de que dichos nombrescumplen con las reglas generales de denominación de objetos, comose explica en la sección <a href="#identifiers.html">Convencionesde denominación de objetos</a>.</span></li><li><span>Un datastore sólo hace referencia a las tablas con unasola llave primaria. Las siguientes tablas no estánreferenciadas:</span><ul><li><span>Tablas sin llave primaria</span></li><li><span>Tablas con llaves primarias compuestas.</span></li></ul></li><li><span>BLOB fields are automatically available as attributes ofthe <a href="#dsmapping.html_blob-types">Blob object</a>type.</span></li></ul><blockquote><p><span>El mapeo ORDA no tiene en cuenta:</span></p><ul><li><span>la opción "Invisible" para tablas o campos, - laestructura virtual definida mediante <code>SET TABLE TITLES</code>o <code>SET FIELD TITLES</code>, - la propiedad "Manual" o"Automática" de las relaciones.</span></li></ul></blockquote><h3><span><a aria-hidden="true" class="anchor" id="dsmapping.html_normas-de-control-de-acceso-remoto"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_normas-de-control-de-acceso-remoto"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Normas de control de acceso remoto</span></h3><p><span>When accessing a remote datastore through the <code>Opendatastore</code> command or <a href="#gettingStarted.html">RESTrequests</a>, only tables and fields with the <strong>Expose asREST resource</strong> property are available remotely.</span></p><p><span>This option must be selected at the 4D structure level foreach table and each field that you want to be exposed as dataclassand attribute in the datastore:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/ExposeDataclass.png" /></span></p><h3><span><a aria-hidden="true" class="anchor" id="dsmapping.html_actualizaci%C3%B3n-del-modelo-de-datos"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_actualizaci%25C3%25B3n-del-modelo-de-datos"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Actualización del modelo de datos</span></h3><p><span>Any modifications applied at the level of the databasestructure invalidate the current ORDA model layer. Estasmodificaciones incluyen:</span></p><ul><li><span>la adición o la eliminación de una tabla, de un campo, ode una relación</span></li><li><span>el cambio de nombre de una tabla, de un campo o de unarelación</span></li><li><span>changing a core property of a field (type, unique, index,autoincrement, null value support)</span></li></ul><p><span>When the current ORDA model layer has been invalidated, itis automatically reloaded and updated in subsequent calls of thelocal <code>ds</code> datastore on 4D and 4D Server. Note thatexisting references to ORDA objects such as entities or entityselections will continue to use the model from which they have beencreated, until they are regenerated.</span></p><p><span>However, the updated ORDA model layer is not automaticallyavailable in the following contexts:</span></p><ul><li><span>a remote 4D application connected to 4D Server -- theremote application must reconnect to the server.</span></li><li><span>a remote datastore opened using <code>Opendatastore</code> or through <a href="#gettingStarted.html">RESTcalls</a> -- a new session must be opened.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="dsmapping.html_definiciones-de-los-objetos"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_definiciones-de-los-objetos"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Definiciones de los objetos</span></h2><h3><span><a aria-hidden="true" class="anchor" id="dsmapping.html_datastore"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_datastore"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Datastore</span></h3><p><span>The datastore is the interface object to a database. Itbuilds a representation of the whole database as object. Adatastore is made of a <strong>model</strong> and<strong>data</strong>:</span></p><ul><li><span>The model contains and describes all the dataclasses thatmake up the datastore. It is independant from the underlyingdatabase itself.</span></li><li><span>Data refers to the information that is going to be usedand stored in this model. For example, names, addresses, andbirthdates of employees are pieces of data that you can work within a datastore.</span></li></ul><p><span>When handled through the code, the datastore is an objectwhose properties are all of the <a href="#dsmapping.html_dataclass">dataclasses</a> which have beenspecifically exposed.</span></p><p><span>4D le permite gestionar los siguientesdatastores:</span></p><ul><li><span>the local datastore, based on the current 4D database,returned by the <code>ds</code> command (the maindatastore).</span></li><li><span>one or more remote datastore(s) exposed as REST resourcesin remote 4D databases, returned by the <code>Open datastore</code>command.</span></li></ul><p><span>A datastore references only a single local or remotedatabase.</span></p><p><span>The datastore object itself cannot be copied as anobject:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-variable">$mydatastore</span>:=<span class="hljs-function">OB Copy</span>(ds) <span class="hljs-comment">//devuelve null</span></code></span></pre><p>Las propiedades del datastore son sin embargo enumerables:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY TEXT</span>(<span class="hljs-variable">$prop</span>;<span class="hljs-number">0</span>)<span class="hljs-function"> OB GET PROPERTY NAMES</span>(ds;<span class="hljs-variable">$prop</span>)  <span class="hljs-comment">//$prop contains the names of all the dataclasses</span></code></pre><p>The main (default) datastore is always available through the<code>ds</code> command, but the <code>Open datastore</code>command allows referencing any remote datastore.</p><h3><a aria-hidden="true" class="anchor" id="dsmapping.html_dataclass"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_dataclass"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Dataclass</h3><p>Una dataclass es el equivalente de una tabla. It is used as anobject model and references all fields as attributes, includingrelational attributes (attributes built upon relations betweendataclasses). Relational attributes can be used in queries like anyother attribute.</p><p>All dataclasses in a 4D project are available as a property ofthe <code>ds</code> datastore. For remote datastores accessedthrough <code>Open datastore</code> or <a href="#gettingStarted.html">REST requests</a>, the <strong>Expose asREST resource</strong> option must be selected at the 4D structurelevel for each exposed table that you want to be exposed asdataclass in the datastore.</p><p>For example, consider the following table in the 4Dstructure:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/companyTable.png" /></p><p>The <code>Company</code> table is automatically available as adataclass in the <code>ds</code> datastore. Puede escribir:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$compClass </span>: cs.Company <span class="hljs-comment">//declares a $compClass object variable of the Company class</span><span class="hljs-variable">$compClass</span>:=ds.Company <span class="hljs-comment">//assigns the Company dataclass reference to $compClass</span></code></pre><p>Un objeto dataclass puede contener:</p><ul><li>attributes</li><li>atributos relacionales</li></ul><p>The dataclass offers an abstraction of the physical database andallows handling a conceptual data model. The dataclass is the onlymeans to query the datastore. Una consulta se hace desde una únicadataclass. Queries are built around attributes and relationattribute names of the dataclasses. So the relation attributes arethe means to involve several linked tables in a query.</p><p>The dataclass object itself cannot be copied as an object:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$mydataclass</span>:=<span class="hljs-function">OB Copy</span>(ds.Employee) <span class="hljs-comment">//devuelve null</span></code></pre><p>Las propiedades de la dataclass son sin embargo enumerables:</p><pre><code class="hljs css language-code4d">ARRAY <span class="hljs-constructor">TEXT($<span class="hljs-params">prop</span>;0)</span>OB GET PROPERTY <span class="hljs-constructor">NAMES(<span class="hljs-params">ds</span>.Employee;$<span class="hljs-params">prop</span>)</span><span class="hljs-comment">//$prop contains the names of all the dataclass attributes</span></code></pre><h3><a aria-hidden="true" class="anchor" id="dsmapping.html_atributo"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_atributo"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Atributo</h3><p>Dataclass properties are attribute objects describing theunderlying fields or relations. Por ejemplo:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$nameAttribute</span>:=ds.Company.name <span class="hljs-comment">//reference to class attribute</span> <span class="hljs-variable">$revenuesAttribute</span>:=ds.Company[<span class="hljs-string">"revenues"</span>] <span class="hljs-comment">//alternate way</span></code></pre><p>This code assigns to <code>$nameAttribute</code> and<code>$revenuesAttribute</code> references to the name and revenuesattributes of the <code>Company</code> class. Esta sintaxis NOdevuelve los valores mantenidos dentro del atributo, sino quedevuelve referencias a los propios atributos. To handle values, youneed to go through <a href="#dsmapping.html_entity">Entities</a>.</p><p>All eligible fields in a table are available as attributes oftheir parent <a href="#dsmapping.html_dataclass">dataclass</a>. Forremote datastores accessed through <code>Open datastore</code> or<a href="#gettingStarted.html">REST requests</a>, the<strong>Expose as REST resource</strong> option must be selected atthe 4D structure level for each field that you want to be exposedas a dataclass attribute.</p><h4><a aria-hidden="true" class="anchor" id="dsmapping.html_atributos-de-almacenamiento-y-relacionales"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_atributos-de-almacenamiento-y-relacionales"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Atributos de almacenamiento y relacionales</h4><p>Dataclass attributes come in several kinds: storage,relatedEntity, and relatedEntities. Attributes that are scalar(<em>i.e.</em>, provide only a single value) support all thestandard 4D data types (integer, text, object, etc.).</p><ul><li>A <strong>storage attribute</strong> is equivalent to a fieldin the 4D database and can be indexed. Values assigned to a storageattribute are stored as part of the entity when it is saved. When astorage attribute is accessed, its value comes directly from thedatastore. Storage attributes are the most basic building block ofan entity and are defined by name and data type.</li><li>A <strong>relation attribute</strong> provides access to otherentities. Relation attributes can result in either a single entity(or no entity) or an entity selection (0 to N entities). Relationattributes are built upon "classic" relations in the relationalstructure to provide direct access to related entity or relatedentities. Relation attributes are directy available in ORDA usingtheir names.</li></ul><p>For example, consider the following partial database structureand the relation properties:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/relationProperties.png" /></p><p>All storage attributes will be automatically available:</p><ul><li>in the Project dataclass: "ID", "name", and "companyID"</li><li>in the Company dataclass: "ID", "name", and "discount"</li></ul><p>In addition, the following relation attributes will also beautomatically available:</p><ul><li>in the Project dataclass: <strong>theClient</strong> attribute,of the "relatedEntity" kind; there is at most one Company for eachProject (the client)</li><li>in the Company dataclass: <strong>companyProjects</strong>attribute, of the "relatedEntities" kind; for each Company there isany number of related Projects.</li></ul><blockquote><blockquote><p>The Manual or Automatic property of a database relation has noeffect in ORDA.</p></blockquote></blockquote><p>All dataclass attributes are exposed as properties of thedataclass:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/dataclassProperties.png" /></p><p>Keep in mind that these objects describe attributes, but do notgive access to data. Reading or writing data is done through<a href="#dsmapping.html_using-entity-attributes">entityobjects</a>.</p><h4><a aria-hidden="true" class="anchor" id="dsmapping.html_atributos-calculados"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_atributos-calculados"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Atributos calculados</h4><p><a href="#dsmapping.html_computed-attributes">Computedattributes</a> are declared using a <code>get&lt;attributeName&gt;</code> function in the <a href="#dsmapping.html_entity-class">Entity class definition</a>. Theirvalue is not stored but evaluated each time they are accessed. Theydo not belong to the underlying database structure, but are builtupon it and can be used as any attribute of the data model.</p><h3><a aria-hidden="true" class="anchor" id="dsmapping.html_entity"></a><a aria-hidden="true" class="hash-link"href="#dsmapping.html_entity"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity</h3><p>Una entidad es el equivalente a un registro. It is actually anobject that references a record in the database. It can be seen asan instance of a <a href="#dsmapping.html_dataclass">dataclass</a>,like a record of the table matching the dataclass. However, anentity also contains data correlated to the database related to thedatastore.</p><p>The purpose of the entity is to manage data (create, update,delete). When an entity reference is obtained by means of an entityselection, it also retains information about the entity selectionwhich allows iteration through the selection.</p><p>The entity object itself cannot be copied as an object:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$myentity</span>:=<span class="hljs-function">OB Copy</span>(ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>)) <span class="hljs-comment">//returns null</span></code></pre><p>Sin embargo, las propiedades de la entidad son enumerables:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY TEXT</span>(<span class="hljs-variable">$prop</span>;<span class="hljs-number">0</span>)<span class="hljs-function"> OB GET PROPERTY NAMES</span>(ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>);<span class="hljs-variable">$prop</span>)  <span class="hljs-comment">//$prop contains the names of all the entity attributes</span></code></pre><h3><a aria-hidden="true" class="anchor" id="dsmapping.html_entity-selection"></a><a aria-hidden="true" class="hash-link" href="#dsmapping.html_entity-selection"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity selection</h3><p>An entity selection is an object containing one or morereference(s) to entities belonging to the same dataclass. It isusually created as a result of a query or returned from a relationattribute. Una entity selection puede contener 0, 1 o X entidadesde la dataclass -- donde X puede representar el número total deentidades contenidas en la dataclass.</p><p>Ejemplo:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$e </span>: cs.EmployeeSelection <span class="hljs-comment">//declares a $e object variable of the EmployeeSelection class type</span><span class="hljs-variable">$e</span>:=ds.Employee.<span class="hljs-function">all</span>() <span class="hljs-comment">//assigns the resulting entity selection reference to the $e variable</span></code></pre><p>Entity selections can be "sorted" or "unsorted" (<a href="#dsmapping.html_ordered-or-unordered-entity-selection">seebelow</a>).</p><blockquote><p>Entity selections can also be "shareable" or "non-shareable",depending on <a href="#dsmapping.html_shareable-or-alterable-entity-selections">how theyhave been created</a>.</p></blockquote><p>The entity selection object itself cannot be copied as anobject:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$myentitysel</span>:=<span class="hljs-function">OB Copy</span>(ds.Employee.<span class="hljs-function">all</span>()) <span class="hljs-comment">//returns null</span></code></pre><p>The entity selection properties are however enumerable:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY TEXT</span>(<span class="hljs-variable">$prop</span>;<span class="hljs-number">0</span>)<span class="hljs-function"> OB GET PROPERTY NAMES</span>(ds.Employee.<span class="hljs-function">all</span>();<span class="hljs-variable">$prop</span>)  <span class="hljs-comment">//$prop contains the names of the entity selection properties</span>  <span class="hljs-comment">//("length", 00", "01"...)</span></code></pre><h4><a aria-hidden="true" class="anchor" id="dsmapping.html_entity-selections-ordenadas-o-no-ordenadas"></a><a aria-hidden="true"class="hash-link" href="#dsmapping.html_entity-selections-ordenadas-o-no-ordenadas"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity selections ordenadas o no ordenadas</h4><p>For optimization reasons, by default 4D ORDA usually createsunordered entity selections, except when you use the <code>orderBy()</code> method or use specific options. In this documentation,unless specified, "entity selection" usually refers to an"unordered entity selection".</p><p>Ordered entity selections are created only when necessary orwhen specifically requested using options, i.e. in the followingcases:</p><ul><li>result of an <code>orderBy()</code> on a selection (of anytype) or an <code>orderBy()</code> on a dataclass</li><li>result of the <code>newSelection()</code> method with the<code>dk keep ordered</code> option</li></ul><p>Unordered entity selections are created in the followingcases:</p><ul><li>result of a standard <code>query()</code> on a selection (ofany type) or a <code>query()</code> on a dataclass,</li><li>result of the <code>newSelection()</code> method withoutoption,</li><li>result of any of the comparison methods, whatever the inputselection types: <code>or()</code>, <code>and()</code>,<code>minus()</code>.</li></ul><blockquote><blockquote><blockquote><blockquote><blockquote><p>The following entity selections are always<strong>ordered</strong>: &gt; &gt; * entity selections returned by4D Server to a remote client &gt; * entity selections built uponremote datastores.</p></blockquote></blockquote></blockquote></blockquote><ul><li><blockquote><blockquote><ul><li><blockquote><blockquote><ul><li><blockquote><blockquote><ul><li>entity selections returned by 4D Server to a remote client &gt;* entity selections built upon remote datastores.</li></ul></blockquote></blockquote></li></ul></blockquote></blockquote></li></ul></blockquote></blockquote></li><li>selecciones de entidades basadas en datastores remotos.</li></ul></blockquote><p>Note that when an ordered entity selection becomes an unorderedentity selection, any repeated entity references are removed.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#overview.html"><span class="arrow-prev">←</span> <span>¿Qué esORDA?</span></a><a class="docs-next button" href="#ordaClasses.html"><span>Clases del modelo de datos</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#dsmapping.html_cartograf%25C3%25ADa-de-la-estructura">Cartografíade la estructura</a><ul class="toc-headings"><li><a href="#dsmapping.html_reglas-generales">Reglasgenerales</a></li><li><a href="#dsmapping.html_normas-de-control-de-acceso-remoto">Normas decontrol de acceso remoto</a></li><li><a href="#dsmapping.html_actualizaci%25C3%25B3n-del-modelo-de-datos">Actualizacióndel modelo de datos</a></li></ul></li><li><a href="#dsmapping.html_definiciones-de-los-objetos">Definiciones de losobjetos</a><ul class="toc-headings"><li><a href="#dsmapping.html_datastore">Datastore</a></li><li><a href="#dsmapping.html_dataclass">Dataclass</a></li><li><a href="#dsmapping.html_atributo">Atributo</a></li><li><a href="#dsmapping.html_entity">Entity</a></li><li><a href="#dsmapping.html_entity-selection">Entityselection</a></li></ul></li></ul></nav></div></div></body></html>