<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="ja"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>コンポーネントの開発 · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="4D のコンポーネントとは、[4Dアプリケーションにインストール可能](/docs/Rx/ja/Concepts/components.html) な、1つ以上の機能を持つ 4D関数やメソッド、フォームの一式です。 たとえば、メールの送受信をおこない、それらを 4D アプリケーションに格納するための機能を持ったコンポーネントを作成できます。"name="description" /><meta content="ja" name="docsearch:language" /><meta content="コンポーネントの開発 · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="4D のコンポーネントとは、[4Dアプリケーションにインストール可能](/docs/Rx/ja/Concepts/components.html) な、1つ以上の機能を持つ 4D関数やメソッド、フォームの一式です。 たとえば、メールの送受信をおこない、それらを 4D アプリケーションに格納するための機能を持ったコンポーネントを作成できます。"property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#develop-components.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">コンポーネントの開発<a aria-hidden="true" class="anchor" id="develop-components.html"></a></h1></header><article><div><p><span>4D のコンポーネントとは、<a href="#components.html">4Dアプリケーションにインストール可能</a> な、1つ以上の機能を持つ4D関数やメソッド、フォームの一式です。 たとえば、メールの送受信をおこない、それらを 4Dアプリケーションに格納するための機能を持ったコンポーネントを作成できます。</span></p><p><span>ニーズに合わせて独自の 4Dコンポーネントを開発し、それを非公開とすることができます。 また、作成した<a href="https://github.com/topics/4d-component">コンポーネントを4Dコミュニティで共有</a>することもできます。</span></p><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_%E5%AE%9A%E7%BE%A9"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E5%25AE%259A%25E7%25BE%25A9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>定義</span></h2><ul><li><span><strong>マトリクスプロジェクト</strong>: コンポーネント開発に使用する4D プロジェクト。マトリクスプロジェクトは特別な属性を持たない標準のプロジェクトです。マトリクスプロジェクトはひとつのコンポーネントを構成します。</span></li><li><span><strong>ホストプロジェクト</strong>:コンポーネントがインストールされ、それを使用するアプリケーションプロジェクト。</span></li><li><span><strong>コンポーネント</strong>:ホストアプリケーションによって使用される目的で、同アプリケーションの <a href="#architecture.html"><code>Components</code></a>フォルダーにコピーされたマトリクスプロジェクト (コンパイル済み または <a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E3%2582%2592%25E3%2583%2593%25E3%2583%25AB%25E3%2583%2589">ビルド済み</a>)。</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_%E7%94%BB%E9%9D%A2%E3%81%AE%E8%AA%AC%E6%98%8E"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E7%2594%25BB%25E9%259D%25A2%25E3%2581%25AE%25E8%25AA%25AC%25E6%2598%258E"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>画面の説明</span></h2><p><span>4D コンポーネントの作成とインストールは直接 4D を使用しておこないます:</span></p><ul><li><span>コンポーネントをインストールするには、<a href="#architecture.html">プロジェクトの<code>Components</code> フォルダー</a> にコンポーネントファイルをコピーします。エイリアスまたはショートカットも使用できます。</span></li><li><span>言い換えれば、マトリクスプロジェクト自体も1 つ以上のコンポーネントを使用できます。 しかしコンポーネントが"サブコンポーネント" を使用することはできません。</span></li><li><span>コンポーネントは次の 4D の要素を呼び出すことができます:クラス、関数、プロジェクトメソッド、プロジェクトフォーム、メニューバー、選択リストなど。反面、コンポーネントが呼び出せないものは、データベースメソッドとトリガーです。</span></li><li><span>コンポーネント内でデータストアや標準のテーブル、データファイルを使用することはできません。しかし、外部データベースのメカニズムを使用すればテーブルやフィールドを作成し、そこにデータを格納したり読み出したりすることができます。外部データベースは、メインの 4D データベースとは独立して存在し、SQLコマンドでアクセスします。</span></li><li><span>インタープリターモードで動作するホストプロジェクトは、インタープリターまたはコンパイル済みどちらのコンポーネントも使用できます。コンパイルモードで実行されるホストデータベースでは、インタープリターのコンポーネントを使用できません。この場合、コンパイル済みコンポーネントのみが利用可能です。</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%83%A9%E3%83%B3%E3%82%B2%E3%83%BC%E3%82%B8%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%97"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2583%25A9%25E3%2583%25B3%25E3%2582%25B2%25E3%2583%25BC%25E3%2582%25B8%25E3%2582%25B3%25E3%2583%259E%25E3%2583%25B3%25E3%2583%2589%25E3%2581%25AE%25E3%2582%25B9%25E3%2582%25B3%25E3%2583%25BC%25E3%2583%2597"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>ランゲージコマンドのスコープ</span></h2><p><span><a href="#develop-components.html_%25E4%25BD%25BF%25E7%2594%25A8%25E3%2581%25A7%25E3%2581%258D%25E3%2581%25AA%25E3%2581%2584%25E3%2582%25B3%25E3%2583%259E%25E3%2583%25B3%25E3%2583%2589">使用できないコマンド</a> を除き、コンポーネントではすべての 4D ランゲージコマンドが使用できます。</span></p><p><span>コマンドがコンポーネントから呼ばれると、コマンドはコンポーネントのコンテキストで実行されます。 ただし<code>EXECUTE METHOD</code> および <code>EXECUTE FORMULA</code>コマンドは除きます。また、ユーザー＆グループテーマの読み出しコマンドはコンポーネントで使用することができますが、読み出されるのはホストプロジェクトのユーザー＆グループ情報であることに注意してください(コンポーネントに固有のユーザー＆グループはありません)。</span></p><p><span><code>SET DATABASE PARAMETER</code> と <code>Get databaseparameter</code> コマンドは例外となります: これらのコマンドのスコープはグローバルです。これらのコマンドがコンポーネントから呼び出されると、結果はホストプロジェクトに適用されます。</span></p><p><span>さらに、<code>Structure file</code> と <code>Get 4Dfolder</code> コマンドは、コンポーネントで使用するための設定ができるようになっています。</span></p><p><span><code>COMPONENT LIST</code>コマンドを使用して、ホストプロジェクトにロードされたコンポーネントのリストを取得できます。</span></p><h3><span><a aria-hidden="true" class="anchor" id="develop-components.html_%E4%BD%BF%E7%94%A8%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E4%25BD%25BF%25E7%2594%25A8%25E3%2581%25A7%25E3%2581%258D%25E3%2581%25AA%25E3%2581%2584%25E3%2582%25B3%25E3%2583%259E%25E3%2583%25B3%25E3%2583%2589"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>使用できないコマンド</span></h3><p><span>(読み取り専用モードで開かれるため)ストラクチャーファイルを更新する以下のコマンドは、コンポーネントで使用することができません。コンポーネント中で以下のコマンドを実行すると、-10511, "CommandNameコマンドをコンポーネントでコールすることはできません" のエラーが生成されます:</span></p><ul><li><span><code>ON EVENT CALL</code></span></li><li><span><code>Method called on event</code></span></li><li><span><code>SET PICTURE TO LIBRARY</code></span></li><li><span><code>REMOVE PICTURE FROM LIBRARY</code></span></li><li><span><code>SAVE LIST</code></span></li><li><span><code>ARRAY TO LIST</code></span></li><li><span><code>EDIT FORM</code></span></li><li><span><code>CREATE USER FORM</code></span></li><li><span><code>DELETE USER FORM</code></span></li><li><span><code>CHANGE PASSWORD</code></span></li><li><span><code>EDIT ACCESS</code></span></li><li><span><code>Set group properties</code></span></li><li><span><code>Set user properties</code></span></li><li><span><code>DELETE USER</code></span></li><li><span><code>CHANGE LICENSES</code></span></li><li><span><code>BLOB TO USERS</code></span></li><li><span><code>SET PLUGIN ACCESS</code></span></li></ul><p><span><strong>注:</strong></span></p><ul><li><span><code>Current form table</code>コマンドは、プロジェクトフォームのコンテキストで呼び出されると <code>Nil</code> を返します。ゆえにこのコマンドをコンポーネントで使用することはできません。</span></li><li><span>SQLデータ定義言語のコマンド (<code>CREATE TABLE</code>、<code>DROPTABLE</code>等) をコンポーネントのフレームワークで使用することはできません。ただし、外部データベースの場合は使用することができます (<code>CREATE DATABASE</code> SQLコマンド参照)。</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%81%AE%E5%85%B1%E6%9C%89"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2583%2597%25E3%2583%25AD%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2583%25A1%25E3%2582%25BD%25E3%2583%2583%25E3%2583%2589%25E3%2581%25AE%25E5%2585%25B1%25E6%259C%2589"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>プロジェクトメソッドの共有</span></h2><p><span>マトリクスプロジェクトのすべてのプロジェクトメソッドは 、コンポーネントに含まれます。つまり、マトリクスプロジェクトをコンポーネント化した後、これらのプロジェクトメソッドは同コンポーネント内で呼び出して実行することができます。</span></p><p><span>他方、デフォルトでは、これらのプロジェクトメソッドはホストプロジェクトに表示されず、呼び出すこともできません。マトリクスプロジェクトで、メソッドプロパティダイアログボックスの<strong>コンポーネントとホストプロジェクト間で共有</strong>ボックスをチェックすることで、ホストプロジェクトと共有したいメソッドを明示的に設定することができます。</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Concepts/shared-methods.png" /></span></p><p><span>設定することで、共有されたプロジェクトメソッドはホストプロジェクトにて呼び出すことができるようになります(しかしホストプロジェクトのメソッドエディターで編集することはできません)。 これらのメソッドはコンポーネントの<strong>エントリーポイント</strong> となります。</span></p><p><span>セキュリティのため、デフォルトでは、コンポーネントはホストプロジェクトのプロジェクトメソッドを実行することはできません。特定の場合に、ホストプロジェクトのプロジェクトメソッドにコンポーネントがアクセスできるようにする必要があるかもしれません。そうするには、ホストプロジェクトのプロジェクトメソッド側で、コンポーネントからのアクセスを可能にするよう明示的に指定しなければなりません。これはメソッドプロパティダイアログボックスの、<strong>コンポーネントとホストプロジェクト間で共有</strong>で設定します。</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Concepts/pict516563.en.png" /></span></p><p><span>ホストプロジェクトのプロジェクトメソッドがコンポーネントから利用可能になっていれば、<code>EXECUTEFORMULA</code> または <code>EXECUTE METHOD</code>コマンドを使用して、コンポーネント側からホストのメソッドを実行することができます。 たとえば:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-comment">// ホストメソッド</span><span class="hljs-function">component_method</span>(<span class="hljs-string">"host_method_name"</span>)</code></span></pre><pre><code class="hljs css language-4d"><span class="hljs-comment">// コンポーネントメソッド</span><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function"> EXECUTE METHOD</span>(<span class="hljs-variable">$1</span>)</code></pre><blockquote><p>インタープリターコンポーネントがインストールされたインタープリターホストデータベースは、それがインタープリターコンポーネントのメソッドを呼び出さなければ、コンパイル/シンタックスチェックができます。そうでない場合、コンパイルまたはシンタックスチェックを実行しようとすると警告ダイアログが表示され、操作を実行することはできません。<br />一般的に、インタープリターメソッドはコンパイル済みメソッドを呼び出せますが、逆はできません。 これをおこなうには<code>EXECUTE METHOD</code> や <code>EXECUTE FORMULA</code>コマンドを使用します。</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%84%E9%96%A2%E6%95%B0%E3%81%AE%E5%85%B1%E6%9C%89"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2582%25AF%25E3%2583%25A9%25E3%2582%25B9%25E3%2582%2584%25E9%2596%25A2%25E6%2595%25B0%25E3%2581%25AE%25E5%2585%25B1%25E6%259C%2589"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>クラスや関数の共有</h2><p>デフォルトでは、ホストプロジェクトの 4Dメソッドエディターからコンポーネントのクラスと関数を呼び出すことはできません。コンポーネントのクラスと関数をホストプロジェクトに公開したい場合は、コンポーネント名前空間を宣言する必要があります。また、コンポーネントのクラスや関数がホストメソッドエディターでどのように提案されるかをコントロールすることもできます。</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E5%90%8D%E5%89%8D%E7%A9%BA%E9%96%93%E3%81%AE%E5%AE%A3%E8%A8%80"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E5%2590%258D%25E5%2589%258D%25E7%25A9%25BA%25E9%2596%2593%25E3%2581%25AE%25E5%25AE%25A3%25E8%25A8%2580"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>コンポーネント名前空間の宣言</h3><p>コンポーネントのクラスや関数をホストプロジェクトに公開するには、マトリクスプロジェクトの設定の <a href="#develop-components.html_%25E3%2582%25AF%25E3%2583%25A9%25E3%2582%25B9%25E3%2582%25B9%25E3%2583%2588%25E3%2582%25A2%25E5%2586%2585%25E3%2581%25A7%25E3%2581%25AE%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E5%2590%258D%25E5%2589%258D%25E7%25A9%25BA%25E9%2596%2593">一般ページにある <strong>クラスストア内でのコンポーネント名前空間</strong> オプション</a> に値を入力します。デフォルトでは、このエリアは空です。つまり、コンポーネントのクラスはコンポーネント外で利用できません。</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/namespace.png" /></p><blockquote><p><em>名前空間</em>は、同じ名前のクラスや関数を持つ異なるコンポーネントがホストプロジェクトで使用されている場合に、競合が発生しないようにします。コンポーネント名前空間は、<a href="#develop-components.html_%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2583%2597%25E3%2583%25AD%25E3%2583%2591%25E3%2583%2586%25E3%2582%25A3">プロパティの命名規則</a>に準拠する必要があります。</p></blockquote><p>値を入力すると、ホストプロジェクトのコードにおいてユーザークラスストア (cs) 内の cs.&lt;値&gt;名前空間を介して、コンポーネントのクラスと関数が利用可能になることを宣言することになります。たとえば、<code>getArea()</code> 関数を持つ <code>Rectangle</code>クラスが存在する場合に、コンポーネント名前空間として "eGeometry"を入力すると、このプロジェクトがコンポーネントとしてインストールされると、ホストプロジェクトの開発者は次のように記述することができます:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// ホストプロジェクトにて</span><span class="hljs-keyword">var</span> <span class="hljs-variable">$rect</span>: cs.eGeometry.Rectangle <span class="hljs-variable">$rect</span>:=cs.eGeometry.Rectangle.<span class="hljs-function">new</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>)<span class="hljs-variable">$area</span>:=<span class="hljs-variable">$rect</span>.<span class="hljs-function">getArea</span>()</code></pre><p>競合を避けるためには、優れた識別名の使用が推奨されます。もし、コンポーネントと同じ名前のユーザークラスがすでにプロジェクトに存在していた場合、そのユーザークラスが考慮され、コンポーネントクラスは無視されます。</p><p>コンポーネントの ORDAクラスは、ホストプロジェクトでは使用できません。 たとえば、コンポーネントに Employeesというデータクラスがある場合、ホストプロジェクトで "cs.Mycomponent.Employee"クラスを使用することはできません。</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_%E9%9D%9E%E8%A1%A8%E7%A4%BA%E3%82%AF%E3%83%A9%E3%82%B9"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E9%259D%259E%25E8%25A1%25A8%25E7%25A4%25BA%25E3%2582%25AF%25E3%2583%25A9%25E3%2582%25B9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>非表示クラス</h3><p>アンダースコア ("_") を名前の前に付けることで、コンポーネントのクラスや関数を非表示にすることができます。<a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E5%2590%258D%25E5%2589%258D%25E7%25A9%25BA%25E9%2596%2593%25E3%2581%25AE%25E5%25AE%25A3%25E8%25A8%2580">コンポーネント名前空間が定義されている</a> 場合、非表示のクラスや関数はコード補完の際に提案されません。</p><p>ただし、名前がわかっていれば使用することは可能です。 たとえば、<code>_Rectangle</code>クラスが非表示の場合でも、次のシンタックスは有効です:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$rect</span>:=cs.eGeometry._Rectangle.<span class="hljs-function">new</span>(<span class="hljs-number">10</span>;<span class="hljs-number">20</span>)</code></pre><blockquote><p>非表示のクラス内の、非表示でない関数は、そのクラスを <a href="#develop-components.html_%25E7%25B6%2599%25E6%2589%25BF">継承</a>するクラスでコード補完を使用すると提案されます。 たとえば、あるコンポーネントに <code>_Person</code>クラスを継承した <code>Teacher</code> クラスがある場合、<code>Teacher</code>のコード補完では <code>_Person</code> の非表示でない関数が提案されます。</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E6%B8%88%E3%81%BF%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E8%A3%9C%E5%AE%8C"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%2591%25E3%2582%25A4%25E3%2583%25AB%25E6%25B8%2588%25E3%2581%25BF%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E3%2581%25AE%25E3%2582%25B3%25E3%2583%25BC%25E3%2583%2589%25E8%25A3%259C%25E5%25AE%258C"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>コンパイル済みコンポーネントのコード補完</h2><p>開発者に向けてコンポーネントを使いやすくするため、マトリクスプロジェクトの設定で、 <a href="#develop-components.html_component-namespace-in-the-class-store">一般ページの<strong>コンパイル時にコード補完用のシンタックスファイルを生成する</strong> オプション</a>をチェックすることができます。</p><p>すると、コンパイル時にシンタックスファイル (JSON形式) が自動生成され、そこにコンポーネントのクラス、関数、および<a href="#develop-components.html_%25E3%2583%2597%25E3%2583%25AD%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2583%25A1%25E3%2582%25BD%25E3%2583%2583%25E3%2583%2589%25E3%2581%25AE%25E5%2585%25B1%25E6%259C%2589">公開メソッド</a> のシンタックスを格納し、コンポーネントプロジェクトの \Resources\ja.lprojフォルダーに配置されます。 4Dは、このシンタックスファイルをもとに、コード補完や関数シンタックスなどのコードエディター用のヘルプを生成します。</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/syntax-code-completion-2.png" /><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/settings/syntax-code-completion-1.png" /></p><p><a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E5%2590%258D%25E5%2589%258D%25E7%25A9%25BA%25E9%2596%2593%25E3%2581%25AE%25E5%25AE%25A3%25E8%25A8%2580">コンポーネント名前空間</a>を入力しない場合、シンタックスファイル生成のオプションがチェックされていても、クラスや公開メソッド用のリソースは生成されません。</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E5%A4%89%E6%95%B0%E3%81%AE%E6%B8%A1%E3%81%97%E6%96%B9"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E5%25A4%2589%25E6%2595%25B0%25E3%2581%25AE%25E6%25B8%25A1%25E3%2581%2597%25E6%2596%25B9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>変数の渡し方</h2><p>ローカル、プロセス、インタープロセス変数は、コンポーネントとホストプロジェクト間で共有されません。ホストプロジェクトからコンポーネントの変数を編集、またはその逆をおこなう唯一の方法はポインターを使用することです。</p><p>配列を使用した例:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// ホストプロジェクト側:</span><span class="hljs-function">     ARRAY INTEGER</span>(MyArray;<span class="hljs-number">10</span>)<span class="hljs-function">     AMethod</span>(-&gt;MyArray)<span class="hljs-comment">// コンポーネント側で AMethod プロジェクトメソッドは以下の通りです:</span><span class="hljs-function">     APPEND TO ARRAY</span>(<span class="hljs-variable">$1</span>-&gt;;<span class="hljs-number">2</span>)</code></pre><p>変数を使用した例:</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_TEXT</span>(myvariable)<span class="hljs-function">component_method1</span>(-&gt;myvariable)</code></pre><pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$p</span>)<span class="hljs-variable">$p</span>:=<span class="hljs-function">component_method2</span>(...)</code></pre><p>ポインターを使用しない場合でも、コンポーネント側からホストデータベースの (変数そのものではなく)変数の値にアクセスすること自体は可能ですし、その逆も可能です:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// ホストデータベース内</span><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$input_t</span>)<span class="hljs-variable">$input_t</span>:=<span class="hljs-string">"DoSomething"</span><span class="hljs-function">component_method</span>(<span class="hljs-variable">$input_t</span>)<span class="hljs-comment">// component_method は $1 に "DoSomething" を受け取ります ($input_t 変数を受け取るわけではありません)</span></code></pre><p>ホストプロジェクトとコンポーネント間でポインターを使用して通信をおこなうには、以下の点を考慮する必要があります:</p><ul><li><p><code>Get pointer</code>をコンポーネント内で使用した場合、このコマンドはホストプロジェクトの変数へのポインターを返しません。また逆にこのコマンドをホストプロジェクトで使用した場合も同様です。</p></li><li><p>コンパイル済みプロジェクトでは、コンパイルされたコンポーネントしか使用できませんが、インタープリタープロジェクトの場合には、インタープリターおよびコンパイル済みコンポーネントを同時に使用することができます。この場合、ポインターの利用は以下の原則を守らなければなりません:インタープリターモードでは、コンパイルモードにおいて作成されたポインターを解釈できます。逆にコンパイルモードでは、インタープリターモードにて作成されたポインターを解釈することはできません。以下の例でこの原則を説明します: 同じホストプロジェクトにインストールされた 2つのコンポーネント C ( コンパイル済) と I (インタープリタ) があります:</p></li><li><p>コンポーネントC が定義する変数 <code>myCvar</code> があるとき、コンポーネントI はポインター<code>-&gt;myCvar</code> を使用して変数の値にアクセスすることができます。</p></li><li><p>コンポーネントI が定義する変数 <code>myIvar</code> があるとき、コンポーネントC はポインター<code>-&gt;myIvar</code> を使用しても変数の値にアクセスすることはできません。このシンタックスは実行エラーを起こします。</p></li><li><p><code>RESOLVE POINTER</code> を使用したポインターの比較はお勧めできません。変数の分離の原則により、ホストプロジェクトとコンポーネント (あるいは他のコンポーネント)で同じ名前の変数が存在することができますが、根本的にそれらは異なる内容を持ちます。両コンテキストで、変数のタイプが違うことさえありえます。 ポインター <code>myptr1</code> と<code>myptr2</code> がそれぞれ変数を指すとき、以下の比較は正しくない結果となるかもしれません:</p></li></ul><pre><code class="hljs css language-4d"><span class="hljs-function">     RESOLVE POINTER</span>(myptr1;vVarName1;vtablenum1;vfieldnum1)<span class="hljs-function">     RESOLVE POINTER</span>(myptr2;vVarName2;vtablenum2;vfieldnum2)<span class="hljs-keyword">     If</span>(vVarName1=vVarName2)      <span class="hljs-comment">// 変数が異なっているにもかかわらず、このテストはtrue を返します</span></code></pre><p>このような場合には、ポインターを比較しなければなりません:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">     If</span>(myptr1=myptr2) <span class="hljs-comment">// このテストはFalse を返します</span></code></pre><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%82%A8%E3%83%A9%E3%83%BC%E5%87%A6%E7%90%86"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2582%25A8%25E3%2583%25A9%25E3%2583%25BC%25E5%2587%25A6%25E7%2590%2586"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>エラー処理</h2><p><code>ON ERR CALL</code> コマンドによって実装された <a href="#error-handling.html">エラー処理メソッド</a> は、実行中のプロジェクトに対してのみ適用されます。コンポーネントによって生成されたエラーの場合、ホストプロジェクトの <code>ON ERR CALL</code>エラー処理メソッドは呼び出されず、その逆もまた然りです。</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%83%9B%E3%82%B9%E3%83%88%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2583%259B%25E3%2582%25B9%25E3%2583%2588%25E3%2583%2597%25E3%2583%25AD%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2581%25AE%25E3%2583%2586%25E3%2583%25BC%25E3%2583%2596%25E3%2583%25AB%25E3%2581%25B8%25E3%2581%25AE%25E3%2582%25A2%25E3%2582%25AF%25E3%2582%25BB%25E3%2582%25B9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>ホストプロジェクトのテーブルへのアクセス</h2><p>コンポーネントでテーブルを使用することはできませんが、ホストプロジェクトとコンポーネントはポインターを使用して通信をおこなうことができます。たとえば、以下はコンポーネントで実行可能なメソッドです:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// コンポーネントメソッドの呼び出し</span><span class="hljs-function">methCreateRec</span>(-&gt;[PEOPLE];-&gt;[PEOPLE]Name;<span class="hljs-string">"Julie Andrews"</span>)</code></pre><p>コンポーネント内の <code>methCreateRec</code> メソッドのコード:</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$1</span>) <span class="hljs-comment">// ホストプロジェクトのテーブルへのポインター</span><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$2</span>) <span class="hljs-comment">// ホストプロジェクトのフィールドへのポインター</span><span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$3</span>) <span class="hljs-comment">// 代入する値</span><span class="hljs-variable">$tablepointer</span>:=<span class="hljs-variable">$1</span><span class="hljs-variable">$fieldpointer</span>:=<span class="hljs-variable">$2</span><span class="hljs-function">CREATE RECORD</span>(<span class="hljs-variable">$tablepointer</span>-&gt;)<span class="hljs-variable">$fieldpointer</span>-&gt;:=<span class="hljs-variable">$3</span><span class="hljs-function">SAVE RECORD</span>(<span class="hljs-variable">$tablepointer</span>-&gt;)</code></pre><blockquote><p>コンポーネントのコンテキストにおいて、テーブルフォームへの参照はすべてホスト側のテーブルフォームへの参照だと 4D はみなします(コンポーネントはテーブルを持つことができないからです)。</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%82%84%E3%83%95%E3%82%A3%E3%83%BC%E3%83%AB%E3%83%89%E3%81%AE%E5%88%A9%E7%94%A8"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2583%2586%25E3%2583%25BC%25E3%2583%2596%25E3%2583%25AB%25E3%2582%2584%25E3%2583%2595%25E3%2582%25A3%25E3%2583%25BC%25E3%2583%25AB%25E3%2583%2589%25E3%2581%25AE%25E5%2588%25A9%25E7%2594%25A8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>テーブルやフィールドの利用</h2><p>コンポーネントは、マトリクスプロジェクトのストラクチャーで定義されたテーブルやフィールドを使用することはできません。しかし外部データベースを作成し、そのテーブルやフィールドを必要に応じ利用することはできます。 外部データベースの作成と管理は SQLを用いておこないます。 外部データベースは、メインの4Dプロジェクトから独立している別の4Dプロジェクトですが、メインプロジェクトから操作が可能です。外部データベースの利用は、そのデータベースを一時的にカレントデータベースに指定することです。言い換えれば、4Dが実行する SQLクエリのターゲットデータベースとして外部データベースを指定します。 外部データベースの作成は SQL の <code>CREATEDATABASE</code> コマンドを使用します。</p><h3><a aria-hidden="true" class="anchor" id="develop-components.html_%E4%BE%8B%E9%A1%8C"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E4%25BE%258B%25E9%25A1%258C"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>例題</h3><p>以下のコードはコンポーネントに実装されており、外部データベースに対して3つの基本的なアクションをおこないます:</p><ul><li>外部データベースを作成します (存在しない場合)</li><li>外部データベースにデータを追加します</li><li>外部データベースからデータを読み込みます</li></ul><p>外部データベースの作成:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">&lt;&gt;MyDatabase</span>:=Get 4D folder+<span class="hljs-string">"\MyDB"</span> <span class="hljs-comment">// (Windows) データを許可されているディレクトリに保存します</span><span class="hljs-keyword"> Begin SQL</span>        CREATE DATABASE IF NOT EXISTS DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];        USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];        CREATE TABLE IF NOT EXISTS KEEPIT        (        ID INT32 PRIMARY KEY,        kind VARCHAR,        name VARCHAR,        code TEXT,        sort_order INT32        );<span class="hljs-function">        CREATE UNIQUE INDEX id_index ON KEEPIT </span>(ID);        USE DATABASE SQL_INTERNAL;<span class="hljs-keyword"> End SQL</span></code></pre><p>外部データベースへのデータ書き込み:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$Ptr_1</span>:=<span class="hljs-variable">$2 </span><span class="hljs-comment">// ポインターを介してホストプロジェクトからデータを取得します</span> <span class="hljs-variable">$Ptr_2</span>:=<span class="hljs-variable">$3</span> <span class="hljs-variable">$Ptr_3</span>:=<span class="hljs-variable">$4</span> <span class="hljs-variable">$Ptr_4</span>:=<span class="hljs-variable">$5</span> <span class="hljs-variable">$Ptr_5</span>:=<span class="hljs-variable">$6</span><span class="hljs-keyword"> Begin SQL</span>        USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];        INSERT INTO KEEPIT        (ID, kind, name, code, sort_order)        VALUES        (:[<span class="hljs-variable">$Ptr_1</span>], :[<span class="hljs-variable">$Ptr_2</span>], :[<span class="hljs-variable">$Ptr_3</span>], :[<span class="hljs-variable">$Ptr_4</span>], :[<span class="hljs-variable">$Ptr_5</span>]);        USE DATABASE SQL_INTERNAL;<span class="hljs-keyword"> End SQL</span></code></pre><p>外部データベースからデータを読み込み:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$Ptr_1</span>:=<span class="hljs-variable">$2 </span><span class="hljs-comment">// ホストプロジェクトへのデータアクセスはポインターを通じておこないます</span> <span class="hljs-variable">$Ptr_2</span>:=<span class="hljs-variable">$3</span> <span class="hljs-variable">$Ptr_3</span>:=<span class="hljs-variable">$4</span> <span class="hljs-variable">$Ptr_4</span>:=<span class="hljs-variable">$5</span> <span class="hljs-variable">$Ptr_5</span>:=<span class="hljs-variable">$6</span><span class="hljs-keyword"> Begin SQL</span>    USE DATABASE DATAFILE :[<span class="hljs-variable">&lt;&gt;MyDatabase</span>];    SELECT ALL ID, kind, name, code, sort_order    FROM KEEPIT    INTO :<span class="hljs-variable">$Ptr_1</span>, :<span class="hljs-variable">$Ptr_2</span>, :<span class="hljs-variable">$Ptr_3</span>, :<span class="hljs-variable">$Ptr_4</span>, :<span class="hljs-variable">$Ptr_5</span>;    USE DATABASE SQL_INTERNAL;<span class="hljs-keyword"> End SQL</span></code></pre><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%AE%E4%BD%BF%E7%94%A8"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2583%2595%25E3%2582%25A9%25E3%2583%25BC%25E3%2583%25A0%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>フォームの使用</h2><ul><li>特定のテーブルに属さない" プロジェクトフォーム" のみが、コンポーネント内で利用できます。マトリクスプロジェクトのすべてのプロジェクトフォームをコンポーネントで使用することができます。</li><li>コンポーネントはホストプロジェクトのテーブルフォームを使用できます。この場合、コンポーネントのコードでフォームを指定するにあたっては、テーブル名ではなく、テーブルへのポインターを使用しなければならないことに注意してください。</li></ul><blockquote><p>コンポーネントが <code>ADD RECORD</code>コマンドを使用すると、ホストプロジェクトのコンテキストで、ホストプロジェクトのカレントの入力フォームが表示されます。したがって、その入力フォーム上に変数が含まれている場合、コンポーネントはその変数にアクセスできません。</p></blockquote><ul><li>コンポーネントフォームをホストプロジェクト内でサブフォームとして公開することができます。これは具体的には、グラフィックオブジェクトを提供するコンポーネントを開発できることを意味します。たとえば、4D社が提供するウィジェットはコンポーネントのサブフォーム利用に基づいています。</li></ul><blockquote><p>コンポーネントのコンテキストにおいては、参照されるプロジェクトフォームはすべてコンポーネント内に存在している必要があります。たとえば、コンポーネント内において、<code>DIALOG</code> または <code>Open formwindow</code> コマンドを使用してホスト側のプロジェクトフォームを参照しようとした場合にはエラーが生成されます。</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AE%E4%BD%BF%E7%94%A8"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2583%25AA%25E3%2582%25BD%25E3%2583%25BC%25E3%2582%25B9%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>リソースの使用</h2><p>コンポーネントは、自身の Resourcesフォルダーにあるリソースを使用することができます。</p><p>これによって自動メカニズムが有効となり、コンポーネントの Resources フォルダー内で見つかった XLIFF ファイルは、同コンポーネントによってロードされます。</p><p>1つ以上のコンポーネントを含むホストプロジェクトでは、ホストプロジェクトと同様にそれぞれのコンポーネントも固有のリソースチェーンを持っています。リソースは異なるプロジェクト間で分離されます。コンポーネントA のリソースにコンポーネントBやホストプロジェクトからアクセスすることはできません。</p><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E5%88%9D%E6%9C%9F%E5%8C%96%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E5%AE%9F%E8%A1%8C"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E5%2588%259D%25E6%259C%259F%25E5%258C%2596%25E3%2581%25AE%25E3%2582%25B3%25E3%2583%25BC%25E3%2583%2589%25E3%2581%25AE%25E5%25AE%259F%25E8%25A1%258C"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>初期化のコードの実行</h2><p>コンポーネントは、ホストデータベースを開いたときまたは閉じたときに、自動的に 4Dコードを実行することができます。これによってたとえば、ホストデータベースに関連する設定やユーザーの状態などを読み込み・保存することができます。</p><p>初期化やデータベースを閉じるコードの実行は、 <code>On Host Database Event</code>データベースメソッド を使用しておこなわれます。</p><blockquote><p>セキュリティ上の理由から、<code>On Host Database Event</code>データベースメソッドを使用可能にするためには、その実行をホストデータベースで明示的に許可する必要があります。セキュリティ上の理由から、<code>On Host Database Event</code>データベースメソッドを使用可能にするためには、その実行をホストデータベースで明示的に許可する必要があります。</p></blockquote><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E4%BF%9D%E8%AD%B7-%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E3%2581%25AE%25E4%25BF%259D%25E8%25AD%25B7-%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%2591%25E3%2582%25A4%25E3%2583%25AB"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>コンポーネントの保護: コンパイル</h2><p>コンポーネントとしてインストールされたマトリクスプロジェクトのコードは、ホストプロジェクトからデフォルトでアクセス可能です。特に:</p><ul><li>エクスプローラーのメソッドページに存在する共有のプロジェクトメソッドは、ホストプロジェクトのメソッドから呼び出し可能です。エクスプローラーのプレビューエリアでそれらの内容を選択してコピーすることが可能です。 また、その内容はデバッガーで見ることもできます。しかし、それらをメソッドエディター上で開いたり編集したりすることはできません。</li><li>マトリクスプロジェクトの他のプロジェクトメソッドはエクスプローラーに現れません。しかし、ホストプロジェクトのデバッガーには内容が表示されます。</li><li><a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E5%2590%258D%25E5%2589%258D%25E7%25A9%25BA%25E9%2596%2593%25E3%2581%25AE%25E5%25AE%25A3%25E8%25A8%2580">名前空間が宣言されていれば</a>、非表示でないクラスや関数はデバッガーで確認することができます。</li></ul><p>コンポーネントのコードを効果的に保護するには、マトリクスプロジェクトを <a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E3%2582%2592%25E3%2583%2593%25E3%2583%25AB%25E3%2583%2589">コンパイルしビルドして</a>、.4dz ファイルとして提供します。コンパイルされたマトリクスプロジェクトがコンポーネントとしてインストールされると:</p><ul><li>共有のプロジェクトメソッド、クラス、および関数は、ホストプロジェクトのメソッドから呼び出し可能です。共有のプロジェクトメソッドは、エクスプローラーのメソッドページにも表示されます。しかし、その内容はプレビューエリアにもデバッガーにも表示されません。</li><li>マトリクスプロジェクトの他のプロジェクトメソッドは一切表示されません。</li></ul><h2><a aria-hidden="true" class="anchor" id="develop-components.html_%E3%82%B3%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%8D%E3%83%B3%E3%83%88%E3%81%AE%E5%85%B1%E6%9C%89"></a><a aria-hidden="true" class="hash-link" href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E3%2581%25AE%25E5%2585%25B1%25E6%259C%2589"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>コンポーネントの共有</h2><p>開発したコンポーネントを <a href="https://github.com/topics/4d-component">GitHub</a>で公開し、4D開発者のコミュニティをサポートすることをお勧めします。正しく参照されるためには、<strong><code>4d-component</code></strong>トピックをご利用ください。</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#overview.html"><span class="arrow-prev">←</span><span>概要</span></a><a class="docs-next button" href="#develop-plug-ins.html"><span>プラグインの開発</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#develop-components.html_%25E5%25AE%259A%25E7%25BE%25A9">定義</a></li><li><a href="#develop-components.html_%25E7%2594%25BB%25E9%259D%25A2%25E3%2581%25AE%25E8%25AA%25AC%25E6%2598%258E">画面の説明</a></li><li><a href="#develop-components.html_%25E3%2583%25A9%25E3%2583%25B3%25E3%2582%25B2%25E3%2583%25BC%25E3%2582%25B8%25E3%2582%25B3%25E3%2583%259E%25E3%2583%25B3%25E3%2583%2589%25E3%2581%25AE%25E3%2582%25B9%25E3%2582%25B3%25E3%2583%25BC%25E3%2583%2597">ランゲージコマンドのスコープ</a><ul class="toc-headings"><li><a href="#develop-components.html_%25E4%25BD%25BF%25E7%2594%25A8%25E3%2581%25A7%25E3%2581%258D%25E3%2581%25AA%25E3%2581%2584%25E3%2582%25B3%25E3%2583%259E%25E3%2583%25B3%25E3%2583%2589">使用できないコマンド</a></li></ul></li><li><a href="#develop-components.html_%25E3%2583%2597%25E3%2583%25AD%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2583%25A1%25E3%2582%25BD%25E3%2583%2583%25E3%2583%2589%25E3%2581%25AE%25E5%2585%25B1%25E6%259C%2589">プロジェクトメソッドの共有</a></li><li><a href="#develop-components.html_%25E3%2582%25AF%25E3%2583%25A9%25E3%2582%25B9%25E3%2582%2584%25E9%2596%25A2%25E6%2595%25B0%25E3%2581%25AE%25E5%2585%25B1%25E6%259C%2589">クラスや関数の共有</a><ul class="toc-headings"><li><a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E5%2590%258D%25E5%2589%258D%25E7%25A9%25BA%25E9%2596%2593%25E3%2581%25AE%25E5%25AE%25A3%25E8%25A8%2580">コンポーネント名前空間の宣言</a></li><li><a href="#develop-components.html_%25E9%259D%259E%25E8%25A1%25A8%25E7%25A4%25BA%25E3%2582%25AF%25E3%2583%25A9%25E3%2582%25B9">非表示クラス</a></li></ul></li><li><a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%2591%25E3%2582%25A4%25E3%2583%25AB%25E6%25B8%2588%25E3%2581%25BF%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E3%2581%25AE%25E3%2582%25B3%25E3%2583%25BC%25E3%2583%2589%25E8%25A3%259C%25E5%25AE%258C">コンパイル済みコンポーネントのコード補完</a></li><li><a href="#develop-components.html_%25E5%25A4%2589%25E6%2595%25B0%25E3%2581%25AE%25E6%25B8%25A1%25E3%2581%2597%25E6%2596%25B9">変数の渡し方</a></li><li><a href="#develop-components.html_%25E3%2582%25A8%25E3%2583%25A9%25E3%2583%25BC%25E5%2587%25A6%25E7%2590%2586">エラー処理</a></li><li><a href="#develop-components.html_%25E3%2583%259B%25E3%2582%25B9%25E3%2583%2588%25E3%2583%2597%25E3%2583%25AD%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2581%25AE%25E3%2583%2586%25E3%2583%25BC%25E3%2583%2596%25E3%2583%25AB%25E3%2581%25B8%25E3%2581%25AE%25E3%2582%25A2%25E3%2582%25AF%25E3%2582%25BB%25E3%2582%25B9">ホストプロジェクトのテーブルへのアクセス</a></li><li><a href="#develop-components.html_%25E3%2583%2586%25E3%2583%25BC%25E3%2583%2596%25E3%2583%25AB%25E3%2582%2584%25E3%2583%2595%25E3%2582%25A3%25E3%2583%25BC%25E3%2583%25AB%25E3%2583%2589%25E3%2581%25AE%25E5%2588%25A9%25E7%2594%25A8">テーブルやフィールドの利用</a><ul class="toc-headings"><li><a href="#develop-components.html_%25E4%25BE%258B%25E9%25A1%258C">例題</a></li></ul></li><li><a href="#develop-components.html_%25E3%2583%2595%25E3%2582%25A9%25E3%2583%25BC%25E3%2583%25A0%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8">フォームの使用</a></li><li><a href="#develop-components.html_%25E3%2583%25AA%25E3%2582%25BD%25E3%2583%25BC%25E3%2582%25B9%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8">リソースの使用</a></li><li><a href="#develop-components.html_%25E5%2588%259D%25E6%259C%259F%25E5%258C%2596%25E3%2581%25AE%25E3%2582%25B3%25E3%2583%25BC%25E3%2583%2589%25E3%2581%25AE%25E5%25AE%259F%25E8%25A1%258C">初期化のコードの実行</a></li><li><a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E3%2581%25AE%25E4%25BF%259D%25E8%25AD%25B7-%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%2591%25E3%2582%25A4%25E3%2583%25AB">コンポーネントの保護: コンパイル</a></li><li><a href="#develop-components.html_%25E3%2582%25B3%25E3%2583%25B3%25E3%2583%259D%25E3%2583%25BC%25E3%2583%258D%25E3%2583%25B3%25E3%2583%2588%25E3%2581%25AE%25E5%2585%25B1%25E6%259C%2589">コンポーネントの共有</a></li></ul></nav></div></div></body></html>