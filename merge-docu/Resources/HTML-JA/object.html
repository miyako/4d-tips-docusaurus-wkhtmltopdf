<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="ja"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>オブジェクト · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="オブジェクト型の変数・フィールド・式にはさまざまなデータを格納することができます。 4D のネイティブなオブジェクトの構造は、よくある「プロパティ/値」(または「属性/値」) というペア (連想配列) に基づいています。 これらオブジェクトの記法は JSON をもとにしていますが、完全に同じというわけではありません。"name="description" /><meta content="ja" name="docsearch:language" /><meta content="オブジェクト · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="オブジェクト型の変数・フィールド・式にはさまざまなデータを格納することができます。 4D のネイティブなオブジェクトの構造は、よくある「プロパティ/値」(または「属性/値」) というペア (連想配列) に基づいています。 これらオブジェクトの記法は JSON をもとにしていますが、完全に同じというわけではありません。"property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#dt_object.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">オブジェクト<a aria-hidden="true" class="anchor" id="object.html"></a></h1></header><article><div><p><span>オブジェクト型の変数・フィールド・式にはさまざまなデータを格納することができます。 4Dのネイティブなオブジェクトの構造は、よくある「プロパティ/値」(または「属性/値」) というペア (連想配列) に基づいています。これらオブジェクトの記法は JSON をもとにしていますが、完全に同じというわけではありません。</span></p><ul><li><p><span>プロパティ名は必ずテキストで表現されます。 プロパティ名には <a href="#object.html_%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2583%2597%25E3%2583%25AD%25E3%2583%2591%25E3%2583%2586%25E3%2582%25A3">命名規則</a> があります。</span></p></li><li><p><span>プロパティ値は以下のどれかの型で表現されます:</span></p><ul><li><span>数値 (実数、整数、等)</span></li><li><span>テキスト</span></li><li><span>null</span></li><li><span>ブール</span></li><li><span>ポインター (<code>JSON Stringify</code>コマンドの使用、またはコピーの際に評価されます)</span></li><li><span>日付 (日付型あるいは ISO日付フォーマット文字列)</span></li><li><span>オブジェクト(1) (オブジェクトは入れ子にすることができます)</span></li><li><span>ピクチャー(2)</span></li><li><span>コレクション</span></li></ul></li></ul><p><span>(1) <a href="#object.html_%25E3%2582%25A8%25E3%2583%25B3%25E3%2583%2586%25E3%2582%25A3%25E3%2583%2586%25E3%2582%25A3">エンティティ</a> や <a href="#object.html_%25E3%2582%25A8%25E3%2583%25B3%25E3%2583%2586%25E3%2582%25A3%25E3%2583%2586%25E3%2582%25A3%25E3%2582%25BB%25E3%2583%25AC%25E3%2582%25AF%25E3%2582%25B7%25E3%2583%25A7%25E3%2583%25B3">エンティティセレクション</a> などの ORDAオブジェクトは <strong>オブジェクトフィールド</strong>には保存することができませんが、メモリ内の <strong>オブジェクト変数</strong>に保存することは可能です。</span></p><p><span>(2) デバッガー内でテキストとして表示したり、JSONへと書き出されたりした場合、ピクチャー型のオブジェクトプロパティは "[object Picture]"と表されます。</span></p><p><span><strong>警告:</strong>属性名は大文字と小文字を区別するという点に注意してください。</span></p><p><span>オブジェクト型の変数・フィールド・式を操作するには <a href="#object.html_%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E8%25A8%2598%25E6%25B3%2595%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8">オブジェクト記法</a> を用いるか、<strong>オブジェクト (ランゲージ)</strong>テーマが提供する従来のコマンドを使用します。 オブジェクト型フィールドに対して処理をおこなうには <code>QUERY BYATTRIBUTE</code>、<code>QUERY SELECTION BY ATTRIBUTE</code> や<code>ORDER BY ATTRIBUTE</code> など、<strong>クエリ</strong>テーマの特定のコマンドも使用することができます。</span></p><p><span>オブジェクト記法を使ってアクセスされたそれぞれのプロパティ値は式とみなされます。4D内で式が期待される場所であれば、どこでもこのような値を使用することができます:</span></p><ul><li><span>4Dコード内。メソッド (メソッドエディター) に書いても、外部化(フォーミュラ、<code>PROCESS 4DTAGS</code> あるいは Web Server によって処理される 4D tags ファイル、4D WriteProドキュメントなど) しても使用可能です。</span></li><li><span>デバッガー及びランタイムエクスプローラーの式エリア内。</span></li><li><span>フォームエディターにおいて、フォームオブジェクトのプロパティリスト内。変数あるいは式フィールド内の他、様々なセレクションリストボックス及びカラムの式(データソース、背景色、スタイル、フォントカラー等) において使用可能です。</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="object.html_%E5%88%9D%E6%9C%9F%E5%8C%96"></a><a aria-hidden="true"class="hash-link" href="#object.html_%25E5%2588%259D%25E6%259C%259F%25E5%258C%2596"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>初期化</span></h2><p><span><code>New object</code>コマンドを使うなどして、オブジェクトはあらかじめ初期化しておく必要があります。初期化しない場合、プロパティ値の取得や変更はシンタックスエラーとなります。</span></p><p><span>例:</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-function"> C_OBJECT</span>(<span class="hljs-variable">$obVar</span>) <span class="hljs-comment">// オブジェクト型の変数の作成</span> <span class="hljs-variable">$obVar</span>:=New object <span class="hljs-comment">// オブジェクトの初期化と変数への代入</span></code></span></pre><h3><a aria-hidden="true" class="anchor" id="object.html_%E9%80%9A%E5%B8%B8%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%A8%E5%85%B1%E6%9C%89%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88"></a><a aria-hidden="true" class="hash-link" href="#object.html_%25E9%2580%259A%25E5%25B8%25B8%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2581%25A8%25E5%2585%25B1%25E6%259C%2589%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>通常オブジェクトと共有オブジェクト</h3><p>二種類のオブジェクトを作成することができます:</p><ul><li><code>New object</code> コマンドを使用して作成する通常 (非共有) オブジェクト。通常のオブジェクトは特別なアクセスコントロールをせずに編集可能ですが、プロセス間で共有することはできません。</li><li><code>New shared object</code> コマンドを使用して作成する共有オブジェクト。共有オブジェクトはプロセス間 (プリエンティブ・スレッド含む) で共有可能なオブジェクトです。 共有オブジェクトへのアクセスは<code>Use...End use</code> 構造によって管理されています。 詳細な情報については、<a href="#shared.html">共有オブジェクトと共有コレクション</a> を参照ください。</li></ul><h2><a aria-hidden="true" class="anchor" id="object.html_%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%98%E6%B3%95%E3%81%AE%E4%BD%BF%E7%94%A8"></a><a aria-hidden="true" class="hash-link" href="#object.html_%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E8%25A8%2598%25E6%25B3%2595%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>オブジェクト記法の使用</h2><p>オブジェクト記法を使うと、トークンのチェーンを通してオブジェクトのプロパティ値にアクセスすることができます。</p><h3><a aria-hidden="true" class="anchor" id="object.html_%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3"></a><a aria-hidden="true" class="hash-link" href="#object.html_%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2583%2597%25E3%2583%25AD%25E3%2583%2591%25E3%2583%2586%25E3%2582%25A3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>オブジェクトプロパティ</h3><p>オブジェクト記法では、オブジェクトプロパティは二通りの方法でアクセスすることができます:</p><ul><li>"ドット"記号を使用する方法: &gt; object.propertyName</li></ul><p>例:</p><pre><code class="hljs css language-4d">     employee.name:=<span class="hljs-string">"Smith"</span></code></pre><ul><li>大カッコ内の文字列を使用する方法: &gt; object["propertyName"]</li></ul><p>例:</p><pre><code class="hljs css language-4d">     <span class="hljs-variable">$vName</span>:=employee[<span class="hljs-string">"name"</span>]     <span class="hljs-comment">// または:</span>     <span class="hljs-variable">$property</span>:=<span class="hljs-string">"name"</span>     <span class="hljs-variable">$vName</span>:=employee[<span class="hljs-variable">$property</span>]</code></pre><p>オブジェクトプロパティ値には、オブジェクトやコレクションも設定することが可能です。これらのサブプロパティにアクセスするため、オブジェクト記法では連続した字句を受け入れることができます:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$vAge</span>:=employee.children[<span class="hljs-number">2</span>].age</code></pre><p>オブジェクトを格納、あるいは返すあらゆるランゲージ要素に対してオブジェクト記法を使用できます。たとえば:</p><ul><li><strong>オブジェクト</strong> 自身(変数、フィールド、オブジェクトプロパティ、オブジェクト配列、コレクション要素などに保存されているもの) 例:</li></ul><pre><code class="hljs css language-4d">     <span class="hljs-variable">$age</span>:=<span class="hljs-variable">$myObjVar</span>.employee.age <span class="hljs-comment">// 変数</span>     <span class="hljs-variable">$addr</span>:=[Emp]data_obj.address <span class="hljs-comment">// フィールド</span>     <span class="hljs-variable">$city</span>:=<span class="hljs-variable">$addr</span>.city <span class="hljs-comment">// オブジェクトプロパティ</span>     <span class="hljs-variable">$pop</span>:=<span class="hljs-variable">$aObjCountries{2}</span>.population <span class="hljs-comment">// オブジェクト配列</span>     <span class="hljs-variable">$val</span>:=<span class="hljs-variable">$myCollection</span>[<span class="hljs-number">3</span>].subvalue <span class="hljs-comment">// コレクション要素</span></code></pre><ul><li>オブジェクトを返す <strong>4D コマンド</strong> 例:</li></ul><pre><code class="hljs css language-4d">     <span class="hljs-variable">$measures</span>:=Get database measures.DB.tables</code></pre><ul><li>オブジェクトを返す <strong>プロジェクトメソッド</strong> 例:</li></ul><pre><code class="hljs css language-4d">      <span class="hljs-comment">// MyMethod1</span><span class="hljs-function">     C_OBJECT</span>(<span class="hljs-variable">$0</span>)     <span class="hljs-variable">$0</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"a"</span>;<span class="hljs-number">10</span>;<span class="hljs-string">"b"</span>;<span class="hljs-number">20</span>)      <span class="hljs-comment">//myMethod2</span>     <span class="hljs-variable">$result</span>:=MyMethod1.a <span class="hljs-comment">//10</span></code></pre><ul><li><strong>コレクション</strong> 例:</li></ul><pre><code class="hljs css language-4d">     myColl.length <span class="hljs-comment">// コレクションの長さ</span></code></pre><h3><a aria-hidden="true" class="anchor" id="object.html_%E3%83%9D%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC"></a><a aria-hidden="true"class="hash-link" href="#object.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>ポインター</h3><p><strong>注:</strong> オブジェクトは常に参照として渡されるため、通常はポインターを使用する必要はありません。オブジェクトを引数として渡す際、4D内部では自動的にポインターに類似したメカニズムを使うことでメモリの消費を最小限に抑え、引数を編集して返すことを可能にします。つまり、ポインターは必要ないということです。それでもポインターを使用したい場合には、プロパティ値はポインターを通してアクセスすることができます。</p><p>ポインターを使ってオブジェクトプロパティにアクセスするには、直接オブジェクトを使用する場合と方法が似ていますが、"ドット"記号は省略する必要があります。</p><ul><li>オブジェクト記法によるアクセス:</li></ul><blockquote><p>pointerOnObject-&gt;propertyName</p></blockquote><ul><li>大カッコを使用する方法:</li></ul><blockquote><p>pointerOnObject-&gt;["propertyName"]</p></blockquote><p>例:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_OBJECT</span>(vObj)<span class="hljs-function"> C_POINTER</span>(vPtr) vObj:=New object vObj.a:=<span class="hljs-number">10</span> vPtr:=-&gt;vObj x:=vPtr-&gt;a <span class="hljs-comment">//x=10</span></code></pre><h3><a aria-hidden="true" class="anchor" id="object.html_null-%E5%80%A4"></a><a aria-hidden="true" class="hash-link" href="#object.html_null-%25E5%2580%25A4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Null 値</h3><p>オブジェクト記法を使用する場合、<strong>null</strong> 値は <strong>Null</strong>コマンドを通してサポートされています。 このコマンドを使用すると、null値をオブジェクトプロパティやコレクション要素に割り当てたり、それらと比較したりすることができます。例:</p><pre><code class="hljs css language-4d"> myObject.address.zip:=<span class="hljs-literal">Null</span><span class="hljs-keyword"> If</span>(myColl[<span class="hljs-number">2</span>]=<span class="hljs-literal">Null</span>)</code></pre><p>詳細については、<code>Null</code> コマンドの説明を参照してください。</p><h3><a aria-hidden="true" class="anchor" id="object.html_%E6%9C%AA%E5%AE%9A%E7%BE%A9%E3%81%AE%E5%80%A4"></a><a aria-hidden="true"class="hash-link" href="#object.html_%25E6%259C%25AA%25E5%25AE%259A%25E7%25BE%25A9%25E3%2581%25AE%25E5%2580%25A4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>未定義の値</h3><p>オブジェクトプロパティを評価した結果、未定義の値が生成されることがあります。未定義の式を読み込んだ、または割り当てようとしたときに 4D は通常、エラーを生成します。ただし以下の場合には生成されません:</p><ul><li>未定義のオブジェクトやプロパティ値を読み込むと未定義 (undefined) が返されます。未定義の値を (配列を除く)変数に割り当てることは、<code>CLEAR VARIABLE</code> コマンドを使うのと同じ効果があります:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-function">     C_OBJECT</span>(<span class="hljs-variable">$o</span>)<span class="hljs-function">     C_LONGINT</span>(<span class="hljs-variable">$val</span>)     <span class="hljs-variable">$val</span>:=<span class="hljs-number">10</span> <span class="hljs-comment">//$val=10</span>     <span class="hljs-variable">$val</span>:=<span class="hljs-variable">$o</span>.a <span class="hljs-comment">// $o.a は未定義 (エラーなし) なため、この値を代入すると変数が初期化されます</span>      <span class="hljs-comment">// $val=0</span></code></pre><ul><li>未定義のコレクションの <strong>length</strong> プロパティは 0 を返します:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-function">     C_COLLECTION</span>(<span class="hljs-variable">$c</span>) <span class="hljs-comment">// 変数は作成されたが、コレクションは未定義     $size:=$c.length // $size = 0</span></code></pre><ul><li>未定義の値を引数としてプロジェクトメソッドに渡した場合、宣言された引数の型に応じて、0 あるいは "" (空の文字列)へと自動変換されます。</li></ul><pre><code class="hljs css language-4d"><span class="hljs-function">     C_OBJECT</span>(<span class="hljs-variable">$o</span>)<span class="hljs-function">     mymethod</span>(<span class="hljs-variable">$o</span>.a) <span class="hljs-comment">// 未定義の引数を渡すと</span>      <span class="hljs-comment">// mymethod メソッド内では</span><span class="hljs-function">     C_TEXT</span>(<span class="hljs-variable">$1</span>) <span class="hljs-comment">// 引数の型はテキスト</span>      <span class="hljs-comment">// $1 の中身は""</span></code></pre><ul><li>条件式で、If あるいは Case of キーワードで未定義と評価された場合には、自動的にfalseへと変換されます:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-function">     C_OBJECT</span>(<span class="hljs-variable">$o</span>)<span class="hljs-keyword">     If</span>(<span class="hljs-variable">$o</span>.a) <span class="hljs-comment">// false</span><span class="hljs-keyword">     End if</span><span class="hljs-keyword">     Case of</span>        :(<span class="hljs-variable">$o</span>.a) <span class="hljs-comment">// false</span><span class="hljs-keyword">     End case</span></code></pre><ul><li>未定義の値を既存のオブジェクトプロパティに代入した場合、その値は型に応じて初期化、あるいは消去されます:</li><li>オブジェクト、コレクション、ポインター: Null</li><li>ピクチャー: 空のピクチャー</li><li>ブール: False</li><li>文字列: ""</li><li>数値: 0</li><li>日付: "オブジェクトではISO日付フォーマットの代わりに日付型を使用する" 設定が有効化されている場合は!00-00-00!、それ以外の場合には ""</li><li>時間: 0 (ミリ秒単位)</li><li>未定義、Null: 変化なし</li></ul><pre><code class="hljs css language-4d"><span class="hljs-function">     C_OBJECT</span>(<span class="hljs-variable">$o</span>)     <span class="hljs-variable">$o</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"a"</span>;<span class="hljs-number">2</span>)     <span class="hljs-variable">$o</span>.a:=<span class="hljs-variable">$o</span>.b <span class="hljs-comment">// $o.a=0</span></code></pre><ul><li>未定義の値を存在しないオブジェクトのプロパティへと代入した場合は、何も起こりません。</li></ul><p>4Dコード内の式に対して特定の型であることが要求される場合、その式を適切な 4Dキャストコマンド(<code>String</code>, <code>Num</code>, <code>Date</code>,<code>Time</code>, <code>Bool</code>)で囲うことで、たとえ未定義に評価されたとしても正しい型を確実に得ることができます。これらのコマンドは式が未定義と評価された場合に、指定された型の空の値を返します。 たとえば:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$myString</span>:=<span class="hljs-function">Lowercase</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$o</span>.a.b)) <span class="hljs-comment">// 未定義の場合でもコード内でエラーが起きないように</span>  <span class="hljs-comment">// 文字列の値が得られるようにします</span></code></pre><h2><a aria-hidden="true" class="anchor" id="object.html_%E4%BE%8B%E9%A1%8C"></a><a aria-hidden="true" class="hash-link" href="#object.html_%25E4%25BE%258B%25E9%25A1%258C"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>例題</h2><p>オブジェクト記法を使用すると、オブジェクトを扱う際の 4Dコードを単純化することができます。同時に、コマンドベースの記法も引き続き完全にサポートされています。</p><ul><li>オブジェクトの読み書き (この例題ではオブジェクト記法とコマンド記法を比較します):</li></ul><pre><code class="hljs css language-4d">  <span class="hljs-comment">// オブジェクト記法を使用</span><span class="hljs-function"> C_OBJECT</span>(<span class="hljs-variable">$myObj</span>) <span class="hljs-comment">// 4Dオブジェクト変数を宣言</span> <span class="hljs-variable">$myObj</span>:=New object <span class="hljs-comment">// オブジェクト作成し、変数に代入</span> <span class="hljs-variable">$myObj</span>.age:=<span class="hljs-number">56</span> <span class="hljs-variable">$age</span>:=<span class="hljs-variable">$myObj</span>.age <span class="hljs-comment">// 56</span>  <span class="hljs-comment">// コマンド記法を使用</span><span class="hljs-function"> C_OBJECT</span>(<span class="hljs-variable">$myObj2</span>) <span class="hljs-comment">// 4Dオブジェクト変数を宣言</span><span class="hljs-function"> OB SET</span>(<span class="hljs-variable">$myObj2</span>;<span class="hljs-string">"age"</span>;<span class="hljs-number">42</span>) <span class="hljs-comment">// オブジェクトを作成し、ageプロパティを追加</span> <span class="hljs-variable">$age</span>:=<span class="hljs-function">OB Get</span>(<span class="hljs-variable">$myObj2</span>;<span class="hljs-string">"age"</span>) <span class="hljs-comment">// 42</span>  <span class="hljs-comment">// もちろん両方の記法を混用することもできます</span><span class="hljs-function"> C_OBJECT</span>(<span class="hljs-variable">$myObj3</span>)<span class="hljs-function"> OB SET</span>(<span class="hljs-variable">$myObj3</span>;<span class="hljs-string">"age"</span>;<span class="hljs-number">10</span>) <span class="hljs-variable">$age</span>:=<span class="hljs-variable">$myObj3</span>.age <span class="hljs-comment">// 10</span></code></pre><ul><li>プロパティの作成と、オブジェクトを含む値の代入:</li></ul><pre><code class="hljs css language-4d"><span class="hljs-function"> C_OBJECT</span>(<span class="hljs-variable">$Emp</span>) <span class="hljs-variable">$Emp</span>:=New object <span class="hljs-variable">$Emp</span>.city:=<span class="hljs-string">"London"</span> <span class="hljs-comment">// cityプロパティを作成し、その値を"London"に設定します</span> <span class="hljs-variable">$Emp</span>.city:=<span class="hljs-string">"Paris"</span> <span class="hljs-comment">// cityプロパティを変更します</span> <span class="hljs-variable">$Emp</span>.phone:=<span class="hljs-function">New object</span>(<span class="hljs-string">"office"</span>;<span class="hljs-string">"123456789"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"0011223344"</span>)  <span class="hljs-comment">// phoneプロパティを作成し、その値にオブジェクトを設定します</span></code></pre><ul><li>オブジェクト記法を使用すると、サブオブジェクトの値を簡単に取得できます:</li></ul><pre><code class="hljs css language-4d"> <span class="hljs-variable">$vCity</span>:=<span class="hljs-variable">$Emp</span>.city <span class="hljs-comment">// "Paris"</span> <span class="hljs-variable">$vPhone</span>:=<span class="hljs-variable">$Emp</span>.phone.home <span class="hljs-comment">// "0011223344"</span></code></pre><ul><li>大カッコ [ ] を使用すると文字列を使ってプロパティにアクセスできます:</li></ul><pre><code class="hljs css language-4d"> <span class="hljs-variable">$Emp</span>[<span class="hljs-string">"city"</span>]:=<span class="hljs-string">"Berlin"</span> <span class="hljs-comment">// city プロパティを変更</span>  <span class="hljs-comment">// これは変数を通してプロパティを作成する場合に便利です</span><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$addr</span>) <span class="hljs-variable">$addr</span>:=<span class="hljs-string">"address"</span><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$i</span>;<span class="hljs-number">1</span>;<span class="hljs-number">4</span>)    <span class="hljs-variable">$Emp</span>[<span class="hljs-variable">$addr</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$i</span>)]:=<span class="hljs-string">""</span><span class="hljs-keyword"> End for</span>  <span class="hljs-comment">// $Emp object には4つの空のプロパティ "address1...address4" が作成されました</span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#number.html"><span class="arrow-prev">←</span> <span>数値(実数、倍長整数、整数)</span></a><a class="docs-next button" href="#picture.html"><span>ピクチャー</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#object.html_%25E5%2588%259D%25E6%259C%259F%25E5%258C%2596">初期化</a><ul class="toc-headings"><li><a href="#object.html_%25E9%2580%259A%25E5%25B8%25B8%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2581%25A8%25E5%2585%25B1%25E6%259C%2589%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588">通常オブジェクトと共有オブジェクト</a></li></ul></li><li><a href="#object.html_%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E8%25A8%2598%25E6%25B3%2595%25E3%2581%25AE%25E4%25BD%25BF%25E7%2594%25A8">オブジェクト記法の使用</a><ul class="toc-headings"><li><a href="#object.html_%25E3%2582%25AA%25E3%2583%2596%25E3%2582%25B8%25E3%2582%25A7%25E3%2582%25AF%25E3%2583%2588%25E3%2583%2597%25E3%2583%25AD%25E3%2583%2591%25E3%2583%2586%25E3%2582%25A3">オブジェクトプロパティ</a></li><li><a href="#object.html_%25E3%2583%259D%25E3%2582%25A4%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25BC">ポインター</a></li><li><a href="#object.html_null-%25E5%2580%25A4">Null 値</a></li><li><a href="#object.html_%25E6%259C%25AA%25E5%25AE%259A%25E7%25BE%25A9%25E3%2581%25AE%25E5%2580%25A4">未定義の値</a></li></ul></li><li><a href="#object.html_%25E4%25BE%258B%25E9%25A1%258C">例題</a></li></ul></nav></div></div></body></html>