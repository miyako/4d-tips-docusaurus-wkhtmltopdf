<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Modes interprété et compilé · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Les applications 4D fonctionnent en mode **interprété** ou en mode **compilé** :"name="description" /><meta content="fr" name="docsearch:language" /><meta content="Modes interprété et compilé · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Les applications 4D fonctionnent en mode **interprété** ou en mode **compilé** :"property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#interpreted.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Modes interprété etcompilé<a aria-hidden="true" class="anchor" id="interpreted-compiled.html"></a></h1></header><article><div><p><span>Les applications 4D fonctionnent en mode<strong>interprété</strong> ou en mode <strong>compilé</strong>:</span></p><ul><li><span>En mode interprété, les déclarations sont lues ettraduites en langage machine lorsqu'elles sont exécutées. Vouspouvez ajouter ou modifier le code là où vous le souhaitez,l'application se met à jour automatiquement.</span></li><li><span>En mode compilé, toutes les méthodes sont lues ettraduites une seule fois, lors de la compilation. Par la suite,l'application contient uniquement des instructions au niveau del'assemblage, il n'est donc plus possible de modifier lecode.</span></li></ul><p><span>Les avantages procurés par le compilateur sont lessuivants :</span></p><ul><li><span><strong>Vitesse :</strong> votre application s'exécute de3 à 1000 fois plus vite.</span></li><li><span><strong>Vérification du code</strong> : la cohérenceinterne du code de votre application est entièrement contrôlée. Lesconflits de logique et de syntaxe sont détectés.</span></li><li><span><strong>Protection :</strong> une fois votre applicationcompilée, vous pouvez en supprimer le code interprété. Alors,l'application compilée dispose des mêmes fonctionnalités que labase originale, à la différence près que la structure et lesméthodes ne peuvent plus être visualisées ni modifiées délibérémentou par inadvertance.</span></li><li><span><strong>Application indépendantes"double-cliquables"</strong> : une application compilée peutégalement être transformée en application indépendante (sousWindows, des fichiers ".EXE") comportant sa propreicône.</span></li><li><span><strong>Exécution en mode préemptif</strong> : seul lecode compilé peut être exécuté dans un processpréemptif.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="interpreted-compiled.html_diff%C3%A9rences-entre-le-code-interpr%C3%A9t%C3%A9-et-le-code-compil%C3%A9"></a><a aria-hidden="true" class="hash-link" href="#interpreted-compiled.html_diff%25C3%25A9rences-entre-le-code-interpr%25C3%25A9t%25C3%25A9-et-le-code-compil%25C3%25A9"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Différences entre le code interprété et le codecompilé</span></h2><p><span>Bien que l'application fonctionnera de la même manière enmodes interprété et compilé, il est important de connaitre lesdifférences que l'on peut rencontrer pendant la saisie du code quisera compilé. L'interpréteur de 4D est généralement plus souple quele compilateur.</span></p><table><thead><tr><th>Compilé</th><th>Interprété</th></tr></thead><tbody><tr><td>Vous ne devez pas avoir une méthode qui aurait le même nomqu’une variable.</td><td>Aucune erreur n'est générée, mais la méthode estprioritaire</td></tr><tr><td>Toutes les variables doivent être typées, soit via unedirective de compilateur (ex : <code>C_ENTIER LONG</code>), soitvia le compilateur au moment de la compilation.</td><td>Les variables peuvent être typées à la volée (nonrecommandé)</td></tr><tr><td>Vous ne pouvez pas modifier le type d'une variable ou d'untableau.</td><td>La modification du type d'une variable ou d'un tableau estpossible (non recommandé)</td></tr><tr><td>Vous ne pouvez pas convertir un tableau simple en tableau àdeux dimensions, et vice-versa.</td><td>Possible</td></tr><tr><td>Bien que le compilateur déduise le type des variables sinécessaire, il est conseillé de déclarer le type des variables àl'aide des directives de compilation lorsque le type de données estambigu, en particulier dans un formulaire.</td><td></td></tr><tr><td>La fonction <code>Indefinie</code> retournera toujours Faux.Les variables sont toujours définies.</td><td></td></tr><tr><td>Si vous avez coché la propriété "Peut être exécutée dans unprocess préemptif" pour la méthode, le code ne doit pas appeler decommandes thread-unsafe ou d'autres méthodes thread-unsafe.</td><td>Les propriétés du process préemptif sont ignorées</td></tr><tr><td>La commande <code>APPELER 4D</code> est nécessaire pour appelerdes boucles spécifiques</td><td>Il est toujours possible d'interrompre 4D</td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="interpreted-compiled.html_utiliser-les-directives-du-compilateur-avec-linterpr%C3%A9teur"></a><a aria-hidden="true" class="hash-link" href="#interpreted-compiled.html_utiliser-les-directives-du-compilateur-avec-linterpr%25C3%25A9teur"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utiliser les directives du compilateur avecl'interpréteur</span></h2><p><span>Les directives de compilateur ne sont pas requises pourles applications non compilées. L'interpréteur type automatiquementchaque variable selon son utilisation dans la déclaration, et unevariable peut être retypée librement dans le projetd'application.</span></p><p><span>Grâce à cet aspect flexible, il est possible qu'uneapplication agisse différemment en modes interprété etcompilé.</span></p><p><span>Par exemple, si vous écrivez :</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-function">C_ENTIER LONG</span>(MyInt)</code></span></pre><p>et ailleurs dans l'application, vous écrivez :</p><pre><code class="hljs css language-4d">MyInt:=<span class="hljs-number">3.1416</span></code></pre><p>Dans cet exemple, <code>MyInt</code> se voit assigner la mêmevaleur (3) dans les modes interprété et compilé, étant donné que ladirective du compilateur est interprétée <em>avant</em> ladéclaration d'affectation.</p><p>L'interpréteur 4D utilise des directives de compilateur pourtyper les variables. Lorsque l'interpréteur rencontre une directivede compilateur, il type la variable en fonction de la directive. Siune déclaration ultérieure tente d'affecter une valeur incorrecte(ex : affecter une valeur alphanumérique à une variable numérique),l'affectation n'aura pas lieu et générera une erreur.</p><p>L'ordre d'apparition des deux déclarations importe peu aucompilateur, car il scanne d'abord le projet dans son intégralitépour les directives du compilateur. En revanche, l'interpréteurn'est pas systématique. Il interprète les déclarations dans leurordre d'exécution. Cet ordre peut évidemment changer d'une sessionà l'autre, en fonction de ce que fait l'utilisateur. C'est pourquoiil est important de concevoir votre projet afin que vos directivesde compilateur s'exécutent avant n'importe quelle déclarationcontenant des variables déclarées.</p><h2><a aria-hidden="true" class="anchor" id="interpreted-compiled.html_utiliser-des-pointeurs-pour-%C3%A9viter-les-retypages"></a><a aria-hidden="true" class="hash-link" href="#interpreted-compiled.html_utiliser-des-pointeurs-pour-%25C3%25A9viter-les-retypages"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utiliser des pointeurs pour éviter les retypages</h2><p>Il n’est pas possible de retyper une variable. Il est, enrevanche, tout à fait possible de faire pointer un pointeursuccessivement sur des variables de type différent. Par exemple, lecode suivant s'applique aussi bien dans le mode interprété que dansle mode compilé :</p><pre><code class="hljs css language-4d"><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$p</span>)<span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$name</span>)<span class="hljs-function">C_LONGINT</span>(<span class="hljs-variable">$age</span>)<span class="hljs-variable">$name</span>:=<span class="hljs-string">"Smith"</span><span class="hljs-variable">$age</span>:=<span class="hljs-number">50</span><span class="hljs-variable">$p</span>:=-&gt;<span class="hljs-variable">$name </span><span class="hljs-comment">//texte cible pour le pointeur</span><span class="hljs-variable">$p</span>-&gt;:=<span class="hljs-string">"Wesson"</span> <span class="hljs-comment">//assigne une valeur texte</span><span class="hljs-variable">$p</span>:=-&gt;<span class="hljs-variable">$age  </span><span class="hljs-comment">// nouvelle cible de type différent pour le pointeur</span><span class="hljs-variable">$p</span>-&gt;:=<span class="hljs-number">55</span> <span class="hljs-comment">//assigne une valeur numérique</span></code></pre><p>Imaginez une fonction qui retourne la longueur (nombre decaractères) de valeurs de tout type.</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">// Calc_Length (combien de caractères)</span>  <span class="hljs-comment">// $1 = pointeur vers un type de variable flexible, numérique, text, heure, booléen</span><span class="hljs-function">C_POINTER</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function">C_TEXT</span>(<span class="hljs-variable">$result</span>)  <span class="hljs-function">C_LONGINT</span>(<span class="hljs-variable">$0</span>)<span class="hljs-variable">$result</span>:=<span class="hljs-function">String</span>(<span class="hljs-variable">$1</span>-&gt;)<span class="hljs-variable">$0</span>:=<span class="hljs-function">Length</span>(<span class="hljs-variable">$result</span>)</code></pre><p>La méthode peut alors être appelée :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$var1</span>:=<span class="hljs-string">"my text"</span><span class="hljs-variable">$var2</span>:=<span class="hljs-number">5.3</span><span class="hljs-variable">$var3</span>:=<span class="hljs-literal">?10:02:24?</span><span class="hljs-variable">$var4</span>:=<span class="hljs-literal">True</span><span class="hljs-variable">$vLength</span>:=<span class="hljs-function">Calc_Length</span>(-&gt;<span class="hljs-variable">$var1</span>)+<span class="hljs-function">Calc_Length</span>(-&gt;<span class="hljs-variable">$var2</span>)+<span class="hljs-function">Calc_Length</span>(-&gt;<span class="hljs-variable">$var3</span>)+<span class="hljs-function">Calc_Length</span>(-&gt;<span class="hljs-variable">$var4</span>)<span class="hljs-function">ALERT</span>(<span class="hljs-string">"Total length: "</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$vLength</span>))</code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#error-handling.html"><span class="arrow-prev">←</span><span>Gestion des erreurs</span></a><a class="docs-next button"href="#components.html"><span>Composants</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#interpreted-compiled.html_diff%25C3%25A9rences-entre-le-code-interpr%25C3%25A9t%25C3%25A9-et-le-code-compil%25C3%25A9">Différences entre le code interprété et le code compilé</a></li><li><a href="#interpreted-compiled.html_utiliser-les-directives-du-compilateur-avec-linterpr%25C3%25A9teur">Utiliser les directives du compilateur avec l'interpréteur</a></li><li><a href="#interpreted-compiled.html_utiliser-des-pointeurs-pour-%25C3%25A9viter-les-retypages">Utiliser des pointeurs pour éviter les retypages</a></li></ul></nav></div></div></body></html>