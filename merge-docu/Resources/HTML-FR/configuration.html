<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Configuration du serveur · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="À l'aide de requêtes HTTP standard, le serveur 4D REST permet aux applications externes d'accéder directement aux données de votre application, c'est-à-dire de récupérer des informations sur les dataclass de votre projet, de manipuler des données, de vous connecter à votre application Web et bien plus encore."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Configuration du serveur · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="À l'aide de requêtes HTTP standard, le serveur 4D REST permet aux applications externes d'accéder directement aux données de votre application, c'est-à-dire de récupérer des informations sur les dataclass de votre projet, de manipuler des données, de vous connecter à votre application Web et bien plus encore."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#configuration.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Configuration duserveur<a aria-hidden="true" class="anchor" id="configuration.html"></a></h1></header><article><div><p><span>À l'aide de requêtes HTTP standard, le serveur 4D RESTpermet aux applications externes d'accéder directement aux donnéesde votre application, c'est-à-dire de récupérer des informationssur les dataclass de votre projet, de manipuler des données, devous connecter à votre application Web et bien plusencore.</span></p><p><span>Pour commencer à utiliser les fonctionnalités REST, vousdevez démarrer et configurer le serveur 4D REST.</span></p><blockquote><ul><li><span>Sur 4D Server, l'ouverture d'une session REST nécessiteune licence client 4D disponible.<br /></span></li><li><span>On 4D single-user, you can open up to three REST sessionsfor testing purposes.</span></li><li><span>You need to manage the <a href="#authUsers.html">session</a> for your requestingapplication.</span></li></ul></blockquote><h2><span><a aria-hidden="true" class="anchor" id="configuration.html_d%C3%A9marrage-du-serveur-rest"></a><a aria-hidden="true"class="hash-link" href="#configuration.html_d%25C3%25A9marrage-du-serveur-rest"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Démarrage du serveur REST</span></h2><p><span>Pour des raisons de sécurité, par défaut, 4D ne répond pasaux requêtes REST. Si vous souhaitez démarrer le serveur REST,cochez l'option <strong>Exposer en tant que serveur REST</strong>dans la page <strong>Web</strong> &gt; <strong>WebFeatures</strong> des paramètres de la structure afin que lesrequêtes REST soient traitées.</span></p><p><span><img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/REST/Settings.png" /></span></p><blockquote><p><span>Les services REST utilisent le serveur HTTP 4D; vous devezdonc vous assurer que le serveur web 4D est lancé.</span></p></blockquote><p><span>Le message d'avertissement "Attention, vérifiez lesprivilèges d'accès" s'affiche lorsque vous cochez cette option,pour attirer votre attention sur le fait que lorsque les servicesREST sont activés, l'accès par défaut aux objets de base de donnéesest gratuit tant que les accès REST n'ont pas étéconfigurés.</span></p><blockquote><p><span>You must restart the 4D application for your changes totake effect.</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="configuration.html_configuration-de-lacc%C3%A8s-rest"></a><a aria-hidden="true"class="hash-link" href="#configuration.html_configuration-de-lacc%25C3%25A8s-rest"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Configuration de l'accès REST</span></h2><p><span>Par défaut, les accès REST sont ouverts à tous lesutilisateurs, ce qui n'est évidemment pas recommandé pour desraisons de sécurité et de contrôle de l'utilisation des licencesclientes.</span></p><p><span>Vous pouvez configurer les accès REST de l'une desmanières suivantes :</span></p><ul><li><span>en attribuant un groupe d'utilisateurs <strong>enlecture/écriture</strong> aux services REST dans la page"<strong>Web</strong> &gt; <strong>Web Features</strong>" desparamètres de structure ;</span></li><li><span>saisir d'une méthode base <code>On RESTAuthentication</code>pour intercepter et gérer chaque demande RESTinitiale.</span></li></ul><blockquote><p><span>Vous ne pouvez pas utiliser les deux fonctionnalitéssimultanément. Une fois qu'une méthode base <code>On RESTAuthentication</code> a été définie, 4D lui donne entièrement lecontrôle des requêtes REST : tout paramètre effectué à l'aide dumenu "Lecture/Ecriture" de la page de <strong>Web</strong> &gt;<strong>Fonctionnalités Web</strong> des paramètres de la structureest ignoré.</span></p></blockquote><h3><span><a aria-hidden="true" class="anchor" id="configuration.html_utilisation-des-param%C3%A8tres-de-la-structure"></a><a aria-hidden="true" class="hash-link" href="#configuration.html_utilisation-des-param%25C3%25A8tres-de-la-structure"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utilisation des Paramètres de la Structure</span></h3><p><span>Le menu <strong>Lecture/Écriture</strong> de la page"<strong>Web</strong> &gt; <strong>Web Features</strong>" desparamètres de la structure indique un groupe d'utilisateurs 4Dautorisé à établir le lien vers l'application 4D à l'aide desrequêtes REST.</span></p><p><span>Par défaut, le menu affiche<strong>&lt;Anyone&gt;</strong>, ce qui signifie que les accès RESTsont ouverts à tous les utilisateurs. Une fois que vous avezspécifié un groupe, seul un compte utilisateur 4D appartenant à cegroupe peut être utilisé pour <a href="#authUsers.html">accéder à4D via une requête REST</a>. Si un compte utilisé n'appartient pasà ce groupe, 4D renvoie une erreur d'authentification àl'expéditeur de la requête.</span></p><blockquote><p><span>Pour que ce paramètre prenne effet, la méthode base<code>On REST Authentication</code> ne doit pas être définie. S'ilexiste, 4D ignore les paramètres d'accès définis dans lespropriétés de la structure.</span></p></blockquote><h3><span><a aria-hidden="true" class="anchor" id="configuration.html_m%C3%A9thode-base-on-rest-authentication"></a><a aria-hidden="true"class="hash-link" href="#configuration.html_m%25C3%25A9thode-base-on-rest-authentication"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Méthode base On REST Authentication</span></h3><p><span>La méthode base <code>On REST Authentication</code> vouspermet de contrôler de manière personnalisée l’ouverture dessessions REST sur 4D. Cette méthode base est automatiquementappelée lorsqu'une nouvelle session est ouverte à l'aide d'unerequête REST. Lorsqu'une <a href="#authUsers.html">requêted’ouverture de session REST</a> est reçue, les identifiants deconnexion sont fournis dans l’en-tête de la requête. La méthodebase <code>On REST Authentication</code> est appelée afin de vouspermettre d’évaluer ces identifiants. Pour obtenir plusd'informations, veuillez vous reporter à la <a href="https://doc.4d.com/4Dv18/4D/18/On-REST-Authentication-database-method.301-4505004.fe.html">documentation</a> de la méthode base <code>On RESTAuthentication</code>. Pour obtenir plus d'informations, veuillezvous reporter à la <a href="https://doc.4d.com/4Dv18/4D/18/On-REST-Authentication-database-method.301-4505004.fe.html">documentation</a> de la méthode base <code>On RESTAuthentication</code>.</span></p><h2><span><a aria-hidden="true" class="anchor" id="configuration.html_exposer-les-tables-et-les-champs"></a><a aria-hidden="true"class="hash-link" href="#configuration.html_exposer-les-tables-et-les-champs"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exposer les tables et les champs</span></h2><p><span>Une fois les services REST sont activés dans l'application4D, une session REST peut par défaut accéder à toutes les tables età tous les champs de la base de données 4D via l'<a href="#configuration.html_datastore">interface du datastore</a>. Ainsi,elle peut utiliser leurs données. Par exemple, si votre base dedonnées contient une table [Employee], il est possible d'écrire:</span></p><pre><span><code class="hljs"><span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/127.0.0.1:8044/rest</span><span class="hljs-regexp">/Employee/</span>?<span class="hljs-variable">$filter</span>=<span class="hljs-string">"salary&gt;10000"</span></code></span></pre><p>Cette requête retournera tous les employés dont le champ"salary" est supérieur à 10 000.</p><blockquote><p>Les tables et/ou champs 4D dont l'attribut est "invisible" sontégalement exposés par défaut dans REST.</p></blockquote><p>Si vous souhaitez personnaliser les objets du datastoreaccessibles via REST, vous devez désactiver l'exposition de chaquetable et/ou champ que vous souhaitez masquer. Lorsqu'une requêteREST tente d'accéder à une ressource non autorisée, 4D retourne uneerreur.</p><h3><a aria-hidden="true" class="anchor" id="configuration.html_exposer-des-tables"></a><a aria-hidden="true"class="hash-link" href="#configuration.html_exposer-des-tables"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exposer des tables</h3><p>Par défaut, toutes les tables sont exposées dans REST.</p><p>Pour des raisons de sécurité, vous pouvez choisir d'exposeruniquement certaines tables du datastore aux appels REST. Parexemple, si vous avez créé une table [Users] stockant les nomsd'utilisateur et les mots de passe, il serait préférable de ne pasl'exposer.</p><p>Pour supprimer l'exposition REST d'une table :</p><ol><li><p>Affichez l'Inspecteur de table dans l'Editeur de structure etsélectionnez la table à modifier.</p></li><li><p>Décochez l'option <strong>Exposer en tant que ressourceREST</strong> : <img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/REST/table.png" />Procédez ainsi pour chaque table dont l'exposition doit êtremodifiée.</p></li></ol><h3><a aria-hidden="true" class="anchor" id="configuration.html_exposer-des-champs"></a><a aria-hidden="true"class="hash-link" href="#configuration.html_exposer-des-champs"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exposer des champs</h3><p>Par défaut, touts les champs d'une base 4D sont exposés dansREST.</p><p>Vous pouvez choisir d'exposer certains champs de vos tables àREST. Par exemple, si vous ne souhaitez pas exposer le champ[Employees]Salary.</p><p>Pour supprimer l'exposition REST d'un champ :</p><ol><li><p>Affichez l'Inspecteur de champ dans l'Editeur de structure etsélectionnez le champ à modifier.</p></li><li><p>Décochez la case <strong>Exposer en tant que ressourceREST</strong> pour le champ. <img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/REST/field.png" />Répétez cette opération pour chaque champ dont l'exposition doitêtre modifiée.</p></li></ol><blockquote><p>Pour qu'un champ soit accessible via REST, la table parente doitl'être également. Si la table parente n'est pas exposée, aucun deses champs ne le sera, quel que soit leur statut.</p></blockquote></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#gettingStarted.html"><span class="arrow-prev">←</span><span>Prise en main</span></a><a class="docs-next button" href="#authUsers.html"><span>Sessions et utilisateurs</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#configuration.html_d%25C3%25A9marrage-du-serveur-rest">Démarragedu serveur REST</a></li><li><a href="#configuration.html_configuration-de-lacc%25C3%25A8s-rest">Configurationde l'accès REST</a><ul class="toc-headings"><li><a href="#configuration.html_utilisation-des-param%25C3%25A8tres-de-la-structure">Utilisation des Paramètres de la Structure</a></li><li><a href="#configuration.html_m%25C3%25A9thode-base-on-rest-authentication">Méthodebase On REST Authentication</a></li></ul></li><li><a href="#configuration.html_exposer-les-tables-et-les-champs">Exposer lestables et les champs</a><ul class="toc-headings"><li><a href="#configuration.html_exposer-des-tables">Exposer destables</a></li><li><a href="#configuration.html_exposer-des-champs">Exposer deschamps</a></li></ul></li></ul></nav></div></div></body></html>