<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Balises de transformation · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="4D fournit un ensemble de balises de transformation qui vous permettent d'insérer des références à des variables ou des expressions 4D, ou d'effectuer différents types de traitement dans un texte source, appelé &quot;template&quot;. Ces balises sont interprétées lors de l'exécution du texte source et génèrent un texte de sortie."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Balises de transformation · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="4D fournit un ensemble de balises de transformation qui vous permettent d'insérer des références à des variables ou des expressions 4D, ou d'effectuer différents types de traitement dans un texte source, appelé &quot;template&quot;. Ces balises sont interprétées lors de l'exécution du texte source et génèrent un texte de sortie."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#tags.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Balises detransformation<a aria-hidden="true" class="anchor" id="tags.html"></a></h1></header><article><div><p><span>4D fournit un ensemble de balises de transformation quivous permettent d'insérer des références à des variables ou desexpressions 4D, ou d'effectuer différents types de traitement dansun texte source, appelé "template". Ces balises sont interprétéeslors de l'exécution du texte source et génèrent un texte desortie.</span></p><p><span>Ce principe est notamment utilisé par le serveur Web 4Dpour créer <a href="#templates.html">des pages de templateWeb</a>.</span></p><p><span>Ces balises sont généralement insérées sous forme decommentaires de type HTML (<code>&lt;!--#Tag Contents--&gt;</code>)mais <a href="#tags.html_alternative-syntax-for-4dtext-4dhtml-4deval">unesyntaxe alternative conforme à la norme xml</a> est disponible pourcertaines d'entre elles.</span></p><p><span>Il est possible de combiner plusieurs types de balises.Par exemple, la structure HTML suivante est tout à faitenvisageable :</span></p><pre><span><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">HTML</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BODY</span>&gt;</span><span class="hljs-comment">&lt;!--#4DSCRIPT/PRE_PROCESS--&gt;</span>   (Method call)<span class="hljs-comment">&lt;!--#4DIF (myvar=1)--&gt;</span>   (If condition)   <span class="hljs-comment">&lt;!--#4DINCLUDE banner1.html--&gt;</span>   (Subpage insertion)<span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span>   (End if)<span class="hljs-comment">&lt;!--#4DIF (mtvar=2)--&gt;</span>   <span class="hljs-comment">&lt;!--#4DINCLUDE banner2.html--&gt;</span><span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span><span class="hljs-comment">&lt;!--#4DLOOP [TABLE]--&gt;</span>   (Loop on the current selection)<span class="hljs-comment">&lt;!--#4DIF ([TABLE]ValNum&gt;10)--&gt;</span>   (If [TABLE]ValNum&gt;10)   <span class="hljs-comment">&lt;!--#4DINCLUDE subpage.html--&gt;</span>   (Subpage insertion)<span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>   (Else)   <span class="hljs-tag">&lt;<span class="hljs-name">B</span>&gt;</span>Value: <span class="hljs-comment">&lt;!--#4DTEXT [TABLE]ValNum--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">B</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span>   (Field display)<span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span><span class="hljs-comment">&lt;!--#4DENDLOOP--&gt;</span>   ](End for)<span class="hljs-tag">&lt;/<span class="hljs-name">BODY</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">HTML</span>&gt;</span></code></span></pre><h2><a aria-hidden="true" class="anchor" id="tags.html_principes-dutilisation-des-balises"></a><a aria-hidden="true" class="hash-link" href="#tags.html_principes-dutilisation-des-balises"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Principes d'utilisation des balises</h2><h3><a aria-hidden="true" class="anchor" id="tags.html_parsing"></a><a aria-hidden="true" class="hash-link"href="#tags.html_parsing"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Parsing</h3><p>L'analyse ou le parsing du contenu d'une source de<em>template</em> se fait dans deux contextes :</p><ul><li><p>En utilisant la commande <code>PROCESS 4D TAGS</code> ; cettecommande accepte un <em>template</em>en entrée, ainsi que desparamètres optionnels et retourne un texte résultant dutraitement.</p></li><li><p>En utilisant le serveur HTTP intégré de 4D : <a href="#templates.html">pages de templates</a> envoyées au moyen descommandes <code>WEB SEND FILE</code> (.htm, .html, .shtm, .shtml),<code>WEB SEND BLOB</code> (text/html type BLOB), <code>WEB SENDTEXT</code> , ou appelées au moyen d'une URL. Dans ce dernier cas,à des fins d'optimisation, les pages suffixées par ".htm" et".html" ne sont PAS parsées. In this last case, for reasons ofoptimization, pages that are suffixed with “.htm” and “.html” areNOT parsed.</p></li></ul><h3><a aria-hidden="true" class="anchor" id="tags.html_traitement-r%C3%A9cursif"></a><a aria-hidden="true"class="hash-link" href="#tags.html_traitement-r%25C3%25A9cursif"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Traitement récursif</h3><p>Les balises 4D sont interprétées de manière récursive : 4D tentetoujours de réinterpréter le résultat d'une transformation et, siune nouvelle transformation a eu lieu, une interprétationsupplémentaire est effectuée, et ainsi de suite jusqu'à ce que leproduit obtenu ne nécessite plus aucune transformation. Parexemple, étant donné l'énoncé suivant :</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DHTML [Mail]Letter_type--&gt;</span></code></pre><p>Si le champ de texte <code>[Mail]Letter_type</code> contientlui-même une balise, telle que<code>&lt;!--#4DSCRIPT/m_Gender--&gt;</code>, cette balise seraévaluée récursivement après l'interprétation de la balise4DHTML.</p><p>Ce principe puissant répond à la plupart des besoins liés à latransformation des textes. Notez toutefois que, dans certains cas,cela peut également permettre l'insertion d'un code malveillantdans le contexte web, <a href="#tags.html_prevention-of-malicious-code-insertion">ce qui peutêtre évité</a>.</p><h3><a aria-hidden="true" class="anchor" id="tags.html_identifiants-avec-tokens"></a><a aria-hidden="true"class="hash-link" href="#tags.html_identifiants-avec-tokens"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Identifiants avec tokens</h3><p>Pour garantir l'évaluation correcte des expressions traitées viales balises, quel que soit le langage ou la version de 4D, il estrecommandé d'utiliser la syntaxe tokenisée pour les éléments dontle nom peut varier selon les versions (commandes, tables, champs,constantes). Par exemple, pour insérer la commande <code>Currenttime</code>, entrez <code>Current time:C178</code>.</p><h3><a aria-hidden="true" class="anchor" id="tags.html_utilisation-du--comme-s%C3%A9parateur-d%C3%A9cimal"></a><a aria-hidden="true"class="hash-link" href="#tags.html_utilisation-du--comme-s%25C3%25A9parateur-d%25C3%25A9cimal"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Utilisation du "." comme séparateur décimal</h3><p>4D utilise toujours le caractère point (.) comme séparateurdécimal lorsqu'il évalue une expression numérique à l'aide d'unebalise <code>4DTEXT</code>, <code>4DHTML</code>, et<code>4DEVAL</code>. Les paramètres régionaux sont ignorés. Cettefonctionnalité facilite la maintenance du code et la compatibilitéentre les langues et les versions de 4D.</p><h2><a aria-hidden="true" class="anchor" id="tags.html_4dbase"></a><a aria-hidden="true" class="hash-link"href="#tags.html_4dbase"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DBASE</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4dbase-folderpath--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4dbase-folderpath--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DBASE folderPath--&gt;</code></h4><p>La balise <code>&lt;!--#4DBASE --&gt;</code> désigne lerépertoire de travail à utiliser par la balise<code>&lt;!--#4DINCLUDE--&gt;</code>.</p><p>Lorsqu'elle est appelée dans une page Web, la balise<code>&lt;!--#4DBASE --&gt;</code> modifie tous les appels<code>&lt;!--#4DINCLUDE--&gt;</code> ultérieurs sur cette page,jusqu'au prochain <code>&lt;!--#4DBASE --&gt;, le cas échéant. Sile dossier</code><!--#4DBASE --> est modifié à partir d'un fichierinclus, il récupère sa valeur originale dans le fichier parent.</p><p>Le paramètre <em>folderPath</em> doit contenir un nom de cheminrelatif à la page actuelle et il doit se terminer par une barreoblique (/). Le dossier désigné doit être situé à l'intérieur dudossier Web.</p><p>Passez le mot-clé "WEBFOLDER" pour rétablir le chemin par défaut(relatif à la page).</p><p>Le code suivant, qui doit spécifier un chemin relatif pourchaque appel :</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DINCLUDE subpage.html--&gt;</span> <span class="hljs-comment">&lt;!--#4DINCLUDE folder/subpage1.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE folder/subpage2.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE folder/subpage3.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE ../folder/subpage.html--&gt;</span></code></pre><p>...équivaut à :</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DINCLUDE subpage.html--&gt;</span> <span class="hljs-comment">&lt;!--#4DBASE folder/--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE subpage1.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE subpage2.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE subpage3.html--&gt;</span><span class="hljs-comment">&lt;!--#4DBASE ../folder/--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE subpage.html--&gt;</span><span class="hljs-comment">&lt;!--#4DBASE WEBFOLDER--&gt;</span></code></pre><p>Par exemple, pour définir un répertoire pour la page d'accueil:</p><pre><code class="hljs css language-html">/* Index.html */<span class="hljs-comment">&lt;!--#4DIF LangFR=True--&gt;</span>    <span class="hljs-comment">&lt;!--#4DBASE FR/--&gt;</span><span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>    <span class="hljs-comment">&lt;!--#4DBASE US/--&gt;</span><span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE head.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE body.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE footer.html--&gt;</span></code></pre><p>Dans le fichier "head.html", le dossier courant est modifié par<code>&lt;!--#4DBASE --&gt;</code>, sans que cela ne change savaleur dans "Index.html" :</p><pre><code class="hljs css language-html">/* Head.htm *//* the working directory here is relative to the included file (FR/ or US/) */<span class="hljs-comment">&lt;!--#4DBASE Styles/--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE main.css--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE product.css--&gt;</span><span class="hljs-comment">&lt;!--#4DBASE Scripts/--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE main.js--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE product.js--&gt;</span></code></pre><h2><a aria-hidden="true" class="anchor" id="tags.html_4dcode"></a><a aria-hidden="true" class="hash-link"href="#tags.html_4dcode"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DCODE</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4dcode-codelines--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4dcode-codelines--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DCODE codeLines--&gt;</code></h4><p>La balise <code>4DCODE</code> permet d'insérer un bloc de code4D de plusieurs lignes dans un template.</p><p>Lorsqu'une séquence <code>&lt;!--#4DCODE</code> est détectée etqu'elle est suivie d'un espace, d'un caractère CR ou LF, 4Dinterprète toutes les lignes de code jusqu'à la séquence<code>--&gt;</code> suivante. Le bloc de code lui-même peutcontenir des retours chariot, des sauts de ligne ou les deux ; ilsera interprété séquentiellement par 4D.</p><p>Par exemple, vous pouvez écrire dans un template :</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DCODE//PARAMETERS initializationC_OBJECT:C1216($graphParameters)OB SET:C1220($graphParameters;"graphType";1)$graphType:=1//...your code hereIf(OB Is defined:C1231($graphParameters;"graphType"))    $graphType:=OB GET:C1224($graphParameters;"graphType")    If($graphType=7)        $nbSeries:=1        If($nbValues&gt;8)            DELETE FROM ARRAY:C228 ($yValuesArrPtr{1}-&gt;;9;100000)            $nbValues:=8        End if    End ifEnd if--&gt;</span></code></pre><p>Voici les caractéristiques de la balise 4DCODE :</p><ul><li>La commande <code>TRACE</code> est prise en charge et active ledébogueur 4D, vous permettant ainsi de déboguer le code de votremodèle.</li><li>Toute erreur affichera le dialogue d'erreur standard qui permetà l'utilisateur d'arrêter l'exécution du code ou d'entrer en modedébogage.</li><li>Le texte entre <code>&lt;!--#4DCODE</code> et<code>--&gt;</code> est divisé en lignes acceptant toute conventionde fin de ligne (cr, lf ou crlf).</li><li>Le texte est tokenisé dans le contexte de la base de donnéesqui a appelé <code>PROCESS 4D TAGS</code>. Ceci est important pourla reconnaissance des méthodes de projet par exemple. La propriétéde la méthode <a href="#allowProject.html">Available through tagset 4D URLs (4DACTION ...)</a> n'est pas prise en compte.</li><li>Même si le texte utilise toujours l'anglais-US, il estrecommandé d'utiliser la syntaxe token (:Cxxx) pour les noms decommandes et de constantes afin de se prémunir contre d'éventuelsproblèmes dus à des commandes ou des constantes renommées d'uneversion de 4D à une autre.</li></ul><blockquote><p>Le fait que les balises 4DCODE puissent appeler n'importe quellecommande du langage 4D ou méthode du projet pourrait être considérécomme un problème de sécurité, en particulier lorsque la base dedonnées est disponible via HTTP. Toutefois, étant donné qu'elleexécute du code côté serveur appelé à partir de vos propresfichiers de modèle, la balise elle-même ne représente pas unproblème de sécurité. Dans ce contexte, comme pour tout serveurWeb, la sécurité est principalement gérée au niveau des accèsdistants aux fichiers du serveur.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="tags.html_4deach-et-4dendeach"></a><a aria-hidden="true" class="hash-link" href="#tags.html_4deach-et-4dendeach"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DEACH et 4DENDEACH</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4deach-variable-in-expression-----4dendeach--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4deach-variable-in-expression-----4dendeach--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DEACH variable inexpression--&gt;</code> <code>&lt;!--#4DENDEACH--&gt;</code></h4><p>Le commentaire <code>&lt;!--#4DEACH--&gt;</code> permet d'itérerun élément spécifié sur toutes les valeurs del'<em>expression</em>. L'élément est défini comme une<em>variable</em> dont le type dépend du typed'<em>expression</em>.</p><p>Le commentaire <code>&lt;!--#4DEACH--&gt;</code> peut itérer surtrois types d'expression :</p><ul><li><a href="#tags.html_--4deach-item-in-collection--">collections</a> : boucleà travers chaque élément de la collection,</li><li><a href="#tags.html_--4deach-entity-in-entityselection--">entityselections</a> : boucle à travers chaque entity,</li><li><a href="#tags.html_--4deach-property-in-object--">objets</a> :boucle à travers chaque propriété d'objet.</li></ul><p>Le nombre d'itérations est évalué au démarrage et ne changerapas pendant le traitement. L'ajout ou la suppression d'élémentspendant la boucle est donc déconseillé car il pourra en résulterune redondance ou un manque d'itérations.</p><h3><a aria-hidden="true" class="anchor" id="tags.html_--4deach-item-in-collection--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_--4deach-item-in-collection--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4DEACH item in collection--&gt;</code></h3><p>Cette syntaxe permet d'effectuer une itération sur chaque<em>élément</em> de la <em>collection</em>. La portion de codesituée entre <code>&lt;!--#4DEACH --&gt;</code> et<code>&lt;!--#4DENDEACH--&gt;</code> est répétée pour chaqueélément de la collection.</p><p>Le paramètre de l'élément est une variable du même type que leséléments de la collection.</p><p>La collection ne doit contenir que des <strong>éléments de mêmetype</strong>, sinon une erreur est retournée dès que la variablede l'élément se voit attribuer le premier type de valeur nonconcordant.</p><p>Le nombre de boucles est basé sur le nombre d'éléments de lacollection. À chaque itération, la variable de l'élément correspondautomatiquement à l'élément correspondant de la collection. Vousdevez tenir compte des points suivants :</p><ul><li>The <em>item</em> variable gets the same type as the firstcollection element. Si un seul élément de la collection n'est pasdu même type que la variable, une erreur est générée et la boucles'arrête.</li><li>If the <em>item</em> variable is of the object type orcollection type (i.e. Si un seul élément de la collection n'est pasdu même type que la variable, une erreur est générée et la boucles'arrête.</li><li>Si la collection contient des éléments de valeur Null, uneerreur sera générée si le type de la variable ne prend pas encharge la valeur <em>Null</em> (comme par exemple les variablesentier long).</li></ul><h4><a aria-hidden="true" class="anchor" id="tags.html_exemple-avec-une-collection-de-valeurs-scalaires"></a><a aria-hidden="true"class="hash-link" href="#tags.html_exemple-avec-une-collection-de-valeurs-scalaires"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple avec une collection de valeurs scalaires</h4><p><em>getNames</em> retourne une collection de chaînes decaractères. La méthode a été déclarée comme "<a href="#allowProject.html">disponible via les balises 4D et lesURL</a>".</p><pre><code class="hljs css language-html">    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table"</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>          <span class="hljs-comment">&lt;!--#4DEACH $name in getNames--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT $name--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>          <span class="hljs-comment">&lt;!--#4DENDEACH--&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></code></pre><h4><a aria-hidden="true" class="anchor" id="tags.html_exemple-avec-une-collection-dobjets"></a><a aria-hidden="true" class="hash-link" href="#tags.html_exemple-avec-une-collection-dobjets"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple avec une collection d'objets</h4><p><em>getSalesPersons</em> retourne une collection d'objets.</p><pre><code class="hljs css language-html">    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table"</span>&gt;</span>             <span class="hljs-comment">&lt;!--#4DCODE             $salePersons:=getSalesPersons          --&gt;</span>                 <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>ID<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Firstname<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Lastname<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>          <span class="hljs-comment">&lt;!--#4DEACH $salesPerson in $salePersons--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT $salesPerson.ID--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT $salesPerson.firstname--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT $salesPerson.lastname--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>          <span class="hljs-comment">&lt;!--#4DENDEACH--&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></code></pre><h3><a aria-hidden="true" class="anchor" id="tags.html_--4deach-entity-in-entityselection--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_--4deach-entity-in-entityselection--"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4DEACH entity inentitySelection--&gt;</code></h3><p>Cette syntaxe permet d'effectuer une itération sur chaque<em>entity</em> de l'<em>entitySelection</em>. La portion de codesituée entre <code>&lt;!--#4DEACH --&gt;</code> et<code>&lt;!--#4DENDEACH--&gt;</code> est répétée pour chaque entityde l'entity selection.</p><p>Le paramètre <em>entity</em> est une variable objet de la classeentity selection.</p><p>Le nombre de boucles est basé sur le nombre d'entities présentesdans l'entity selection. À chaque itération, la variable de l'objet<em>entity</em> correspond automatiquement à l'entity de l'entityselection.</p><h4><a aria-hidden="true" class="anchor" id="tags.html_exemple-avec-un-tableau-html"></a><a aria-hidden="true"class="hash-link" href="#tags.html_exemple-avec-un-tableau-html"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple avec un tableau html</h4><pre><code class="hljs css language-html">    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table"</span>&gt;</span>             <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>ID<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Total purchase<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>          <span class="hljs-comment">&lt;!--#4DEACH $customer in ds.Customers.all()--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT $customer.ID--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT $customer.name--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">center</span>&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT String($customer.totalPurchase;"$###,##0")--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">center</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>          <span class="hljs-comment">&lt;!--#4DENDEACH--&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></code></pre><h4><a aria-hidden="true" class="anchor" id="tags.html_exemple-avec-des-balises-4d-process"></a><a aria-hidden="true" class="hash-link" href="#tags.html_exemple-avec-des-balises-4d-process"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple avec des <code>BALISES 4D PROCESS</code></h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> customers : cs.CustomersSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$input</span>; <span class="hljs-variable">$output </span>: Textcustomers:=ds.Customers.<span class="hljs-function">all</span>()<span class="hljs-variable">$input</span>:=<span class="hljs-string">"&lt;!--#4DEACH $cust in customers--&gt;"</span> <span class="hljs-variable">$input</span>:=<span class="hljs-variable">$input</span>+<span class="hljs-string">"&lt;!--#4DTEXT $cust.name --&gt;"</span>+<span class="hljs-function">Char</span>(Carriage return)<span class="hljs-variable">$input</span>:=<span class="hljs-variable">$input</span>+<span class="hljs-string">"&lt;!--#4DENDEACH--&gt;"</span> <span class="hljs-function">PROCESS 4D TAGS</span>(<span class="hljs-variable">$input</span>; <span class="hljs-variable">$output</span>)<span class="hljs-function">TEXT TO DOCUMENT</span>(<span class="hljs-string">"customers.txt"</span>; <span class="hljs-variable">$output</span>)</code></pre><h3><a aria-hidden="true" class="anchor" id="tags.html_--4deach-property-in-object--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_--4deach-property-in-object--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4DEACH property in object--&gt;</code></h3><p>This syntax iterates on each <em>property</em> of the<em>object</em>. The code portion located between<code>&lt;!--#4DEACH --&gt;</code> and<code>&lt;!--#4DENDEACH--&gt;</code> is repeated for each propertyof the object.</p><p>The <em>property</em> parameter is a text variable automaticallyfilled with the name of the currently processed property.</p><p>The properties of the object are processed according to theircreation order. Pendant la boucle, il est possible d'ajouter ou desupprimer des propriétés dans l'objet, sans pour autant modifier lenombre de boucles qui reste basé sur le nombre de propriétésinitial de l'objet.</p><h4><a aria-hidden="true" class="anchor" id="tags.html_example-with-the-properties-of-an-object"></a><a aria-hidden="true"class="hash-link" href="#tags.html_example-with-the-properties-of-an-object"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Example with the properties of an object</h4><p><em>getGamers</em> is a project method that returns an objectlike ("Mary"; 10; "Ann"; 20; "John"; 40) to figure gamerscores.</p><pre><code class="hljs css language-html">    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table"</span>&gt;</span>              <span class="hljs-comment">&lt;!--#4DCODE           $gamers:=getGamers          --&gt;</span>                  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Gamers<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Scores<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>          <span class="hljs-comment">&lt;!--#4DEACH $key in $gamers--&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> &gt;</span><span class="hljs-comment">&lt;!--#4DTEXT $key--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> &gt;</span><span class="hljs-comment">&lt;!--#4DTEXT $gamers[$key]--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>          <span class="hljs-comment">&lt;!--#4DENDEACH--&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></code></pre><h2><a aria-hidden="true" class="anchor" id="tags.html_4deval"></a><a aria-hidden="true" class="hash-link"href="#tags.html_4deval"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DEVAL</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4deval-expression--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4deval-expression--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DEVAL expression--&gt;</code></h4><h4><a aria-hidden="true" class="anchor" id="tags.html_alternative-syntax-4devalexpression"></a><a aria-hidden="true" class="hash-link" href="#tags.html_alternative-syntax-4devalexpression"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Alternative syntax: <code>$4DEVAL(expression)</code></h4><p>The <code>4DEVAL</code> tag allows you to assess a 4D variableor expression. Like the <a href="#tags.html_4dhtml"><code>4DHTML</code></a> tag,<code>4DEVAL</code> does not escape HTML characters when returningtext. However, unlike <code>4DHTML</code> or <a href="#tags.html_4dtext"><code>4DTEXT</code></a>, <code>4DEVAL</code>allows you to execute any valid 4D statement, including assignmentsand expressions that do not return any value.</p><p>For example, you can execute:</p><pre><code class="hljs"> $input:="<span class="hljs-comment">&lt;!--#4DEVAL a:=42--&gt;</span>" //assignment $input:=$input+"<span class="hljs-comment">&lt;!--#4DEVAL a+1--&gt;</span>" //calculation PROCESS 4D TAGS($input;$output)  //$output = "43"</code></pre><p>In case of an error during interpretation, the text insertedwill be in the form: <code>&lt;!--#4DEVAL expr--&gt;: ## error #error code</code>.</p><blockquote><p>For security reasons, it is recommended to use the <a href="#tags.html_4dtext"><code>4DTEXT</code></a> tag when processingdata introduced from outside the application, in order to preventthe <a href="#tags.html_prevention-of-malicious-code-insertion">insertion ofmalicious code</a>.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="tags.html_4dhtml"></a><a aria-hidden="true" class="hash-link"href="#tags.html_4dhtml"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DHTML</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4dhtml-expression--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4dhtml-expression--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DHTML expression--&gt;</code></h4><h4><a aria-hidden="true" class="anchor" id="tags.html_alternative-syntax-4dhtmlexpression"></a><a aria-hidden="true" class="hash-link" href="#tags.html_alternative-syntax-4dhtmlexpression"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Alternative syntax: <code>$4DHTML(expression)</code></h4><p>The value of the 4D variable <code>vtSiteName</code> will beinserted in the HTML page when it is sent. This value is insertedas simple text, special HTML characters such as "&gt;" areautomatically escaped.</p><p>For example, here are the processing results of the 4D textvariable myvar with the available tags:</p><table><thead><tr><th>myvar Value</th><th>Tags</th><th>Résultat</th></tr></thead><tbody><tr><td><code>myvar:="&lt;B&gt;"</code></td><td><code>&lt;!--#4DTEXT myvar--&gt;</code></td><td><code>&amp;lt;B&amp;gt;</code></td></tr><tr><td><code>myvar:="&lt;B&gt;"</code></td><td><code>&lt;!--#4DHTML myvar--&gt;</code></td><td><code>&lt;B&gt;</code></td></tr></tbody></table><p>In case of an interpretation error, the inserted text will be<code>&lt;!--#4DHTML myvar--&gt; : ## error # errorcode</code>.</p><blockquote><p>For security reasons, it is recommended to use the <a href="#tags.html_4dtext"><code>4DTEXT</code></a> tag when processingdata introduced from outside the application, in order to preventthe <a href="#tags.html_prevention-of-malicious-code-insertion">insertion ofmalicious code</a>.</p></blockquote><h2><a aria-hidden="true" class="anchor" id="tags.html_4dif-4delse-4delseif-et-4dendif"></a><a aria-hidden="true" class="hash-link" href="#tags.html_4dif-4delse-4delseif-et-4dendif"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DIF, 4DELSE, 4DELSEIF et 4DENDIF</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4dif-expression-----4delseif-expression2----4delseif-expressionn-----4delse-----4dendif--"></a><a aria-hidden="true" class="hash-link" href="#tags.html_syntax---4dif-expression-----4delseif-expression2----4delseif-expressionn-----4delse-----4dendif--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DIF expression--&gt;</code>{<code>&lt;!--#4DELSEIF expression2--&gt;...&lt;!--#4DELSEIFexpressionN--&gt;</code>} {<code>&lt;!--#4DELSE--&gt;</code>}<code>&lt;!--#4DENDIF--&gt;</code></h4><p>Used with the <code>&lt;!--#4DELSEIF--&gt;</code> (optional),<code>&lt;!--#4DELSE--&gt;</code> (optional) and<code>&lt;!--#4DENDIF--&gt;</code> comments, the <code>&lt;!--#4DIFexpression--&gt;</code> comment offers the possibility to executeportions of code conditionally.</p><p>The <em>expression</em> parameter can contain any valid 4Dexpression returning a Boolean value. It must be indicated withinparenthesis and comply with the 4D syntax rules.</p><p>In case of an interpretation error, the text "<code>&lt;!--#4DIFexpression--&gt;</code>: A Boolean expression was expected" isinserted instead of the contents located between <code>&lt;!--#4DIF--&gt;</code> and <code>&lt;!--#4DENDIF--&gt;</code>. Likewise, ifthere are not as many <code>&lt;!--#4DENDIF--&gt;</code> as<code>&lt;!--#4DIF --&gt;</code>, the text "<code>&lt;!--#4DIFexpression--&gt;</code>: 4DENDIF expected" is inserted instead ofthe contents located between <code>&lt;!--#4DIF --&gt;</code> and<code>&lt;!--#4DENDIF--&gt;</code>.</p><p>In case of an interpretation error, the text "<code>&lt;!--#4DIFexpression--&gt;</code>: A Boolean expression was expected" isinserted instead of the contents located between <code>&lt;!--#4DIF--&gt;</code> and <code>&lt;!--#4DENDIF--&gt;</code>. The<code>&lt;!--#4DIF expression--&gt;</code> ...<code>&lt;!--#4DENDIF--&gt;</code> blocks can be nested in severallevels. Like in 4D, each <code>&lt;!--#4DIF expression--&gt;</code>must match a <code>&lt;!--#4DENDIF--&gt;</code>.</p><p>Using the <code>&lt;!--#4DELSEIF--&gt;</code> tag, you can testan unlimited number of conditions. Only the code that follows thefirst condition evaluated as <code>True</code> is executed. If noconditions are true, no statement is executed (if there is no final<code>&lt;!--#4DELSE--&gt;</code>). You can use a <!--#4DELSE-->tag after the last <!--#4DELSEIF-->. If all the conditions arefalse, the statements following the <!--#4DELSE--> areexecuted.</p><p>The two following codes are equivalent.</p><p>Code using 4DELSE only:</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DIF Condition1--&gt;</span>  /* Condition1 is true*/<span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>    <span class="hljs-comment">&lt;!--#4DIF Condition2--&gt;</span>        /* Condition2 is true*/    <span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>        <span class="hljs-comment">&lt;!--#4DIF Condition3--&gt;</span>            /* Condition3 is true */        <span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>            /*None of the conditions are true*/        <span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span>    <span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span><span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span></code></pre><p>Similar code using the <code>4DELSEIF</code> tag:</p><pre><code class="hljs"><span class="hljs-comment">&lt;!--#4DIF Condition1--&gt;</span>     /* Condition1 is true*/<span class="hljs-comment">&lt;!--#4DELSEIF Condition2--&gt;</span>     /* Condition2 is true*/<span class="hljs-comment">&lt;!--#4DELSEIF Condition3--&gt;</span>    /* Condition3 is true */<span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>    /* None of the conditions are true*/<span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span></code></pre><p>This example of code inserted in a static HTML page displays adifferent label according the <code>vname#""</code> expressionresult:</p><pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">BODY</span>&gt;</span>...<span class="hljs-comment">&lt;!--#4DIF (vname#"")--&gt;</span>Names starting with <span class="hljs-comment">&lt;!--#4DTEXT vname--&gt;</span>.<span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>No name has been found.<span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">BODY</span>&gt;</span></code></pre><p>This example inserts different pages depending on which user isconnected:</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DIF LoggedIn=False--&gt;</span>    <span class="hljs-comment">&lt;!--#4DINCLUDE Login.htm --&gt;</span><span class="hljs-comment">&lt;!--#4DELSEIF User="Admin" --&gt;</span>    <span class="hljs-comment">&lt;!--#4DINCLUDE AdminPanel.htm --&gt;</span><span class="hljs-comment">&lt;!--#4DELSEIF User="Manager" --&gt;</span>    <span class="hljs-comment">&lt;!--#4DINCLUDE SalesDashboard.htm --&gt;</span><span class="hljs-comment">&lt;!--#4DELSE--&gt;</span>    <span class="hljs-comment">&lt;!--#4DINCLUDE ItemList.htm --&gt;</span><span class="hljs-comment">&lt;!--#4DENDIF--&gt;</span></code></pre><h2><a aria-hidden="true" class="anchor" id="tags.html_4dinclude"></a><a aria-hidden="true" class="hash-link"href="#tags.html_4dinclude"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DINCLUDE</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4dinclude-path--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4dinclude-path--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DINCLUDE path--&gt;</code></h4><p>This tag is mainly designed to include an HTML page (indicatedby the <em>path</em> parameter) in another HTML page. By default,only the body of the specified HTML page, i.e. the contents foundwithin the <code>&lt;body&gt;</code> and <code>&lt;/body&gt;</code>tags, is included (the tags themselves are not included). This letsyou avoid conflicts related to meta tags present in theheaders.</p><p>However, if the HTML page specified does not contain<code>&lt;body&gt;``&lt;/body&gt;</code> tags, the entire page isincluded. It is up to you to verify the consistency of the metatags.</p><p>The <code>&lt;!--#4DINCLUDE --&gt;</code> comment is very usefulfor tests (<code>&lt;!--#4DIF--&gt;</code>) or loops(<code>&lt;!--#4DLOOP--&gt;</code>). It is very convenient toinclude banners according to a criteria or randomly. Whenincluding, regardless of the file name extension, 4D analyzes thecalled page and then inserts the contents (modified or not) in thepage originating the <code>4DINCLUDE</code> call.</p><p>An included page with the <code>&lt;!--#4DINCLUDE --&gt;</code>comment is loaded in the Web server cache the same way as pagescalled via a URL or sent with the <code>WEB SEND FILE</code>command.</p><p>In <em>path</em>, put the path leading to the document toinclude. Warning: In the case of a <code>4DINCLUDE</code> call, thepath is relative to the document being analyzed, that is, the"parent" document. Use the slash character (/) as a folderseparator and the two dots (..) to go up one level (HTML syntax).When you use the <code>4DINCLUDE</code> tag with the <code>PROCESS4D TAGS</code> command, the default folder is the projectfolder.</p><blockquote><p>You can modify the default folder used by the<code>4DINCLUDE</code> tag in the current page, using the<code>&lt;!--#4DBASE --&gt;</code> tag (see below).</p></blockquote><p>The number of <code>&lt;!--#4DINCLUDE path--&gt;</code> within apage is unlimited. However, the <code>&lt;!--#4DINCLUDEpath--&gt;</code> calls can be made only at one level. This meansthat, for example, you cannot insert <code>&lt;!--#4DINCLUDEmydoc3.html--&gt;</code> in the <em>mydoc2.html</em> body page,which is called by <code>&lt;!--#4DINCLUDE mydoc2--&gt;</code>inserted in <em>mydoc1.html</em>. Furthermore, 4D verifies thatinclusions are not recursive.</p><p>In case of error, the inserted text is "<code>&lt;!--#4DINCLUDEpath--&gt;</code> :The document cannot be opened".</p><p>Voici quelques exemples :</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DINCLUDE subpage.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE folder/subpage.html--&gt;</span><span class="hljs-comment">&lt;!--#4DINCLUDE ../folder/subpage.html--&gt;</span></code></pre><h2><a aria-hidden="true" class="anchor" id="tags.html_4dloop-et-4dendloop"></a><a aria-hidden="true" class="hash-link" href="#tags.html_4dloop-et-4dendloop"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DLOOP et 4DENDLOOP</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4dloop-condition-----4dendloop--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4dloop-condition-----4dendloop--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DLOOP condition--&gt;</code><code>&lt;!--#4DENDLOOP--&gt;</code></h4><p>This comment allows repetition of a portion of code as long asthe condition is fulfilled. The portion is delimited by<code>&lt;!--#4DLOOP--&gt;</code> and<code>&lt;!--#4DENDLOOP--&gt;</code>.</p><p>The <code>&lt;!--#4DLOOP condition--&gt;</code> ...<code>&lt;!--#4DENDLOOP--&gt;</code> blocks can be nested. Like in4D, each <code>&lt;!--#4DLOOP condition--&gt;</code> must match a<code>&lt;!--#4DENDLOOP--&gt;</code>.</p><p>There are five kinds of conditions:</p><h3><a aria-hidden="true" class="anchor" id="tags.html_--4dloop-table--"></a><a aria-hidden="true" class="hash-link" href="#tags.html_--4dloop-table--"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4DLOOP [table]--&gt;</code></h3><p>This syntax makes a loop for each record from the table currentselection in the current process. The code portion located betweenthe two comments is repeated for each current selection record.</p><blockquote><p>When the <code>4DLOOP</code> tag is used with a table, recordsare loaded in "Read only" mode.</p></blockquote><p>Le code suivant :</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DLOOP [People]--&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT [People]Name--&gt;</span> <span class="hljs-comment">&lt;!--#4DTEXT [People]Surname--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span><span class="hljs-comment">&lt;!--#4DENDLOOP--&gt;</span></code></pre><p>... could be expressed in 4D language in the following way:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> FIRST RECORD</span>([People])<span class="hljs-keyword"> While</span>(<span class="hljs-function">Not</span>(<span class="hljs-function">End selec tion</span>([People])))    ...<span class="hljs-function">    NEXT RECORD</span>([People])<span class="hljs-keyword"> End while</span></code></pre><h3><a aria-hidden="true" class="anchor" id="tags.html_--4dloop-array--"></a><a aria-hidden="true" class="hash-link" href="#tags.html_--4dloop-array--"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4DLOOP array--&gt;</code></h3><p>This syntax makes a loop for each array item. The array currentitem is increased when each code portion is repeated.</p><blockquote><p>This syntax cannot be used with two dimension arrays. In thiscase, it is better to combine a method with nested loops.</p></blockquote><p>The following code example:</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DLOOP arr_names--&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT arr_names{arr_names}--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span><span class="hljs-comment">&lt;!--#4DENDLOOP--&gt;</span></code></pre><p>... could be expressed in 4D language in the following way:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$Elem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(arr_names))    arr_names:=<span class="hljs-variable">$Elem</span>    ...<span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="tags.html_--4dloop-method--"></a><a aria-hidden="true" class="hash-link" href="#tags.html_--4dloop-method--"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4DLOOP method--&gt;</code></h3><p>This syntax makes a loop as long as the method returns<code>True</code>. The method takes a Long Integer parameter type.First it is called with the value 0 to allow an initializationstage (if necessary); it is then called with the values 1 ,then 2,then 3 and so on, as long as it returns <code>True</code>.</p><p>For security reasons, within a Web process, the <code>On WebAuthentication</code> database method can be called once justbefore the initialization stage (method execution with 0 asparameter). If the authentication is OK, the initialization stagewill proceed.</p><p><code>C_BOOLEAN($0)</code> and <code>C_LONGINT($1)</code> MUSTbe declared within the method for compilation purposes.</p><p>The following code example:</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DLOOP my_method--&gt;</span><span class="hljs-comment">&lt;!--#4DTEXT var--&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">BR</span>&gt;</span> <span class="hljs-comment">&lt;!--#4DENDLOOP--&gt;</span></code></pre><p>... could be expressed in 4D language in the following way:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> If</span>(AuthenticationWebOK)<span class="hljs-keyword">    If</span>(<span class="hljs-function">my_method</span>(<span class="hljs-number">0</span>))       <span class="hljs-variable">$counter</span>:=<span class="hljs-number">1</span><span class="hljs-keyword">       While</span>(<span class="hljs-function">my_method</span>(<span class="hljs-variable">$counter</span>))          ...          <span class="hljs-variable">$counter</span>:=<span class="hljs-variable">$counter</span>+<span class="hljs-number">1</span><span class="hljs-keyword">       End while</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End if</span></code></pre><p>The <code>my_method</code> method can be as follows:</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_LONGINT</span>(<span class="hljs-variable">$1</span>)<span class="hljs-function"> C_BOOLEAN</span>(<span class="hljs-variable">$0</span>)<span class="hljs-keyword"> If</span>(<span class="hljs-variable">$1</span>=<span class="hljs-number">0</span>) <span class="hljs-comment">`Initialisation</span>    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">True</span><span class="hljs-keyword"> Else</span><span class="hljs-keyword">    If</span>(<span class="hljs-variable">$1</span>&lt;<span class="hljs-number">50</span>)       ...<span class="hljs-keyword">       var</span>:=...       <span class="hljs-variable">$0</span>:=<span class="hljs-literal">True</span><span class="hljs-keyword">    Else</span>       <span class="hljs-variable">$0</span>:=<span class="hljs-literal">False</span> <span class="hljs-comment">`Stops the loop</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End if</span></code></pre><h3><a aria-hidden="true" class="anchor" id="tags.html_--4dloop-expression--"></a><a aria-hidden="true" class="hash-link" href="#tags.html_--4dloop-expression--"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4DLOOP expression--&gt;</code></h3><p>With this syntax, the <code>4DLOOP</code> tag makes a loop aslong as the <em>expression</em> returns <code>True</code>. Theexpression can be any valid Boolean expression and must contain avariable part to be evaluated in each loop to avoid infiniteloops.</p><p>For example, the following code:</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DEVAL $i:=0--&gt;</span><span class="hljs-comment">&lt;!--#4DLOOP ($i&lt;4)--&gt;</span><span class="hljs-comment">&lt;!--#4DEVAL $i--&gt;</span><span class="hljs-comment">&lt;!--#4DEVAL $i:=$i+1--&gt;</span><span class="hljs-comment">&lt;!--#4DENDLOOP--&gt;</span></code></pre><p>...produces the following result:</p><pre><code class="hljs"><span class="hljs-number">0</span><span class="hljs-number">1</span><span class="hljs-number">2</span><span class="hljs-number">3</span></code></pre><h3><a aria-hidden="true" class="anchor" id="tags.html_--4dloop-pointerarray--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_--4dloop-pointerarray--"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4DLOOP pointerArray--&gt;</code></h3><p>In this case, the <code>4DLOOP</code> tag works like it doeswith an array: it makes a loop for each element of the arrayreferenced by the pointer. The current array element is increasedeach time the portion of code is repeated.</p><p>This syntax is useful when you pass an array pointer as aparameter to the <code>PROCESS 4D TAGS</code> command.</p><p>Exemple :</p><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY TEXT</span>(<span class="hljs-variable">$array</span>;<span class="hljs-number">2</span>) <span class="hljs-variable">$array{1}</span>:=<span class="hljs-string">"hello"</span> <span class="hljs-variable">$array{2}</span>:=<span class="hljs-string">"world"</span> <span class="hljs-variable">$input</span>:=<span class="hljs-string">"&lt;!--#4DEVAL $1--&gt;"</span> <span class="hljs-variable">$input</span>:=<span class="hljs-variable">$input</span>+<span class="hljs-string">"&lt;!--#4DLOOP $2--&gt;"</span> <span class="hljs-variable">$input</span>:=<span class="hljs-variable">$input</span>+<span class="hljs-string">"&lt;!--#4DEVAL $2-&gt;{$2-&gt;}--&gt; "</span> <span class="hljs-variable">$input</span>:=<span class="hljs-variable">$input</span>+<span class="hljs-string">"&lt;!--#4DENDLOOP--&gt;"</span><span class="hljs-function"> PROCESS 4D TAGS</span>(<span class="hljs-variable">$input</span>;<span class="hljs-variable">$output</span>;<span class="hljs-string">"elements = "</span>;-&gt;<span class="hljs-variable">$array</span>)  <span class="hljs-comment">// $output = "elements = hello world "</span></code></pre><p>In case of an interpretation error, the text"<code>&lt;!--#4DLOOP expression--&gt;</code>: description" isinserted instead of the contents located between<code>&lt;!--#4DLOOP --&gt;</code> and<code>&lt;!--#4DENDLOOP--&gt;</code>.</p><p>The following messages can be displayed:</p><ul><li>Unexpected expression type (standard error);</li><li>Incorrect table name (error on the table name);</li><li>An array was expected (the variable is not an array or is a twodimension array);</li><li>The method does not exist;</li><li>Syntax error (when the method is executing);</li><li>Access error (you do not have the appropriate access privilegesto access the table or the method).</li><li>4DENDLOOP expected (the <code>&lt;!--#4DENDLOOP--&gt;</code>number does not match the <code>&lt;!--#4DLOOP --&gt;</code>).</li></ul><h2><a aria-hidden="true" class="anchor" id="tags.html_4dscript"></a><a aria-hidden="true" class="hash-link"href="#tags.html_4dscript"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DSCRIPT/</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4dscriptmethodnamemyparam--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4dscriptmethodnamemyparam--"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax:<code>&lt;!--#4DSCRIPT/MethodName/MyParam--&gt;</code></h4><p>The <code>4DSCRIPT</code> tag allows you to execute 4D methodswhen processing the template. The presence of the<code>&lt;!--#4DSCRIPT/MyMethod/MyParam--&gt;</code> tag as an HTMLcomment launches the execution of the <code>MyMethod</code> methodwith the <code>Param</code> parameter as a string in<code>$1</code>.</p><blockquote><p>If the tag is called in the context of a Web process, when thepage is loaded, 4D calls the <code>On Web Authentication</code>database method (if it exists). If it returns True, 4D executes themethod.</p></blockquote><p>The method must return text in <code>$0</code>. If the stringstarts with the code character 1, it is considered as HTML (thesame principle is true for the <code>4DHTML</code> tag).</p><p>For example, let’s say that you insert the following comment<code>“Today is &lt;!--#4DSCRIPT/MYMETH/MYPARAM--&gt;”</code> intoa template Web page. When loading the page, 4D calls the <code>OnWeb Authentication</code> database method, then calls the<code>MYMETH</code> method and passes the string “/MYPARAM” as theparameter <code>$1</code>. The method returns text in $0 (forexample "12/31/21"); the expression "<code>Today is&lt;!--#4DSCRIPT/MYMETH/MYPARAM––&gt;</code>" therefore becomes"Today is 12/31/21".</p><p>The <code>MYMETH</code> method is as follows:</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">//MYMETH</span><span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$0</span>;<span class="hljs-variable">$1</span>) <span class="hljs-comment">//These parameters must always be declared</span> <span class="hljs-variable">$0</span>:=<span class="hljs-function">String</span>(Current date)</code></pre><blockquote><p>A method called by <code>4DSCRIPT</code> must not call interfaceelements (<code>DIALOG</code>, <code>ALERT</code>, etc.).</p></blockquote><p>As 4D executes methods in their order of appearance, it isabsolutely possible to call a method that sets the value of manyvariables that are referenced further in the document, whichevermode you are using. You can insert as many<code>&lt;!--#4DSCRIPT...--&gt;</code> comments as you want in atemplate.</p><h2><a aria-hidden="true" class="anchor" id="tags.html_4dtext"></a><a aria-hidden="true" class="hash-link"href="#tags.html_4dtext"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4DTEXT</h2><h4><a aria-hidden="true" class="anchor" id="tags.html_syntax---4dtext-expression--"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntax---4dtext-expression--"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntax: <code>&lt;!--#4DTEXT expression--&gt;</code></h4><h4><a aria-hidden="true" class="anchor" id="tags.html_syntaxe-alternative--4dtextexpression"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntaxe-alternative--4dtextexpression"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntaxe alternative :<code>4DTEXT(expression)</code></h4><p>La balise <code>&lt;!--#4DTEXT expression--&gt;</code> vouspermet d'insérer une référence à une variable 4D ou à uneexpression retournant une valeur. Par exemple, si vous écrivez(dans une page HTML) :</p><pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">P</span>&gt;</span>Welcome to <span class="hljs-comment">&lt;!--#4DTEXT vtSiteName--&gt;</span>!<span class="hljs-tag">&lt;/<span class="hljs-name">P</span>&gt;</span></code></pre><p>La valeur de la variable 4D <code>vtSiteName</code> sera inséréedans la page HTML lors de son envoi. Cette valeur est insérée commedu texte simple, les caractères HTML spéciaux tels que "&gt;" sontautomatiquement échappés.</p><p>Vous pouvez également insérer des expressions 4D. Par exemple,vous pouvez insérer directement le contenu d'un champ(<code>&lt;!--#4DTEXT [tableName]fieldName--&gt;</code>), unélément de tableau (<code>&lt;!--#4DTEXT tabarr{1}--&gt;</code>) ouune méthode retournant une valeur (<code>&lt;!--#4DTEXTmymethod--&gt;</code>). La conversion des expressions suit lesmêmes règles que celles des variables. De plus, l'expression doitrespecter les règles de syntaxe 4D.</p><blockquote><p>Pour des raisons de sécurité, il est recommandé d'utiliser cettebalise lors du traitement de données introduites en dehors del'application, afin d'éviter <a href="#tags.html_prevention-of-malicious-code-insertion">l'insertion decode malveillant</a>.</p></blockquote><p>En cas d'erreur d'évaluation, le texte inséré apparaîtra sous laforme <code>&lt;!--#4DTEXT myvar--&gt; : ## erreur # coded'erreur</code>.</p><ul><li>Vous devez utiliser des variables process.</li><li>Vous pouvez afficher le contenu d'un champ image. Cependant, iln'est pas possible d'afficher le contenu d'un élément de tableaud'images.</li><li>Il est possible d'afficher le contenu d'un champ objet à l'aided'une formule 4D. Par exemple, vous pouvez écrire<code>&lt;!--#4DTEXT OBGet:C1224([Rect]Desc;\"color\")--&gt;</code>.</li><li>Vous travaillerez généralement avec des variables de typeTexte. Cependant, vous pouvez également utiliser des variablesBLOB. Il vous suffit de générer les BLOB en mode <code>Texte sanslongueur</code>.</li></ul><h2><a aria-hidden="true" class="anchor" id="tags.html_syntaxe-alternative-pour-4dtext-4dhtml-4deval"></a><a aria-hidden="true"class="hash-link" href="#tags.html_syntaxe-alternative-pour-4dtext-4dhtml-4deval"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntaxe alternative pour 4DTEXT, 4DHTML, 4DEVAL</h2><p>Plusieurs balises de transformation 4D existantes peuvent êtreexprimées à l'aide d'une syntaxe fondée sur le symbole $ :</p><h4><a aria-hidden="true" class="anchor" id="tags.html_4dtag-expression"></a><a aria-hidden="true" class="hash-link" href="#tags.html_4dtag-expression"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>4dtag (expression)</h4><p>peut être utilisé à la place de</p><h4><a aria-hidden="true" class="anchor" id="tags.html_--4dtag-expression--"></a><a aria-hidden="true" class="hash-link" href="#tags.html_--4dtag-expression--"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>&lt;!--#4dtag expression--&gt;</code></h4><p>Cette syntaxe alternative n'est disponible que pour les balisesutilisées pour retourner des valeurs traitées :</p><ul><li><a href="#tags.html_4dtext">4DTEXT</a></li><li><a href="#tags.html_4dhtml">4DHTML</a></li><li><a href="#tags.html_4deval">4DEVAL</a></li></ul><p>(Les autres balises, telles que 4DIF ou 4DSCRIPT, doivent êtreécrites avec la syntaxe régulière).</p><p>Par exemple, vous pouvez écrire :</p><pre><code class="hljs css language-html">$4DEVAL(UserName)</code></pre><p>au lieu de :</p><pre><code class="hljs css language-html"><span class="hljs-comment">&lt;!--#4DEVAL(UserName)--&gt;</span></code></pre><p>Le principal avantage de cette syntaxe est qu'elle vous permetd'écrire des modèles conformes à XML. Certains développeurs 4D ontbesoin de créer et de valider des modèles basés sur XML à l'aided'outils d'analyse syntaxique XML standard. Le caractère "&lt;"n'étant pas valide dans une valeur d'attribut XML, il n'était paspossible d'utiliser la syntaxe "<!-- -->" des balises 4D sansrompre la syntaxe du document. D'autre part, ne pas mentionner lecaractère "&lt;" empêche 4D d'interpréter correctement lesbalises.</p><p>Par exemple, le code suivant provoquerait une erreur d'analyseXML en raison du premier caractère "&lt;" dans la valeur del'attribut :</p><pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">line</span> <span class="hljs-attr">x1</span>=<span class="hljs-string">"&lt;!--#4DEVAL $x--&gt;"</span> <span class="hljs-attr">y1</span>=<span class="hljs-string">"&lt;!--#4DEVAL $graphY1--&gt;"</span>/&gt;</span></code></pre><p>En utilisant la syntaxe $, le code suivant est validé par leparseur :</p><pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">line</span> <span class="hljs-attr">x1</span>=<span class="hljs-string">"$4DEVAL($x)"</span> <span class="hljs-attr">y1</span>=<span class="hljs-string">"$4DEVAL($graphY1)"</span>/&gt;</span></code></pre><p>A noter que <code>$4dtag</code> et <code>&lt;--#4dtag--&gt;</code> ne sont pas strictement équivalents : contrairement à<code>&lt;--#4dtag --&gt;</code>, le traitement de<code>$4dtag</code> n'interprète pas les balises 4D <a href="#tags.html_recursive-processing">de manière récursive</a>. Lesbalises <code>$</code> sont toujours évaluées une fois et lerésultat est considéré comme du texte brut.</p><p>Cette différence consiste à empêcher l'injection de codemalveillant. Comme <a href="#tags.html_prevention-of-malicious-code-insertion">expliquéci-dessous</a>, il est fortement recommandé d'utiliser les balises<code>4DTEXT</code> au lieu des balises <code>4DHTML</code> lorsquevous manipulez du texte utilisateur, afin de se protéger contre uneréinterprétation indésirable des balises : avec<code>4DTEXT</code>, les caractères spéciaux tels que "&lt;" nesont pas mentionnés, ainsi toute balise 4D utilisant la syntaxe<code>&lt;!--#4dtag expression --&gt;</code> perdra sasignification particulière. Cependant, étant donné que<code>4DTEXT</code> n'échappe pas au symbole <code>$``, nous avonsdécidé de rompre la prise en charge de la récursion afin d'empêchertoute injection malveillante utilisant la syntaxe 4dtag(expression)</code>.</p><p>Les exemples suivants illustrent le résultat du traitement enfonction de la syntaxe et du tag utilisés :</p><pre><code class="hljs css language-4d">  <span class="hljs-comment">// exemple 1</span> myName:=<span class="hljs-string">"&lt;!--#4DHTML QUIT 4D--&gt;"</span> <span class="hljs-comment">//injection malveillante</span> input:=<span class="hljs-string">"My name is: &lt;!--#4DHTML myName--&gt;"</span><span class="hljs-function"> PROCESS 4D TAGS</span>(input;output)  <span class="hljs-comment">//4D va quitter !</span></code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">// exemple 2</span> myName:=<span class="hljs-string">"&lt;!--#4DHTML QUIT 4D--&gt;"</span> <span class="hljs-comment">//injection malveillante</span> input:=<span class="hljs-string">"My name is: &lt;!--#4DTEXT myName--&gt;"</span><span class="hljs-function"> PROCESS 4D TAGS</span>(input;output)  <span class="hljs-comment">//la sortie est "My name is: &lt;!--#4DHTML QUIT 4D--&gt;"</span></code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">// exemple 3</span> myName:=<span class="hljs-string">"$4DEVAL(QUIT 4D)"</span> <span class="hljs-comment">//injection malveillante</span> input:=<span class="hljs-string">"My name is: &lt;!--#4DTEXT myName--&gt;"</span><span class="hljs-function"> PROCESS 4D TAGS</span>(input;output)  <span class="hljs-comment">//la sortie est "My name is: $4DEVAL(QUIT 4D)"</span></code></pre><p>A noter que la syntaxe <code>$4dtag</code> prend en charge lacorrespondance de paires de guillemets ou de parenthèses. Parexemple, supposons que vous ayez besoin d'évaluer la chaînecomplexe (fictive) suivante :</p><pre><code class="hljs">String(<span class="hljs-number">1</span>) + <span class="hljs-string">"<span class="hljs-subst">\"</span>(hello)<span class="hljs-subst">\"</span>"</span></code></pre><p>Vous pouvez écrire :</p><pre><code class="hljs css language-4d"> input:=<span class="hljs-string">"$4DEVAL( String(1)+\"\\\"(hello)\\\"\")"</span><span class="hljs-function"> PROCESS 4D TAGS</span>(input;output) --&gt;output is <span class="hljs-number">1</span><span class="hljs-string">"(hello)"</span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#debugLogFiles.html"><span class="arrow-prev">←</span><span>Description des fichiers d'historique</span></a><a class="docs-next button" href="#overview.html"><span>Aperçu</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#tags.html_principes-dutilisation-des-balises">Principesd'utilisation des balises</a><ul class="toc-headings"><li><a href="#tags.html_parsing">Parsing</a></li><li><a href="#tags.html_traitement-r%25C3%25A9cursif">Traitementrécursif</a></li><li><a href="#tags.html_identifiants-avec-tokens">Identifiants avectokens</a></li><li><a href="#tags.html_utilisation-du--comme-s%25C3%25A9parateur-d%25C3%25A9cimal">Utilisation du "." comme séparateur décimal</a></li></ul></li><li><a href="#tags.html_4dbase">4DBASE</a></li><li><a href="#tags.html_4dcode">4DCODE</a></li><li><a href="#tags.html_4deach-et-4dendeach">4DEACH et4DENDEACH</a><ul class="toc-headings"><li><a href="#tags.html_--4deach-item-in-collection--"><code>&lt;!--#4DEACHitem in collection--&gt;</code></a></li><li><a href="#tags.html_--4deach-entity-in-entityselection--"><code>&lt;!--#4DEACHentity in entitySelection--&gt;</code></a></li><li><a href="#tags.html_--4deach-property-in-object--"><code>&lt;!--#4DEACHproperty in object--&gt;</code></a></li></ul></li><li><a href="#tags.html_4deval">4DEVAL</a></li><li><a href="#tags.html_4dhtml">4DHTML</a></li><li><a href="#tags.html_4dif-4delse-4delseif-et-4dendif">4DIF,4DELSE, 4DELSEIF et 4DENDIF</a></li><li><a href="#tags.html_4dinclude">4DINCLUDE</a></li><li><a href="#tags.html_4dloop-et-4dendloop">4DLOOP et4DENDLOOP</a><ul class="toc-headings"><li><a href="#tags.html_--4dloop-table--"><code>&lt;!--#4DLOOP[table]--&gt;</code></a></li><li><a href="#tags.html_--4dloop-array--"><code>&lt;!--#4DLOOParray--&gt;</code></a></li><li><a href="#tags.html_--4dloop-method--"><code>&lt;!--#4DLOOPmethod--&gt;</code></a></li><li><a href="#tags.html_--4dloop-expression--"><code>&lt;!--#4DLOOPexpression--&gt;</code></a></li><li><a href="#tags.html_--4dloop-pointerarray--"><code>&lt;!--#4DLOOPpointerArray--&gt;</code></a></li></ul></li><li><a href="#tags.html_4dscript">4DSCRIPT/</a></li><li><a href="#tags.html_4dtext">4DTEXT</a></li><li><a href="#tags.html_syntaxe-alternative-pour-4dtext-4dhtml-4deval">Syntaxealternative pour 4DTEXT, 4DHTML, 4DEVAL</a></li></ul></nav></div></div></body></html>