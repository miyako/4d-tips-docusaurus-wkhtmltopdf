<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Classes du modèle de données · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="ORDA vous permet de créer des fonctions de classe de haut niveau au-dessus du modèle de données. Cela vous permet d'écrire du code orienté métier et de le «publier» comme une API. Le datastore, les dataclasses, les sélections d'entités et les entités sont tous disponibles en tant qu'objets de classe pouvant contenir des fonctions."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Classes du modèle de données · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="ORDA vous permet de créer des fonctions de classe de haut niveau au-dessus du modèle de données. Cela vous permet d'écrire du code orienté métier et de le «publier» comme une API. Le datastore, les dataclasses, les sélections d'entités et les entités sont tous disponibles en tant qu'objets de classe pouvant contenir des fonctions."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#ordaClasses.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Classes du modèle dedonnées<a aria-hidden="true" class="anchor" id="ordaClasses.html"></a></h1></header><article><div><p><span>ORDA vous permet de créer des fonctions de classe de hautniveau au-dessus du modèle de données. Cela vous permet d'écrire ducode orienté métier et de le «publier» comme une API. Le datastore,les dataclasses, les sélections d'entités et les entités sont tousdisponibles en tant qu'objets de classe pouvant contenir desfonctions.</span></p><p><span>Par exemple, vous pouvez créer une fonction<code>getNextWithHigherSalary()</code> dans la classe<code>EmployeeEntity</code> pour retourner les employés ayant unsalaire supérieur à celui qui est sélectionné. Il serait aussisimple à appeler que :</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-variable">$nextHigh</span>:=ds.<span class="hljs-function">Employee</span>(<span class="hljs-number">1</span>).<span class="hljs-function">getNextWithHigherSalary</span>()</code></span></pre><p>Les développeurs peuvent utiliser ces fonctions non seulementdans des datastores locaux, mais aussi dans des architecturesclient/serveur et distantes :</p><pre><code class="hljs css language-4d"> <span class="hljs-comment">//$cityManager est la référence d'un datastore distant</span>Form.comp.city:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCityName</span>(Form.comp.zipcode)</code></pre><p>Grâce à cette fonctionnalité, toute la logique métier de votreapplication 4D peut être stockée comme une couche indépendante afind'être facilement maintenue ou réutilisée avec un niveau desécurité élevé :</p><ul><li><p>Elle vous permet de «masquer» la complexité globale de lastructure physique sous-jacente et d'exposer uniquement desfonctions compréhensibles et prêtes à l'emploi.</p></li><li><p>Si la structure physique évolue, il vous suffit d'adapter lecode de la fonction et les applications clientes continueront deles appeler de manière transparente.</p></li><li><p>By default, all of your data model class functions (including<a href="#ordaClasses.html_computed-attributes-1">computedattribute functions</a>) and <a href="#ordaClasses.html_alias-attributes-1">alias attributes</a> are<strong>not exposed</strong> to remote applications and cannot becalled from REST requests. Vous devez déclarer explicitement chaquefonction publique et alias avec le mot-clé <a href="#ordaClasses.html_exposed-vs-non-exposed-functions"><code>exposed</code></a>.</p></li></ul><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/api.png" /></p><p>De plus, 4D <a href="#ordaClasses.html_creating-classes">créepréalablement et automatiquement</a> les classes pour chaque objetde modèle de données disponible.</p><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_architecture"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_architecture"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Architecture</h2><p>ORDA fournit des <strong>classes génériques</strong> exposéesvia le <a href="#ordaClasses.html_class-stores">class store</a><strong><code>4D</code></strong>, ainsi que des <strong>classesutilisateurs</strong> (étendant les classes génériques) exposéesdans le <a href="#ordaClasses.html_class-stores">class store</a><strong><code>cs</code></strong> :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/ClassDiagramImage.png" /></p><p>Toutes les classes de modèle de données ORDA sont exposées entant que propriétés du class store<strong><code>cs</code></strong>. Les classes ORDA suivantes sontdisponibles :</p><table><thead><tr><th>Class</th><th>Nom de l'exemple</th><th>Instanciée par</th></tr></thead><tbody><tr><td>cs.DataStore</td><td>cs.DataStore</td><td>commande <a href="#ordaClasses.html_ds"><code>ds</code></a></td></tr><tr><td>cs.<em>DataClassName</em></td><td>cs.Employee</td><td><a href="#ordaClasses.html_dataclassname"><code>dataStore.DataClassName</code></a>,<code>dataStore["DataClassName"]</code></td></tr><tr><td>cs.<em>DataClassName</em>Entity</td><td>cs.EmployeeEntity</td><td><a href="#ordaClasses.html_get"><code>dataClass.get()</code></a>, <a href="#ordaClasses.html_new"><code>dataClass.new()</code></a>, <a href="#ordaClasses.html_first"><code>entitySelection.first()</code></a>,<a href="#ordaClasses.html_last"><code>entitySelection.last()</code></a>,<a href="#ordaClasses.html_previous"><code>entity.previous()</code></a>,<a href="#ordaClasses.html_next"><code>entity.next()</code></a>,<a href="#ordaClasses.html_first"><code>entity.first()</code></a>,<a href="#ordaClasses.html_last"><code>entity.last()</code></a>,<a href="#ordaClasses.html_clone"><code>entity.clone()</code></a></td></tr><tr><td>cs.<em>DataClassName</em>Selection</td><td>cs.EmployeeSelection</td><td><a href="#ordaClasses.html_query"><code>dataClass.query()</code></a>,<a href="#ordaClasses.html_query"><code>entitySelection.query()</code></a>,<a href="#ordaClasses.html_all"><code>dataClass.all()</code></a>,<a href="#ordaClasses.html_fromcollection"><code>dataClass.fromCollection()</code></a>,<a href="#ordaClasses.html_newselection"><code>dataClass.newSelection()</code></a>,<a href="#ordaClasses.html_drop"><code>entitySelection.drop()</code></a>,<a href="#ordaClasses.html_getselection"><code>entity.getSelection()</code></a>,<a href="#ordaClasses.html_and"><code>entitySelection.and()</code></a>,<a href="#ordaClasses.html_minus"><code>entitySelection.minus()</code></a>,<a href="#ordaClasses.html_or"><code>entitySelection.or()</code></a>,<a href="#ordaClasses.html_or"><code>entitySelection.orderBy()</code></a>,<a href="#ordaClasses.html_orderbyformula"><code>entitySelection.orderByFormula()</code></a>,<a href="#ordaClasses.html_slice"><code>entitySelection.slice()</code></a>,<code>Create entity selection</code></td></tr></tbody></table><blockquote><p>Les classes utilisateur ORDA sont stockées sous forme defichiers de classe standard (.4dm) dans le sous-dossier Classes duprojet <a href="#ordaClasses.html_class-files">(voirci-dessous)</a>.</p></blockquote><p>De plus, les instances d'objet de classes utilisateurs dumodèles de données ORDA bénéficient des propriétés et fonctions deleurs parents:</p><ul><li>un objet de classe Datastore peut appeler des fonctions de la<a href="#DataStoreClass.html">classe générique ORDADatastore</a>.</li><li>un objet de classe Dataclass peut appeler des fonctions de la<a href="#DataClassClass.html">classe générique ORDADataclass</a>.</li><li>un objet de classe Entity selection peut appeler des fonctionsde la <a href="#EntitySelectionClass.html">classe générique ORDAEntity selection</a>.</li><li>un objet de classe Entity peut appeler des fonctions de la<a href="#EntityClass.html">classe générique ORDA Entity</a>.</li></ul><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_description-de-la-classe"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_description-de-la-classe"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description de la classe</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v19 R4</td><td>Alias attributes in the Entity Class</td></tr><tr><td>v19 R3</td><td>Computed attributes in the Entity Class</td></tr><tr><td>v18 R5</td><td>Data model class functions are not exposed to REST by default.New <code>exposed</code> and <code>local</code> keywords.</td></tr></tbody></table></details><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_classe-datastore"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_classe-datastore"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Classe DataStore</h3><p>Une base de données 4D expose sa propre classe DataStore dans leclass store <code>cs</code>.</p><ul><li><strong>Extends</strong>: 4D.DataStoreImplementation</li><li><strong>Nom de classe</strong> : cs.DataStore</li></ul><p>Vous pouvez créer des fonctions dans la classe DataStore quiseront disponibles via l'objet <code>ds</code>.</p><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemple"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemple"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.DataStore class</span><span class="hljs-keyword">Class extends</span> DataStoreImplementation<span class="hljs-keyword">Function</span> getDesc  <span class="hljs-variable">$0</span>:=<span class="hljs-string">"Database exposing employees and their companies"</span></code></pre><p>Cette foncton peut alors être appelée :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$desc</span>:=ds.<span class="hljs-function">getDesc</span>() <span class="hljs-comment">//"Database exposing..."</span></code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_classe-dataclass"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_classe-dataclass"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Classe DataClass</h3><p>Chaque table exposée avec ORDA affiche une classe DataClass dansle class store <code>cs</code>.</p><ul><li><strong>Extends</strong> : 4D.DataClass</li><li>**Nom de classe <em><em>: cs.</em>DataClassName</em> (où<em>DataClassName</em> est le nom de la table)</li><li>**Exemple ** : cs.Employee</li></ul><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemple-1"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemple-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4D"><span class="hljs-comment">// cs.Company class</span><span class="hljs-keyword">Class extends</span> DataClass<span class="hljs-comment">// Retourne les entreprises dont le revenu est supérieur à la moyenne</span><span class="hljs-comment">// Retourne une sélection d'entités relative à l'entreprise DataClass </span><span class="hljs-keyword">Function</span><span class="hljs-function"> GetBestOnes</span>()    <span class="hljs-variable">$sel</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"revenues &gt;= :1"</span>;<span class="hljs-literal">This</span>.<span class="hljs-function">all</span>().<span class="hljs-function">average</span>(<span class="hljs-string">"revenues"</span>));    <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$sel</span></code></pre><p>Vous pouvez ensuite obtenir une sélection d'entité des"meilleures" entreprises en exécutant le code suivant :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">    var</span> <span class="hljs-variable">$best </span>: cs.CompanySelection    <span class="hljs-variable">$best</span>:=ds.Company.<span class="hljs-function">GetBestOnes</span>()</code></pre><blockquote><p><a href="#ordaClasses.html_computed-attributes">Les champscalculés</a> sont définis dans <a href="#ordaClasses.html_entity-class">la classe Entity</a>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemple-avec-un-datastore-distant"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_exemple-avec-un-datastore-distant"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple avec un datastore distant</h4><p>Le catalogue <em>City</em> suivant est exposé dans un datastoredistant (vue partielle) :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/Orda_example.png" /></p><p>La classe <code>City Class</code> fournit une API :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.City class</span><span class="hljs-keyword">Class extends</span> DataClass<span class="hljs-keyword">Function</span><span class="hljs-function"> getCityName</span>()<span class="hljs-keyword">    var</span> <span class="hljs-variable">$1</span>; <span class="hljs-variable">$zipcode </span>: Integer<span class="hljs-keyword">    var</span> <span class="hljs-variable">$zip </span>: 4D.Entity<span class="hljs-keyword">    var</span> <span class="hljs-variable">$0 </span>: Text    <span class="hljs-variable">$zipcode</span>:=<span class="hljs-variable">$1</span>    <span class="hljs-variable">$zip</span>:=ds.ZipCode.<span class="hljs-function">get</span>(<span class="hljs-variable">$zipcode</span>)    <span class="hljs-variable">$0</span>:=<span class="hljs-string">""</span><span class="hljs-keyword">     If</span> (<span class="hljs-variable">$zip</span>#<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$0</span>:=<span class="hljs-variable">$zip</span>.city.name<span class="hljs-keyword">    End if</span></code></pre><p>L'application cliente ouvre une session sur le datastore distant:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$cityManager</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>;<span class="hljs-string">"127.0.0.1:8111"</span>);<span class="hljs-string">"CityManager"</span>)</code></pre><p>Une application cliente peut alors utiliser l'API pour obtenirla ville correspondant au code postal (par exemple) à partir d'unformulaire :</p><pre><code class="hljs css language-4d">Form.comp.city:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCityName</span>(Form.comp.zipcode)</code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_classe-entityselection"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_classe-entityselection"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Classe EntitySelection</h3><p>Chaque table exposée avec ORDA affiche une classeEntitySelection dans le class store <code>cs</code>.</p><ul><li><strong>Extends</strong> : 4D.EntitySelection</li><li><strong>Nom de classe</strong> :<em>DataClassName</em>Selection (où <em>DataClassName</em> est lenom de la table)</li><li>**Exemple ** : cs.EmployeeSelection</li></ul><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemple-2"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemple-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-comment">// Classe cs.EmployeeSelection </span>Classe extends EntitySelection<span class="hljs-comment">//Extrait, de cette sélection d'entité, les employés ayant un salaire supérieur à la moyenne</span><span class="hljs-keyword">Function</span> withSalaryGreaterThanAverage<span class="hljs-function">    C_OBJECT</span>(<span class="hljs-variable">$0</span>)    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &gt; :1"</span>;<span class="hljs-literal">This</span>.<span class="hljs-function">average</span>(<span class="hljs-string">"salary"</span>)).<span class="hljs-function">orderBy</span>(<span class="hljs-string">"salary"</span>)</code></pre><p>Vous pouvez alors obtenir les employés dont le salaire estsupérieur à la moyenne, dans une sélection d'entité, en exécutantle code suivant :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$moreThanAvg</span>:=ds.Company.<span class="hljs-function">all</span>().employees.<span class="hljs-function">withSalaryGreaterThanAverage</span>()</code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_entity-class"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_entity-class"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Entity Class</h3><p>Chaque table exposée avec ORDA affiche une classe Entity dans leclass store <code>cs</code>.</p><ul><li><strong>Extends</strong> : 4D.Entity</li><li>**Nom de classe **: <em>DataClassName</em>Entity (où<em>DataClassName</em> est le nom de la table)</li><li>**Exemple ** : cs.CityEntity</li></ul><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_champs-calcul%C3%A9s"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_champs-calcul%25C3%25A9s"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Champs calculés</h4><p>Les classes Entity vous permettent de définir des <strong>champscalculés</strong> à l'aide de mots-clés spécifiques :</p><ul><li><code>Function get</code> <em>attributeName</em></li><li><code>Function set</code> <em>attributeName</em></li><li><code>Function query</code> <em>attributeName</em></li><li><code>Function orderBy</code> <em>attributeName</em></li></ul><p>For information, please refer to the <a href="#ordaClasses.html_computed-attributes-1">Computed attributes</a>section.</p><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_attributs-de-type-alias"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_attributs-de-type-alias"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Attributs de type alias</h4><p>Entity classes allow you to define <strong>aliasattributes</strong>, usually over related attributes, using the<code>Alias</code> keyword:</p><p><code>Alias</code> <em>attributeName</em><em>targetPath</em></p><p>For information, please refer to the <a href="#ordaClasses.html_alias-attributes-1">Alias attributes</a>section.</p><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemple-3"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemple-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.CityEntity class</span><span class="hljs-keyword">Class extends</span> Entity<span class="hljs-keyword">Function</span><span class="hljs-function"> getPopulation</span>()    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.zips.<span class="hljs-function">sum</span>(<span class="hljs-string">"population"</span>)<span class="hljs-keyword">Function</span><span class="hljs-function"> isBigCity</span>(): Boolean<span class="hljs-comment">// La fonction getPopulation() est utilisable dans la classe</span><span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.<span class="hljs-function">getPopulation</span>()&gt;<span class="hljs-number">50000</span></code></pre><p>Vous pouvez ensuite appeler ce code :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$cityManager</span>; <span class="hljs-variable">$city </span>: Object<span class="hljs-variable">$cityManager</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>;<span class="hljs-string">"127.0.0.1:8111"</span>);<span class="hljs-string">"CityManager"</span>)<span class="hljs-variable">$city</span>:=<span class="hljs-variable">$cityManager</span>.City.<span class="hljs-function">getCity</span>(<span class="hljs-string">"Caguas"</span>)<span class="hljs-keyword">If</span> (<span class="hljs-variable">$city</span>.<span class="hljs-function">isBigCity</span>())<span class="hljs-function">    ALERT</span>(<span class="hljs-variable">$city</span>.name + <span class="hljs-string">" is a big city"</span>)<span class="hljs-keyword">End if</span></code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_r%C3%A8gles-sp%C3%A9cifiques"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_r%25C3%25A8gles-sp%25C3%25A9cifiques"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Règles spécifiques</h3><p>Lors de la création ou de la modification de classes de modèlesde données, vous devez veiller aux règles décrites ci-dessous :</p><ul><li><p>Puisqu'ils sont utilisés pour définir des noms de classeDataClass automatiques dans le <a href="#ordaClasses.html_class-stores">class store</a><strong>cs</strong>, les tables 4D doivent être nommées afind'éviter tout conflit dans l'espace de nommage <strong>cs</strong>.En particulier :</p><ul><li>Ne donnez pas le même nom à une table 4D et à une <a href="#ordaClasses.html_class-names">classe d'utilisateurs</a> (userclass). Si un tel cas se produit, le constructeur de la classeutilisateur devient inutilisable (un avertissement est retourné parle compilateur).</li><li>N'utilisez pas de nom réservé pour une table 4D (par exemple"DataClass").</li></ul></li><li><p>Lors de la définition d'une classe, assurez-vous quel'instruction <a href="#ordaClasses.html_class-extends-classnameclass"><code>Classextends</code></a> correspond exactement au nom de la classeparente (sensible à la casse). Par exemple, <code>Class extendsEntitySelection</code> pour une classe de sélection d'entité.</p></li><li><p>Vous ne pouvez pas instancier un objet de classe de modèle dedonnées avec le mot clé <code>new()</code> (une erreur estretournée). You must use a regular method as listed in the <a href="#ordaClasses.html_architecture"><code>Instantiated by</code>column of the ORDA class table</a>.</p></li><li><p>Vous ne pouvez pas remplacer une fonction de classe ORDA nativedu <a href="#ordaClasses.html_class-stores">class store</a><strong><code>4D</code></strong> par une fonction de classeutilisateur de modèle de données.</p></li></ul><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_ex%C3%A9cution-pr%C3%A9emptive"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_ex%25C3%25A9cution-pr%25C3%25A9emptive"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exécution préemptive</h3><p>Lors de la compilation, les fonctions de classe du modèle dedonnées sont exécutées :</p><ul><li>dans <strong>des process préemptifs ou coopératifs</strong> (enfonction du process appelant) dans des applications monoposte,</li><li>dans <strong>des process préemptifs</strong> dans desapplications client/serveur (sauf si le mot-clé <a href="#ordaClasses.html_local-functions"><code>local</code></a> estutilisé, auquel cas il dépend du process appelant comme dans le casd'un monoposte).</li></ul><p>Si votre projet est conçu de façon à être exécuté enclient/serveur, assurez-vous que le code de la fonction de classedu modèle de données est thread-safe. Si un code thread-unsafe estappelé, une erreur sera générée au moment de l'exécution (aucuneerreur ne sera déclenchée au moment de la compilation puisquel'exécution coopérative est prise en charge dans les applicationsmonoposte).</p><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_champs-calcul%C3%A9s-1"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_champs-calcul%25C3%25A9s-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Champs calculés</h2><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_aper%C3%A7u"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_aper%25C3%25A7u"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Aperçu</h3><p>Un champ calculé est un attribut de dataclass avec un type dedonnées qui masque un calcul. <a href="#classes.html">Les classes4D standard</a> implémentent le concept de propriétés calculéesavec des <a href="#ordaClasses.html_function-get-and-function-set">fonctionsd'accès</a> telles que <code>get</code> (<em>getter</em>) et<code>set</code> (<em>setter</em>). Les attributs de dataclass ORDAbénéficient de cette fonctionnalité et l'étendent avec deuxfonctions supplémentaires : <code>query</code> et<code>orderBy</code>.</p><p>Un champ calculé nécessite au minimum une fonction<code>get</code> qui décrit comment sa valeur sera calculée.Lorsqu'une fonction <em>getter</em> est fournie à un attribut, 4Dne crée pas l'espace de stockage sous-jacent dans le datastore maissubstitue le code de la fonction chaque fois que l'attribut estaccédé. Si l'attribut n'est pas consulté, le code ne s'exécutejamais.</p><p>Un champ calculé peut également mettre en œuvre une fonction<code>set</code>, qui s'exécute chaque fois qu'une valeur estattribuée à l'attribut. La fonction <em>setter</em> décrit ce quiest à faire avec la valeur attribuée, généralement en laredirigeant vers un ou plusieurs attributs de stockage ou, danscertains cas, vers d'autres entités.</p><p>Tout comme les champs de stockage, les champs calculés peuventêtre inclus dans les <strong>requêtes</strong>. Par défaut,lorsqu'un champ calculé est utilisé dans une requête ORDA, il estcalculé une fois par entité examinée. Dans certains cas, cela estsuffisant. . Cependant, pour de meilleures performances, notammenten client/serveur, les champs calculés peuvent implémenter unefonction de requête <code>query</code> qui s'appuie sur lesattributs des dataclass et qui bénéficie de leurs index.</p><p>De même, les champs calculés peuvent être inclus dans des<strong>tris</strong>. Lorsqu'un champ calculé est utilisé dans untri ORDA, l'attribut est calculé une fois par entité examinée. Toutcomme dans les requêtes, les champs calculés peuvent mettre enœuvre une fonction <code>orderBy</code> qui substitue d'autresattributs pendant le tri, améliorant ainsi les performances.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_comment-d%C3%A9finir-les-champs-calcul%C3%A9s"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_comment-d%25C3%25A9finir-les-champs-calcul%25C3%25A9s"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Comment définir les champs calculés</h3><p>Créez un champ calculé en définissant un accesseur<code>get</code> dans la <a href="#ordaClasses.html_entity-class"><strong>classe entity</strong></a>de la dataclass. Le champ calculé sera automatiquement disponibledans les attributs de la dataclass et dans les attributs del'entité.</p><p>D'autres fonctions de champs calculés (<code>set</code>,<code>query</code> et <code>orderBy</code>) peuvent également êtredéfinies dans la classe entity. Elles sont facultatives.</p><p>Dans les fonctions de champs calculés, <a href="#ordaClasses.html_this"><code>This</code></a> désigne l'entité.Les champs calculés peuvent être utilisés et traités commen'importe quel champ de dataclass, c'est-à-dire qu'ils seronttraités par les fonctions de <a href="#EntityClass.html">classeentity</a> ou de <a href="#EntitySelectionClass.html">classe entityselection</a>.</p><blockquote><p>Les champs calculés d'ORDA ne sont pas exposés (<a href="#ordaClasses.html_exposed-vs-non-exposed-functions"><strong>exposed</strong></a>)par défaut. Exposez un champ calculé en ajoutant le mot-clé<code>exposed</code> lors de la définition de la fonction<strong>get</strong>.</p></blockquote><blockquote><p><strong>Les fonctions get et set</strong> peuvent avoir lapropriété <a href="#ordaClasses.html_local-functions"><strong>local</strong></a> pouroptimiser le traitement client/serveur.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_function-get-attributename"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_function-get-attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Function get &lt;attributeName&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntaxe"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntaxe"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntaxe</h4><pre><code class="hljs css language-4d">{local} {exposed}<span class="hljs-keyword"> Function</span> get &lt;attributeName&gt;({<span class="hljs-variable">$event </span>: Object}) -&gt; <span class="hljs-variable">$result </span>: type<span class="hljs-comment">// code</span></code></pre><p>La fonction <em>getter</em> est obligatoire pour déclarer lechamp calculé <em>attributeName</em>. Chaque fois que l'on accède àl'<em>attributeName</em>, 4D évalue le code de la fonction<code>getter</code> et retourne la valeur <em>$result</em>.</p><blockquote><p>Un champ calculé peut utiliser la valeur d'un ou plusieursautres champs calculés. Les appels récursifs génèrent deserreurs.</p></blockquote><p>La fonction <em>getter</em> définit le type de données du champcalculé grâce au paramètre <em>$result</em>. Les types de résultatssuivants sont autorisés :</p><ul><li>Scalar (text, boolean, date, time, number)</li><li>Object</li><li>Image</li><li>BLOB</li><li>Entity (i.e. cs.EmployeeEntity)</li><li>Entity selection (i.e. cs.EmployeeSelection)</li></ul><p>Les propriétés du paramètre <em>$event</em> sont les suivantes:</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>attributeName</td><td>Text</td><td>Nom du champ calculé</td></tr><tr><td>dataClassName</td><td>Text</td><td>Nom de la dataclass</td></tr><tr><td>kind</td><td>Text</td><td>"get"</td></tr><tr><td>result</td><td>Variant</td><td>Optionnel. Complétez cette propriété avec la valeur Null sivous souhaitez qu'un champ scalaire retourne Null</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemples"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemples"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemples</h4><ul><li>Le champ calculé <em>fullName</em> :</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$fullName </span>: Text<span class="hljs-keyword">  Case of</span>       : (<span class="hljs-literal">This</span>.firstName=<span class="hljs-literal">Null</span>) &amp; (<span class="hljs-literal">This</span>.lastName=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$event</span>.result:=<span class="hljs-literal">Null</span> <span class="hljs-comment">//utiliser le résultat pour retourner Null</span>    : (<span class="hljs-literal">This</span>.firstName=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.lastName    : (<span class="hljs-literal">This</span>.lastName=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.firstName<span class="hljs-keyword">    Else</span>         <span class="hljs-variable">$fullName</span>:=<span class="hljs-literal">This</span>.firstName+<span class="hljs-string">" "</span>+<span class="hljs-literal">This</span>.lastName<span class="hljs-keyword">    End case</span> </code></pre><ul><li>Un champ calculé peut être basé sur un attribut relatif à uneentité :</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get bigBoss</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result</span>: cs.EmployeeEntity    <span class="hljs-variable">$result</span>:=<span class="hljs-literal">This</span>.manager.manager</code></pre><ul><li>Un champ calculé peut être basé sur un attribut relatif à uneentity selection :</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> get coWorkers</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result</span>: cs.EmployeeSelection<span class="hljs-keyword">    If</span> (<span class="hljs-literal">This</span>.manager.manager=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$result</span>:=ds.Employee.<span class="hljs-function">newSelection</span>()<span class="hljs-keyword">    Else</span>         <span class="hljs-variable">$result</span>:=<span class="hljs-literal">This</span>.manager.directReports.<span class="hljs-function">minus</span>(this)<span class="hljs-keyword">    End if</span></code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_function-set-attributename"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_function-set-attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Function set &lt;attributeName&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntaxe-1"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntaxe-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntaxe</h4><pre><code class="hljs css language-4d">{local}<span class="hljs-keyword"> Function</span> set &lt;attributeName&gt;(<span class="hljs-variable">$value </span>: type {; <span class="hljs-variable">$event </span>: Object})<span class="hljs-comment">// code</span></code></pre><p>La fonction <em>setter</em> s'exécute chaque fois qu'une valeurest attribuée à l'attribut. Cette fonction traite généralement laou les valeurs d'entrée et le résultat est réparti entre un ouplusieurs autres attributs.</p><p>Le paramètre <em>$value</em> reçoit la valeur attribuée àl'attribut.</p><p>Les propriétés du paramètre <em>$event</em> sont les suivantes:</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>attributeName</td><td>Text</td><td>Nom du champ calculé</td></tr><tr><td>dataClassName</td><td>Text</td><td>Nom de la dataclass</td></tr><tr><td>kind</td><td>Text</td><td>"set"</td></tr><tr><td>value</td><td>Variant</td><td>Valeur à gérer par le champ calculé</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemple-4"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemple-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> set fullName</span>(<span class="hljs-variable">$value </span>: Text; <span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">    var</span> <span class="hljs-variable">$p </span>: Integer    <span class="hljs-variable">$p</span>:=<span class="hljs-function">Position</span>(<span class="hljs-string">" "</span>; <span class="hljs-variable">$value</span>)           <span class="hljs-literal">This</span>.firstname:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$value</span>; <span class="hljs-number">1</span>; <span class="hljs-variable">$p</span><span class="hljs-number">-1</span>)  <span class="hljs-comment">// "" if $p&lt;0</span>    <span class="hljs-literal">This</span>.lastname:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$value</span>; <span class="hljs-variable">$p</span>+<span class="hljs-number">1</span>)</code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_function-query-attributename"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_function-query-attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Function query &lt;attributeName&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntaxe-2"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntaxe-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntaxe</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object) -&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">Function</span> query &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object) -&gt; <span class="hljs-variable">$result </span>: Object<span class="hljs-comment">// code</span></code></pre><p>Cette fonction prend en charge trois syntaxes :</p><ul><li><p>Avec la première syntaxe, vous traitez l'ensemble de la requêtevia la propriété de l'objet objet <code>$event.result</code>.</p></li><li><p>Avec les deuxième et troisième syntaxes, la fonction retourneune valeur dans <em>$result</em> :</p><ul><li>Si <em>$result</em> est Text, il doit s'agir d'une chaîne derequête valide</li><li>Si <em>$result</em> est Object, il doit contenir deuxpropriétés :</li></ul><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>$result.query</td><td>Text</td><td>Chaîne de requête valide avec placeholders (:1, :2, etc.)</td></tr><tr><td>$result.parameters</td><td>Collection</td><td>valeurs pour placeholders</td></tr></tbody></table></li></ul><p>La fonction <code>query</code> s'exécute à chaque fois qu'unerequête utilisant le champ calculé est lancée. Il est utile depersonnaliser et d'optimiser les requêtes en s'appuyant sur lesattributs indexés. Lorsque la fonction <code>query</code> n'est pasimplémentée pour un champ calculé, la recherche est toujoursséquentielle (basée sur l'évaluation de toutes les valeurs à l'aidede la fonction <code>get &lt;AttributeName&gt;</code>).</p><blockquote><p>Les fonctionnalités suivantes ne sont pas prises en charge : -l'appel d'une fonction <code>query</code> sur des champs calculésde type Entity ou Entity selection, - l'utilisation du mot clé<code>order by</code> dans la chaîne de requête résultante.</p></blockquote><p>Les propriétés du paramètre <em>$event</em> sont les suivantes:</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>attributeName</td><td>Text</td><td>Nom du champ calculé</td></tr><tr><td>dataClassName</td><td>Text</td><td>Nom de la dataclass</td></tr><tr><td>kind</td><td>Text</td><td>"query"</td></tr><tr><td>value</td><td>Variant</td><td>Valeur à gérer par le champ calculé</td></tr><tr><td>operator</td><td>Text</td><td>Opérateur de requête (voir également la fonction de classe<a href="#ordaClasses.html_query"><code>query</code></a>). Valeurspossibles :<ul><li>== (égal à, @ est un joker)</li><li>=== (égal à, @ n'est pas un joker)</li><li>!= (non égal à, @ est un joker)</li><li>!== (non égal à, @ n'est pas un joker)</li><li>&lt; (inférieur à)</li><li>&lt;= (less than or equal to)</li><li>&gt; (supérieur à)</li><li>&gt;= (supérieur ou égal à)</li><li>IN (inclus dans)</li><li>% (contient un mot-clé)</li></ul></td></tr><tr><td>result</td><td>Variant</td><td>Valeur devant être gérée par le champ calculé. Passez<code>Null</code> dans cette propriété si vous voulez laisser 4Dexécuter la requête par défaut (toujours séquentielle pour leschamps calculés).</td></tr></tbody></table><blockquote><p>Si la fonction retourne une valeur dans <em>$result</em> etqu'une autre valeur est attribuée à la propriété<code>$event.result</code>, la priorité est donnée à<code>$event.result</code>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemples-1"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemples-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemples</h4><ul><li>Requête sur le champ calculé <em>fullName</em>.</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> query fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt;<span class="hljs-variable">$result </span>: Object<span class="hljs-keyword">    var</span> <span class="hljs-variable">$fullname</span>; <span class="hljs-variable">$firstname</span>; <span class="hljs-variable">$lastname</span>; <span class="hljs-variable">$query </span>: Text<span class="hljs-keyword">    var</span> <span class="hljs-variable">$operator </span>: Text<span class="hljs-keyword">    var</span> <span class="hljs-variable">$p </span>: Integer<span class="hljs-keyword">    var</span> <span class="hljs-variable">$parameters </span>: Collection    <span class="hljs-variable">$operator</span>:=<span class="hljs-variable">$event</span>.operator    <span class="hljs-variable">$fullname</span>:=<span class="hljs-variable">$event</span>.value    <span class="hljs-variable">$p</span>:=<span class="hljs-function">Position</span>(<span class="hljs-string">" "</span>; <span class="hljs-variable">$fullname</span>)<span class="hljs-keyword">     If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)        <span class="hljs-variable">$firstname</span>:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$fullname</span>; <span class="hljs-number">1</span>; <span class="hljs-variable">$p</span><span class="hljs-number">-1</span>)+<span class="hljs-string">"@"</span>        <span class="hljs-variable">$lastname</span>:=<span class="hljs-function">Substring</span>(<span class="hljs-variable">$fullname</span>; <span class="hljs-variable">$p</span>+<span class="hljs-number">1</span>)+<span class="hljs-string">"@"</span>        <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$firstname</span>; <span class="hljs-variable">$lastname</span>) <span class="hljs-comment">//collection de deux éléments</span><span class="hljs-keyword">    Else</span>         <span class="hljs-variable">$fullname</span>:=<span class="hljs-variable">$fullname</span>+<span class="hljs-string">"@"</span>        <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$fullname</span>) <span class="hljs-comment">// collection d'un seul élément</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword">     Case of</span>     : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"=="</span>) | (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"==="</span>)<span class="hljs-keyword">        If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"(firstName = :1 and lastName = :2) or (firstName = :2 and lastName = :1)"</span><span class="hljs-keyword">        Else</span>             <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName = :1 or lastName = :1"</span><span class="hljs-keyword">        End if</span>     : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"!="</span>)<span class="hljs-keyword">        If</span> (<span class="hljs-variable">$p</span>&gt;<span class="hljs-number">0</span>)            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName != :1 and lastName != :2 and firstName != :2 and lastName != :1"</span><span class="hljs-keyword">        Else</span>             <span class="hljs-variable">$query</span>:=<span class="hljs-string">"firstName != :1 and lastName != :1"</span><span class="hljs-keyword">        End if</span><span class="hljs-keyword">     End case</span>     <span class="hljs-variable">$result</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"query"</span>; <span class="hljs-variable">$query</span>; <span class="hljs-string">"parameters"</span>; <span class="hljs-variable">$parameters</span>)</code></pre><blockquote><p>A noter que l'utilisation de placeholders dans les requêtesbasées sur la saisie de texte par l'utilisateur est recommandéepour des raisons de sécurité (voir la description de <a href="#ordaClasses.html_query"><code>query()</code></a>).</p></blockquote><p>Code d'appel, par exemple :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$emps</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"fullName = :1"</span>; <span class="hljs-string">"Flora Pionsin"</span>)</code></pre><ul><li>Cette fonction gère les requêtes sur le champ calculé<em>age</em> et retourne un objet avec des paramètres :</li></ul><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> query age</span>(<span class="hljs-variable">$event </span>: Object)-&gt;<span class="hljs-variable">$result </span>: Object<span class="hljs-keyword">    var</span> <span class="hljs-variable">$operator </span>: Text<span class="hljs-keyword">    var</span> <span class="hljs-variable">$age </span>: Integer<span class="hljs-keyword">    var</span> <span class="hljs-variable">$_ages </span>: Collection    <span class="hljs-variable">$operator</span>:=<span class="hljs-variable">$event</span>.operator    <span class="hljs-variable">$age</span>:=<span class="hljs-function">Num</span>(<span class="hljs-variable">$event</span>.value)  <span class="hljs-comment">// entier</span>    <span class="hljs-variable">$d1</span>:=<span class="hljs-function">Add to date</span>(Current date; -<span class="hljs-variable">$age</span><span class="hljs-number">-1</span>; <span class="hljs-number">0</span>; <span class="hljs-number">0</span>)    <span class="hljs-variable">$d2</span>:=<span class="hljs-function">Add to date</span>(<span class="hljs-variable">$d1</span>; <span class="hljs-number">1</span>; <span class="hljs-number">0</span>; <span class="hljs-number">0</span>)    <span class="hljs-variable">$parameters</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-variable">$d1</span>; <span class="hljs-variable">$d2</span>)<span class="hljs-keyword">    Case of</span>         : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"=="</span>)            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday &gt; :1 and birthday &lt;= :2"</span>  <span class="hljs-comment">// après jour1 et avant ou égal à jour2</span>        : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"==="</span>)             <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday = :2"</span>  <span class="hljs-comment">// d2 = deuxième date calculée (= jour anniversaire)</span>        : (<span class="hljs-variable">$operator</span>=<span class="hljs-string">"&gt;="</span>)            <span class="hljs-variable">$query</span>:=<span class="hljs-string">"birthday &lt;= :2"</span>            <span class="hljs-comment">//... autres opérateurs           </span><span class="hljs-keyword">    End case</span><span class="hljs-keyword">     If</span> (<span class="hljs-literal">Undefined</span>(<span class="hljs-variable">$event</span>.result))        <span class="hljs-variable">$result</span>:=New object        <span class="hljs-variable">$result</span>.query:=<span class="hljs-variable">$query</span>        <span class="hljs-variable">$result</span>.parameters:=<span class="hljs-variable">$parameters</span><span class="hljs-keyword">    End if</span></code></pre><p>Code d'appel, par exemple :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// personnes âgées de 20 à 21 ans (-1 jour)</span><span class="hljs-variable">$twenty</span>:=people.<span class="hljs-function">query</span>(<span class="hljs-string">"age = 20"</span>)  <span class="hljs-comment">// appelle le cas "=="</span><span class="hljs-comment">// personnes âgées de 20 ans aujourd'hui</span><span class="hljs-variable">$twentyToday</span>:=people.<span class="hljs-function">query</span>(<span class="hljs-string">"age === 20"</span>) <span class="hljs-comment">// équivalent à people.query("age is 20") </span></code></pre><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_function-orderby-attributename"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_function-orderby-attributename"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Function orderBy &lt;attributeName&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntaxe-3"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntaxe-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntaxe</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span> orderBy &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)<span class="hljs-keyword">Function</span> orderBy &lt;attributeName&gt;(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-comment">// code</span></code></pre><p>La fonction <code>orderBy</code> s'exécute chaque fois que lechamp calculé doit être ordonné. Elle permet de trier le champcalculé. Par exemple, vous pouvez trier <em>fullName</em> sur lesprénoms puis les noms, ou inversement. Lorsque la fonction<code>orderBy</code> n'est pas implémentée pour un champ calculé,le tri est toujours séquentiel (basé sur l'évaluation de toutes lesvaleurs à l'aide de la fonction <code>get&lt;AttributeName&gt;</code>).</p><blockquote><p>L'appel d'une fonction <code>orderBy</code> sur des champscalculés de type Entity class ou Entity selection class<strong>n'est pas pris en charge</strong>.</p></blockquote><p>Les propriétés du paramètre <em>$event</em> sont les suivantes:</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>attributeName</td><td>Text</td><td>Nom du champ calculé</td></tr><tr><td>dataClassName</td><td>Text</td><td>Nom de la dataclass</td></tr><tr><td>kind</td><td>Text</td><td>"orderBy"</td></tr><tr><td>value</td><td>Variant</td><td>Valeur à gérer par le champ calculé</td></tr><tr><td>operator</td><td>Text</td><td>"desc" or "asc" (default)</td></tr><tr><td>descending</td><td>Booléen</td><td><code>true</code> pour l'ordre décroissant, <code>false</code>pour l'ordre croissant</td></tr><tr><td>result</td><td>Variant</td><td>Valeur devant être gérée par le champ calculé. Passez<code>Null</code> si vous voulez laisser 4D exécuter le tri pardéfaut.</td></tr></tbody></table><blockquote><p>Vous pouvez utiliser soit <code>l'opérateur</code>, soit lapropriété <code>descending</code>. C'est essentiellement unequestion de style de programmation (voir les exemples).</p></blockquote><p>Vous pouvez retourner la chaîne <code>orderBy</code> soit dansla propriété de l'objet <code>$event.result</code>, soit dans lerésultat de la fonction <em>$result</em>. Si la fonction retourneune valeur dans <em>$result</em> et qu'une autre valeur estattribuée à la propriété <code>$event.result</code>, la prioritéest donnée à <code>$event.result</code>.</p><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemple-5"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemple-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Vous pouvez saisir du code conditionnel :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> orderBy fullName</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$event</span>.descending=<span class="hljs-literal">True</span>)        <span class="hljs-variable">$result</span>:=<span class="hljs-string">"firstName desc, lastName desc"</span><span class="hljs-keyword">     Else</span>         <span class="hljs-variable">$result</span>:=<span class="hljs-string">"firstName, lastName"</span><span class="hljs-keyword">     End if</span></code></pre><p>Vous pouvez également saisir du code compact :</p><pre><code class="hljs css language-4d">Function orderBy fullName($event : Object)-&gt; $result : Text    $result:="firstName "+$event.operator+", "lastName "+$event.operator</code></pre><p>Le code conditionnel est nécessaire dans certains cas :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Function</span><span class="hljs-function"> orderBy age</span>(<span class="hljs-variable">$event </span>: Object)-&gt; <span class="hljs-variable">$result </span>: Text<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$event</span>.descending=<span class="hljs-literal">True</span>)        <span class="hljs-variable">$result</span>:=<span class="hljs-string">"birthday asc"</span><span class="hljs-keyword">     Else</span>         <span class="hljs-variable">$result</span>:=<span class="hljs-string">"birthday desc"</span><span class="hljs-keyword">     End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_attributs-de-type-alias-1"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_attributs-de-type-alias-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Attributs de type alias</h2><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_aper%C3%A7u-1"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_aper%25C3%25A7u-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Aperçu</h3><p>An <strong>alias</strong> attribute is built above anotherattribute of the data model, named <strong>target</strong>attribute. The target attribute can belong to a related dataclass(available through any number of relation levels) or to the samedataclass. An alias attribute stores no data, but the path to itstarget attribute. You can define as many alias attributes as youwant in a dataclass.</p><p>Alias attributes are particularly useful to handle N to Nrelations. They bring more readability and simplicity in the codeand in queries by allowing to rely on business concepts instead ofimplementation details.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_how-to-define-alias-attributes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_how-to-define-alias-attributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>How to define alias attributes</h3><p>You create an alias attribute in a dataclass by using the<code>Alias</code> keyword in the <a href="#ordaClasses.html_entity-class"><strong>entity class</strong></a>of the dataclass.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_alias-attributename-targetpath"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_alias-attributename-targetpath"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>Alias &lt;attributeName&gt;&lt;targetPath&gt;</code></h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_syntaxe-4"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_syntaxe-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntaxe</h4><pre><code class="hljs"><span class="hljs-template-variable">{exposed}</span><span class="xml"> Alias <span class="hljs-tag">&lt;<span class="hljs-name">attributeName</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">targetPath</span>&gt;</span></span></code></pre><p><em>attributeName</em> must comply with <a href="#ordaClasses.html_object-properties">standard rules for propertynames</a>.</p><p><em>targetPath</em> is an attribute path containing one or morelevels, such as "employee.company.name". If the target attributebelongs to the same dataclass, <em>targetPath</em> is the attributename.</p><p>An alias can be used as a part of a path of another alias.</p><p>A <a href="#ordaClasses.html_computed-attributes-1">computedattribute</a> can be used in an alias path, but only as the lastlevel of the path, otherwise, an error is returned. For example, if"fullName" is a computed attribute, an alias with path"employee.fullName" is valid.</p><blockquote><p>ORDA alias attributes are <strong>not exposed</strong> bydefault. You must add the <a href="#ordaClasses.html_exposed-vs-non-exposed-functions"><code>exposed</code></a>keyword before the <code>Alias</code> keyword if you want the aliasto be available to remote requests.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_using-alias-attributes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_using-alias-attributes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Using alias attributes</h3><p>Alias attributes are read-only (except when based upon a scalarattribute of the same dataclass, see the last example below). Theycan be used instead of their target attribute path in classfunctions such as:</p><table><thead><tr><th>Function</th></tr></thead><tbody><tr><td><code>dataClass.query()</code>,<code>entitySelection.query()</code></td></tr><tr><td><code>entity.toObject()</code></td></tr><tr><td><code>entitySelection.toCollection()</code></td></tr><tr><td><code>entitySelection.extract()</code></td></tr><tr><td><code>entitySelection.orderBy()</code></td></tr><tr><td><code>entitySelection.orderByFormula()</code></td></tr><tr><td><code>entitySelection.average()</code></td></tr><tr><td><code>entitySelection.count()</code></td></tr><tr><td><code>entitySelection.distinct()</code></td></tr><tr><td><code>entitySelection.sum()</code></td></tr><tr><td><code>entitySelection.min()</code></td></tr><tr><td><code>entitySelection.max()</code></td></tr><tr><td><code>entity.diff()</code></td></tr><tr><td><code>entity.touchedAttributes()</code></td></tr></tbody></table><blockquote><p>Keep in mind that alias attributes are calculated on the server.In remote configurations, updating alias attributes in entitiesrequires that entities are reloaded from the server.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_alias-properties"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_alias-properties"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Alias properties</h3><p>Alias attribute <a href="#ordaClasses.html_kind"><code>kind</code></a> is "alias".</p><p>An alias attribute inherits its data <a href="#ordaClasses.html_type"><code>type</code></a> property from thetarget attribute:</p><ul><li>if the target attribute <a href="#ordaClasses.html_kind"><code>kind</code></a> is "storage", thealias data type is of the same type,</li><li>if the target attribute <a href="#ordaClasses.html_kind"><code>kind</code></a> is "relatedEntity"or "relatedEntities", the alias data type is of the<code>4D.Entity</code> or <code>4D.EntitySelection</code> type("<em>classname</em>Entity" or "<em>classname</em>Selection").</li></ul><p>Alias attributes based upon relations have a specific <a href="#ordaClasses.html_path"><code>path</code></a> property, containingthe path of their target attributes. Alias attributes based uponattributes of the same dataclass have the same properties as theirtarget attributes (and no <code>path</code> property).</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemples-2"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemples-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemples</h3><p>Considering the following model:</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/alias1.png" /></p><p>In the Teacher dataclass, an alias attribute returns allstudents of a teacher:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.TeacherEntity class</span><span class="hljs-keyword">Class extends</span> EntityAlias students courses.student <span class="hljs-comment">//relatedEntities </span></code></pre><p>In the Student dataclass, an alias attribute returns allteachers of a student:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.StudentEntity class</span><span class="hljs-keyword">Class extends</span> EntityAlias teachers courses.teacher <span class="hljs-comment">//relatedEntities </span></code></pre><p>In the Course dataclass:</p><ul><li>an alias attribute returns another label for the "name"attribute</li><li>an alias attribute returns the teacher name</li><li>an alias attribute returns the student name</li></ul><pre><code class="hljs css language-4d"><span class="hljs-comment">// cs.CourseEntity class</span><span class="hljs-keyword">Class extends</span> EntityExposed Alias courseName name <span class="hljs-comment">//scalar </span>Exposed Alias teacherName teacher.name <span class="hljs-comment">//scalar value</span>Exposed Alias studentName student.name <span class="hljs-comment">//scalar value</span></code></pre><p>You can then execute the following queries:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Find course named "Archaeology"</span>ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"courseName = :1"</span>;<span class="hljs-string">"Archaeology"</span>)<span class="hljs-comment">// Find courses given by the professor Smith</span>ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"teacherName = :1"</span>;<span class="hljs-string">"Smith"</span>)<span class="hljs-comment">// Find courses where Student "Martin" assists</span>ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"studentName = :1"</span>;<span class="hljs-string">"Martin"</span>)<span class="hljs-comment">// Find students who have M. Smith as teacher </span>ds.Student.<span class="hljs-function">query</span>(<span class="hljs-string">"teachers.name = :1"</span>;<span class="hljs-string">"Smith"</span>)<span class="hljs-comment">// Find teachers who have M. Martin as Student</span>ds.Teacher.<span class="hljs-function">query</span>(<span class="hljs-string">"students.name = :1"</span>;<span class="hljs-string">"Martin"</span>)<span class="hljs-comment">// Note that this very simple query string processes a complex </span><span class="hljs-comment">// query including a double join, as you can see in the queryPlan:   </span><span class="hljs-comment">// "Join on Table : Course  :  Teacher.ID = Course.teacherID,    </span><span class="hljs-comment">//  subquery:[ Join on Table : Student  :  Course.studentID = Student.ID,</span><span class="hljs-comment">//  subquery:[ Student.name === Martin]]"</span></code></pre><p>You can also edit the value of the <em>courseName</em>alias:</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Rename a course using its alias attribute</span><span class="hljs-variable">$arch</span>:=ds.Course.<span class="hljs-function">query</span>(<span class="hljs-string">"courseName = :1"</span>;<span class="hljs-string">"Archaeology"</span>)<span class="hljs-variable">$arch</span>.courseName:=<span class="hljs-string">"Archaeology II"</span><span class="hljs-variable">$arch</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//courseName and name are "Archaeology II"</span></code></pre><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_fonctions-expos%C3%A9es-et-non-expos%C3%A9es"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_fonctions-expos%25C3%25A9es-et-non-expos%25C3%25A9es"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fonctions exposées et non exposées</h2><p>For security reasons, all of your data model class functions andalias attributes are <strong>not exposed</strong> (i.e., private)by default to remote requests.</p><p>Les requêtes à distance incluent :</p><ul><li>Les requêtes envoyées par des applications 4D distantesconnectées via <code>Open datastore</code></li><li>Les requêtes REST</li></ul><blockquote><p>Les requêtes client/serveur 4D standard ne sont pas impactées.Les fonctions de classe de modèle de données sont toujoursdisponibles dans cette architecture.</p></blockquote><p>Une fonction qui n'est pas exposée n'est pas disponible sur lesapplications distantes et ne peut être appelée sur aucune instanced'objet à partir d'une requête REST. Si une application distantetente d'accéder à une fonction non exposée, l'erreur «-10729 -Méthode membre inconnue» est retournée.</p><p>Pour permettre à une fonction de classe de modèle de donnéesd'être appelée par une requête distante, vous devez la déclarerexplicitement à l'aide du mot-clé <code>exposed</code>. La syntaxeformelle est la suivante :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// déclarer une fonction exposée</span>exposed<span class="hljs-keyword"> Function</span> &lt;functionName&gt;   </code></pre><blockquote><p>Le mot-clé <code>exposed</code> ne peut être utilisé qu'avec lesfonctions de classe du modèle de données. S'il est utilisé avec unefonction de <a href="#classes.html">classe utilisateurstandard</a>, il est ignoré et une erreur est retournée par lecompilateur.</p></blockquote><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemple-6"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemple-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h3><p>Vous voulez qu'une fonction exposée utilise une fonction privéedans une classe dataclass :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> DataClass<span class="hljs-comment">//Fonction publique</span><span class="hljs-function">exposed Function registerNewStudent</span>(<span class="hljs-variable">$student </span>: Object) -&gt; <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$entity </span>: cs.StudentsEntity<span class="hljs-variable">$entity</span>:=ds.Students.<span class="hljs-function">new</span>()<span class="hljs-variable">$entity</span>.<span class="hljs-function">fromObject</span>(<span class="hljs-variable">$student</span>)<span class="hljs-variable">$entity</span>.school:=<span class="hljs-literal">This</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"name=:1"</span>; <span class="hljs-variable">$student</span>.schoolName).<span class="hljs-function">first</span>()<span class="hljs-variable">$entity</span>.serialNumber:=<span class="hljs-literal">This</span>.<span class="hljs-function">computeSerialNumber</span>()<span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()<span class="hljs-comment">//fonction (privée) non exposée</span><span class="hljs-keyword">Function</span><span class="hljs-function"> computeIDNumber</span>()-&gt; <span class="hljs-variable">$id </span>: Integer<span class="hljs-comment">//calculer un nouveau numéro d'ID</span><span class="hljs-variable">$id</span>:=...</code></pre><p>Lorsque le code est appelé :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$remoteDS</span>; <span class="hljs-variable">$student</span>; <span class="hljs-variable">$status </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$id </span>: Integer<span class="hljs-variable">$remoteDS</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"127.0.0.1:8044"</span>); <span class="hljs-string">"students"</span>)<span class="hljs-variable">$student</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"firstname"</span>; <span class="hljs-string">"Mary"</span>; <span class="hljs-string">"lastname"</span>; <span class="hljs-string">"Smith"</span>; <span class="hljs-string">"schoolName"</span>; <span class="hljs-string">"Math school"</span>)<span class="hljs-variable">$status</span>:=<span class="hljs-variable">$remoteDS</span>.Schools.<span class="hljs-function">registerNewStudent</span>(<span class="hljs-variable">$student</span>) <span class="hljs-comment">// OK</span><span class="hljs-variable">$id</span>:=<span class="hljs-variable">$remoteDS</span>.Schools.<span class="hljs-function">computeIDNumber</span>() <span class="hljs-comment">// Erreur "Unknown member method" </span></code></pre><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_fonctions-locales"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_fonctions-locales"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fonctions locales</h2><p>Par défaut dans l'architecture client/serveur, les fonctions demodèle de données ORDA sont exécutées <strong>sur leserveur</strong>. Il garantit généralement les meilleuresperformances puisque seuls la requête de fonction et le résultatsont envoyés sur le réseau.</p><p>Cependant, il peut arriver qu'une fonction soit entièrementexécutable côté client (par exemple, lorsqu'elle traite des donnéesqui se trouvent déjà dans le cache local). Dans ce cas, vous pouvezenregistrer les requêtes sur le serveur et ainsi améliorer lesperformances de l'application en saisissant le mot-clé<code>local</code>. La syntaxe formelle est la suivante :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// déclarer une fonction à exécuter localement en client/serveur </span>local<span class="hljs-keyword"> Function</span> &lt;functionName&gt;   </code></pre><p>Avec ce mot-clé, la fonction sera toujours exécutée côtéclient.</p><blockquote><p>Le mot-clé <code>local</code> ne peut être utilisé qu'avec lesfonctions de classe du modèle de données. S'il est utilisé avec unefonction de <a href="#classes.html">classe utilisateurstandard</a>, il est ignoré et une erreur est retournée par lecompilateur.</p></blockquote><p>A noter que la fonction fonctionnera même si elle nécessited'accéder au serveur (par exemple si le cache ORDA est expiré).Toutefois, il est fortement recommandé de s'assurer que la fonctionlocale n'accède pas aux données sur le serveur, sinon l'exécutionlocale pourrait n'apporter aucun avantage en termes deperformances. Une fonction locale qui génère de nombreuses requêtesau serveur est moins efficace qu'une fonction exécutée sur leserveur qui ne retournerait que les valeurs résultantes. Prenonsl'exemple suivant, avec une fonction sur l'entité Schools :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// Obtenir les élèves les plus jeunes  </span><span class="hljs-comment">// Utilisation inappropriée du mot-clé local</span>local<span class="hljs-keyword"> Function</span> getYoungest<span class="hljs-keyword">    var</span> <span class="hljs-variable">$0 </span>: Object    <span class="hljs-variable">$0</span>:=<span class="hljs-literal">This</span>.students.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &gt;= :1"</span>; <span class="hljs-literal">!2000-01-01!</span>).<span class="hljs-function">orderBy</span>(<span class="hljs-string">"birthDate desc"</span>).<span class="hljs-function">slice</span>(<span class="hljs-number">0</span>; <span class="hljs-number">5</span>)</code></pre><ul><li><strong>sans</strong> le mot clé <code>local</code>, lerésultat est donné en une seule requête</li><li><strong>avec</strong> le mot-clé <code>local</code>, 4 requêtessont nécessaires : une pour obtenir les élèves de l'entité Schools,une pour la <code>query()</code>, une pour le<code>orderBy()</code> et une pour la <code>slice()</code>. Danscet exemple, l'utilisation du mot-clé <code>local</code> estinappropriée.</li></ul><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_exemples-3"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_exemples-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemples</h3><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_calcul-de-l%C3%A2ge"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_calcul-de-l%25C3%25A2ge"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Calcul de l'âge</h4><p>Considérons une entité avec un attribut <em>birthDate</em>. Noussouhaitons définir une fonction <code>age()</code> qui seraitappelée dans une list box. Cette fonction peut être exécutée sur leclient, ce qui évite de déclencher une requête au serveur pourchaque ligne de la list box.</p><p>Dans la classe <em>StudentsEntity</em> :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> Entity<span class="hljs-function">local Function age</span>() -&gt; <span class="hljs-variable">$age</span>: Variant<span class="hljs-keyword">If</span> (<span class="hljs-literal">This</span>.birthDate#<span class="hljs-literal">!00-00-00!</span>)    <span class="hljs-variable">$age</span>:=<span class="hljs-function">Year of</span>(Current date)-<span class="hljs-function">Year of</span>(<span class="hljs-literal">This</span>.birthDate)<span class="hljs-keyword">Else</span>     <span class="hljs-variable">$age</span>:=<span class="hljs-literal">Null</span><span class="hljs-keyword">End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="ordaClasses.html_v%C3%A9rification-des-attributs"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_v%25C3%25A9rification-des-attributs"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Vérification des attributs</h4><p>Nous souhaitons vérifier la cohérence des attributs d'une entitéchargée sur le client et mise à jour par l'utilisateur, avant dedemander au serveur de les enregistrer.</p><p>Sur la classe <em>StudentsEntity</em>, la fonction locale<code>checkData()</code> vérifie l'âge de l'étudiant :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Class extends</span> Entity<span class="hljs-function">local Function checkData</span>() -&gt; <span class="hljs-variable">$status </span>: Object<span class="hljs-variable">$status</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"success"</span>; <span class="hljs-literal">True</span>)<span class="hljs-keyword">Case of</span>    : (<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>()=<span class="hljs-literal">Null</span>)        <span class="hljs-variable">$status</span>.success:=<span class="hljs-literal">False</span>        <span class="hljs-variable">$status</span>.statusText:=<span class="hljs-string">"The birthdate is missing"</span>     :((<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>() &lt;<span class="hljs-number">15</span>) | (<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>()&gt;<span class="hljs-number">30</span>) )        <span class="hljs-variable">$status</span>.success:=<span class="hljs-literal">False</span>        <span class="hljs-variable">$status</span>.statusText:=<span class="hljs-string">"The student must be between 15 and 30 - This one is "</span>+<span class="hljs-function">String</span>(<span class="hljs-literal">This</span>.<span class="hljs-function">age</span>())<span class="hljs-keyword">End case</span></code></pre><p>Code d'appel :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-comment">//Form.student est chargé avec tous ses a attributs et mis à jour sur un Form</span><span class="hljs-variable">$status</span>:=Form.student.<span class="hljs-function">checkData</span>()<span class="hljs-keyword">If</span> (<span class="hljs-variable">$status</span>.success)    <span class="hljs-variable">$status</span>:=Form.student.<span class="hljs-function">save</span>() <span class="hljs-comment">// appelle le serveur</span><span class="hljs-keyword">End if</span></code></pre><h2><a aria-hidden="true" class="anchor" id="ordaClasses.html_prise-en-charge-en-ide-4d"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_prise-en-charge-en-ide-4d"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Prise en charge en IDE 4D</h2><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_fichiers-de-classe-class-files"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_fichiers-de-classe-class-files"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fichiers de classe (class files)</h3><p>Une classe utilisateur ORDA de modèle de données est définie enajoutant, au <a href="#ordaClasses.html_class-files">mêmeemplacement que les fichiers de classe usuels</a> (c'est-à-diredans le dossier <code>/Sources/Classes</code> du dossier projet),un fichier .4dm avec le nom de la classe. Par exemple, une classed'entité pour la dataclass <code>Utilities</code> sera définie viaun fichier <code>UtilitiesEntity.4dm</code>.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_cr%C3%A9er-des-classes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_cr%25C3%25A9er-des-classes"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Créer des classes</h3><p>4D crée préalablement et automatiquement des classes vides enmémoire pour chaque objet de modèle de données disponible.</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/ORDA_Classes-3.png" /></p><blockquote><p>Par défaut, les classes ORDA vides ne sont pas affichées dansl'Explorateur. Vous devez les afficher en sélectionnant<strong>Afficher toutes les dataclasses</strong> dans le menud'options de l'Explorateur : <img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/showClass.png" /></p></blockquote><p>Les classes d'utilisateurs ORDA ont une icône différente desautres classes. Les classes vides sont grisées :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/classORDA2.png" /></p><p>Pour créer un fichier de classe ORDA, il vous suffit dedouble-cliquer sur la classe prédéfinie correspondante dansl'Explorateur. 4D crée le fichier de classe et ajoute le code<code>extends</code>. Par exemple, pour une classe Entity :</p><pre><code class="hljs"><span class="hljs-class"><span class="hljs-keyword">Class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Entity</span></span></code></pre><p>Une fois qu'une classe est définie, son nom n'est plus grisédans l'Explorateur.</p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_modifier-des-classes"></a><a aria-hidden="true"class="hash-link" href="#ordaClasses.html_modifier-des-classes"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Modifier des classes</h3><p>Pour ouvrir une classe ORDA définie dans l'éditeur de méthode4D, sélectionnez ou double-cliquez sur un nom de classe ORDA etutilisez <strong>Editer...</strong> dans le menu contextuel/menud'options de la fenêtre d'Explorateur :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/classORDA4.png" /></p><p>Pour les classes ORDA basées sur le datastore local(<code>ds</code>), vous pouvez accéder directement au code de laclasse depuis la fenêtre de 4D Structure :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/classORDA5.png" /></p><h3><a aria-hidden="true" class="anchor" id="ordaClasses.html_%C3%A9diteur-de-m%C3%A9thode"></a><a aria-hidden="true" class="hash-link" href="#ordaClasses.html_%25C3%25A9diteur-de-m%25C3%25A9thode"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Éditeur de méthode</h3><p>Dans l'éditeur de méthode de 4D, les variables saisies comme uneclasse ORDA bénéficient automatiquement des fonctionnalitésd'auto-complétion. Exemple avec une variable de classe Entity :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/ORDA/AutoCompletionEntity.png" /></p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#dsmapping.html"><span class="arrow-prev">←</span> <span>ObjetsData Model</span></a><a class="docs-next button" href="#entities.html"><span>Travailler avec des données</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#ordaClasses.html_architecture">Architecture</a></li><li><a href="#ordaClasses.html_description-de-la-classe">Description de laclasse</a><ul class="toc-headings"><li><a href="#ordaClasses.html_classe-datastore">ClasseDataStore</a></li><li><a href="#ordaClasses.html_classe-dataclass">ClasseDataClass</a></li><li><a href="#ordaClasses.html_classe-entityselection">ClasseEntitySelection</a></li><li><a href="#ordaClasses.html_entity-class">Entity Class</a></li><li><a href="#ordaClasses.html_r%25C3%25A8gles-sp%25C3%25A9cifiques">Règlesspécifiques</a></li><li><a href="#ordaClasses.html_ex%25C3%25A9cution-pr%25C3%25A9emptive">Exécutionpréemptive</a></li></ul></li><li><a href="#ordaClasses.html_champs-calcul%25C3%25A9s-1">Champscalculés</a><ul class="toc-headings"><li><a href="#ordaClasses.html_aper%25C3%25A7u">Aperçu</a></li><li><a href="#ordaClasses.html_comment-d%25C3%25A9finir-les-champs-calcul%25C3%25A9s">Comment définir les champs calculés</a></li><li><a href="#ordaClasses.html_function-get-attributename"><code>Function get&lt;attributeName&gt;</code></a></li><li><a href="#ordaClasses.html_function-set-attributename"><code>Function set&lt;attributeName&gt;</code></a></li><li><a href="#ordaClasses.html_function-query-attributename"><code>Functionquery &lt;attributeName&gt;</code></a></li><li><a href="#ordaClasses.html_function-orderby-attributename"><code>FunctionorderBy &lt;attributeName&gt;</code></a></li></ul></li><li><a href="#ordaClasses.html_attributs-de-type-alias-1">Attributsde type alias</a><ul class="toc-headings"><li><a href="#ordaClasses.html_aper%25C3%25A7u-1">Aperçu</a></li><li><a href="#ordaClasses.html_how-to-define-alias-attributes">Howto define alias attributes</a></li><li><a href="#ordaClasses.html_alias-attributename-targetpath"><code>Alias&lt;attributeName&gt; &lt;targetPath&gt;</code></a></li><li><a href="#ordaClasses.html_using-alias-attributes">Using aliasattributes</a></li><li><a href="#ordaClasses.html_alias-properties">Aliasproperties</a></li><li><a href="#ordaClasses.html_exemples-2">Exemples</a></li></ul></li><li><a href="#ordaClasses.html_fonctions-expos%25C3%25A9es-et-non-expos%25C3%25A9es">Fonctions exposées et non exposées</a><ul class="toc-headings"><li><a href="#ordaClasses.html_exemple-6">Exemple</a></li></ul></li><li><a href="#ordaClasses.html_fonctions-locales">Fonctionslocales</a><ul class="toc-headings"><li><a href="#ordaClasses.html_exemples-3">Exemples</a></li></ul></li><li><a href="#ordaClasses.html_prise-en-charge-en-ide-4d">Prise encharge en IDE 4D</a><ul class="toc-headings"><li><a href="#ordaClasses.html_fichiers-de-classe-class-files">Fichiers declasse (class files)</a></li><li><a href="#ordaClasses.html_cr%25C3%25A9er-des-classes">Créerdes classes</a></li><li><a href="#ordaClasses.html_modifier-des-classes">Modifier desclasses</a></li><li><a href="#ordaClasses.html_%25C3%25A9diteur-de-m%25C3%25A9thode">Éditeur deméthode</a></li></ul></li></ul></nav></div></div></body></html>