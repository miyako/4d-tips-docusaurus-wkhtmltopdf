<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Structures répétitives (ou "boucles") · 4DDocumentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Les structures en boucle répètent une séquence d'instructions jusqu'à ce qu'une condition soit remplie ou qu'un certain nombre de fois est atteint."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Structures répétitives (ou &quot;boucles&quot;) · 4D Documentation"property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Les structures en boucle répètent une séquence d'instructions jusqu'à ce qu'une condition soit remplie ou qu'un certain nombre de fois est atteint."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#cf_looping.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Structuresrépétitives (ou "boucles")<a aria-hidden="true" class="anchor" id="looping.html"></a></h1></header><article><div><p><span>Les structures en boucle répètent une séquenced'instructions jusqu'à ce qu'une condition soit remplie ou qu'uncertain nombre de fois est atteint.</span></p><h2><span><a aria-hidden="true" class="anchor" id="looping.html_whileend-while"></a><a aria-hidden="true" class="hash-link" href="#looping.html_whileend-while"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>While...End while</span></h2><p><span>La syntaxe de la structure répétitive (ou boucle)<code>While...End while</code> est la suivante :</span></p><pre><span><code class="hljs css language-4d"><span class="hljs-keyword"> While</span>(Boolean_Expression)<span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword"> End while</span></code></span></pre><p>Une boucle <code>While...End while</code> exécute lesinstructions comprises entre <code>While</code> et <code>Endwhile</code> aussi longtemps que l’expression booléenne est TRUE.Elle teste l’expression booléenne initiale et n’entre pas dans laboucle (et donc n'exécute aucune instruction) si l’expression est àFALSE.</p><p>Les instructions <code>break</code> et <code>continue</code>sont <a href="#looping.html_break-and-continue">décritesci-dessous</a>.</p><p>Il est utile d’initialiser la valeur testée dans l’expressionbooléenne juste avant d’entrer dans la boucle <code>While...Endwhile</code>. Initialiser la valeur signifie lui affecter uncontenu approprié, généralement pour que l’expression booléennesoit TRUE et que le programme entre dans la boucle.</p><p>La valeur de l'expression booléenne doit pouvoir être modifiéepar un élément situé à l'intérieur de la boucle, sinon elles'exécutera indéfiniment. La boucle suivante est sans fin car<em>NeverStop</em> est toujours TRUE :</p><pre><code class="hljs css language-4d"> NeverStop:=<span class="hljs-literal">True</span><span class="hljs-keyword"> While</span>(NeverStop)<span class="hljs-keyword"> End while</span></code></pre><p>Si vous vous retrouvez dans une telle situation (où une méthodes'exécute de manière incontrôlée), vous pouvez utiliser lesfonctions de débogage de 4D et remonter à la source du problème.Pour plus d'informations sur ce point, reportez-vous à la section<a href="#error-handling.html">Débogueur</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_exemple"></a><a aria-hidden="true" class="hash-link"href="#looping.html_exemple"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h3><pre><code class="hljs css language-4d"><span class="hljs-function"> CONFIRM</span>(<span class="hljs-string">"Add a new record?"</span>) <span class="hljs-comment">//L'utilisateur souhaite-t-il ajouter un enregistrement ? //L'utilisateur souhaite-t-il ajouter un enregistrement ?</span><span class="hljs-keyword"> While</span>(OK=<span class="hljs-number">1</span>) <span class="hljs-comment">// Tant que l'utilisateur accepte</span><span class="hljs-function">    ADD RECORD</span>([aTable]) <span class="hljs-comment">// Ajouter un nouvel enregistrement</span><span class="hljs-keyword">End while</span> <span class="hljs-comment">// Une boucle While se termine toujours par End while</span></code></pre><p>Dans cet exemple, la valeur de la variable système<code>OK</code> est définie par la commande <code>CONFIRM</code>avant que le programme n’entre dans la boucle. Si l’utilisateurclique sur le bouton <strong>OK</strong> dans la boîte de dialoguede confirmation, la variable <code>OK</code> prend la valeur 1 etla boucle est exécutée. Dans le cas contraire, la variable<code>OK</code> prend la valeur 0 et la boucle est ignorée. Unefois que le programme entre dans la boucle, la commande <code>ADDRECORD</code> permet de continuer à l’exécuter car elle met lavariable système <code>OK</code> à 1 lorsque l’utilisateursauvegarde l’enregistrement. Lorsque l’utilisateur annule (nevalide pas) le dernier enregistrement, la variable système<code>OK</code> prend la valeur 0 et la boucle s’arrête.</p><h2><a aria-hidden="true" class="anchor" id="looping.html_repeatuntil"></a><a aria-hidden="true" class="hash-link" href="#looping.html_repeatuntil"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Repeat...Until</h2><p>La syntaxe de la structure répétitive (ou boucle)<code>Repeat...Until</code> est la suivante :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">Repeat</span><span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword">Until</span>(Boolean_Expression)</code></pre><p>La boucle <code>Repeat...Until</code> est semblable à la boucle<a href="#looping.html_whileend-while">While...End while</a>, à ladifférence qu’elle teste la valeur de l’expression booléenne aprèsl’exécution de la boucle et non avant. Ainsi, la boucle esttoujours exécutée au moins une fois, tandis que si l’expressionbooléenne est initialement à Faux, la boucle <code>While...Endwhile</code> ne s’exécute pas du tout.</p><p>L'autre particularité de la boucle <code>Repeat...Until</code>est qu’elle se poursuit jusqu’à ce que l’expression booléenne soità TRUE.</p><p>Les instructions <code>break</code> et <code>continue</code>sont <a href="#looping.html_break-and-continue">décritesci-dessous</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_exemple-1"></a><a aria-hidden="true" class="hash-link" href="#looping.html_exemple-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h3><p>Comparez l’exemple suivant avec celui de la boucle<code>While...End while</code>. Vous constatez qu’il n’est pasnécessaire d’initialiser l’expression booléenne — il n’y a pas decommande <code>CONFIRM</code> pour initialiser la variable<code>OK</code>.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> Repeat</span><span class="hljs-function">    ADD RECORD</span>([aTable])<span class="hljs-keyword"> Until</span>(OK=<span class="hljs-number">0</span>)</code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_forend-for"></a><a aria-hidden="true" class="hash-link" href="#looping.html_forend-for"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>For...End for</h2><p>La syntaxe de la structure répétitive <code>For...End for</code>est la suivante :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">For</span>(Counter_Variable;Start_Expression;End_Expression{;Increment_Expression})<span class="hljs-function">   statement</span>(s)    {break}      {continue}<span class="hljs-keyword">End for</span></code></pre><p>La structure <code>For...End for</code> est une boucle contrôléepar un compteur :</p><ul><li>La variable compteur <em>Counter_Variable</em> est une variablenumérique (Réel ou Entier long) initialisée par <code>For...Endfor</code> à la valeur spécifiée par<em>Start_Expression</em>.</li><li>La variable Variable_Compteur est incrémentée de la valeurspécifiée par le paramètre optionnel <em>Increment_Expression</em>à chaque fois que la boucle est exécutée. Si vous ne passez pas devaleur dans <em>Increment_Expression</em>, la variable compteur estincrémentée par défaut de un (1).</li><li>Lorsque le compteur atteint la valeur définie par<em>End_Expression</em>, la boucle s'arrête.</li></ul><p><strong>Important :</strong> Les expressions numériques<em>Start_Expression</em>, <em>End_Expression</em> et<em>Increment_Expression</em> sont évaluées une seule fois, audébut de la boucle. Si ces expressions sont des variables, leurmodification depuis l'intérieur de la boucle n'affectera pasl'exécution de la boucle.</p><p><strong>Astuce :</strong> En revanche, vous pouvez, si vous lesouhaitez, modifier la valeur de la variable<em>Counter_Variable</em> depuis l'intérieur de la boucle et celaaffectera l'exécution de la boucle.</p><ul><li>Généralement, <em>Start_Expression</em> est inférieure à<em>End_Expression</em>.</li><li>Si les deux expressions sont égales, la boucle ne sera exécutéequ'une fois.</li><li>Si <em>Start_Expression</em> est supérieure à<em>End_Expression</em>, la boucle ne s'exécutera pas du tout, àmoins que vous ne spécifiiez une <em>Increment_Expression</em>négative. Reportez-vous ci-dessous au paragraphe décrivant cepoint.</li></ul><p>Les instructions <code>break</code> et <code>continue</code>sont <a href="#looping.html_break-and-continue">décritesci-dessous</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_exemples-%C3%A9l%C3%A9mentaires"></a><a aria-hidden="true" class="hash-link" href="#looping.html_exemples-%25C3%25A9l%25C3%25A9mentaires"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemples élémentaires</h3><ol><li>La boucle suivante s'exécute 100 fois :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)  <span class="hljs-comment">//Faire quelque chose</span><span class="hljs-keyword"> End for</span></code></pre><ol start="2"><li>L'exemple suivant permet de traiter tous les éléments dutableau anArray :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray))  <span class="hljs-comment">//Faire quelque chose avec l'élément</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><ol start="3"><li>L'exemple suivant permet d'examiner chaque caractère du textevtSomeText :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlChar</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Length</span>(vtSomeText))  <span class="hljs-comment">//Faire quelque chose avec le caractère si c'est une tabulation</span><span class="hljs-keyword">    If</span>(<span class="hljs-function">Character code</span>(vtSomeText<span class="hljs-variable">[[$vlChar]]</span>)=Tab)  <span class="hljs-comment">//...</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><ol start="4"><li>L'exemple suivant permet de traiter tous les enregistrements dela sélection de la table [aTable] :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> FIRST RECORD</span>([aTable])<span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlRecord</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Records in selection</span>([aTable]))  <span class="hljs-comment">//Faire quelque chose avec chaque enregistrement</span><span class="hljs-function">    SEND RECORD</span>([aTable])  <span class="hljs-comment">//...</span>  <span class="hljs-comment">// Passer à l'enregistrement suivant</span><span class="hljs-function">    NEXT RECORD</span>([aTable])<span class="hljs-keyword"> End for</span></code></pre><p>La plupart des structures <code>For...End for</code> que vousécrirez dans vos projets ressembleront à celles présentéesci-dessus.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_d%C3%A9cr%C3%A9menter-la-variable-compteur"></a><a aria-hidden="true"class="hash-link" href="#looping.html_d%25C3%25A9cr%25C3%25A9menter-la-variable-compteur"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Décrémenter la variable Compteur</h3><p>Dans certains cas, vous pouvez souhaiter disposer d'une boucledont la valeur de la variable compteur décroît au lieu de croître.Pour cela, <em>Start_Expression</em> doit être supérieure à<em>End_Expression</em> et <em>Increment_Expression</em> doit êtrenégative. Les exemples suivants effectuent les mêmes tâches que lesprécédents, mais en sens inverse :</p><ol start="5"><li>La boucle suivante s'exécute 100 fois :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">100</span>;<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Faire quelque chose</span><span class="hljs-keyword"> End for</span></code></pre><ol start="6"><li>L'exemple suivant permet de traiter tous les éléments dutableau anArray :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-function">Size of array</span>(anArray);<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Faire quelque chose avec l'élément</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><ol start="7"><li>L'exemple suivant permet d'examiner chaque caractère du textevtSomeText :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlChar</span>;<span class="hljs-function">Length</span>(vtSomeText);<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Faire quelque chose avec le caractère si c'est une tabulation</span><span class="hljs-keyword">    If</span>(<span class="hljs-function">Character code</span>(vtSomeText<span class="hljs-variable">[[$vlChar]]</span>)=Tab)  <span class="hljs-comment">//...</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><ol start="8"><li>L'exemple suivant permet de traiter tous les enregistrements dela sélection de la table [aTable] :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> LAST RECORD</span>([aTable])<span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlRecord</span>;<span class="hljs-function">Records in selection</span>([aTable]);<span class="hljs-number">1</span>;<span class="hljs-number">-1</span>)  <span class="hljs-comment">//Faire quelque chose avec chaque enregistrement</span><span class="hljs-function">    SEND RECORD</span>([aTable])  <span class="hljs-comment">//...</span>  <span class="hljs-comment">//Passer à l'enregistrement précédent</span><span class="hljs-function">    PREVIOUS RECORD</span>([aTable])<span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_incrementer-la-variable-compteur-de-plus-de-1"></a><a aria-hidden="true"class="hash-link" href="#looping.html_incrementer-la-variable-compteur-de-plus-de-1"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Incrementer la variable compteur de plus de 1</h3><p>Si vous le souhaitez, vous pouvez passer dans<em>Increment_Expression</em> une valeur (positive ou négative)dont la valeur absolue est supérieure à un.</p><ol start="9"><li>La boucle suivante ne traite que les éléments pairs du tableauanArray :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">2</span>;<span class="hljs-function">Size of array</span>(anArray);<span class="hljs-number">2</span>)  <span class="hljs-comment">//Faire quelque chose avec l'élément 2,4...2n</span>    anArray{<span class="hljs-variable">$vlElem}</span>:=...<span class="hljs-keyword"> End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_comparaison-des-structures-r%C3%A9p%C3%A9titives"></a><a aria-hidden="true"class="hash-link" href="#looping.html_comparaison-des-structures-r%25C3%25A9p%25C3%25A9titives"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Comparaison des structures répétitives</h3><p>Revenons au premier exemple <code>For...End for</code>. Laboucle suivante s'exécute 100 fois :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)  <span class="hljs-comment">//Faire quelque chose</span><span class="hljs-keyword"> End for</span></code></pre><p>Il est intéressant d'examiner la manière dont les boucles<code>While...End while</code> et <code>Repeat...Until</code>effectuent la même action. Voici la boucle <code>While...Endwhile</code> équivalente :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$i </span>:=<span class="hljs-number">1</span> <span class="hljs-comment">// Initialisation du compteur</span><span class="hljs-keyword">While</span> (<span class="hljs-variable">$i</span>&lt;=<span class="hljs-number">100</span>) <span class="hljs-comment">// Boucle 100 fois</span>  <span class="hljs-comment">// Faire quelque chose</span>    <span class="hljs-variable">$i </span>:=<span class="hljs-variable">$i </span>+<span class="hljs-number">1</span> <span class="hljs-comment">// Il faut incrémenter le compteur</span><span class="hljs-keyword"> End while</span></code></pre><p>Voici la boucle <code>Repeat...Until</code> équivalente :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$i </span>:=<span class="hljs-number">1</span> <span class="hljs-comment">// Initialisation du compteur</span><span class="hljs-keyword"> Repeat</span>  <span class="hljs-comment">// Faire quelque chose</span>    <span class="hljs-variable">$i </span>:=<span class="hljs-variable">$i </span>+<span class="hljs-number">1</span> <span class="hljs-comment">// Il faut incrémenter le compteur</span><span class="hljs-keyword">Until</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">100</span>) <span class="hljs-comment">// Boucle 100 fois</span></code></pre><p><strong>Astuce :</strong> La boucle <code>For...End for</code>est généralement plus rapide que les boucles <code>While...Endwhile</code> et <code>Repeat...Until</code> car 4D teste lacondition en interne pour chaque cycle de la boucle et incrémentelui-même le compteur. Par conséquent, nous vous conseillons depréférer à chaque fois que c'est possible la structure<code>For...End for</code>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_optimiser-lex%C3%A9cution-de-forend-for"></a><a aria-hidden="true"class="hash-link" href="#looping.html_optimiser-lex%25C3%25A9cution-de-forend-for"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Optimiser l'exécution de For...End for</h3><p>Vous pouvez utiliser comme compteur une variable interprocess,process ou locale, et lui attribuer le type Réel, Entier ou Entierlong. Pour des boucles longues, et particulièrement en modecompilé, nous vous conseillons d'employer des variables locales detype Entier long.</p><ol start="10"><li>Voici un exemple :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> C_LONGINT</span>(<span class="hljs-variable">$vlCounter</span>) <span class="hljs-comment">// Utilisons une variable locale de type Entier long</span><span class="hljs-keyword">For</span>(<span class="hljs-variable">$vlCounter</span>;<span class="hljs-number">1</span>;<span class="hljs-number">10000</span>)  <span class="hljs-comment">// Faire quelque chose</span><span class="hljs-keyword">  End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_structures-forend-for-embo%C3%AEt%C3%A9es"></a><a aria-hidden="true"class="hash-link" href="#looping.html_structures-forend-for-embo%25C3%25AEt%25C3%25A9es"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Structures For...End for emboîtées</h3><p>Vous pouvez emboîter autant de structures répétitives que vousvoulez (dans les limites du raisonnable). Cela s'applique auxstructures de type <code>For...End for</code>. Il y a dans ce casune erreur courante à éviter : assurez-vous d'utiliser une variablecompteur différente par structure de boucle.</p><p>Voici deux exemples :</p><ol><li>L'exemple suivant permet de traiter tous les éléments d'untableau à deux dimensions :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray))  <span class="hljs-comment">//...</span>  <span class="hljs-comment">// Faire quelque chose avec la ligne</span>  <span class="hljs-comment">// ...</span><span class="hljs-keyword">    For</span>(<span class="hljs-variable">$vlSubElem</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Size of array</span>(anArray{<span class="hljs-variable">$vlElem}</span>))  <span class="hljs-comment">//Faire quelque chose avec l'élément</span>       anArray{<span class="hljs-variable">$vlElem}{</span><span class="hljs-variable">$vlSubElem}</span>:=...<span class="hljs-keyword">    End for</span><span class="hljs-keyword"> End for</span></code></pre><ol start="2"><li>L'exemple suivant construit un tableau de pointeurs vers tousles champs de type Date présents dans la base :</li></ol><pre><code class="hljs css language-4d"><span class="hljs-function"> ARRAY POINTER</span>(<span class="hljs-variable">$apDateFields</span>;<span class="hljs-number">0</span>) <span class="hljs-variable">$vlElem</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-number">1</span>;Get last table number)<span class="hljs-keyword">    If</span>(<span class="hljs-function">Is table number valid</span>(<span class="hljs-variable">$vlTable</span>))<span class="hljs-keyword">       For</span>(<span class="hljs-variable">$vlField</span>;<span class="hljs-number">1</span>;<span class="hljs-function">Get last field number</span>(<span class="hljs-variable">$vlTable</span>))<span class="hljs-keyword">          If</span>(<span class="hljs-function">Is field number valid</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-variable">$vlField</span>))             <span class="hljs-variable">$vpField</span>:=<span class="hljs-function">Field</span>(<span class="hljs-variable">$vlTable</span>;<span class="hljs-variable">$vlField</span>)<span class="hljs-keyword">             If</span>(<span class="hljs-function">Type</span>(<span class="hljs-variable">$vpField</span>-&gt;)=Is date)                <span class="hljs-variable">$vlElem</span>:=<span class="hljs-variable">$vlElem</span>+<span class="hljs-number">1</span><span class="hljs-function">                INSERT IN ARRAY</span>(<span class="hljs-variable">$apDateFields</span>;<span class="hljs-variable">$vlElem</span>)                <span class="hljs-variable">$apDateFields{</span><span class="hljs-variable">$vlElem}</span>:=<span class="hljs-variable">$vpField</span><span class="hljs-keyword">             End if</span><span class="hljs-keyword">          End if</span><span class="hljs-keyword">       End for</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for</span></code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_for-eachend-for-each"></a><a aria-hidden="true"class="hash-link" href="#looping.html_for-eachend-for-each"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>For each...End for each</h2><p>La syntaxe de la structure répétitive (ou boucle) <code>Foreach...End for each</code> est la suivante :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For each</span>(Current_Item;Expression{;begin{;end}}){<span class="hljs-keyword">Until</span>|<span class="hljs-keyword">While</span>}(Boolean_Expression)}<span class="hljs-function">    statement</span>(s)    {break}      {continue}<span class="hljs-keyword"> End for each</span></code></pre><p>La structure <code>For each...End for each</code> exécute lecycle d'instructions définies pour chaque <em>Elément_courant</em>de <em>Expression</em>. Le type de <em>Elément_courant</em> dépenddu type de <em>Expression</em>. La boucle <code>For each...End foreach</code> peut itérer parmi trois types d'<em>Expression</em>:</p><ul><li>collections : boucle sur chaque élément de la collection,</li><li>entity selections : boucle sur chaque entity,</li><li>objets : boucle sur chaque propriété d'objet.</li></ul><p>Le tableau suivant compare les trois types de <code>Pourchaque...Fin de chaque</code> :</p><table><thead><tr><th></th><th>Boucle sur collections</th><th>Boucle sur entity selections</th><th>Boucle sur objets</th></tr></thead><tbody><tr><td>Type Elément_courant</td><td>Variable du même type que les éléments de la collection</td><td>Entity</td><td>Variable texte</td></tr><tr><td>Types d’expressions</td><td>Collection (avec des éléments du même type)</td><td>Entity selection</td><td>Object</td></tr><tr><td>Nombre de boucles (par défaut)</td><td>Nombre d'éléments de la collection</td><td>Nombre d'entités dans la sélection</td><td>Nombre de propriétés d'objets</td></tr><tr><td>Prise en charge de Paramètres début / fin</td><td>Oui</td><td>Oui</td><td>Non</td></tr></tbody></table><ul><li>Le nombre de boucles est évalué au démarrage et ne changera pasen cours de traitement. L'ajout ou la suppression d'élémentspendant la boucle est donc déconseillé car il pourra en résulterune redondance ou un manque d'itérations.</li><li>Par défaut, les <em>instructions</em> incluses sont exécutéespour chaque valeur de <em>Expression</em>. Il est toutefoispossible de sortir de la boucle en testant une condition soit audébut de chaque itération (<code>While</code>) ou à la fin dechaque itération (<code>Until</code>).</li><li>Les paramètres optionnels <em>début</em> et <em>fin</em>peuvent être utilisés avec les collections et les entity selectionsafin de définir des bornes pour la boucle.</li><li>La boucle <code>For each...End for each</code> peut êtreutilisée sur une <strong>collection partagée</strong> ou un<strong>objet partagé</strong>. Si vous souhaitez modifier un ouplusieurs éléments des propriétés d'objets ou de la collection dansle code, vous devez utiliser les mots-clés <code>Use...Enduse</code>. Vous pouvez, si vous le souhaitez, appeler lesmots-clés <code>Use...End use</code> :<ul><li>avant de saisir la boucle, si les éléments doivent êtremodifiés ensemble pour des raisons d'intégrité, ou bien</li><li>dans la boucle, lorsque quelques éléments/propriétés seulementdoivent être modifiés et qu'aucune gestion de l'intégrité n'estrequise.</li></ul></li></ul><p>Les instructions <code>break</code> et <code>continue</code>sont <a href="#looping.html_break-and-continue">décritesci-dessous</a>.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_boucle-sur-collections"></a><a aria-hidden="true"class="hash-link" href="#looping.html_boucle-sur-collections"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Boucle sur collections</h3><p>Lorsque <code>For each...End for each</code> est utilisée avecune <em>Expression</em> de type <em>Collection</em>, le paramètre<em>Elément_courant</em> est une variable du même type que leséléments de la collection. Par défaut, le nombre de boucles estbasé sur le nombre d'éléments de la collection.</p><p>La collection doit contenir uniquement des éléments du mêmetype. Dans le cas contraire, une erreur sera retournée dès que lapremière valeur de type différent sera assignée à la variable<em>Elément_courant</em>.</p><p>A chaque itération de la boucle, la variable<em>Elément_courant</em> reçoit automatiquement l'élémentcorrespondant de la collection. Vous devez tenir compte des pointssuivants :</p><ul><li>La variable <em>Elément_courant</em> doit être du même type queles éléments de la collection. Si un seul élément de la collectionn'est pas du même type que la variable, une erreur est générée etla boucle s'arrête.</li><li>Si la variable <em>Elément_courant</em> est de type objet oucollection (i.e. Si un seul élément de la collection n'est pas dumême type que la variable, une erreur est générée et la boucles'arrête.</li><li>Si la collection contient des éléments de valeur<strong>Null</strong>, une erreur sera générée si le type de lavariable <em>Elément_courant</em> ne prend pas en charge la valeur<strong>Null</strong> (comme par exemple les variables entierlong).</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_exemple-2"></a><a aria-hidden="true" class="hash-link" href="#looping.html_exemple-2"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Vous souhaitez calculer quelques statistiques sur une collectionde nombres :</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_COLLECTION</span>(<span class="hljs-variable">$nums</span>) <span class="hljs-variable">$nums</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">10</span>;<span class="hljs-number">5001</span>;<span class="hljs-number">6665</span>;<span class="hljs-number">33</span>;<span class="hljs-number">1</span>;<span class="hljs-number">42</span>;<span class="hljs-number">7850</span>)<span class="hljs-function"> C_LONGINT</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$vEven</span>;<span class="hljs-variable">$vOdd</span>;<span class="hljs-variable">$vUnder</span>;<span class="hljs-variable">$vOver</span>)<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$nums</span>)<span class="hljs-keyword">    If</span>(<span class="hljs-variable">$item</span>%<span class="hljs-number">2</span>=<span class="hljs-number">0</span>)       <span class="hljs-variable">$vEven</span>:=<span class="hljs-variable">$vEven</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    Else</span>       <span class="hljs-variable">$vOdd</span>:=<span class="hljs-variable">$vOdd</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword">    Case of</span>       :(<span class="hljs-variable">$item</span>&lt;<span class="hljs-number">5000</span>)          <span class="hljs-variable">$vUnder</span>:=<span class="hljs-variable">$vUnder</span>+<span class="hljs-number">1</span>       :(<span class="hljs-variable">$item</span>&gt;<span class="hljs-number">6000</span>)          <span class="hljs-variable">$vOver</span>:=<span class="hljs-variable">$vOver</span>+<span class="hljs-number">1</span><span class="hljs-keyword">    End case</span><span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$vEven=3, $vOdd=4</span>  <span class="hljs-comment">//$vUnder=4,$vOver=2</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_boucle-sur-entity-selections"></a><a aria-hidden="true" class="hash-link" href="#looping.html_boucle-sur-entity-selections"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Boucle sur entity selections</h3><p>Lorsque <code>For each...End for each</code> est utilisée avecune <em>Expression</em> de type <em>Entity selection</em>, leparamètre <em>Elément_courant</em> contient l'entity en cours detraitement.</p><p>Le nombre de boucles est basé sur le nombre d'entities présentesdans l'entity selection. A chaque itération de la boucle, leparamètre <em>Elément_courant</em> reçoit automatiquement l'entityqui est en cours de traitement.</p><p><strong>Note :</strong> Si l'entity selection contient uneentity qui a été supprimée entre-temps par un autre process, elleest automatiquement ignorée durant la boucle.</p><p>N'oubliez pas que toute modification effectuée sur l'entity encours de traitement doit être explicitement sauvegardée (sinécessaire) à l'aide de la méthode <code>entity.save( )</code>.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_exemple-3"></a><a aria-hidden="true" class="hash-link" href="#looping.html_exemple-3"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Vous souhaitez augmenter le salaire de tous les employésbritanniques dans une entity selection :</p><pre><code class="hljs css language-4d"><span class="hljs-function"> C_OBJECT</span>(emp)<span class="hljs-keyword"> For each</span>(emp;ds.Employees.<span class="hljs-function">query</span>(<span class="hljs-string">"country='UK'"</span>))    emp.salary:=emp.salary*<span class="hljs-number">1</span>,<span class="hljs-number">03</span>    emp.<span class="hljs-function">save</span>()<span class="hljs-keyword"> End for each</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_boucles-sur-des-propri%C3%A9t%C3%A9s-dobjets"></a><a aria-hidden="true"class="hash-link" href="#looping.html_boucles-sur-des-propri%25C3%25A9t%25C3%25A9s-dobjets"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Boucles sur des propriétés d'objets</h3><p>Lorsque <code>For each...End for each</code> est utilisée avecune <em>Expression</em> de type Objet, le paramètre<em>Elément_courant</em> est une variable texte qui reçoitautomatiquement le nom de la propriété en cours de traitement.</p><p>Les propriétés de l'objet sont itérées en fonction de leur ordrede création. Pendant la boucle, il est possible d'ajouter ou desupprimer des propriétés dans l'objet, sans pour autant modifier lenombre de boucles qui reste basé sur le nombre de propriétésinitial de l'objet.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_exemple-4"></a><a aria-hidden="true" class="hash-link" href="#looping.html_exemple-4"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Vous souhaitez passer en majuscules les propriétés contenant desnoms dans l'objet suivant :</p><pre><code class="hljs css language-4d">{    <span class="hljs-string">"firstname"</span>: <span class="hljs-string">"gregory"</span>,    <span class="hljs-string">"lastname"</span>: <span class="hljs-string">"badikora"</span>,    <span class="hljs-string">"age"</span>: <span class="hljs-number">20</span>}</code></pre><p>Vous pouvez écrire :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> For each</span>(property;vObject)<span class="hljs-keyword">    If</span>(<span class="hljs-function">Value type</span>(vObject[property])=Is text)       vObject[property]:=<span class="hljs-function">Uppercase</span>(vObject[property])<span class="hljs-keyword">    End if</span><span class="hljs-keyword"> End for each</span></code></pre><pre><code class="hljs">{    <span class="hljs-attr">"firstname"</span>: <span class="hljs-string">"GREGORY"</span>,    <span class="hljs-attr">"lastname"</span>: <span class="hljs-string">"BADIKORA"</span>,    <span class="hljs-attr">"age"</span>: <span class="hljs-number">20</span>}</code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_param%C3%A8tres-d%C3%A9but--fin"></a><a aria-hidden="true" class="hash-link" href="#looping.html_param%25C3%25A8tres-d%25C3%25A9but--fin"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Paramètres début / fin</h3><p>Vous pouvez définir des bornes pour l'itération à l'aide desparamètres optionnels début et fin.</p><p><strong>Note :</strong> Les paramètres <em>début</em> et<em>fin</em> sont utilisables uniquement avec les boucles sur descollections et des entity selections (ils sont ignorés avec lesboucles sur des propriétés d'objets).</p><ul><li>Dans le paramètre <em>début</em>, passez la position del'élément de <em>Expression</em> auquel démarrer l'itération(<em>début</em> est inclus).</li><li>Dans le paramètre <em>fin</em>, vous pouvez passer la positionde l'élément de <em>Expression</em> auquel stopper l'itération(<em>fin</em> est exclus).</li></ul><p>Si <em>fin</em> est omis ou si <em>fin</em> est plus grand quele nombre d'éléments de <em>Expression</em>, les éléments sontitérés depuis <em>début</em> jusqu'au dernier inclus. Si lesparamètres <em>début</em> et <em>fin</em> sont des valeurspositives, ils représentent des positions d'éléments dans<em>Expression</em>. Si <em>begin</em> est une valeur négative,elle est recalculée comme <code>begin:=begin+Tailleexpression</code> (elle est considérée comme un décalage à partirde la fin de <em>Expression</em>). Si la valeur calculée estnégative, <em>begin</em> prend la valeur 0. <strong>Note :</strong>Même si début est une valeur négative, l'itération est toujourseffectuée dans le même ordre. Si <em>fin</em> est une valeurnégative, elle est recalculée comme <code>fin:=fin+Tailleexpression</code></p><p>Par exemple :</p><ul><li>une collection contient 10 éléments (numérotés de 0 à 9)</li><li>début=-4 &gt; début=-4+10=6 &gt; l'itération démarre au 6eélément (numéro 5)</li><li>fin=-2 &gt; fin=-2+10=8 &gt; l'itération stoppe avant le 8eélément (numéro 7), i.e.</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_exemple-5"></a><a aria-hidden="true" class="hash-link" href="#looping.html_exemple-5"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-function"> C_COLLECTION</span>(<span class="hljs-variable">$col</span>;<span class="hljs-variable">$col2</span>) <span class="hljs-variable">$col</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-string">"a"</span>;<span class="hljs-string">"b"</span>;<span class="hljs-string">"c"</span>;<span class="hljs-string">"d"</span>;<span class="hljs-string">"e"</span>) <span class="hljs-variable">$col2</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">1</span>;<span class="hljs-number">2</span>;<span class="hljs-number">3</span>)<span class="hljs-function"> C_TEXT</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$col</span>;<span class="hljs-number">0</span>;<span class="hljs-number">3</span>)    <span class="hljs-variable">$col2</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$col2=[1,2,3,"a","b","c"]</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$item</span>;<span class="hljs-variable">$col</span>;<span class="hljs-number">-2</span>;<span class="hljs-number">-1</span>)    <span class="hljs-variable">$col2</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$item</span>)<span class="hljs-keyword"> End for each</span>  <span class="hljs-comment">//$col2=[1,2,3,"a","b","c","d"]</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_conditions-until-et-while"></a><a aria-hidden="true"class="hash-link" href="#looping.html_conditions-until-et-while"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Conditions Until et While</h3><p>Vous pouvez contrôler l'exécution de <code>For each...End foreach</code> en ajoutant une condition <code>Jusque</code> ou<code>Tant que</code> à la boucle. Lorsqu'une instruction<code>Until(condition)</code> est associée à la boucle, l'itérationstoppe dès que la condition est évaluée à <code>True</code>, tandisque dans le cas d'une instruction <code>While(condition)</code>,l'itération stoppe dès que la condition est évaluée à<code>False</code>.</p><p>Vous pouvez passer un mot-clé ou l'autre en fonction de vosbesoins :</p><ul><li>La condition <code>Until</code> est testée à la fin de chaqueitération, donc si <em>Expression</em> n'est ni vide ni Null, laboucle sera exécutée au moins une fois.</li><li>La condition <code>While</code> est testée au début de chaqueitération, donc en fonction du résultat de la condition, la bouclepeut ne pas être exécutée du tout.</li></ul><h4><a aria-hidden="true" class="anchor" id="looping.html_exemple-6"></a><a aria-hidden="true" class="hash-link" href="#looping.html_exemple-6"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"> <span class="hljs-variable">$colNum</span>:=<span class="hljs-function">New collection</span>(<span class="hljs-number">1</span>;<span class="hljs-number">2</span>;<span class="hljs-number">3</span>;<span class="hljs-number">4</span>;<span class="hljs-number">5</span>;<span class="hljs-number">6</span>;<span class="hljs-number">7</span>;<span class="hljs-number">8</span>;<span class="hljs-number">9</span>;<span class="hljs-number">10</span>) <span class="hljs-variable">$total</span>:=<span class="hljs-number">0</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$num</span>;<span class="hljs-variable">$colNum</span>)<span class="hljs-keyword">While</span>(<span class="hljs-variable">$total</span>&lt;<span class="hljs-number">30</span>) <span class="hljs-comment">//testé au début    $total:=$total+$num</span><span class="hljs-keyword"> End for each</span><span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$total</span>)) <span class="hljs-comment">//$total = 36 (1+2+3+4+5+6+7+8)</span> <span class="hljs-variable">$total</span>:=<span class="hljs-number">1000</span><span class="hljs-keyword"> For each</span>(<span class="hljs-variable">$num</span>;<span class="hljs-variable">$colNum</span>)<span class="hljs-keyword">Until</span>(<span class="hljs-variable">$total</span>&gt;<span class="hljs-number">30</span>) <span class="hljs-comment">//testé à la fin</span>    <span class="hljs-variable">$total</span>:=<span class="hljs-variable">$total</span>+<span class="hljs-variable">$num</span><span class="hljs-keyword"> End for each</span><span class="hljs-function"> ALERT</span>(<span class="hljs-function">String</span>(<span class="hljs-variable">$total</span>)) <span class="hljs-comment">//$total = 1001 (1000+1)</span></code></pre><h2><a aria-hidden="true" class="anchor" id="looping.html_break-et-continue"></a><a aria-hidden="true" class="hash-link" href="#looping.html_break-et-continue"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a><code>break</code> et <code>continue</code></h2><p>Toutes les structures de boucles ci-dessus prennent en chargeles instructions <code>break</code> et <code>continue</code>. Cesinstructions vous donnent plus de contrôle sur les boucles en vouspermettant de sortir de la boucle et de contourner, à tout moment,l'itération en cours.</p><h3><a aria-hidden="true" class="anchor" id="looping.html_break"></a><a aria-hidden="true" class="hash-link"href="#looping.html_break"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>break</h3><p>L'instruction <code>break</code> met fin à la boucle qui lacontient. Le contrôle du programme passe à l'instruction situéeimmédiatement après le corps de la boucle.</p><p>Si l'instruction <code>break</code> se trouve à l'intérieurd'une <a href="#looping.html_nested-forend-for-looping-structures">boucleimbriquée</a> (boucle dans une autre boucle), l'instruction<code>break</code> mettra fin à la boucle la plus interne.</p><h4><a aria-hidden="true" class="anchor" id="looping.html_exemple-7"></a><a aria-hidden="true" class="hash-link" href="#looping.html_exemple-7"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">For</span> (vCounter;<span class="hljs-number">1</span>;<span class="hljs-number">100</span>)<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$tab{vCounter}</span>=<span class="hljs-string">""</span>) <span class="hljs-comment">//si une condition devient vraie</span>        break <span class="hljs-comment">//fin de la boucle For</span><span class="hljs-keyword">    End if</span><span class="hljs-keyword">End for</span></code></pre><h3><a aria-hidden="true" class="anchor" id="looping.html_continue"></a><a aria-hidden="true" class="hash-link"href="#looping.html_continue"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>continue</h3><p>L'instruction <code>continue</code> met fin à l'exécution desinstructions de l'itération de la boucle courante, et poursuitl'exécution de la boucle à l'itération suivante.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-keyword">For</span> (<span class="hljs-variable">$i</span>; <span class="hljs-number">0</span>; <span class="hljs-number">9</span>)<span class="hljs-keyword">    If</span> (<span class="hljs-variable">$i</span>=<span class="hljs-number">3</span>)        continue <span class="hljs-comment">//traite directement l'itération suivante</span><span class="hljs-keyword">    End if</span>    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$text</span>+<span class="hljs-function">String</span>(<span class="hljs-variable">$i</span>)<span class="hljs-keyword">End for</span><span class="hljs-comment">// $text="012456789" </span></code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#branching.html"><span class="arrow-prev">←</span><span>Structures conditionnelles</span></a><a class="docs-next button" href="#error-handling.html"><span>Gestion deserreurs</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#looping.html_whileend-while">While...End while</a><ul class="toc-headings"><li><a href="#looping.html_exemple">Exemple</a></li></ul></li><li><a href="#looping.html_repeatuntil">Repeat...Until</a><ul class="toc-headings"><li><a href="#looping.html_exemple-1">Exemple</a></li></ul></li><li><a href="#looping.html_forend-for">For...End for</a><ul class="toc-headings"><li><a href="#looping.html_exemples-%25C3%25A9l%25C3%25A9mentaires">Exemplesélémentaires</a></li><li><a href="#looping.html_d%25C3%25A9cr%25C3%25A9menter-la-variable-compteur">Décrémenterla variable Compteur</a></li><li><a href="#looping.html_incrementer-la-variable-compteur-de-plus-de-1">Incrementerla variable compteur de plus de 1</a></li><li><a href="#looping.html_comparaison-des-structures-r%25C3%25A9p%25C3%25A9titives">Comparaison des structures répétitives</a></li><li><a href="#looping.html_optimiser-lex%25C3%25A9cution-de-forend-for">Optimiserl'exécution de For...End for</a></li><li><a href="#looping.html_structures-forend-for-embo%25C3%25AEt%25C3%25A9es">StructuresFor...End for emboîtées</a></li></ul></li><li><a href="#looping.html_for-eachend-for-each">For each...End foreach</a><ul class="toc-headings"><li><a href="#looping.html_boucle-sur-collections">Boucle surcollections</a></li><li><a href="#looping.html_boucle-sur-entity-selections">Boucle surentity selections</a></li><li><a href="#looping.html_boucles-sur-des-propri%25C3%25A9t%25C3%25A9s-dobjets">Boucles sur des propriétés d'objets</a></li><li><a href="#looping.html_param%25C3%25A8tres-d%25C3%25A9but--fin">Paramètresdébut / fin</a></li><li><a href="#looping.html_conditions-until-et-while">ConditionsUntil et While</a></li></ul></li><li><a href="#looping.html_break-et-continue"><code>break</code> et<code>continue</code></a><ul class="toc-headings"><li><a href="#looping.html_break">break</a></li><li><a href="#looping.html_continue">continue</a></li></ul></li></ul></nav></div></div></body></html>