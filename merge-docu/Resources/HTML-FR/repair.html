<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Page Réparation · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Cette page permet de réparer le fichier de données ou le fichier de structure lorsqu’il a été endommagé. Generally, you will only use these functions under the supervision of 4D technical teams, when anomalies have been detected while opening the application or following a [verification](/docs/Rx/fr/MSC/verify.html)."name="description" /><meta content="fr" name="docsearch:language" /><meta content="Page Réparation · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Cette page permet de réparer le fichier de données ou le fichier de structure lorsqu’il a été endommagé. Generally, you will only use these functions under the supervision of 4D technical teams, when anomalies have been detected while opening the application or following a [verification](/docs/Rx/fr/MSC/verify.html)."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#repair.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">PageRéparation<a aria-hidden="true" class="anchor" id="repair.html"></a></h1></header><article><div><p><span>Cette page permet de réparer le fichier de données ou lefichier de structure lorsqu’il a été endommagé. Generally, you willonly use these functions under the supervision of 4D technicalteams, when anomalies have been detected while opening theapplication or following a <a href="#verify.html">verification</a>.</span></p><p><span><strong>Attention :</strong> Chaque réparation entraîne laduplication du fichier d’origine et donc l’augmentation de lataille du dossier de l’application. Il est important de prendrecela en considération (notamment sous macOS, où les applications 4Dapparaissent sous forme de paquet) afin de ne pas augmenterexcessivement la taille de l'application. Une intervention manuelleà l’intérieur du package peut être utile afin de supprimer lescopies des fichiers d’origine.</span></p><blockquote><p><span>La réparation n’est disponible qu’en mode maintenance. Sivous tentez d’effectuer cette opération en mode standard, une boîtede dialogue d’alerte vous prévient que l'application va être ferméepuis relancée en mode maintenance. Lorsque la base est chiffrée, laréparation des données comprend le déchiffrage et le chiffrage etnécessite ainsi la clé de chiffrement de données courante. Siaucune clé de chiffrement valide n'a déjà été fournie, une boite dedialogue s'affiche pour demander pour demander le mot de passe oula clé de chiffrement (voir Page Chiffrement).</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="repair.html_fichiers"></a><a aria-hidden="true" class="hash-link"href="#repair.html_fichiers"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fichiers</span></h2><h3><span><a aria-hidden="true" class="anchor" id="repair.html_fichier-de-donn%C3%A9es-%C3%A0-r%C3%A9parer"></a><a aria-hidden="true"class="hash-link" href="#repair.html_fichier-de-donn%25C3%25A9es-%25C3%25A0-r%25C3%25A9parer"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fichier de données à réparer</span></h3><p><span>Chemin d’accès du fichier de données courant. Le bouton<strong>[...]</strong> permet de désigner un autre fichier dedonnées. Lorsque vous cliquez sur ce bouton, une boîte de dialoguestandard d’ouverture de documents s’affiche, vous permettant dedésigner le fichier de données à réparer. Une fois cette boîte dedialogue validée, le chemin d’accès du fichier à réparer estindiqué dans la fenêtre. Si vous effectuez une réparation par<a href="#repair.html_r%25C3%25A9paration-par-en-t%25C3%25AAtes-denregistrements">réparation par en-têtes d'enregistrements</a>, vous pouvezsélectionner tout fichier de données. Une fois cette boîte dedialogue validée, le chemin d’accès du fichier à réparer estindiqué dans la fenêtre.</span></p><h3><span><a aria-hidden="true" class="anchor" id="repair.html_dossier-de-sauvegarde"></a><a aria-hidden="true"class="hash-link" href="#repair.html_dossier-de-sauvegarde"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Dossier de sauvegarde</span></h3><p><span>Par défaut, le fichier de données original sera dupliquéavant réparation. Il sera placé dans un sous-dossier libellé“Replaced files (repairing)” dans le dossier de l'application. Lesecond bouton <strong>[...]</strong> permet de désigner un autreemplacement pour les sauvegardes des fichiers originaux effectuéesavant réparation. Cette option permet notamment de réparer desfichiers volumineux en utilisant différents disques.</span></p><h3><span><a aria-hidden="true" class="anchor" id="repair.html_fichiers-r%C3%A9par%C3%A9s"></a><a aria-hidden="true"class="hash-link" href="#repair.html_fichiers-r%25C3%25A9par%25C3%25A9s"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Fichiers réparés</span></h3><p><span>4D crée un nouveau fichier de données vide à l’emplacementdu fichier d’origine. Le fichier d’origine est déplacé dans ledossier nommé "\Replaced Files (Repairing) date heure" dontl’emplacement a été défini dans la zone de "Dossier de sauvegarde"(dossier de l'application par défaut). Le fichier vide est rempliavec les données récupérées.</span></p><h2><span><a aria-hidden="true" class="anchor" id="repair.html_r%C3%A9paration-standard"></a><a aria-hidden="true"class="hash-link" href="#repair.html_r%25C3%25A9paration-standard"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Réparation standard</span></h2><p><span>La réparation standard permet de réparer des données danslesquelles seuls quelques enregistrements ou index sont endommagés(les tables d'adresses sont intactes). Les données sont compactéeset réparées. A noter que ce type de réparation ne peut êtreeffectué que si le fichier de données et le fichier de structurecorrespondent.</span></p><p><span>A l’issue de la procédure, la page "Réparation" du CSM estaffichée. Un message indique si la réparation a été effectuée avecsuccès. Dans ce cas, vous pouvez immédiatement ouvrirl'application. <img alt="" src="https://developer.4d.com/docs/Rx/assets/fr/MSC/MSC_RepairOK.png" /></span></p><h2><span><a aria-hidden="true" class="anchor" id="repair.html_r%C3%A9paration-par-en-t%C3%AAtes-denregistrements"></a><a aria-hidden="true"class="hash-link" href="#repair.html_r%25C3%25A9paration-par-en-t%25C3%25AAtes-denregistrements"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Réparation par en-têtes d'enregistrements</span></h2><p><span>Cette option de réparation de bas niveau est à utiliseruniquement dans le cas où le fichier de données a été fortementendommagé et une fois que toutes les autres solutions (restitutionde sauvegarde, réparation standard) se sont avéréesinefficaces.</span></p><p><span>Les enregistrements de 4D sont de taille variable : il estdonc nécessaire, pour les retrouver, de conserver dans une tablespéciale l’endroit où ils sont stockés sur votre disque. Leprogramme accède donc à l’adresse de l’enregistrement parl’intermédiaire d’un index et d’une table d’adresses. Si seuls desenregistrements ou des index sont endommagés, l’option deréparation standard suffira généralement pour résoudre le problème.C’est lorsque la table d’adresses est touchée qu’il faudra en venirà une récupération plus sophistiquée, puisqu’il faut lareconstituer. Pour réaliser cette opération, le CSM utilise lemarqueur qui se trouve en en-tête de chaque enregistrement. Lesmarqueurs peuvent être comparés à des résumés des enregistrements,comportant l’essentiel de leurs informations, et à partir desquelsune reconstitution de la table d’adresses est possible.</span></p><blockquote><p><span>Si tous les enregistrements et toutes les tables ont étéattribués, seule la zone principale est affichée.</span></p><p><span>La récupération par en-têtes ne tient pas compte deséventuelles contraintes d’intégrité. En particulier, à l’issue decette opération, vous pouvez obtenir des valeurs dupliquées avecdes champs uniques ou des valeurs NULL avec des champs déclarés<strong>non NULL</strong>.</span></p></blockquote><p><span>Lorsque vous cliquez sur le bouton<strong>Réparer</strong>, 4D effectue une analyse complète dufichier de données. A l’issue de cette analyse, le résultat estaffiché dans la fenêtre suivante :</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/fr/MSC/mscrepair2.png" /></span></p><blockquote><p><span>Si tous les enregistrements et toutes les tables ont étéattribués, seule la zone principale est affichée.</span></p></blockquote><p><span>La zone "Enregistrements trouvés dans le fichier dedonnées" comporte deux tableaux synthétisant les informationsissues de l’analyse du fichier de données.</span></p><ul><li><p><span>Le premier tableau liste les informations issues del’analyse du fichier de données. Chaque ligne représente un grouped’enregistrements récupérables dans le fichier de données:</span></p><ul><li><span>La colonne <strong>Ordre</strong> indique l’ordre derécupération des groupes d’enregistrements.</span></li><li><span>La colonne <strong>Nombre</strong> indique le nombred'enregistrements contenus dans la table.</span></li><li><span>La colonne <strong>Table de destination</strong> indiquele nom des tables ayant pu être automatiquement associées auxgroupes d’enregistrements identifiés. Les noms des tablesattribuées automatiquement sont affichés en caractères verts. Lesgroupes qui n'ont pas encore été attribués, c'est-à-dire, lestables qui n'ont pas pu être associées à des enregistrements sontaffichées en caractères rouges.</span></li><li><span>La colonne <strong>Récupérer</strong> permet vous permetd’indiquer pour chaque groupe si vous souhaitez récupérer lesenregistrements. Par défaut, l’option est cochée pour tous lesgroupes avec les enregistrements qui peuvent être associés à unetable.</span></li></ul></li><li><p><span>Le deuxième tableau liste les tables du fichier destructure.</span></p></li></ul><h3><span><a aria-hidden="true" class="anchor" id="repair.html_attribution-manuelle"></a><a aria-hidden="true" class="hash-link" href="#repair.html_attribution-manuelle"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Attribution manuelle</span></h3><p><span>Si, du fait de l’endommagement de la table d’adresses, unou plusieurs groupes d’enregistrements n’ont pas pu être attribuésà des tables, vous pouvez les attribuer manuellement. Pourattribuer une table à un groupe non identifié, sélectionnez legroupe dans le premier tableau. Lorsque vous sélectionnez desenregistrements non identifiés, la zone "Contenu desenregistrements" affiche une prévisualisation du contenu despremiers enregistrements du groupe afin de vous permettre de lesattribuer plus facilement :</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/MSC/mscrepair3.png" /></span></p><p><span>Sélectionnez ensuite la table à attribuer dans le tableaudes "Tables non attribuées" puis cliquez sur le bouton<strong>Identifier table</strong>. Vous pouvez également attribuerune table par glisser-déposer. Le groupe d’enregistrements estalors associé à la table, il sera récupéré dans cette table. Lesnoms des tables attribuées manuellement sont affichés en caractèresnoirs. Le bouton <strong>Ignorer enregistrements</strong> permet desupprimer l’association effectuée manuellement entre une table etun groupe d’enregistrements.</span></p><h2><span><a aria-hidden="true" class="anchor" id="repair.html_voir-le-compte-rendu"></a><a aria-hidden="true" class="hash-link" href="#repair.html_voir-le-compte-rendu"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir le compte rendu</span></h2><p><span>Une fois la réparation terminée, 4D génère un fichier decompte-rendu dans le dossier Logs du projet. Ce fichier listel’ensemble des opérations qui ont été menées. Il est créé au formatxml et est nommé :<em>ApplicationName</em><em>_Repair_Log_yyyy-mm-ddhh-mm-ss.xml</em>" où :</span></p><ul><li><span><em>ApplicationName</em> est le nom du fichier destructure sans extension, par exemple "Factures",</span></li><li><span><em>aaaa-mm-jj hh-mm-ss</em> est l'horodatage du fichier,basé sur la date et l'heure système locales au moment du lancementde l'opération de vérification, par exemple "2019-02-1115-20-45".</span></li></ul><p><span>Lorsque vous cliquez sur le bouton <strong>Voir le compterendu</strong>, 4D affiche le fichier de compte-rendu le plusrécent dans le navigateur par défaut de l’ordinateur.</span></p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#restore.html"><span class="arrow-prev">←</span> <span>Pagerestitution</span></a><a class="docs-next button" href="#encrypt.html"><span>Page chiffrement</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#repair.html_fichiers">Fichiers</a><ul class="toc-headings"><li><a href="#repair.html_fichier-de-donn%25C3%25A9es-%25C3%25A0-r%25C3%25A9parer">Fichier de données à réparer</a></li><li><a href="#repair.html_dossier-de-sauvegarde">Dossier desauvegarde</a></li><li><a href="#repair.html_fichiers-r%25C3%25A9par%25C3%25A9s">Fichiersréparés</a></li></ul></li><li><a href="#repair.html_r%25C3%25A9paration-standard">Réparationstandard</a></li><li><a href="#repair.html_r%25C3%25A9paration-par-en-t%25C3%25AAtes-denregistrements">Réparation par en-têtes d'enregistrements</a><ul class="toc-headings"><li><a href="#repair.html_attribution-manuelle">Attributionmanuelle</a></li></ul></li><li><a href="#repair.html_voir-le-compte-rendu">Voir le compterendu</a></li></ul></nav></div></div></body></html>