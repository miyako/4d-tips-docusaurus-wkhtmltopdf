<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Restitution · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="4D vous permet de récupérer l’intégralité des données d’une application en cas d’incident, quelles que soient ses causes. Deux catégories principales d’incidents peuvent se produire :"name="description" /><meta content="fr" name="docsearch:language" /><meta content="Restitution · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="4D vous permet de récupérer l’intégralité des données d’une application en cas d’incident, quelles que soient ses causes. Deux catégories principales d’incidents peuvent se produire :"property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#restore.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Restitution<a aria-hidden="true" class="anchor" id="restore.html"></a></h1></header><article><div><p><span>4D vous permet de récupérer l’intégralité des donnéesd’une application en cas d’incident, quelles que soient ses causes.Deux catégories principales d’incidents peuvent se produire:</span></p><ul><li><p><span>L’arrêt inopiné de l'application pendant son exploitation.Cet incident peut se produire à cause d’une coupure de courant, lapanne d’un élément du système, etc. Dans ce cas, en fonction del’état courant du cache de données au moment de l’incident, larécupération de l'application peut nécessiter différentesopérations :</span></p><ul><li><span>Si le cache était vide, l'application s’ouvrenormalement. Toutes les modifications apportées à l'application ontété enregistrées. Ce cas ne nécessite aucune opérationparticulière.</span></li><li><span>Si le cache contenait des opérations, le fichier dedonnées est intact mais il est nécessaire d’intégrer le fichierd’historique courant.</span></li><li><span>Si le cache était en cours d’écriture, le fichier dedonnées est probablement endommagé. Il est nécessaire de restituerla dernière sauvegarde et d’intégrer le fichier d’historiquecourant.</span></li></ul></li><li><p><span>La perte de fichier(s) de l'application. Cet incident peutêtre causé par des secteurs défectueux sur le disque contenantl'application, un virus, une erreur de manipulation, etc. Il estnécessaire de restituer la dernière sauvegarde puis d’intégreréventuellement l’historique courant. Pour savoir si une applicationa été endommagée à la suite d’un incident, il suffit de la relanceravec 4D. Le programme effectue un auto-diagnostic et précise lesopérations de réparation à effectuer. En mode automatique, cesopérations sont effectuées directement, sans intervention del’utilisateur. Si une stratégie de sauvegarde régulière a été miseen place, les outils de récupération de 4D vous permettront (dansla plupart des cas) de retrouver l'application dans l’état exact oùelle se trouvait avant l’incident.</span></p></li></ul><blockquote><p><span>4D peut lancer automatiquement des procédures derécupération des applications après incident. Ces mécanismes sontgérés à l’aide de deux options accessibles dans la Page<strong>Sauvegarde/Sauvegarde &amp; et Restitution</strong> de lafenêtre des Propriétés. Pour plus d'informations, reportez-vous auparagraphe <a href="#restore.html_automatic-restore">Restitutionautomatique</a><br />. Si l'incident résulte d'une opération inappropriée sur effectuéesur les données (suppression d'un enregistrement par exemple), vouspouvez tenter de réparer le fichier de données en utilisant lafonction de "retour arrière" dans le fichier d'historique. Cettefonction est accessible dans la Page <a href="#rollback.html">Retour arrière</a> du CSM.</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="restore.html_restitution-manuelle-dune-sauvegarde-dialogue-standard"></a><a aria-hidden="true" class="hash-link" href="#restore.html_restitution-manuelle-dune-sauvegarde-dialogue-standard"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Restitution manuelle d’une sauvegarde (dialoguestandard)</span></h2><p><span>Vous pouvez restituer manuellement le contenu d’unearchive générée par le module de sauvegarde. Une restitutionmanuelle peut être nécessaire par exemple pour restituer latotalité du contenu d’une archive (fichiers de structure et/oufichiers joints inclus) ou à des fins de recherche sur desarchives. La restitution manuelle peut éventuellement s’accompagnerde l’intégration de l’historique courant.</span></p><p><span>La restitution manuelle des sauvegardes peut être réaliséesoit via une boîte de dialogue standard d’ouverture de document,soit via la page <a href="MSC/restore">“Restitution”</a> du Centrede sécurité et de maintenance (CSM). La restitution via une boîtede dialogue standard permet de restituer n’importe quelle archive.En revanche, seules les archives associées à l'application ouvertepeuvent être restituées.</span></p><p><span>Pour restituer manuellement une application via une boîtede dialogue standard :</span></p><ol><li><span>Lancez l’application 4D et choisissez la commande<strong>Restituer...</strong> dans le menu<strong>Fichier</strong>. Il n'est pas obligatoire qu'un projetd'application soit ouvert. OU BIEN Exécutez la commande<code>RESTORE</code> depuis une méthode de 4D. Une boîte dedialogue standard d’ouverture de fichiers apparaît.</span></li><li><span>Désignez le fichier de sauvegarde (.4bk) ou le fichier desauvegarde de l’historique (.4bl) à restituer et cliquez sur<strong>Ouvrir</strong>. Un boîte de dialogue apparaît, vouspermettant de désigner l’emplacement auquel vous souhaitez que lesfichiers soient restitués . Par défaut, 4D restitue les fichiersdans un dossier nommé <em>“Nomarchive”</em> (sans extension) placéà côté de l’archive. Vous pouvez afficher le chemin :</span></li></ol><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Backup/backup07.png" /></span></p><p><span>Vous pouvez également cliquer sur le bouton<strong>[...]</strong> et indiquer un autre emplacement.</span></p><ol start="3"><li><span>Cliquez sur le bouton <strong>Restituer</strong>. 4Dextrait tous les fichiers de la sauvegarde à l’emplacement défini.Si le fichier d’historique courant ou un fichier de sauvegarded’historique ayant le même numéro que le fichier de sauvegarde eststocké dans le même dossier, 4D examine son contenu. S’il contientdes opérations non présentes dans le fichier de données, leprogramme propose de l’intégrer. L’intégration est effectuéeautomatiquement si l’option <strong>d’intégration automatique del’historique</strong> est cochée (cf. paragraphe <a href="#restore.html_automatic-restore">Restitutionautomatique</a>).</span></li></ol><p><span>(Facultatif) Cliquez sur <strong>OK</strong> pour intégrerle fichier d’historique dans l'application restituée. Si larestitution et l’intégration se sont déroulées correctement, 4Daffiche une boîte de dialogue indiquant que l’opération aréussi.</span></p><ol start="5"><li><span>Cliquez sur <strong>OK</strong>.</span></li></ol><p><span>Le dossier d’arrivée est affiché. Lors de la restitution,4D place tous les fichiers sauvegardés dans ce dossier, quelle quesoit la position des fichiers originaux sur le disque au moment dela sauvegarde. De cette façon, vous retrouverez plus facilement vosfichiers.</span></p><blockquote><p><span>Tout contenu lié au fichier de données (dossier files et<code>Settings</code>) est automatiquement restauré dans unsous-dossier <code>Data</code>du dossier de destination.</span></p></blockquote><h2><span><a aria-hidden="true" class="anchor" id="restore.html_restitution-manuelle-dune-sauvegarde-csm"></a><a aria-hidden="true"class="hash-link" href="#restore.html_restitution-manuelle-dune-sauvegarde-csm"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Restitution manuelle d’une sauvegarde (CSM)</span></h2><p><span>La <a href="#restore.html">page Restitution</a> du Centrede sécurité et de maintenance (CSM) vous permet de restituermanuellement une archive de l'application courante.</span></p><h2><span><a aria-hidden="true" class="anchor" id="restore.html_int%C3%A9gration-manuelle-de-lhistorique"></a><a aria-hidden="true"class="hash-link" href="#restore.html_int%25C3%25A9gration-manuelle-de-lhistorique"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Intégration manuelle de l’historique</span></h2><p><span>Si vous n’avez pas coché l’option d’intégrationautomatique du fichier d’historique dans la page Restitution du CSM(cf. <a href="#restore.html_successive-intergration-of-several-data-log-files">Intégrationsuccessive de plusieurs fichiers d’historiques</a>), une boîte dedialogue d’alerte apparaît à l’ouverture de l'application lorsque4D constate que le fichier d’historique contient plus d’opérationsqu’il n’en a été effectué dans le fichier de données.</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Backup/backup08.png" /></span></p><blockquote><p><span>Pour que ce mécanisme fonctionne, 4D doit être en mesured’accéder au fichier d’historique à son emplacementcourant.</span></p></blockquote><p><span>Vous pouvez choisir d’intégrer ou non les données del’historique courant. Ne pas intégrer l’historique courant permetnotamment d’éviter de reproduire des erreurs effectuées sur lesdonnées.</span></p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#log.html"><span class="arrow-prev">←</span> <span>Fichierd'historique (.journal)</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#restore.html_restitution-manuelle-dune-sauvegarde-dialogue-standard">Restitution manuelle d’une sauvegarde (dialogue standard)</a></li><li><a href="#restore.html_restitution-manuelle-dune-sauvegarde-csm">Restitutionmanuelle d’une sauvegarde (CSM)</a></li><li><a href="#restore.html_int%25C3%25A9gration-manuelle-de-lhistorique">Intégrationmanuelle de l’historique</a></li></ul></nav></div></div></body></html>