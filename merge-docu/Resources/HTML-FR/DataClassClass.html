<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>DataClass · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Une [dataclass](/docs/Rx/fr/ORDA/dsmapping.html#dataclass) fournit une interface objet à une table de la base de données. Toutes les dataclasses d'une application 4D sont disponibles en tant que propriété du [datastore](/docs/Rx/fr/ORDA/dsmapping.html#datastore) `ds` ."name="description" /><meta content="fr" name="docsearch:language" /><meta content="DataClass · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Une [dataclass](/docs/Rx/fr/ORDA/dsmapping.html#dataclass) fournit une interface objet à une table de la base de données. Toutes les dataclasses d'une application 4D sont disponibles en tant que propriété du [datastore](/docs/Rx/fr/ORDA/dsmapping.html#datastore) `ds` ."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#DataClassClass.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">DataClass<a aria-hidden="true" class="anchor" id="DataClassClass.html"></a></h1></header><article><div><p><span>Une <a href="#DataClassClass.html_dataclass">dataclass</a>fournit une interface objet à une table de la base de données.Toutes les dataclasses d'une application 4D sont disponibles entant que propriété du <a href="#DataClassClass.html_datastore">datastore</a> <code>ds</code>.</span></p><h3><span><a aria-hidden="true" class="anchor" id="DataClassClass.html_sommaire"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_sommaire"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Sommaire</span></h3><table><thead><tr><th></th></tr></thead><tbody><tr><td><a href="#DataClassClass.html_attributename"><strong><em>.attributeName</em></strong>: DataClassAttribute</a><p>&nbsp;&nbsp;&nbsp;&nbsp;objets disponibles directement en tantque propriétés</p></td></tr><tr><td><a href="#DataClassClass.html_all"><strong>.all</strong> ( {<em>settings</em> : Object } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;interroge le datastore pour trouvertoutes les entités de la dataclass et les renvoie en tant qu"entityselection</p></td></tr><tr><td><a href="#DataClassClass.html_clearremotecache"><strong>.clearRemoteCache()</strong></a><p>&nbsp;&nbsp;&nbsp;&nbsp;vide le cache ORDA d'une dataclass</p></td></tr><tr><td><a href="#DataClassClass.html_fromcollection"><strong>.fromCollection</strong>(<em>objectCol</em> : Collection { ; <em>settings</em> : Object } ): 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;modifie ou crée des entités dans ladataclass en utilisant la collection d'objets <em>objectCol</em> etretourne l'entity selection correspondante</p></td></tr><tr><td><a href="#DataClassClass.html_get"><strong>.get</strong>(<em>primaryKey</em> : Integer { ; <em>settings</em> : Object } ) :4D.Entity<br /><strong>.get</strong>( <em>primaryKey</em> : Text { ;<em>settings</em> : Object } ) : 4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;interroge la dataclass pour récupérerl'entité correspondant au paramètre <em>primaryKey</em></p></td></tr><tr><td><a href="#DataClassClass.html_getcount"><strong>.getCount()</strong> :Integer</a><p>&nbsp;&nbsp;&nbsp;&nbsp; retourne le nombre d'entités dans unedataclass</p></td></tr><tr><td><a href="#DataClassClass.html_getdatastore"><strong>.getDataStore()</strong>: cs.DataStore</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne le datastore de ladataclass</p></td></tr><tr><td><a href="#DataClassClass.html_getinfo"><strong>.getInfo()</strong> :Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne un objet qui fournit desinformations sur la dataclass</p></td></tr><tr><td><a href="#DataClassClass.html_getremotecache"><strong>.getRemoteCache</strong>(): Object</a><p>&nbsp;&nbsp;&nbsp;&nbsp;retourne un objet qui contient le cacheORDA pour la dataclass</p></td></tr><tr><td><a href="#DataClassClass.html_new"><strong>.new()</strong> :4D.Entity</a><p>&nbsp;&nbsp;&nbsp;&nbsp;crée en mémoire et renvoie une nouvelleentité vide pour la dataclass</p></td></tr><tr><td><a href="#DataClassClass.html_newselection"><strong>.newSelection</strong>({ <em>keepOrder</em> : Integer } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;crée en mémoire une entity selectionvide, non partageable, liée à la dataclass</p></td></tr><tr><td><a href="#DataClassClass.html_query"><strong>.query</strong>(<em>queryString</em> : Text { ; <em>...value</em> : any } { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection<br /><strong>.query</strong>( <em>formula</em> : Object { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection</a><p>&nbsp;&nbsp;&nbsp;&nbsp;recherche les entités répondant auxcritères de recherche spécifiés dans <em>queryString</em> ou<em>formula</em> et (optionnellement) dans <em>value</em>toutes lesentités de la dataclass</p></td></tr><tr><td><a href="#DataClassClass.html_setremotecachesettings"><strong>.setRemoteCacheSettings</strong>(<em>settings</em>: Object)</a><p>&nbsp;&nbsp;&nbsp;&nbsp;définit le timeout et la taille maximumdu cache ORDA pour la dataclass</p></td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="DataClassClass.html_attributename"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_attributename"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.<em>attributeName</em></span></h2><details><summary><span>Historique</span></summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><span><strong><em>.attributeName</em></strong> :DataClassAttribute</span></p><h4><span><a aria-hidden="true" class="anchor" id="DataClassClass.html_description"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_description"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</span></h4><p><span>Les attributs des dataclasses sont des objets disponiblesdirectement en tant que propriétés de ces classes.</span></p><p><span>Les objets renvoyés sont du type <a href="#DataClassAttributeClass.html"><code>DataClassAttribute</code></a>.Ces objets ont des propriétés que vous pouvez utiliser et lire pourobtenir des informations sur vos attributs de dataclass.</span></p><blockquote><p><span>Les objets de l'attribut Dataclass peuvent être modifiés,mais la structure sous-jacente de la base de données ne sera pasaltérée.</span></p></blockquote><h4><span><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</span></h4><pre><span><code class="hljs css language-4d"><span class="hljs-variable">$salary</span>:=ds.Employee.salary <span class="hljs-comment">//retourne l'attribut salary dans la dataclass Employee</span><span class="hljs-variable">$compCity</span>:=ds.Company[<span class="hljs-string">"city"</span>] <span class="hljs-comment">//retourne l'attribut city dans la dataclass Company</span></code></span></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Considérant la structure suivante d'une base :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/dataclassAttribute.png" /></p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$firstnameAtt</span>;<span class="hljs-variable">$employerAtt</span>;<span class="hljs-variable">$employeesAtt </span>: Object <span class="hljs-variable">$firstnameAtt</span>:=ds.Employee.firstname  <span class="hljs-comment">//{name:firstname,kind:storage,fieldType:0,type:string,fieldNumber:2,indexed:true,</span>  <span class="hljs-comment">//keyWordIndexed:false,autoFilled:false,mandatory:false,unique:false}</span> <span class="hljs-variable">$employerAtt</span>:=ds.Employee.employer  <span class="hljs-comment">//{name:employer,kind:relatedEntity,relatedDataClass:Company,</span>  <span class="hljs-comment">//fieldType:38,type:Company,inverseName:employees}</span>  <span class="hljs-comment">//38=Is object</span> <span class="hljs-variable">$employeesAtt</span>:=ds.Company.employees  <span class="hljs-comment">//{name:employees,kind:relatedEntities,relatedDataClass:Employee,</span>  <span class="hljs-comment">//fieldType:42,type:EmployeeSelection,inverseName:employer}</span>  <span class="hljs-comment">//42=Is collection</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 3</h4><p>Considérant les propriétés de table suivantes :</p><p><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/API/dataclassAttribute2.png" /></p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$sequenceNumberAtt </span>: Object <span class="hljs-variable">$sequenceNumberAtt</span>=ds.Employee.sequenceNumber  <span class="hljs-comment">//{name:sequenceNumber,kind:storage,fieldType:0,type:string,fieldNumber:13,</span>  <span class="hljs-comment">//indexed:true,keyWordIndexed:false,autoFilled:true,mandatory:false,unique:true}</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_all"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_all"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.all()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17 R5</td><td>Prise en charge du paramètre <em>settings</em></td></tr><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.all</strong> ( { <em>settings</em> : Object } ) :4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Option de création : contexte</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Références vers toutes les entités de la dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-1"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.all()</code> interroge le datastore pourtrouver toutes les entités de la dataclass et les renvoie en tantqu"entity selection.</p><p>Les entités sont renvoyées dans l'ordre par défaut, qui estinitialement l'ordre dans lequel elles ont été créées. Notezcependant que, si des entités ont été supprimées et que denouvelles entités ont été ajoutées, l'ordre par défaut ne reflèteplus l'ordre de création.</p><p>Si aucune entité n'est trouvée, une entity selection vide estrenvoyée.</p><p>Le mode lazy loading est appliqué.</p><p><strong>settings</strong></p><p>Dans le paramètre optionnel <em>settings</em>, vous pouvezpasser un objet contenant des options supplémentaires. La propriétésuivante est prise en charge :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>Nom du contexte d'optimisation appliqué à l'entity selection.Ce contexte sera utilisé par le code qui manipule l'entityselection afin de bénéficier de l'optimisation. Cettefonctionnalité est <a href="#DataClassClass.html_optimisation-client-server">conçue pour letraitement client/serveur ORDA</a>.</td></tr></tbody></table><blockquote><p>Pour obtenir le nombre total d'entités dans une dataclass, ilest recommandé d'utiliser la fonction <a href="#DataClassClass.html_getcount"><code>getCount()</code></a> qui estplus optimisée que l'expression<code>ds.myClass.all().length</code>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$allEmp </span>: cs.EmployeeSelection <span class="hljs-variable">$allEmp</span>:=ds.Employee.<span class="hljs-function">all</span>()</code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_clearremotecache"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_clearremotecache"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.clearRemoteCache()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v19 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.clearRemoteCache()</strong> | Paramètres | Type | |Description | | ---------- | ---- |::| ---------------------------| | | | | Ne requiert aucun paramètre |</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-2"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.clearRemoteCache()</code> vide le cache ORDAd'une dataclass.</p><blockquote><p>Cette fonction ne réinitialise pas les valeurs de<code>timeout</code> et <code>maxEntries</code>.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-4"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$persons </span>: cs.PersonsSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$p </span>: cs.PersonsEntity<span class="hljs-keyword">var</span> <span class="hljs-variable">$cache </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$info </span>: Collection<span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$persons</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">all</span>()<span class="hljs-variable">$text</span>:=<span class="hljs-string">""</span><span class="hljs-keyword">For each</span> (<span class="hljs-variable">$p</span>; <span class="hljs-variable">$persons</span>)    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$p</span>.firstname+<span class="hljs-string">" lives in "</span>+<span class="hljs-variable">$p</span>.address.city+<span class="hljs-string">" / "</span><span class="hljs-keyword">End for each</span><span class="hljs-variable">$cache</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">getRemoteCache</span>()<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">clearRemoteCache</span>()<span class="hljs-comment">// Cache of the Persons dataclass = {timeout:30;maxEntries:30000;stamp:255;entries:[]}</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_fromcollection"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_fromcollection"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.fromCollection()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17 R5</td><td>Prise en charge du paramètre <em>settings</em></td></tr><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.fromCollection</strong>( <em>objectCol</em> :Collection { ; <em>settings</em> : Object } ) :4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>objectCol</td><td>Collection</td><td style="text-align:center">-&gt;</td><td>Collection d'objets à faire correspondre à des entités</td></tr><tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Option de création : contexte</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td style="text-align:center">&lt;-</td><td>Entity selection issue de la collection</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-3"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.fromCollection()</code> modifie ou crée desentités dans la dataclass en utilisant la collection d'objets<em>objectCol</em> et retourne l'entity selectioncorrespondante.</p><p>Dans le paramètre <em>objectCol</em> passez une collectiond'objets destinée à créer ou à modifier des entités de ladataclass. Les noms des propriétés doivent correspondre à ceux desattributs de la dataclass. Si un nom de propriété n'existe pas dansla dataclass, il est ignoré. Si une valeur d'attribut n'est pasdéfinie dans la collection pour une entité créée, l'attribut prendla valeur Null.</p><p>La correspondance entre les objets de la collection et lesentités est effectuée au niveau des <strong>nomsd'attributs</strong> et de leur <strong>type de données</strong>.Si une propriété d'objet a le même nom qu'un attribut d'entité maisque leurs types ne sont pas compatibles, l'attribut de l'entité nereçoit pas de valeur.</p><p><strong>Mode création ou modification</strong></p><p>Pour chaque objet de <em>objectCol</em> :</p><ul><li>Si l'objet contient une propriété booléenne "__NEW" fixée àfaux (ou ne contient pas de propriété booléenne "__NEW"), l'entitéest modifiée ou créée avec les valeurs correspondantes despropriétés de l'objet. Aucune vérification spécifique n'esteffectuée concernant la clé primaire :<ul><li>Si la clé primaire est fournie et existe, l'entité estmodifiée. Dans ce cas, la clé primaire peut être fournie tellequelle ou via la propriété "__KEY" (contenant la valeur de lapropriété primaire).</li><li>Si la clé primaire est fournie (telle quelle) et n'existe pas,l'entité est créée</li><li>Si la clé primaire n'est pas fournie, l'entité est créée et laclé primaire est assignée selon les règles en vigueur de la base dedonnées.</li></ul></li><li>si l'objet contient une propriété booléenne "__NEW" fixée à<strong>vrai</strong>, l'entité est créée avec les valeurscorrespondantes des propriétés de l'objet. Une vérification esteffectuée sur la clé primaire :<ul><li>Si la clé primaire est fournie (telle quelle) et existe, uneerreur est générée</li><li>Si la clé primaire est fournie (telle quelle) et n'existe pas,l'entité est créée</li><li>Si la clé primaire n'est pas fournie, l'entité est créée et laclé primaire est assignée selon les règles en vigueur de la base dedonnées.</li></ul></li></ul><blockquote><p>La propriété "__KEY" n'est prise en compte que lorsque lapropriété "__NEW" est fixée à <strong>faux</strong> (ou est omise)et qu'une entité correspondante existe. Dans tous les autres cas,la valeur de la propriété "__KEY" est ignorée, la clé primaire doitêtre passée "telle quelle".</p></blockquote><p><strong>Related entities</strong></p><p>Les objets de <em>objectCol</em> peuvent contenir un ouplusieurs objet(s) imbriqué(s) décrivant une ou plusieurs entité(s)relative(s), ce qui peut être utile pour créer ou modifier desrelations entre les entités.</p><p>Les objets imbriqués décrivant les entités relatives doiventcontenir une propriété "__KEY" (contenant la valeur de la cléprimaire de l'entité relative) ou la clé primaire de l'entitérelative elle-même. L'utilisation de la propriété __KEY permet dene pas dépendre du nom de l'attribut clé primaire.</p><blockquote><p>Ce mécanisme ne permet pas de créer ou de modifier les entitésliées.</p></blockquote><p><strong>Stamp</strong></p><p>Si une propriété __STAMP est fournie, une vérification esteffectuée sur le stamp (marqueur interne) de l'entité dans ledatastore et une erreur est retournée en cas d'invalidité ("Lestamp ne correspond pas à celui de l'enregistrement# XX de la tableXXXX"). Pour plus d'informations, voir <a href="#DataClassClass.html_verrouillage-d-une-entite">Verrouillage d'uneentité</a>.</p><p><strong>settings</strong></p><p>Dans le paramètre optionnel <em>settings</em>, vous pouvezpasser un objet contenant des options supplémentaires. La propriétésuivante est prise en charge :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>Nom du contexte d'optimisation appliqué à l'entity selection.Ce contexte sera utilisé par le code qui manipule l'entityselection afin de bénéficier de l'optimisation. Cettefonctionnalité est <a href="#DataClassClass.html_optimisation-client-server">conçue pour letraitement client/serveur ORDA</a>.</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-1-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-1-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><p>Nous souhaitons modifier une entité existante. La propriété__NEW n'est pas fixée, la clé primaire de l'employé est passée etexiste :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">668</span> <span class="hljs-comment">//Clé primaire existante dans la dataclass Employee</span> <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Arthur"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span> <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"ID"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Clé primaire existante dans la dataclass liée Company</span>  <span class="hljs-comment">// Nous modifions la Company de cet employé en lui assignant une autre clé primaire existante dans la dataclass liée Company</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-2-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-2-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Nous souhaitons modifier une entité existante. La propriété__NEW n'est pas fournie, la clé primaire de l'employé est avecl'attribut __KEY et existe :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.__KEY:=<span class="hljs-number">1720</span> <span class="hljs-comment">//Clé primaire existante dans la dataclass Employee</span> <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"John"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Boorman"</span> <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"ID"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Clé primaire existante dans la dataclass liée Company</span>  <span class="hljs-comment">// Nous modifions la Company de cet employé en lui assignant une autre clé primaire existante dans la dataclass relative Company</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-3-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-3-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 3</h4><p>Création simple d'une entité à partir d'une collection :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Victor"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Hugo"</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-4-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-4-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 4</h4><p>Nous souhaitons créer une entité. La propriété __NEW est à Vrai,la clé primaire de l'employé n'est pas fournie :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Mary"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$emp</span>.employer:=<span class="hljs-function">New object</span>(<span class="hljs-string">"__KEY"</span>;<span class="hljs-number">121</span>) <span class="hljs-comment">//Clé primaire existante dans la dataclass liée Company</span> <span class="hljs-variable">$emp</span>.__NEW:=<span class="hljs-literal">True</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-5"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 5</h4><p>Nous souhaitons créer une entité. La propriété __NEW n'est paspassée, la clé primaire de l'employé est fournie et n'existe pas:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">10000</span> <span class="hljs-comment">//clé primaire qui n'existe pas</span> <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Françoise"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Sagan"</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-6"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 6</h4><p>Dans cet exemple, la première entité sera bien créée mais laseconde création échouera car les deux entités utilisent la mêmeclé primaire :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$empsCollection </span>: Collection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$emp</span>; <span class="hljs-variable">$emp2 </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$employees </span>: cs.EmployeeSelection <span class="hljs-variable">$empsCollection</span>:=New collection <span class="hljs-variable">$emp</span>:=New object <span class="hljs-variable">$emp</span>.ID:=<span class="hljs-number">10001</span> <span class="hljs-comment">// Clé primaire inexistante</span> <span class="hljs-variable">$emp</span>.firstName:=<span class="hljs-string">"Simone"</span> <span class="hljs-variable">$emp</span>.lastName:=<span class="hljs-string">"Martin"</span> <span class="hljs-variable">$emp</span>.__NEW:=<span class="hljs-literal">True</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp</span>) <span class="hljs-variable">$emp2</span>:=New object <span class="hljs-variable">$emp2</span>.ID:=<span class="hljs-number">10001</span> <span class="hljs-comment">// ERREUR clé primaire identique</span> <span class="hljs-variable">$emp2</span>.firstName:=<span class="hljs-string">"Marc"</span> <span class="hljs-variable">$emp2</span>.lastName:=<span class="hljs-string">"Smith"</span> <span class="hljs-variable">$emp2</span>.__NEW:=<span class="hljs-literal">True</span> <span class="hljs-variable">$empsCollection</span>.<span class="hljs-function">push</span>(<span class="hljs-variable">$emp2</span>) <span class="hljs-variable">$employees</span>:=ds.Employee.<span class="hljs-function">fromCollection</span>(<span class="hljs-variable">$empsCollection</span>)  <span class="hljs-comment">//la première entité est créée</span>  <span class="hljs-comment">//erreur clé dupliquée pour la seconde</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_voir-aussi"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_voir-aussi"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir aussi</h4><p><a href="#DataClassClass.html_tocollection"><strong>.toCollection()</strong></a></p><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_get"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_get"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.get()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.get</strong>( <em>primaryKey</em> : Integer { ;<em>settings</em> : Object } ) : 4D.Entity<br /><strong>.get</strong>( <em>primaryKey</em> : Text { ;<em>settings</em> : Object } ) : 4D.Entity</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>primaryKey</td><td>Integer OR Text</td><td style="text-align:center">-&gt;</td><td>Valeur de la clé primaire de l'entité à récupérer</td></tr><tr><td>settings</td><td>Object</td><td style="text-align:center">-&gt;</td><td>Option de création : contexte</td></tr><tr><td>Résultat</td><td>4D.Entity</td><td style="text-align:center">&lt;-</td><td>Entité correspondant à la clé primaire indiquée</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-4"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.get()</code> interroge la dataclass pourrécupérer l'entité correspondant au paramètre<em>primaryKey</em>.</p><p>Dans <em>primaryKey</em>, passez la valeur de clé primaire del'entité à récupérer. Le type de valeur doit correspondre au typede clé primaire définie dans le datastore (entier long ou texte).Vous pouvez également vous assurer que la valeur de la clé primaireest toujours renvoyée en tant que texte en utilisant la fonction<a href="#DataClassClass.html_getkey"><code>.getKey()</code></a>avec le paramètre <code>dk key as string</code>.</p><p>Si aucune entité avec <em>primaryKey</em> n'est trouvée, uneentité <strong>Null</strong> est retournée.</p><p>Le chargement différé (lazy loading) est appliqué, ce quisignifie que les données associées sont chargées à partir du disqueuniquement lorsque cela est nécessaire.</p><p><strong>settings</strong></p><p>Dans le paramètre optionnel <em>settings</em>, vous pouvezpasser un objet contenant des options supplémentaires. La propriétésuivante est prise en charge :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>context</td><td>Text</td><td>Nom du contexte d'optimisation appliqué à l'entité. Ce contextesera utilisé par le code qui manipule l'entité afin de bénéficierde l'optimisation. Cette fonctionnalité est <a href="#DataClassClass.html_optimisation-client-server">conçue pour letraitement client/serveur ORDA</a>.</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-1-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-1-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.EmployeeEntity<span class="hljs-keyword">   var</span> <span class="hljs-variable">$entity2 </span>: cs.InvoiceEntity <span class="hljs-variable">$entity</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">167</span>) <span class="hljs-comment">// retourne l'entité dont la valeur de clé primaire est 167</span> <span class="hljs-variable">$entity2</span>:=ds.Invoice.<span class="hljs-function">get</span>(<span class="hljs-string">"DGGX20030"</span>) <span class="hljs-comment">// retourne l'entité dont la valeur de clé primaire est "DGGX20030"</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-2-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-2-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Cet exemple illustre l'utilisation de la propriété<em>context</em> :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$e1</span>; <span class="hljs-variable">$e2</span>; <span class="hljs-variable">$e3</span>; <span class="hljs-variable">$e4 </span>: cs.EmployeeEntity<span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings</span>; <span class="hljs-variable">$settings2 </span>: Object <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"detail"</span>) <span class="hljs-variable">$settings2</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"context"</span>;<span class="hljs-string">"summary"</span>) <span class="hljs-variable">$e1</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">1</span>;<span class="hljs-variable">$settings</span>)<span class="hljs-function"> completeAllData</span>(<span class="hljs-variable">$e1</span>) <span class="hljs-comment">// Dans la méthode completeAllData, une optimisation est lancée et associée au contexte "detail"</span> <span class="hljs-variable">$e2</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">2</span>;<span class="hljs-variable">$settings</span>)<span class="hljs-function"> completeAllData</span>(<span class="hljs-variable">$e2</span>) <span class="hljs-comment">// Dans la méthode completeAllData, l'optimisation associée au contexte "detail" est appliquée</span> <span class="hljs-variable">$e3</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">3</span>;<span class="hljs-variable">$settings2</span>)<span class="hljs-function"> completeSummary</span>(<span class="hljs-variable">$e3</span>) <span class="hljs-comment">//Dans la méthode completeSummary, une optimisation est lancée et associée au contexte "summary"</span> <span class="hljs-variable">$e4</span>:=ds.Employee.<span class="hljs-function">get</span>(<span class="hljs-number">4</span>;<span class="hljs-variable">$settings2</span>)<span class="hljs-function"> completeSummary</span>(<span class="hljs-variable">$e4</span>) <span class="hljs-comment">//Dans la méthode completeSummary, l'optimisation associée au contexte "summary" est appliquée</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_getcount"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_getcount"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getCount()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v19 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.getCount()</strong> : Integer</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>result</td><td>Integer</td><td>&lt;-</td><td>Nombre d'entités dans la dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-5"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-5"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.getCount()</code> retourne le nombred'entités dans une dataclass.</p><p>Si cette fonction est utilisée dans une transaction, les entitéscréées durant la transaction sont prises en compte.</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-7"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-7"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$number </span>: Integer<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$number</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">getCount</span>()</code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_getdatastore"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_getdatastore"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getDataStore()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.getDataStore()</strong> : cs.DataStore</p><table><thead><tr><th>Paramètres</th><th>Type</th><th style="text-align:center"></th><th>Description</th></tr></thead><tbody><tr><td>Résultat</td><td>cs.DataStore</td><td style="text-align:center">&lt;-</td><td>Datastore de la dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-6"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-6"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.getDataStore()</code> retourne le datastorede la dataclass.</p><p>Le datastore peut être :</p><ul><li>le datastore principal, retourné par la commande<code>ds</code>.</li><li>un datastore distant, ouvert à l'aide de la commande <code>Opendatastore</code>.</li></ul><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-8"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-8"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>La méthode projet <strong><em>SearchDuplicate</em></strong>recherche des valeurs dupliquées dans une dataclass.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$pet </span>: cs.CatsEntity <span class="hljs-variable">$pet</span>:=ds.Cats.<span class="hljs-function">all</span>().<span class="hljs-function">first</span>() <span class="hljs-comment">//lire une entité</span><span class="hljs-function"> SearchDuplicate</span>(<span class="hljs-variable">$pet</span>;<span class="hljs-string">"Dogs"</span>)</code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">// SearchDuplicate method</span>  <span class="hljs-comment">// SearchDuplicate(entity_to_search;dataclass_name)</span> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$pet </span>: Object ; <span class="hljs-variable">$dataClassName </span>: Text)<span class="hljs-keyword"> var</span> <span class="hljs-variable">$dataStore</span>; <span class="hljs-variable">$duplicates </span>: Object   <span class="hljs-variable">$dataStore</span>:=<span class="hljs-variable">$pet</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getDataStore</span>() <span class="hljs-variable">$duplicates</span>:=<span class="hljs-variable">$dataStore</span>[<span class="hljs-variable">$dataClassName</span>].<span class="hljs-function">query</span>(<span class="hljs-string">"name=:1"</span>;<span class="hljs-variable">$pet</span>.name)</code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_getinfo"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_getinfo"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getInfo()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v19 R3</td><td>Added exposed property</td></tr><tr><td>v17 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.getInfo()</strong> : Object</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>Résultat</td><td>Object</td><td>&lt;-</td><td>Informations sur la dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-7"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-7"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.getInfo()</code> retourne un objet quifournit des informations sur la dataclass. Cette fonction est utilepour l'écriture de code générique.</p><p><strong>Objet retourné</strong></p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>exposed</td><td>Booléen</td><td>Vrai si la dataclass est exposée en REST</td></tr><tr><td>name</td><td>Text</td><td>Nom de la dataclass</td></tr><tr><td>primaryKey</td><td>Text</td><td>Nom de la clé primaire de la dataclass</td></tr><tr><td>tableNumber</td><td>Integer</td><td>Numéro interne de la table 4D</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-1-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-1-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><pre><code class="hljs css language-4d"> #<span class="hljs-function">DECLARE </span>(<span class="hljs-variable">$entity </span>: Object)<span class="hljs-keyword">   var</span> <span class="hljs-variable">$status </span>: Object<span class="hljs-function"> computeEmployeeNumber</span>(<span class="hljs-variable">$entity</span>) <span class="hljs-comment">//Exécuter des actions sur une entité</span> <span class="hljs-variable">$status</span>:=<span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>()<span class="hljs-function"> if</span>(<span class="hljs-variable">$status</span>.success)<span class="hljs-function">    ALERT</span>(<span class="hljs-string">"Enregistrement mis à jour dans la table "</span>+<span class="hljs-variable">$entity</span>.<span class="hljs-function">getDataClass</span>().<span class="hljs-function">getInfo</span>().name)<span class="hljs-keyword"> End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-2-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-2-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.ClientsSelection <span class="hljs-variable">$settings</span>:=New object <span class="hljs-variable">$settings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"receivedIds"</span>;<span class="hljs-function">getIds</span>()) <span class="hljs-variable">$settings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"pk"</span>;ds.Clients.<span class="hljs-function">getInfo</span>().primaryKey) <span class="hljs-variable">$es</span>:=ds.Clients.<span class="hljs-function">query</span>(<span class="hljs-string">":pk in :receivedIds"</span>;<span class="hljs-variable">$settings</span>)</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-3-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-3-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 3</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$pk </span>: Text<span class="hljs-keyword"> var</span> <span class="hljs-variable">$dataClassAttribute </span>: Object <span class="hljs-variable">$pk</span>:=ds.Employee.<span class="hljs-function">getInfo</span>().primaryKey <span class="hljs-variable">$dataClassAttribute</span>:=ds.Employee[<span class="hljs-variable">$pk</span>] <span class="hljs-comment">// Le cas échéant, l'attribut correspondant à la clé primaire est accessible</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_voir-aussi-1"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_voir-aussi-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir aussi</h4><p><a href="#DataClassClass.html_exposed">DataClassAttribute.exposed</a></p><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_getremotecache"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_getremotecache"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.getRemoteCache()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v19 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.getRemoteCache</strong>() : Object</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>result</td><td>Object</td><td>&lt;-</td><td>Objet décrivant le contenu du cache ORDA pour ladataclass.</td></tr></tbody></table><blockquote><p><strong>Mode avancé :</strong> Cette fonction est destinée auxdéveloppeurs qui souhaitent personnaliser les fonctionnalités pardéfaut de ORDA dans le cadre de configurations spécifiques. Dans laplupart des cas, vous n'aurez pas besoin de l'utiliser.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-8"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-8"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.getRemoteCache()</code> retourne un objet quicontient le cache ORDA pour la dataclass.</p><p>Si elle est appelée depuis une application 4D monoposte, lafonction retourne <code>Null</code>.</p><p>L'objet retourné contient les propriétés suivantes :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>maxEntries</td><td>Integer</td><td>Nombre maximum de collections "entries".</td></tr><tr><td>stamp</td><td>Integer</td><td>Marqueur du cache.</td></tr><tr><td>timeout</td><td>Integer</td><td>Durée avant qu'une nouvelle entrée dans le cache soit indiquéecomme expirée.</td></tr><tr><td>entries</td><td>Collection</td><td>Contient un objet pour chaque entité dans le cache.</td></tr></tbody></table><p>Chaque objet "entrée" de la collection <code>entries</code>contient les propriétés suivantes :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>data</td><td>Object</td><td>Objet contenant les données de l'entrée.</td></tr><tr><td>expired</td><td>Booléen</td><td>True si l'entrée a expiré.</td></tr><tr><td>key</td><td>Text</td><td>Clé primaire de l'entité.</td></tr></tbody></table><p>L'objet <code>data</code> de chaque entrée contient lespropriétés suivantes :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>__KEY</td><td>Chaine</td><td>Clé primaire de l'entité</td></tr><tr><td>__STAMP</td><td>Longint</td><td>Stamp de l'entité dans la base de données</td></tr><tr><td>__TIMESTAMP</td><td>Chaine</td><td>Timestamp de l'entité dans la base de données (le format estYYYY-MM-DDTHH:MM:SS:ms:Z)</td></tr><tr><td>dataClassAttributeName</td><td>Variant</td><td>S'il y a des données dans le cache pour un attribut dedataclass, il est retourné dans une propriété du même type que dansla base de données.</td></tr></tbody></table><p>Les données concernant les entités liées sont stockées dans lecache de l'objet data.</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-9"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-9"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Dans l'exemple suivant, <code>$ds.Persons.all()</code> charge lapremière entité avec tous ses attributs. Ensuite, l'optimiseur derequêtes entre en jeu, et seuls <code>firstname</code> et<code>address.city</code> sont chargés.</p><p>Notez que <code>address.city</code> est chargé dans le cache dela dataclass <code>Persons</code>.</p><p>Seule la première entité de la dataclass <code>Address</code>est stockée dans le cache. Elle est chargée durant la premièreitération de la boucle.</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-keyword">var</span> <span class="hljs-variable">$persons </span>: cs.PersonsSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$p </span>: cs.PersonsEntity<span class="hljs-keyword">var</span> <span class="hljs-variable">$cachePersons</span>; <span class="hljs-variable">$cacheAddress </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$text </span>: Text<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$persons</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">all</span>()<span class="hljs-variable">$text</span>:=<span class="hljs-string">""</span><span class="hljs-keyword">For each</span> (<span class="hljs-variable">$p</span>; <span class="hljs-variable">$persons</span>)    <span class="hljs-variable">$text</span>:=<span class="hljs-variable">$p</span>.firstname+<span class="hljs-string">" lives in "</span>+<span class="hljs-variable">$p</span>.address.city+<span class="hljs-string">" / "</span><span class="hljs-keyword">End for each</span><span class="hljs-variable">$cachePersons</span>:=<span class="hljs-variable">$ds</span>.Persons.<span class="hljs-function">getRemoteCache</span>()<span class="hljs-variable">$cacheAddress</span>:=<span class="hljs-variable">$ds</span>.Adress.<span class="hljs-function">getRemoteCache</span>()</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_voir-aussi-2"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_voir-aussi-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir aussi</h4><p><a href="#DataClassClass.html_setremotecachesettings">.setRemoteCacheSettings()</a><br /><a href="#DataClassClass.html_clearremotecache">.clearRemoteCache()</a></p><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_new"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_new"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.new()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.new()</strong> : 4D.Entity</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>Résultat</td><td>4D.Entity</td><td>&lt;-</td><td>Nouvelle entité correspondant à la dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-9"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-9"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.new()</code> crée en mémoire et renvoie unenouvelle entité vide pour la dataclass.</p><p>L'objet entité est créé en mémoire et n'est pas sauvegardé dansla base de données tant que la fonction <a href="#DataClassClass.html_save"><code>.save( )</code></a> n'est pasappelée. Si l'entité est supprimée avant d'être sauvegardée, ellene peut pas être récupérée.</p><p><strong>4D Server</strong>: En client-serveur, si la cléprimaire de la table correspondante est auto-incrémentée, elle seracalculée au moment de la sauvegarde de l'entité sur le serveur.</p><p>Tous les attributs de l'entité sont initialisés avec la valeur<strong>null</strong>.</p><blockquote><p>Les attributs peuvent être initialisés à des valeurs par défautsi l'option <strong>Traduire les NULL en valeurs vides</strong> estsélectionnée au niveau de la structure de la base 4D.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-10"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-10"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><p>Cet exemple crée une nouvelle entité dans la dataclass "Log" etenregistre les informations dans l'attribut "info" :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$entity </span>: cs.LogEntity <span class="hljs-variable">$entity</span>:=ds.Log.<span class="hljs-function">new</span>() <span class="hljs-comment">//crée une référence</span> <span class="hljs-variable">$entity</span>.info:=<span class="hljs-string">"New entry"</span> <span class="hljs-comment">//valorise l'attribut info</span> <span class="hljs-variable">$entity</span>.<span class="hljs-function">save</span>() <span class="hljs-comment">//sauvegarde l'entité</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_newselection"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_newselection"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.newSelection()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.newSelection</strong>( { <em>keepOrder</em> : Integer }) : 4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>keepOrder</td><td>Integer</td><td>-&gt;</td><td><code>dk keep ordered</code> : crée une entity selectiontriée,<br /><code>dk non ordered</code> : crée une entity selection non triée(défaut si omis)</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td>&lt;-</td><td>Nouvelle entity selection vide liée à la dataclass</td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-10"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-10"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.newSelection()</code> crée en mémoire uneentity selection vide, non partageable, liée à la dataclass.</p><blockquote><p>Pour plus d'informations sur les sélections d'entités nonpartageables, veuillez vous reporter à <a href="#DataClassClass.html_shareable-or-non-shareable-entity-selections">cette section</a>.</p></blockquote><p>Si vous voulez créer une entity selection triée, passez lesélecteur <code>dk keep ordered</code> dans le paramètre<em>keepOrder</em>. Par défaut, si vous omettez ce paramètre ou sivous passez le sélecteur <code>dk non ordered</code> la fonctioncrée une entity selection non triée. Les entity selections nontriées sont plus rapides, mais vous ne pouvez pas vous fier auxpositions des entités. Pour plus d'informations, voir <a href="#DataClassClass.html_entity-selections-triees-vs-entity-selections-non-triees">Entity selections triées vs Entity selections non-triées</a>.</p><p>Une fois créée, l'entity selection ne contient aucune entité(<code>mySelection.length</code> retourne 0). Cette fonction vouspermet de construire progressivement des entity selections eneffectuant des appels à la fonction <a href="#DataClassClass.html_add"><code>add()</code></a>.</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-11"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-11"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$USelection</span>; <span class="hljs-variable">$OSelection </span>: cs.EmployeeSelection <span class="hljs-variable">$USelection</span>:=ds.Employee.<span class="hljs-function">newSelection</span>() <span class="hljs-comment">//crée une entity selection non triée vide</span> <span class="hljs-variable">$OSelection</span>:=ds.Employee.<span class="hljs-function">newSelection</span>(dk keep ordered) <span class="hljs-comment">//crée une entity selection triée vide</span></code></pre><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_query"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_query"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.query()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v17 R6</td><td>Prise en charge des paramètres Formula</td></tr><tr><td>v17 R5</td><td>Prise en charge des placeholders pour les valeurs</td></tr><tr><td>v17</td><td>Ajout</td></tr></tbody></table></details><p><strong>.query</strong>( <em>queryString</em> : Text { ;<em>...value</em> : any } { ; <em>querySettings</em> : Object } ) :4D.EntitySelection<br /><strong>.query</strong>( <em>formula</em> : Object { ;<em>querySettings</em> : Object } ) : 4D.EntitySelection</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>queryString</td><td>Text</td><td>-&gt;</td><td>Critères de recherche en texte</td></tr><tr><td>formula</td><td>Object</td><td>-&gt;</td><td>Critères de recherche en objet formule</td></tr><tr><td>value</td><td>any</td><td>-&gt;</td><td>Valeur(s) à utiliser comme placeholder(s)</td></tr><tr><td>querySettings</td><td>Object</td><td>-&gt;</td><td>Options de recherche : parameters, attributes, args,allowFormulas, context, queryPath, queryPlan</td></tr><tr><td>Résultat</td><td>4D.EntitySelection</td><td>&lt;-</td><td>Nouvelle entity selection constituée des entités de ladataclass correspondant au(x) critère(s) de recherche fournis dans<em>queryString</em> ou <em>formula</em></td></tr></tbody></table><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-11"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-11"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.query()</code> recherche les entitésrépondant aux critères de recherche spécifiés dans<em>queryString</em> ou <em>formula</em> et (optionnellement) dans<em>value</em>toutes les entités de la dataclass, et retourne unnouvel objet de type <code>EntitySelection</code> contenant toutesles entités trouvées. Le mode lazy loading est appliqué.</p><p>Si aucune entité correspondante n'est trouvée, une<code>EntitySelection</code> vide est retournée.</p><p><strong>Paramètre queryString</strong></p><p>Le paramètre <em>queryString</em> doit respecter la syntaxesuivante :</p><pre><code class="hljs css language-4d">attributePath|formula comparator value       {logicalOperator attributePath|formula comparator value}       {order by attributePath {desc | asc}}</code></pre><p>où :</p><ul><li><strong>attributePath</strong> : Chemin de l'attribut surlequel vous souhaitez exécuter la recherche. Ce paramètre peutcontenir un nom simple (par exemple "pays") ou un chemin d'attributvalide (par exemple "pays.nom"). Dans le cas d'un chemin d'attributde type <code>Collection</code>, la notation [ ] est utilisée pourdesigner toutes les occurrences (par exemple "enfants[].age").</li></ul><blockquote><p>*Vous ne pouvez pas utiliser directement des attributs dont lesnoms contiennent des caractères spéciaux tels que ".", "[ ]", ou"=", "&gt;", "#"..., car ils ne seront pas correctement évaluésdans la chaîne de recherche. Si vous souhaitez rechercher cesattributs, vous devez utiliser des placeholders, qui permettentd'utiliser un ensemble de caractères plus étendu dans les cheminsd'attribut (voir * <strong>Utiliser des placeholders</strong><em>ci-dessous).</em></p></blockquote><ul><li><p><strong>formula</strong> : Une formule valide passée en<code>Text</code> ou en <code>Object</code>. La formule seraévaluée pour chaque entité traitée et doit retourner une valeurbooléenne. Dans la formule, l'entité est disponible via l'objet<code>This</code>.</p><ul><li><strong>Text</strong> : la chaine de formule doit être précédéede la déclaration <code>eval()</code>, afin que l'analyseur derequêtes évalue l'expression correctement. Par exemple :<em>"eval(length(This.lastname) &gt;=30)"</em></li><li><strong>Object</strong>: l'<a href="#FunctionClass.html">objetformule</a> est passé en tant que <strong>placeholder</strong>(voir ci-dessous). La formule doit avoir été créée à l'aide descommandes <a href="#DataClassClass.html_formula"><code>Formula</code></a> ou <a href="#DataClassClass.html_formula-from-string"><code>Formula fromstring</code></a>.</li></ul></li></ul><blockquote><ul><li>N'oubliez pas que les formules de 4D prennent uniquement encharge les symboles <code>&amp;</code> et <code>|</code> commeopérateurs logiques.</li><li>Si la formule n'est pas le seul critère de recherche, lesystème d'optimisation des requêtes pourra prioriser le traitementd'autres critères (ex : attributs indexés) et ainsi, la formulesera évaluée uniquement pour un sous-ensemble d'entités.</li></ul></blockquote><pre><code class="hljs">Les formules contenues dans les requêtes peuvent recevoir des paramètres via $1. Ce point est détaillé dans le paragraphe **Paramètre formula** ci-dessous.</code></pre><blockquote><ul><li>Vous pouvez également passer directement un paramètre<code>formula</code> au lieu d'un paramètre<code>queryString</code> (recommandé lorsque les formules sont pluscomplexes). Voir le paragraphe <strong>Paramètre formula</strong>ci-dessous.</li><li>Pour des raisons de sécurité, les appels de formule dans lesfonctions <code>query()</code> peuvent être interdits. Voir ladescription du paramètre <code>querySettings</code>.</li></ul></blockquote><ul><li><p><strong>comparator</strong> : symbole d'opérateur utilisé pourcomparer <em>attributePath</em> et <em>value</em>. Les symbolessuivants sont pris en charge :</p><table><thead><tr><th>Comparaison</th><th>Symbole(s)</th><th>Commentaire</th></tr></thead><tbody><tr><td>Egal à</td><td>=, ==</td><td>Retourne les données correspondantes, prend en charge le jokerde recherche (@), ne tient pas compte de la casse et est nondiacritique.</td></tr><tr><td></td><td>===, IS</td><td>Retourne les données correspondantes, considère le @ comme uncaractère standard, ne tient pas compte de la casse et est nondiacritique</td></tr><tr><td>Différent de</td><td>#, !=</td><td>Prend en charge le joker de recherche (@)</td></tr><tr><td></td><td>!==, IS NOT</td><td>Considère le @ comme un caractère standard</td></tr><tr><td>Inférieur à</td><td>&lt;</td><td></td></tr><tr><td>Supérieur à</td><td>&gt;</td><td></td></tr><tr><td>Inférieur ou égal à</td><td>&lt;=</td><td></td></tr><tr><td>Supérieur ou égal à</td><td>&gt;=</td><td></td></tr><tr><td>Inclus parmi</td><td>IN</td><td>Retourne les données égales à au moins une des valeurs d'unecollection ou d'un ensemble de valeurs, prend en charge le joker derecherche (@)</td></tr><tr><td>Condition Not appliquée à une assertion</td><td>NOT</td><td>Les parenthèses sont obligatoires lorsque NOT est utilisédevant une assertion contenant plusieurs opérateurs</td></tr><tr><td>Contient mot-clé</td><td>%</td><td>Les mots-clés peuvent être utilisés avec les attributs de typetexte ou image</td></tr></tbody></table></li><li><p><strong>value</strong> : valeur à comparer à la valeur courantede l'attribut de chaque entité de la sélection ou élément de lacollection. Peut être un <strong>placeholder</strong> (voir<strong>Utiliser des placeholders</strong> ci-dessous) ou touteexpression correspondant à la propriété du type de donnée.</p><p>Lorsque vous utilisez une valeur constante, les règles suivantesdoivent être respectées :</p><ul><li>Les valeurs constantes de type <strong>texte</strong> peuventêtre passées avec ou sans guillemets (voir <strong>Utilisation desguillemets</strong> ci-dessous). Pour rechercher une chaîne dansune chaîne (recherche de type "contient"), utilisez le symbolejoker (@) dans valeur pour isoler la chaîne à chercher, comme danscet exemple : "@Smith@". Les mots-clés suivants sont interdits pourdes constantes de type texte : true, false.</li><li>Valeurs constantes de type<strong>booléen</strong>:<strong>true</strong> or <strong>false</strong> (sensible à lacasse).</li><li>Valeurs constantes de type <strong>numérique</strong> : lesdécimales doivent être séparées par un '.'</li><li>Constantes de type <strong>date</strong> : "YYYY-MM-DD"format</li><li>Constantes <strong>null</strong> : en utilisant le mot-clé"null", la recherche trouvera les propriétés ayant la valeur<strong>null</strong> et <strong>undefined</strong>.</li><li>Dans le cas d'une recherche avec un comparateur IN,<em>value</em>doit être une collection, ou des valeurs du même typeque les données du chemin d'attribut, fournies entre [ ] etséparées par des virgules (pour les chaînes, les caractères<code>"</code> doivent être échappés avec des <code>\</code>).</li></ul></li><li><p><strong>logicalOperator</strong> : utilisé pour relier desconditions multiples dans la recherche (optionnel). Vous pouvezutiliser un des opérateurs logiques suivants (le nom ou le symbolepeut être passé) :</p><table><thead><tr><th>Conjonction</th><th>Symbole(s)</th></tr></thead><tbody><tr><td>AND</td><td>&amp;, &amp;&amp;, and</td></tr><tr><td>OR</td><td>|,||, or</td></tr></tbody></table></li><li><p><strong>order by attributePath</strong> : vous pouvez inclureune déclaration order by <em>attributePath</em> dans la requêteafin que les données résultantes soient triées selon cettedéclaration. Vous pouvez utiliser plusieurs tris par déclaration,en les séparant par des virgules (e.g., order by<em>attributePath1</em> desc, <em>attributePath2</em> asc). Pardéfaut, le tri est par ordre croissant. Passez 'desc' pour définirun tri par ordre décroissant et 'asc' pour définir un tri par ordrecroissant.</p></li></ul><blockquote><p>Si vous utilisez cette déclaration, l'entity selection retournéeest triée (pour plus d'informations, veuillez consulter <a href="#DataClassClass.html_entity-selections-triees-vs-entity-selections-non-triees">Entity selections triées vs Entity selection non triées</a>).</p></blockquote><p><strong>Utilisation des guillemets</strong></p><p>Lorsque vous utilisez des guillemets dans les recherches, vousdevez utiliser des apostrophes ' ' à l'intérieur des requêtes etdes guillemets " " pour encadrer la recherche complète, sinon uneerreur est générée. Par exemple :</p><pre><code class="hljs css language-4d"><span class="hljs-string">"employee.name = 'smith' AND employee.firstname = 'john'"</span></code></pre><blockquote><p>Les guillemets simples (') ne sont pas pris en charge dans lesvaleurs recherchées car ils casseraient la chaîne de recherche. Parexemple, "comp.name = 'John's pizza' " génèrera une erreur. Si vousdevez rechercher des valeurs contenant des guillemets simples, ilest nécessaire d'utiliser des placeholders (voir ci-dessous).</p></blockquote><p><strong>Utilisation des parenthèses</strong></p><p>Vous pouvez utiliser des parenthèses dans la recherche afin deprioriser les calculs. Par exemple, vous pouvez organiser unerecherche de la manière suivante :</p><pre><code class="hljs css language-4d"><span class="hljs-string">"(employee.age &gt;= 30 OR employee.age &lt;= 65) AND (employee.salary &lt;= 10000 OR employee.status = 'Manager')"</span></code></pre><p><strong>Utilisation des placeholders</strong></p><p>4D vous permet d'utiliser des placeholders pour les arguments<em>attributePath</em>, <em>formula</em> et <em>value</em> dans leparamètre <em>queryString</em>. Un placeholder est un paramètre quevous insérez dans des chaines de recherche et qui est remplacé parune autre valeur au moment où la chaîne de recherche est évaluée.La valeur des placeholders est évaluée une seule fois, au début dela requête ; elle n'est pas évaluée pour chaque élément.</p><p>Il existe deux types de placeholders : les <strong>placeholdersindexés</strong> et les <strong>placeholders nommés</strong> :</p><table><thead><tr><th></th><th>Placeholders indexés</th><th>Placeholders nommés</th></tr></thead><tbody><tr><td>Définition</td><td>Vous pouvez combiner tous les types d'arguments dans<em>queryString</em>. Une <em>queryString</em> peut contenir, pourles paramètres <em>attributePath</em>, <em>formula</em> et<em>value</em> :</td><td>Les paramètres sont insérés sous la forme<code>:paramName</code> (par exemple :myparam) et leurs valeurssont fournies dans les objets attributes et/ou parameters dans leparamètre <em>querySettings</em></td></tr><tr><td>Exemple</td><td><code>$r:=class.query(":1=:2";"city";"Chicago")</code></td><td><code>$o.attributes:=New object("att";"city")</code><br /><code>$o.parameters:=New object("name";"Chicago")</code><br /><code>$r:=class.query(":att=:name";$o)</code></td></tr></tbody></table><p>Vous pouvez combiner tous les types d'arguments dans<em>queryString</em>. Une <em>queryString</em> peut contenir, pourles paramètres <em>attributePath</em>, <em>formula</em> et<em>value</em> :</p><ul><li>des valeurs directes (pas de placeholders)</li><li>des placeholders indexés et/ou nommés.</li></ul><p>L'utilisation de placeholders dans les recherches <strong>estrecommandée</strong> pour les raisons suivantes :</p><ol><li><p>Cela empêche l'injection de code malveillant : si vous utilisezdans la chaîne de recherche des variables dont le contenu provientdirectement de la saisie de l'utilisateur, celui-ci pourraitmodifier les conditions de recherche en saisissant des arguments derecherche supplémentaires. Par exemple, imaginez une chaîne derecherche du type :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$vquery</span>:=<span class="hljs-string">"status = 'public' &amp; name = "</span>+myname <span class="hljs-comment">//l'utilisateur saisit son nom</span> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-variable">$vquery</span>)</code></pre><p>Cette recherche semble sécurisée puisque les données nonpubliques sont filtrées. Cependant, si l'utilisateur saisit dans lazone <em>myname</em> une chaîne du type <em>"smith ORstatus='private'</em>, la chaîne de recherche sera modifiée àl'étape de l'interprétation et pourra retourner des donnéesprivées.</p><p>Lorsque vous utilisez des placeholders, le contournement desoptions de sécurité n'est pas possible :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"status='public' &amp; name=:1"</span>;myname)</code></pre><p>Dans ce cas, si l'utilisateur saisit <em>smith ORstatus='private'</em> dans la zone <em>myname</em>, cela ne serapas interprété dans la chaîne de recherche, mais uniquement passéen tant que valeur. La recherche d'une personne nommée "smith ORstatus='private"' échouera simplement.</p></li><li><p>Cela résout les questions liées au formatage des valeurs ou descaractères, notamment lorsque vous gérez des paramètres<em>attributePath</em> et <em>value</em> qui peuvent contenir descaractères non-alphanumériques tels que ".", "["... ".", "['...</p></li><li><p>Cela permet l'utilisation de variables ou d'expressions dans lesarguments de recherche. Voici quelques exemples :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$result</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"address.city = :1 &amp; name =:2"</span>;<span class="hljs-variable">$city</span>;<span class="hljs-variable">$myVar</span>+<span class="hljs-string">"@"</span>)<span class="hljs-variable">$result2</span>:=<span class="hljs-variable">$col</span>.<span class="hljs-function">query</span>(<span class="hljs-string">"company.name = :1"</span>;<span class="hljs-string">"John's Pizzas"</span>)</code></pre></li></ol><p><strong>Recherche de valeurs null</strong></p><p>Lorsque vous recherchez les valeurs null, vous ne pouvez pasutiliser la syntaxe placeholder car le moteur de rechercheconsidère la valeur null comme une valeur de comparaison invalide.Par exemple, si vous exécutez la recherche suivante :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$vSingles</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"spouse = :1"</span>;<span class="hljs-literal">Null</span>) <span class="hljs-comment">// ne fonctionnera PAS</span></code></pre><p>Vous n'obtiendrez pas le résultat souhaité car la valeur nullsera évaluée par 4D comme une erreur résultant de l'évaluation duparamètre (pouvant être, par exemple, un attribut provenant d'uneautre recherche). Pour ce type de recherches, vous devez utiliserla syntaxe de recherche directe :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$vSingles</span>:=ds.Person.<span class="hljs-function">query</span>(<span class="hljs-string">"spouse = null"</span>) <span class="hljs-comment">//syntaxe valide</span></code></pre><p><strong>Relier arguments de recherche et attributs decollection</strong></p><p>Lorsque vous effectuez une recherche dans des collections ausein d'attributs objet à l'aide de plusieurs arguments de requêtereliés par l'opérateur AND, vous souhaiterez éventuellement vousassurer que seules les entités contenant des éléments correspondantà tous les arguments soient retournées, et non les entités où desarguments peuvent être trouvés dans différents éléments. Pour cefaire, vous devez relier les arguments de requête aux éléments decollection, de sorte que seuls les éléments uniques contenant desarguments reliés soient retournés.</p><p>Par exemple, avec les deux entités suivantes :</p><pre><code class="hljs">Entity <span class="hljs-number">1</span>:ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.name</span>: <span class="hljs-string">"martin"</span>ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.places</span>:    { <span class="hljs-string">"locations"</span> : [ {                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"home"</span>,                <span class="hljs-string">"city"</span>:<span class="hljs-string">"paris"</span>            } ] }Entity <span class="hljs-number">2</span>:ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.name</span>: <span class="hljs-string">"smith"</span>ds<span class="hljs-selector-class">.People</span><span class="hljs-selector-class">.places</span>:    { <span class="hljs-string">"locations"</span> : [ {                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"home"</span>,                <span class="hljs-string">"city"</span>:<span class="hljs-string">"lyon"</span>            } , {                <span class="hljs-string">"kind"</span>:<span class="hljs-string">"office"</span>,                <span class="hljs-string">"city"</span>:<span class="hljs-string">"paris"</span>            } ] }</code></pre><p>Vous souhaitez trouver des personnes dont le type d'emplacementest "home" dans la ville de "paris". Si vous écrivez :</p><pre><code class="hljs css language-4d">ds.People.<span class="hljs-function">query</span>(<span class="hljs-string">"places.locations[].kind= :1 and places.locations[].city= :2"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"paris"</span>)</code></pre><p>... la requête retournera "martin" <strong>et</strong> "smith"car "smith" a un élément "locations" dont "kind" (le type) est"home" et un élément "locations" dont "city" (la ville) est"paris", même si ce sont des éléments différents.</p><p>Si vous souhaitez obtenir uniquement les entités dont lesarguments correspondants sont dans le même élément de collection,vous devez <strong>relier les arguments</strong>. Pour lier desarguments de requête :</p><ul><li>Ajoutez une lettre entre le caractère [] dans le premier cheminà lier et répétez la même lettre dans tous les arguments liés. Parexemple : <code>locations[a].city and locations[a].kind</code>.Vous pouvez utiliser n'importe quelle lettre de l'alphabet latin(non sensible à la casse).</li><li>Pour ajouter différents critères liés dans la même requête,utilisez une autre lettre. Vous pouvez créer jusqu'à 26combinaisons de critères dans une seule requête.</li></ul><p>A l'aide des entités ci-dessus, si vous écrivez :</p><pre><code class="hljs css language-4d">ds.People.<span class="hljs-function">query</span>(<span class="hljs-string">"places.locations[a].kind= :1 and places.locations[a].city= :2"</span>;<span class="hljs-string">"home"</span>;<span class="hljs-string">"paris"</span>)</code></pre><p>... la requête ne retournera uniquement "martin" car il possèdeun élément "locations" dont "kind" est "home" et dont "city" est"paris". La requête ne retournera pas "smith" car les valeurs"home" et "paris" ne sont pas contenus dans le même élément decollection.</p><p><strong>Recherches dans les relations N vers N</strong></p><p>ORDA propose une syntaxe spéciale pour faciliter les recherchesdans les relations N vers N. Dans ce contexte, vous pouvez avoirbesoin de rechercher des valeurs différentes à l'aide del'opérateur <code>AND</code> MAIS dans le même attribut. Parexemple, considérez la structure suivante :</p><p><img alt="alt-text" src="https://developer.4d.com/docs/Rx/assets/en/API/manytomany.png" /></p><p>Imaginez que vous souhaitiez rechercher tous les films danslesquels un acteur A <em>Et</em> un acteur B ont joué un rôle. Sivous écrivez une recherche simple utilisant l'opérateur<code>AND</code>, cela ne va pas fonctionner :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// code invalide</span><span class="hljs-variable">$es</span>:=ds.Movie.<span class="hljs-function">query</span>(<span class="hljs-string">"roles.actor.lastName = :1 AND roles.actor.lastName = :2"</span>;<span class="hljs-string">"Hanks"</span>;<span class="hljs-string">"Ryan"</span>)  <span class="hljs-comment">// $es est vide</span></code></pre><p>Fondamentalement, le problème vient de la logique interne de larecherche : vous ne pouvez pas rechercher une entité dont unattribut aurait simultanément la valeur "A" et "B".</p><p>Pour rendre possible ce type de recheche, ORDA prend en chargeune syntaxe spéciale : vous devez juste ajouter un <em>classindex</em> entre les caractères <strong>{}</strong> dans tous lesattributs relationnels utilisés dans la chaîne de recherche :</p><pre><code class="hljs css language-4d"><span class="hljs-string">"relationAttribute.attribute = :1 AND relationAttribute{x}.attribute = :2 [AND relationAttribute{y}.attribute...]"</span></code></pre><p><strong>{x}</strong> indique à ORDA de créer une autre référencepour l'attribut relationnel. Le moteur de requêtes effectuera alorstoutes les opérations internes nécessaires. Notez que<strong>x</strong> peut être n'importe quel nombre <strong>àl'exception de 0</strong>: {1}, ou {2}, ou {1540}... ORDA asimplement besoin d'une référence unique dans la recherche pourchaque class index.</p><p>Dans notre exemple, cela pourrait donner :</p><pre><code class="hljs css language-4d"><span class="hljs-comment">// code valide</span><span class="hljs-variable">$es</span>:=ds.Movie.<span class="hljs-function">query</span>(<span class="hljs-string">"roles.actor.lastName = :1 AND roles.actor{2}.lastName = :2"</span>;<span class="hljs-string">"Hanks"</span>;<span class="hljs-string">"Ryan"</span>)  <span class="hljs-comment">// $es contient des films (You've Got Mail, Sleepless in Seattle, Joe Versus the Volcano)</span></code></pre><p><strong>Paramètre formula</strong></p><p>Au lieu d'insérer une formule dans le paramètre<em>queryString</em> (voir ci-dessus), vous pouvez directementpasser un objet formule en tant que critère de recherche booléen.L'utilisation d'un objet formule pour les requêtes est<strong>recommandée</strong> car vous bénéficiez d'une tokenisationet le code est plus facile à rechercher/lire.</p><p>La formule doit avoir été créée à l'aide des commandes <a href="#DataClassClass.html_formula"><code>Formula</code></a> ou <a href="#DataClassClass.html_formula-from-string"><code>Formula fromstring</code></a>. Dans ce cas :</p><ul><li><em>formula</em> est évaluée pour chaque entité et doitrenvoyer vrai ou faux. Lors de l'exécution de la requête, si lerésultat de la formule n'est pas un booléen, il est considéré commefaux.</li><li>dans <em>formula</em>, l'entité est disponible via l'objet<code>This</code>.</li><li>si l'objet <code>Formula</code> est <strong>null</strong>,l'erreur 1626 ("Attente d'un texte ou d'une formule") est générée,que vous pouvez intercepter à l'aide d'une méthode installée avec<code>ON ERR CALL</code>.</li></ul><blockquote><p>Pour des raisons de sécurité, les appels de formule dans lesfonctions <code>query()</code> peuvent être interdits. Voir ladescription du paramètre <em>querySettings</em>.</p></blockquote><p><strong>Passer des paramètres aux formules</strong></p><p>Tout paramètre <em>formula</em> appelé par la fonction<code>query()</code> peut recevoir des paramètres :</p><ul><li>Les paramètres doivent être passés via la propriété<strong>args</strong> du paramètre <em>querySettings</em>.</li><li>La formule reçoit cet objet <strong>args</strong> en tant queparamètre <strong>$1</strong>.</li></ul><p>Ce code montre comment les paramètres sont passés aux fonctions:</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"args"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"exclude"</span>;<span class="hljs-string">"-"</span>)) <span class="hljs-comment">//objet args pour passer des paramètres</span> <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(checkName($1.exclude))"</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-comment">//args est reçu dans $1</span></code></pre><p>Des exemples supplémentaires sont fournis dans l'exemple 3.</p><p><strong>4D Server</strong> : En client/serveur, les formulessont exécutées sur le serveur. Dans ce contexte, seul l'objet<code>querySettings.args</code> est envoyé aux formules.</p><p><strong>Paramètre querySettings</strong></p><p>Dans le paramètre <em>querySettings</em> vous pouvez passer unobjet contenant des options supplémentaires. Les propriétéssuivantes sont prises en charge :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>parameters</td><td>Object</td><td><strong>Placeholders nommés pour les valeurs</strong> utiliséesdans <em>queryString</em> ou <em>formula</em>. Les valeurs sontexprimées sous forme de paires propriété / valeur, où propriété estle nom du placeholder inséré pour une valeur dans<em>queryString</em> ou <em>formula</em> (":placeholder") et oùvaleur correspond à la valeur à comparer. Vous pouvez combiner,dans une même recherche, des placeholders indexés (valeurs passéesdirectement dans les paramètres <em>value</em>) et les valeurs desplaceholders nommés.</td></tr><tr><td>attributes</td><td>Object</td><td><strong>Placeholders nommés pour les cheminsd'attributs</strong> utilisés dans <em>queryString</em> ou<em>formula</em>. Les attributs sont exprimés sous forme de pairespropriété / valeur, où propriété est le nom du placeholder insérépour un chemin d'attribut dans <em>queryString</em> or<em>formula</em> (":placeholder"), et où valeur peut être unechaine ou une collection de chaines. Chaque valeur est un cheminqui peut désigner soit un attribut scalaire ou relatif de ladataclass soit une propriété d'un champ objet de la dataclass<table><tr><th>Type</th><th>Description</th></tr><tr><td>Chaine</td><td>attributePath exprimé à l'aide de la notation à point, ex :"name" ou "user.address.zipCode"</td></tr><tr><td>Collection de chaînes</td><td>Chaque chaine de la collection représente un niveaud'attributePath, ex : ["name"] ou ["user","address","zipCode"].L'utilisation d'une collection permet de rechercher des attributsdont les noms ne sont pas conformes à la notation à point, ex :["4Dv17.1","en/fr"]</td></tr></table>Vous pouvez combiner les valeurs des placeholders indexés (valeurspassées directement dans les paramètres <em>value</em>) et lesvaleurs des placeholders nommés dans la même recherche.</td></tr><tr><td>args</td><td>Object</td><td>Paramètre(s) à passer aux formules, le cas échéant. L'objet<strong>args</strong> sera reçu dans $1 à l'intérieur des formuleset donc ses valeurs seront disponibles via la propriété<em>$1.property</em> (cf. exemple 3).</td></tr><tr><td>allowFormulas</td><td>Booléen</td><td>Vrai pour autoriser les appels de formules dans la query(défaut). Passez faux pour interdire l'exécution de formules. Si la<code>query()</code> contient une formule alors que cette propriétéest à Faux, une erreur est retournée (1278 - Formule nonautorisée).</td></tr><tr><td>context</td><td>Text</td><td>Nom du contexte d'optimisation automatique appliqué à l'entityselection. Ce contexte sera utilisé par le code qui manipulel'entity selection afin de bénéficier de l'optimisation. Cettefonctionnalité est conçue pour le traitement client/serveur ; pourplus d'informations, veuillez vous reporter à la section<strong>Optimisation client/serveur</strong>.</td></tr><tr><td>queryPlan</td><td>Booléen</td><td>Dans l'entity selection résultante, retourne ou ne retourne ladescription détaillée de la recherche juste avant d'être exécutée,i.e. La propriété retournée est un objet qui inclut chaquerecherche et sous-recherche programmée (dans le cas d'une recherchecomplexe). Cette option est utile durant la phase de développementd'une application. Elle est utilisée conjointement à queryPath. Pardéfaut, si elle est omise : faux. <strong>Note</strong> : Cettepropriété est prise en charge uniquement par les fonctions<code>entitySelection.query()</code> et<code>dataClass.query()</code>.</td></tr><tr><td>queryPath</td><td>Booléen</td><td>Dans l'entity selection résultante, retourne ou ne retourne pasla description détaillée de la recherche telle qu'elle esteffectuée. La propriété retournée est un objet qui contient lechemin utilisé pour la recherche (généralement identique à celui dequeryPlan, mais il peut être différent si le moteur parvient àoptimiser la recherche), la durée du traitement et le nombred'enregistrements trouvés. Cette option est utile durant la phasede développement d'une application. Par défaut, si elle est omise :faux. <strong>Note</strong> : Cette propriété est prise en chargeuniquement par les fonctions <code>entitySelection.query()</code>et <code>dataClass.query()</code>.</td></tr></tbody></table><p><strong>A propos de queryPlan et queryPath</strong></p><p>Les informations enregistrées dans <code>queryPlan</code> et<code>queryPath</code> incluent le type de recherche (indexée ouséquentielle), chaque sous-recherche nécessaire, ainsi que lesopérateurs de conjonction. Les chemins d'accès des requêtescontiennent également le nombre d'entités identifiées et la duréed'exécution de chaque critère de recherche. Les chemins d'accès desrequêtes contiennent également le nombre d'entités identifiées etla durée d'exécution de chaque critère de recherche. Généralement,la description du plan de requête et son chemin d'accès sontidentiques mais ils peuvent différer car 4D peut intégrer desoptimisations dynamiques lorsqu'une requête est exécutée, afind'améliorer les performances. Par exemple, le moteur 4D peutconvertir dynamiquement une requête indexée en requête séquentielles'il estime que ce processus est plus rapide. Ce cas particulierpeut se produire lorsque le nombre d'entités recherchées estfaible.</p><p>Par exemple, si vous exécutez la recherche suivante :</p><pre><code class="hljs css language-4d"> <span class="hljs-variable">$sel</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"salary &lt; :1 and employer.name = :2 or employer.revenues &gt; :3"</span>;\   <span class="hljs-number">50000</span>;<span class="hljs-string">"Lima West Kilo"</span>;<span class="hljs-number">10000000</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"queryPath"</span>;<span class="hljs-literal">True</span>;<span class="hljs-string">"queryPlan"</span>;<span class="hljs-literal">True</span>))</code></pre><p>queryPlan :</p><pre><code class="hljs css language-4d">{Or:[{And:[{item:[index : Employee.salary ] &lt; <span class="hljs-number">50000</span>},      {item:Join on Table : Company  :  Employee.employerID = Company.ID,      subquery:[{item:[index : Company.name ] = Lima West Kilo}]}]},      {item:Join on Table : Company  :  Employee.employerID = Company.ID,      subquery:[{item:[index : Company.revenues ] &gt; <span class="hljs-number">10000000</span>}]}]}</code></pre><p>queryPath :</p><pre><code class="hljs css language-4d">{steps:[{description:OR,time:<span class="hljs-number">63</span>,recordsfounds:<span class="hljs-number">1388132</span>,      steps:[{description:AND,time:<span class="hljs-number">32</span>,recordsfounds:<span class="hljs-number">131</span>,      steps:[{description:[index : Employee.salary ] &lt; <span class="hljs-number">50000</span>,time:<span class="hljs-number">16</span>,recordsfounds:<span class="hljs-number">728260</span>},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">131</span>,      steps:[{steps:[{description:[index : Company.name ] = Lima West Kilo,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">1</span>}]}]}]},{description:Join on Table : Company  :  Employee.employerID = Company.ID,time:<span class="hljs-number">31</span>,recordsfounds:<span class="hljs-number">1388132</span>,      steps:[{steps:[{description:[index : Company.revenues ] &gt; <span class="hljs-number">10000000</span>,time:<span class="hljs-number">0</span>,recordsfounds:<span class="hljs-number">933</span>}]}]}]}]}</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-1-4"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-1-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 1</h4><p>Cette section fournit divers exemples de recherches.</p><p>Recherche dans une chaîne :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName = 'S@'"</span>)</code></pre><p>Recherche avec une instruction NOT :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"not(firstName=Kim)"</span>)</code></pre><p>Recherche avec des dates :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &gt; :1"</span>;<span class="hljs-string">"1970-01-01"</span>)<span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"birthDate &lt;= :1"</span>;Current date<span class="hljs-number">-10950</span>)</code></pre><p>Recherche avec des placeholders indexés pour les valeurs :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)"</span>;<span class="hljs-string">"D@"</span>;<span class="hljs-string">"R@"</span>;<span class="hljs-string">"S@"</span>;<span class="hljs-string">"K@"</span>)</code></pre><p>Recherche avec des placeholders indexés pour les valeurs sur unedataclass liée :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"lastName = :1 and manager.lastName = :2"</span>;<span class="hljs-string">"M@"</span>;<span class="hljs-string">"S@"</span>)</code></pre><p>Recherche avec des placeholders indexés avec tri décroissant:</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Student.<span class="hljs-function">query</span>(<span class="hljs-string">"nationality = :1 order by campus.name desc, lastname"</span>;<span class="hljs-string">"French"</span>)</code></pre><p>Recherche avec des placeholders nommés pour les valeurs :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$managedCustomers </span>: cs.CustomerSelection<span class="hljs-variable">$querySettings</span>:=New object<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"userId"</span>;<span class="hljs-number">1234</span>;<span class="hljs-string">"extraInfo"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"name"</span>;<span class="hljs-string">"Smith"</span>))<span class="hljs-variable">$managedCustomers</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"salesperson.userId = :userId and name = :extraInfo.name"</span>;<span class="hljs-variable">$querySettings</span>)</code></pre><p>Recherche utilisant les placeholders nommés et indexés pour lesvaleurs :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword">var</span> <span class="hljs-variable">$managedCustomers </span>: cs.CustomerSelection<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"userId"</span>;<span class="hljs-number">1234</span>)<span class="hljs-variable">$managedCustomers</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">"salesperson.userId = :userId and name=:1"</span>;<span class="hljs-string">"Smith"</span>;<span class="hljs-variable">$querySettings</span>)</code></pre><p>Recherche avec objets queryPlan et queryPath :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"(firstName = :1 or firstName = :2) and (lastName = :3 or lastName = :4)"</span>;<span class="hljs-string">"D@"</span>;<span class="hljs-string">"R@"</span>;<span class="hljs-string">"S@"</span>;<span class="hljs-string">"K@"</span>;<span class="hljs-function">New object</span>(<span class="hljs-string">"queryPlan"</span>;<span class="hljs-literal">True</span>;<span class="hljs-string">"queryPath"</span>;<span class="hljs-literal">True</span>))  <span class="hljs-comment">//vous pouvez ensuite obtenir ces propriétés dans la sélection d'entité résultante</span><span class="hljs-keyword">var</span> <span class="hljs-variable">$queryPlan</span>; <span class="hljs-variable">$queryPath </span>: Object<span class="hljs-variable">$queryPlan</span>:=<span class="hljs-variable">$entitySelection</span>.queryPlan<span class="hljs-variable">$queryPath</span>:=<span class="hljs-variable">$entitySelection</span>.queryPath</code></pre><p>Recherche avec un chemin d'attribut de type Collection :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extraInfo.hobbies[].name = :1"</span>;<span class="hljs-string">"horsebackriding"</span>)</code></pre><p>Recherche avec un chemin d'attribut de type Collection et desattributs reliés :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extraInfo.hobbies[a].name = :1 and extraInfo.hobbies[a].level=:2"</span>;<span class="hljs-string">"horsebackriding"</span>;<span class="hljs-number">2</span>)</code></pre><p>Recherche avec un chemin d'attribut de type Collection etplusieurs attributs reliés :</p><pre><code class="hljs css language-4d">$entitySelection:=ds.Employee.query("extraInfo.hobbies[a].name = :1 and    extraInfo.hobbies[a].level = :2 and extraInfo.hobbies[b].name = :3 and    extraInfo.hobbies[b].level = :4";"horsebackriding";2;"Tennis";5)</code></pre><p>Recherche avec un chemin d'attribut de type Objet :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"extra.eyeColor = :1"</span>;<span class="hljs-string">"blue"</span>)</code></pre><p>Recherche avec instruction IN :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"firstName in :1"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"Kim"</span>;<span class="hljs-string">"Dixie"</span>))</code></pre><p>Recherche avec instruction NOT (IN) :</p><pre><code class="hljs css language-4d"><span class="hljs-variable">$entitySelection</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">"not (firstName in :1)"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"John"</span>;<span class="hljs-string">"Jane"</span>))</code></pre><p>Recherche avec des placeholders indexés pour les attributs :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = 'Smith'"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>)  <span class="hljs-comment">//salesperson est une entité reliée</span></code></pre><p>Recherche avec des placeholders indexés pour les attributs etavec des placeholders nommés pour les valeurs :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-keyword">var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-variable">$querySettings</span>:=New object<span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"customerName"</span>;<span class="hljs-string">"Smith"</span>)<span class="hljs-variable">$es</span>:=ds.Customer.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = :customerName"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-variable">$querySettings</span>)  <span class="hljs-comment">//salesperson est une entité reliée</span></code></pre><p>Recherche avec des placeholders indexés pour les attributs etles valeurs :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-variable">$es</span>:=ds.Clients.<span class="hljs-function">query</span>(<span class="hljs-string">":1 = 1234 and :2 = :3"</span>;<span class="hljs-string">"salesperson.userId"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-string">"Smith"</span>)  <span class="hljs-comment">//salesperson est une entité reliée</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-2-4"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-2-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 2</h4><p>Cette section illustre les recherches avec des placeholdersnommés pour les attributs.</p><p>Considérons une dataclass Employee avec 2 entités :</p><p>Entité 1 :</p><pre><code class="hljs css language-4d">name: <span class="hljs-string">"Marie"</span>number: <span class="hljs-number">46</span>softwares:{<span class="hljs-string">"Word 10.2"</span>: <span class="hljs-string">"Installed"</span>,<span class="hljs-string">"Excel 11.3"</span>: <span class="hljs-string">"To be upgraded"</span>,<span class="hljs-string">"Powerpoint 12.4"</span>: <span class="hljs-string">"Not installed"</span>}</code></pre><p>Entité 2 :</p><pre><code class="hljs css language-4d">name: <span class="hljs-string">"Sophie"</span>number: <span class="hljs-number">47</span>softwares:{<span class="hljs-string">"Word 10.2"</span>: <span class="hljs-string">"Not installed"</span>,<span class="hljs-string">"Excel 11.3"</span>: <span class="hljs-string">"To be upgraded"</span>,<span class="hljs-string">"Powerpoint 12.4"</span>: <span class="hljs-string">"Not installed"</span>}</code></pre><p>Recherche avec des placeholders nommés pour les attributs :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection <span class="hljs-variable">$querySettings</span>:=New object <span class="hljs-variable">$querySettings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"attName"</span>;<span class="hljs-string">"name"</span>;<span class="hljs-string">"attWord"</span>;<span class="hljs-function">New collection</span>(<span class="hljs-string">"softwares"</span>;<span class="hljs-string">"Word 10.2"</span>)) <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":attName = 'Marie' and :attWord = 'Installed'"</span>;<span class="hljs-variable">$querySettings</span>)  <span class="hljs-comment">//$es.length=1 (Employee Marie)</span></code></pre><p>Recherche avec des placeholders nommés pour les attributs et lesvaleurs :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$querySettings </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.EmployeeSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$name </span>: Text <span class="hljs-variable">$querySettings</span>:=New object  <span class="hljs-comment">//Placeholders pour les valeurs</span>  <span class="hljs-comment">//Il est demandé à l'utilisateur de saisir un nom</span> <span class="hljs-variable">$name</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Veuillez saisir un nom à rechercher :"</span>)<span class="hljs-keyword"> If</span>(OK=<span class="hljs-number">1</span>)    <span class="hljs-variable">$querySettings</span>.parameters:=<span class="hljs-function">New object</span>(<span class="hljs-string">"givenName"</span>;<span class="hljs-variable">$name</span>)  <span class="hljs-comment">//Placeholders pour les chemins d'attributs</span>    <span class="hljs-variable">$querySettings</span>.attributes:=<span class="hljs-function">New object</span>(<span class="hljs-string">"attName"</span>;<span class="hljs-string">"name"</span>)    <span class="hljs-variable">$es</span>:=ds.Employee.<span class="hljs-function">query</span>(<span class="hljs-string">":attName= :givenName"</span>;<span class="hljs-variable">$querySettings</span>)<span class="hljs-keyword"> End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-3-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-3-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple 3</h4><p>Ces exemples illustrent les diverses manières d'utiliser desformules avec ou sans paramètres dans vos recherches.</p><p>La formule est fournie sous forme de texte avec<code>eval()</code> dans le paramètre <em>queryString</em> :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(length(This.lastname) &gt;=30) and nationality='French'"</span>)</code></pre><p>La formule est fournie sout forme d'objet <code>Formula</code>via un placeholder :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula </span>: Object <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)&gt;=<span class="hljs-number">30</span>) <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality='French'"</span>;<span class="hljs-variable">$formula</span>)</code></pre><p>Seul un objet <code>Formula</code> est fourni comme critère derecherche :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula </span>: Object <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.lastname)&gt;=<span class="hljs-number">30</span>) <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-variable">$formula</span>)</code></pre><p>Plusieurs formules peuvent être appliquées :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$formula1</span>; <span class="hljs-variable">$1</span>; <span class="hljs-variable">$formula2 </span>;<span class="hljs-variable">$0 </span>: Object <span class="hljs-variable">$formula1</span>:=<span class="hljs-variable">$1</span> <span class="hljs-variable">$formula2</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">Length</span>(<span class="hljs-literal">This</span>.firstname)&gt;=<span class="hljs-number">30</span>) <span class="hljs-variable">$0</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and :2 and nationality='French'"</span>;<span class="hljs-variable">$formula1</span>;<span class="hljs-variable">$formula2</span>)</code></pre><p>Une formule texte dans <em>queryString</em> reçoit un paramètre:</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings </span>: Object <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>() <span class="hljs-variable">$settings</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"filter"</span>;<span class="hljs-string">"-"</span>) <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">"eval(checkName($1.filter)) and nationality=:1"</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)</code></pre><pre><code class="hljs css language-4d">  <span class="hljs-comment">//méthode checkName </span> #<span class="hljs-function">DECLARE</span>(<span class="hljs-variable">$exclude </span>: Text) -&gt; <span class="hljs-variable">$result </span>: Boolean <span class="hljs-variable">$result</span>:=(<span class="hljs-function">Position</span>(<span class="hljs-variable">$exclude</span>;<span class="hljs-literal">This</span>.lastname)=<span class="hljs-number">0</span>)</code></pre><p>En utilisant la même méthode<strong><em>checkName</em></strong>, un objet <code>Formula</code>en placeholder reçoit un paramètre :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings</span>; <span class="hljs-variable">$formula </span>: Object <span class="hljs-variable">$formula</span>:=<span class="hljs-function">Formula</span>(<span class="hljs-function">checkName</span>(<span class="hljs-variable">$1</span>.filter)) <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>() <span class="hljs-variable">$settings</span>.args:=<span class="hljs-function">New object</span>(<span class="hljs-string">"filter"</span>;<span class="hljs-string">"-"</span>) <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality=:2"</span>;<span class="hljs-variable">$formula</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-variable">$settings</span>.args.filter:=<span class="hljs-string">"*"</span> <span class="hljs-comment">// modifie les paramètres sans mettre à jour l'objet $formula </span> <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-string">":1 and nationality=:2"</span>;<span class="hljs-variable">$formula</span>;<span class="hljs-string">"French"</span>;<span class="hljs-variable">$settings</span>)</code></pre><p>Nous voulons interdire les formules, par exemple lorsque lesutilisateurs saisissent leurs requêtes :</p><pre><code class="hljs css language-4d"><span class="hljs-keyword"> var</span> <span class="hljs-variable">$es </span>: cs.StudentsSelection<span class="hljs-keyword"> var</span> <span class="hljs-variable">$settings </span>: Object<span class="hljs-keyword"> var</span> <span class="hljs-variable">$queryString </span>: Text <span class="hljs-variable">$queryString</span>:=<span class="hljs-function">Request</span>(<span class="hljs-string">"Enter your query:"</span>)<span class="hljs-function"> if</span>(OK=<span class="hljs-number">1</span>)    <span class="hljs-variable">$settings</span>:=<span class="hljs-function">New object</span>(<span class="hljs-string">"allowFormulas"</span>;<span class="hljs-literal">False</span>)    <span class="hljs-variable">$es</span>:=ds.Students.<span class="hljs-function">query</span>(<span class="hljs-variable">$queryString</span>;<span class="hljs-variable">$settings</span>) <span class="hljs-comment">//Une erreur est gnérée si $queryString contient une formule</span><span class="hljs-keyword"> End if</span></code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_voir-aussi-3"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_voir-aussi-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir aussi</h4><p><a href="#DataClassClass.html_query"><code>.query()</code></a>pour les entity selections</p><h2><a aria-hidden="true" class="anchor" id="DataClassClass.html_setremotecachesettings"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_setremotecachesettings"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>.setRemoteCacheSettings()</h2><details><summary>Historique</summary><table><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v19 R5</td><td>Ajout</td></tr></tbody></table></details><p><strong>.setRemoteCacheSettings</strong>(<em>settings</em> :Object)</p><table><thead><tr><th>Paramètres</th><th>Type</th><th></th><th>Description</th></tr></thead><tbody><tr><td>settings</td><td>Object</td><td>-&gt;</td><td>Objet définissant le timeout et la taille maximum du cache ORDApour la dataclass.</td></tr></tbody></table><blockquote><p><strong>Mode avancé :</strong> Cette fonction est destinée auxdéveloppeurs qui souhaitent personnaliser les fonctionnalités pardéfaut de ORDA dans le cadre de configurations spécifiques. Dans laplupart des cas, vous n'aurez pas besoin de l'utiliser.</p></blockquote><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_description-12"></a><a aria-hidden="true"class="hash-link" href="#DataClassClass.html_description-12"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h4><p>La fonction <code>.setRemoteCacheSettings()</code> définit letimeout et la taille maximum du cache ORDA pour la dataclass.</p><p>Dans le paramètre <em>settings</em>, passez un objet contenantles propriétés suivantes :</p><table><thead><tr><th>Propriété</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>timeout</td><td>Integer</td><td>Timeout en secondes.</td></tr><tr><td>maxEntries</td><td>Integer</td><td>Nombre maximum d'entités.</td></tr></tbody></table><p><code>timeout</code> définit le timeout du cache ORDA pour ladataclass (30 secondes par défaut). Lorsque le timeout est atteint,les entités de la dataclass dans le cache sont considérées commeexpirées. Cela signifie que :</p><ul><li>les données sont toujours présentes</li><li>la prochaine fois que les données seront requises, elles serontdemandées au serveur</li><li>4D supprime automatiquement les données expirées lorsque lenombre maximum d'entités est atteint</li></ul><p>Modifier la propriété <code>timeout</code> définit un nouveautimeout pour les entités déjà présentes dans le cache. Cela peutêtre utile lorsque vous travaillez avec des données qui ne changentpas souvent, et pour lesquelles de nouvelles requêtes au serveur nesont donc pas nécessaires.</p><p><code>maxEntries</code> définit le nombre maximum d'entités dansle cache ORDA. Par défaut ce nombre est 30 000.</p><p>Le nombre d'entrées minimum est 300, donc la valeur de<code>maxEntries</code> doit être égale ou supérieure à 300. Sinonla valeur est ignorée et le nombre d'entrées maximum est fixé à300.</p><p>Si aucune propriété valide n'est passée à <code>timeout</code>et <code>maxEntries</code>, le cache n'est pas modifié, il conserveses valeurs précédentes ou par défaut.</p><p>Lorsqu'une entité est sauvegardée, elle est mise à jour dans lecache expirera lorsque le timeout sera atteint.</p><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_exemple-12"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_exemple-12"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h4><pre><code class="hljs css language-4d"><span class="hljs-keyword">var</span> <span class="hljs-variable">$ds </span>: 4D.DataStoreImplementation<span class="hljs-variable">$ds</span>:=<span class="hljs-function">Open datastore</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"hostname"</span>; <span class="hljs-string">"www.myserver.com"</span>); <span class="hljs-string">"myDS"</span>)<span class="hljs-variable">$ds</span>.Buildings.<span class="hljs-function">setRemoteCacheSettings</span>(<span class="hljs-function">New object</span>(<span class="hljs-string">"timeout"</span>; <span class="hljs-number">60</span>; <span class="hljs-string">"maxEntries"</span>; <span class="hljs-number">350</span>))</code></pre><h4><a aria-hidden="true" class="anchor" id="DataClassClass.html_voir-aussi-4"></a><a aria-hidden="true" class="hash-link" href="#DataClassClass.html_voir-aussi-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Voir aussi</h4><p><a href="#DataClassClass.html_clearremotecache">.clearRemoteCache()</a><br /><a href="#DataClassClass.html_clearremotecache">.getRemoteCache()</a></p><style><![CDATA[ h2 { background: #d9ebff;}]]></style></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#CryptoKeyClass.html"><span class="arrow-prev">←</span><span class="function-name-prevnext">CryptoKey</span></a><a class="docs-next button" href="#DataClassAttributeClass.html"><span class="function-name-prevnext">DataClassAttribute</span><span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#DataClassClass.html_attributename">.<em>attributeName</em></a></li><li><a href="#DataClassClass.html_all">.all()</a></li><li><a href="#DataClassClass.html_clearremotecache">.clearRemoteCache()</a></li><li><a href="#DataClassClass.html_fromcollection">.fromCollection()</a></li><li><a href="#DataClassClass.html_get">.get()</a></li><li><a href="#DataClassClass.html_getcount">.getCount()</a></li><li><a href="#DataClassClass.html_getdatastore">.getDataStore()</a></li><li><a href="#DataClassClass.html_getinfo">.getInfo()</a></li><li><a href="#DataClassClass.html_getremotecache">.getRemoteCache()</a></li><li><a href="#DataClassClass.html_new">.new()</a></li><li><a href="#DataClassClass.html_newselection">.newSelection()</a></li><li><a href="#DataClassClass.html_query">.query()</a></li><li><a href="#DataClassClass.html_setremotecachesettings">.setRemoteCacheSettings()</a></li></ul></nav></div></div></body></html>