<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="fr"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>$method · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="Ce paramètre vous permet de définir l'opération à exécuter avec l'entité ou la sélection d'entité (entity selection) retournée."name="description" /><meta content="fr" name="docsearch:language" /><meta content="$method · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="Ce paramètre vous permet de définir l'opération à exécuter avec l'entité ou la sélection d'entité (entity selection) retournée."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#%24method.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">$method<a aria-hidden="true" class="anchor" id="method.html"></a></h1></header><article><div><p><span>Ce paramètre vous permet de définir l'opération à exécuteravec l'entité ou la sélection d'entité (entity selection)retournée.</span></p><h2><span><a aria-hidden="true" class="anchor" id="method.html_syntaxe"></a><a aria-hidden="true" class="hash-link"href="#method.html_syntaxe"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Syntaxe</span></h2><table><thead><tr><th>Syntaxe</th><th>Exemple</th><th>Description</th></tr></thead><tbody><tr><td><a href="#method.html_methoddelete"><strong>$method=delete</strong></a></td><td><code>POST /Employee?$filter="ID=11"&amp;$method=delete</code></td><td>Supprime l'entité, collection d'entités ou sélection d'entitécourante</td></tr><tr><td><a href="#method.html_methodentityset"><strong>$method=entityset</strong></a></td><td><code>GET /People/?$filter="ID&gt;320"&amp;$method=entityset&amp; $timeout=600</code></td><td>Crée un ensemble d'entités dans le cache de 4D Server basé surla collection d'entités définies dans la requête REST</td></tr><tr><td><a href="#method.html_methodrelease"><strong>$method=release</strong></a></td><td><code>GET/Employee/$entityset/&lt;entitySetID&gt;?$method=release</code></td><td>Affiche un ensemble d'entités existant stocké dans le cache de4D Server</td></tr><tr><td><a href="#method.html_methodsubentityset"><strong>$method=subentityset</strong></a></td><td><code>GET /Company(1)/staff?$expand=staff&amp;$method=subentityset&amp; $subOrderby=lastName ASC</code></td><td>Crée un ensemble d'entités basé sur la collection d'entitésrelatives définies dans la requête REST</td></tr><tr><td><a href="#method.html_methodupdate"><strong>$method=update</strong></a></td><td><code>POST /Person/?$method=update</code></td><td>Met à jour et/ou crée une ou plusieurs entités</td></tr></tbody></table><h2><span><a aria-hidden="true" class="anchor" id="method.html_methoddelete"></a><a aria-hidden="true" class="hash-link" href="#method.html_methoddelete"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=delete</span></h2><p><span>Supprime l'entité, collection d'entités ou sélectiond'entité courante (créée via REST)</span></p><h3><span><a aria-hidden="true" class="anchor" id="method.html_description"></a><a aria-hidden="true" class="hash-link" href="#method.html_description"><svg aria-hidden="true"class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</span></h3><p><span>Avec <code>$method=delete</code>, vous pouvez supprimerune entité ou une collection d'entités entière. Vous pouvez définirla collection d'entités en utilisant, par exemple, <a href="#filter.html"><code>$filter</code></a> ou en en spécifiant unedirectement à l'aide de <a href="#method.html_dataclasskey"><code>{dataClass}({key})</code></a>(par exemple, /Employee(22)).</span></p><p><span>Vous pouvez également supprimer les entités d'un ensembled'entités en appelant <a href="#method.html_entitysetentitysetid"><code>$entityset/{entitySetID}</code></a>.</span></p><h2><span><a aria-hidden="true" class="anchor" id="method.html_exemple"></a><a aria-hidden="true" class="hash-link"href="#method.html_exemple"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</span></h2><p><span>Vous pouvez ensuite saisir la requête REST suivante poursupprimer l'entité dont la clé porte le numéro 22 :</span></p><p><span><code>POST/rest/Employee(22)/?$method=delete</code></span></p><p><span>Vous pouvez également faire une requête en utilisant $filter :</span></p><p><span><code>POST/rest/Employee?$filter="ID=11"&amp;$method=delete</code></span></p><p><span>Vous pouvez également supprimer un ensemble d'entitésutilisant $entityset/{entitySetID} :</span></p><p><span><code>POST/rest/Employee/$entityset/73F46BE3A0734EAA9A33CA8B14433570?$method=delete</code></span></p><p><span>Réponse :</span></p><pre><span><code class="hljs">{    <span class="hljs-attr">"ok"</span>: <span class="hljs-literal">true</span>}</code></span></pre><h2><a aria-hidden="true" class="anchor" id="method.html_methodentityset"></a><a aria-hidden="true" class="hash-link" href="#method.html_methodentityset"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=entityset</h2><p>Crée un ensemble d'entités dans le cache de 4D Server basé surla collection d'entités définies dans la requête REST</p><h3><a aria-hidden="true" class="anchor" id="method.html_description-1"></a><a aria-hidden="true" class="hash-link" href="#method.html_description-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h3><p>Lorsque vous créez une collection d'entités dans REST, vouspouvez également créer un ensemble d'entités qui sera enregistrédans le cache de 4D Server. L'ensemble d'entités aura un numéro deréférence que vous pouvez passer à<code>$entityset/{entitySetID}</code> pour y accéder. Par défaut,il est valable deux heures; vous pouvez toutefois modifier cettedurée en passant une valeur (en secondes) à $timeout.</p><p>Si vous avez utilisé <code>$savedfilter</code> et/ou<code>$savedorderby</code> (avec <code>$filter</code> et/ou<code>$orderby</code>) lors de la création de votre ensembled'entités, vous pouvez le recréer avec le même ID de référence mêmes'il a été supprimé du cache de 4D Server.</p><h3><a aria-hidden="true" class="anchor" id="method.html_exemple-1"></a><a aria-hidden="true" class="hash-link"href="#method.html_exemple-1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h3><p>Pour créer un ensemble d'entités, qui sera enregistré dans lecache de 4D Server pendant deux heures, ajoutez<code>$method=entityset</code> à la fin de votre requête REST :</p><p><code>GET/rest/People/?$filter="ID&gt;320"&amp;$method=entityset</code></p><p>Vous pouvez créer un ensemble d'entités qui sera stocké dans lecache de 4D Server pendant seulement dix minutes en passant unnouveau timeout à <code>$timeout</code> :</p><p><code>GET/rest/People/?$filter="ID&gt;320"&amp;$method=entityset&amp;$timeout=600</code></p><p>Vous pouvez également enregistrer le filtre et trier, en passanttrue à <code>$savedfilter</code> et <code>$savedorderby</code>.</p><blockquote><p><code>$skip</code> et <code>$top/$limit</code> ne sont pas prisen compte lors de l'enregistrement d'un ensemble d'entités.</p></blockquote><p>Après avoir créé un ensemble d'entités, le premier élément,<code>__ENTITYSET</code> est ajouté à l'objet retourné et indiquel'URI à utiliser pour accéder à l'ensemble d'entités :</p><p><code>__ENTITYSET:"http://127.0.0.1:8081/rest/Employee/$entityset/9718A30BF61343C796345F3BE5B01CE7"</code></p><h2><a aria-hidden="true" class="anchor" id="method.html_methodrelease"></a><a aria-hidden="true" class="hash-link" href="#method.html_methodrelease"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=release</h2><p>Affiche un ensemble d'entités existant stocké dans le cache de4D Server.</p><h3><a aria-hidden="true" class="anchor" id="method.html_description-2"></a><a aria-hidden="true" class="hash-link" href="#method.html_description-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h3><p>Vous pouvez afficher un ensemble d'entités, que vous avez créé àl'aide de <a href="#method.html_methodentityset"><code>$method=entityset</code></a>,à partir du cache de 4D Server.</p><h3><a aria-hidden="true" class="anchor" id="method.html_exemple-2"></a><a aria-hidden="true" class="hash-link"href="#method.html_exemple-2"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h3><p>Affiche un ensemble d'entités existant :</p><p><code>GET/rest/Employee/$entityset/4C51204DD8184B65AC7D79F09A077F24?$method=release</code></p><h4><a aria-hidden="true" class="anchor" id="method.html_r%C3%A9ponse-"></a><a aria-hidden="true" class="hash-link" href="#method.html_r%25C3%25A9ponse-"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Réponse :</h4><p>Si la requête a abouti, la réponse suivante est retournée :</p><pre><code class="hljs">{    <span class="hljs-string">"ok"</span>: <span class="hljs-literal">true</span>}Si l<span class="hljs-symbol">'entite</span> n<span class="hljs-symbol">'as</span> pas été trouvée, une erreur est retournée :{    <span class="hljs-string">"__ERROR"</span>: [        {             <span class="hljs-string">"message"</span>: <span class="hljs-string">"Error code: 1802\nEntitySet  \"</span><span class="hljs-number">4</span>C51204DD8184B65AC7D79F09A077F24\<span class="hljs-string">" cannot be found\ncomponent:  'dbmg'\ntask 22, name: 'HTTP connection handler'\n"</span>,            <span class="hljs-string">"componentSignature"</span>: <span class="hljs-string">"dbmg"</span>,            <span class="hljs-string">"errCode"</span>: <span class="hljs-number">1802</span>        }    ]}</code></pre><h2><a aria-hidden="true" class="anchor" id="method.html_methodsubentityset"></a><a aria-hidden="true" class="hash-link" href="#method.html_methodsubentityset"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=subentityset</h2><p>Crée un ensemble d'entités dans le cache de 4D Server basé surla collection d'entités relatives définies dans la requête REST</p><h3><a aria-hidden="true" class="anchor" id="method.html_description-3"></a><a aria-hidden="true" class="hash-link" href="#method.html_description-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h3><p><code>$method=subentityset</code> vous permet de trier lesdonnées retournées par l'attribut relationnel défini dans larequête REST.</p><p>Pour trier les données, utilisez la propriété<code>$subOrderby</code>. Pour chaque attribut, définissez l'ordresur ASC (ou asc) pour l'ordre croissant et sur DESC (desc) pourl'ordre décroissant. Par défaut, les données sont triées par ordrecroissant.</p><p>Si vous souhaitez spécifier plusieurs attributs, vous pouvez lesdélimiter avec une virgule, µ, <code>$subOrderby="lastName desc,firstName asc"</code>.</p><h3><a aria-hidden="true" class="anchor" id="method.html_exemple-3"></a><a aria-hidden="true" class="hash-link"href="#method.html_exemple-3"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h3><p>Si vous souhaitez récupérer uniquement les entités relativespour une entité spécifique, vous pouvez lancer la requête RESTsuivante, dans laquelle "staff" est l'attribut relationnel dans ladataclass "Company" liée à la dataclass "Employee":</p><p><code>GET/rest/Company(1)/staff?$expand=staff&amp;$method=subentityset&amp;$subOrderby=lastNameASC</code></p><h4><a aria-hidden="true" class="anchor" id="method.html_r%C3%A9ponse--1"></a><a aria-hidden="true" class="hash-link" href="#method.html_r%25C3%25A9ponse--1"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Réponse :</h4><pre><code class="hljs">{    <span class="hljs-attr">"__ENTITYSET"</span>: <span class="hljs-string">"/rest/Employee/$entityset/FF625844008E430B9862E5FD41C741AB"</span>,    <span class="hljs-attr">"__entityModel"</span>: <span class="hljs-string">"Employee"</span>,    <span class="hljs-attr">"__COUNT"</span>: <span class="hljs-number">2</span>,    <span class="hljs-attr">"__SENT"</span>: <span class="hljs-number">2</span>,    <span class="hljs-attr">"__FIRST"</span>: <span class="hljs-number">0</span>,    <span class="hljs-attr">"__ENTITIES"</span>: [        {            <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"4"</span>,            <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">1</span>,            <span class="hljs-attr">"ID"</span>: <span class="hljs-number">4</span>,            <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Linda"</span>,            <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Jones"</span>,            <span class="hljs-attr">"birthday"</span>: <span class="hljs-string">"1970-10-05T14:23:00Z"</span>,            <span class="hljs-attr">"employer"</span>: {                <span class="hljs-attr">"__deferred"</span>: {                    <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Company(1)"</span>,                    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>                }            }        },        {            <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>,            <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">3</span>,            <span class="hljs-attr">"ID"</span>: <span class="hljs-number">1</span>,            <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"John"</span>,            <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Smith"</span>,            <span class="hljs-attr">"birthday"</span>: <span class="hljs-string">"1985-11-01T15:23:00Z"</span>,            <span class="hljs-attr">"employer"</span>: {                <span class="hljs-attr">"__deferred"</span>: {                    <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Company(1)"</span>,                    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>                }            }        }    ]}</code></pre><h2><a aria-hidden="true" class="anchor" id="method.html_methodupdate"></a><a aria-hidden="true" class="hash-link" href="#method.html_methodupdate"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>$method=update</h2><p>Met à jour et/ou crée une ou plusieurs entités</p><h3><a aria-hidden="true" class="anchor" id="method.html_description-4"></a><a aria-hidden="true" class="hash-link" href="#method.html_description-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Description</h3><p><code>$method=update</code> vous permet de mettre à jour et/oude créer une ou plusieurs entités dans un seul<strong>POST</strong>. Si vous mettez à jour et/ou créez uneentité, cela s'effectue dans un objet avec, pour chaque propriété,un attribut et sa valeur, par exemple <code>{lastName:"Smith"}</code>. Si vous mettez à jour et/ou créez plusieursentités, vous devez créer une collection d'objets.</p><p>In any cases, you must set the <strong>POST</strong> data in the<strong>body</strong> of the request.</p><p>Pour mettre à jour une entité, vous devez passer les paramètres<code>__KEY</code> et <code>__STAMP</code> dans l'objet avec tousles attributs modifiés. Si ces deux paramètres sont manquants, uneentité sera ajoutée avec les valeurs de l'objet que vous envoyezdans le corps de votre <strong>POST</strong>.</p><p>Triggers are executed immediately when saving the entity to theserver. La réponse contient toutes les données telles qu'ellesexistent sur le serveur.</p><p>Vous pouvez également placer ces requêtes pour créer ou mettre àjour des entités dans une transaction en appelant<code>$atomic/$atonce</code>. Si des erreurs se produisent lors dela validation des données, aucune des entités n'est sauvegardée.Vous pouvez également utiliser $method=validate pour valider lesentités avant de les créer ou de les mettre à jour.</p><p>Si un problème survient lors de l'ajout ou de la modificationd'une entité, une erreur vous sera retournée avec cesinformations.</p><blockquote><p>A noter pour les types d'attributs spécifiques :</p><ul><li><strong>Les dates</strong> doivent être exprimées au format JS: YYYY-MM-DDTHH:MM:SSZ (par exemple, "2010-10-05T23:00:00Z"). Sivous avez sélectionné la propriété Date uniquement pour votreattribut Date, le fuseau horaire et l'heure (heure, minutes etsecondes) seront supprimés. Dans ce cas, vous pouvez égalementenvoyer la date au format qui vous est retourné dd!mm!yyyy (parexemple, 05!10!2013).</li><li>Les valeurs des <strong>booléens</strong> sont vrai oufaux.</li><li>Les fichiers téléchargés à l'aide de <code>$upload</code>peuvent s'appliquer à un attribut de type Image ou BLOB en passantl'objet retourné au format suivant {"ID":"D507BC03E613487E9B4C2F6A0512FE50"}</li></ul></blockquote><h3><a aria-hidden="true" class="anchor" id="method.html_exemple-4"></a><a aria-hidden="true" class="hash-link"href="#method.html_exemple-4"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Exemple</h3><p>Pour mettre à jour une entité spécifique, utilisez l'URLsuivante :</p><p><code>POST /rest/Person/?$method=update</code></p><p><strong>Données POST :</strong></p><pre><code class="hljs">{    <span class="hljs-attribute">__KEY</span>: <span class="hljs-string">"340"</span>,    __STAMP: <span class="hljs-number">2</span>,    firstName: <span class="hljs-string">"Pete"</span>,    lastName: <span class="hljs-string">"Miller"</span>}</code></pre><p>Les attributs firstName et lastName de l'entité indiquéeci-dessus seront modifiés en laissant inchangés tous les autresattributs (sauf ceux calculés sur la base de ces attributs).</p><p>Si vous souhaitez créer une entité, vous pouvez envoyer, viaPOST, les attributs à l'aide de cette URL :</p><p><code>POST /rest/Person/?$method=update</code></p><p><strong>Données POST :</strong></p><pre><code class="hljs">{     <span class="hljs-attribute">firstName</span>: <span class="hljs-string">"John"</span>,    lastName: <span class="hljs-string">"Smith"</span>}</code></pre><p>Vous pouvez également créer et mettre à jour plusieurs entitésen même temps en utilisant la même URL ci-dessus en passantplusieurs objets d'un tableau au POST :</p><p><code>POST /rest/Person/?$method=update</code></p><p><strong>Données POST :</strong></p><pre><code class="hljs">[{     <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"309"</span>,    <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">5</span>,    <span class="hljs-attr">"ID"</span>: <span class="hljs-string">"309"</span>,    <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Penelope"</span>,    <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Miller"</span>}, {     <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Ann"</span>,    <span class="hljs-attr">"lastName"</span>: <span class="hljs-string">"Jones"</span>}]</code></pre><p><strong>Réponse :</strong></p><p>Lorsque vous ajoutez ou modifiez une entité, elle vous estretournée avec les attributs qui ont été modifiés. Par exemple, sivous créez le nouvel employé ci-dessus, les informations suivantesseront renvoyées :</p><pre><code class="hljs">{    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"622"</span>,     <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">1</span>,     <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"http://127.0.0.1:8081/rest/Employee(622)"</span>,     <span class="hljs-attr">"__TIMESTAMP"</span>: <span class="hljs-string">"!!2020-04-03!!"</span>,    <span class="hljs-attr">"ID"</span>: <span class="hljs-number">622</span>,     <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"John"</span>,     <span class="hljs-attr">"firstName"</span>: <span class="hljs-string">"Smith"</span>}</code></pre><p>Si, par exemple, le tampon n'est pas correct, l'erreur suivanteest retournée :</p><pre><code class="hljs">{    <span class="hljs-attr">"__STATUS"</span>: {        <span class="hljs-attr">"status"</span>: <span class="hljs-number">2</span>,        <span class="hljs-attr">"statusText"</span>: <span class="hljs-string">"Stamp has changed"</span>,        <span class="hljs-attr">"success"</span>: <span class="hljs-literal">false</span>    },    <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>,    <span class="hljs-attr">"__STAMP"</span>: <span class="hljs-number">12</span>,    <span class="hljs-attr">"__TIMESTAMP"</span>: <span class="hljs-string">"!!2020-03-31!!"</span>,    <span class="hljs-attr">"ID"</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">"firstname"</span>: <span class="hljs-string">"Denise"</span>,    <span class="hljs-attr">"lastname"</span>: <span class="hljs-string">"O'Peters"</span>,    <span class="hljs-attr">"isWoman"</span>: <span class="hljs-literal">true</span>,    <span class="hljs-attr">"numberOfKids"</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">"addressID"</span>: <span class="hljs-number">1</span>,    <span class="hljs-attr">"gender"</span>: <span class="hljs-literal">true</span>,    <span class="hljs-attr">"imageAtt"</span>: {        <span class="hljs-attr">"__deferred"</span>: {            <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Persons(1)/imageAtt?$imageformat=best&amp;$version=12&amp;$expand=imageAtt"</span>,            <span class="hljs-attr">"image"</span>: <span class="hljs-literal">true</span>        }    },    <span class="hljs-attr">"extra"</span>: {        <span class="hljs-attr">"num"</span>: <span class="hljs-number">1</span>,        <span class="hljs-attr">"alpha"</span>: <span class="hljs-string">"I am 1"</span>    },    <span class="hljs-attr">"address"</span>: {        <span class="hljs-attr">"__deferred"</span>: {            <span class="hljs-attr">"uri"</span>: <span class="hljs-string">"/rest/Address(1)"</span>,            <span class="hljs-attr">"__KEY"</span>: <span class="hljs-string">"1"</span>        }    },    <span class="hljs-attr">"__ERROR"</span>: [        {            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Given stamp does not match current one for record# 0 of table Persons"</span>,            <span class="hljs-attr">"componentSignature"</span>: <span class="hljs-string">"dbmg"</span>,            <span class="hljs-attr">"errCode"</span>: <span class="hljs-number">1263</span>        },        {            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Cannot save record 0 in table Persons of database remote_dataStore"</span>,            <span class="hljs-attr">"componentSignature"</span>: <span class="hljs-string">"dbmg"</span>,            <span class="hljs-attr">"errCode"</span>: <span class="hljs-number">1046</span>        },        {            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"The entity# 1 in the \"Persons\" dataclass cannot be saved"</span>,            <span class="hljs-attr">"componentSignature"</span>: <span class="hljs-string">"dbmg"</span>,            <span class="hljs-attr">"errCode"</span>: <span class="hljs-number">1517</span>        }    ]}{}</code></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#lock.html"><span class="arrow-prev">←</span><span>$lock</span></a><a class="docs-next button" href="#orderby.html"><span>$orderby</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#method.html_syntaxe">Syntaxe</a></li><li><a href="#method.html_methoddelete">$method=delete</a><ul class="toc-headings"><li><a href="#method.html_description">Description</a></li></ul></li><li><a href="#method.html_exemple">Exemple</a></li><li><a href="#method.html_methodentityset">$method=entityset</a><ul class="toc-headings"><li><a href="#method.html_description-1">Description</a></li><li><a href="#method.html_exemple-1">Exemple</a></li></ul></li><li><a href="#method.html_methodrelease">$method=release</a><ul class="toc-headings"><li><a href="#method.html_description-2">Description</a></li><li><a href="#method.html_exemple-2">Exemple</a></li></ul></li><li><a href="#method.html_methodsubentityset">$method=subentityset</a><ul class="toc-headings"><li><a href="#method.html_description-3">Description</a></li><li><a href="#method.html_exemple-3">Exemple</a></li></ul></li><li><a href="#method.html_methodupdate">$method=update</a><ul class="toc-headings"><li><a href="#method.html_description-4">Description</a></li><li><a href="#method.html_exemple-4">Exemple</a></li></ul></li></ul></nav></div></div></body></html>