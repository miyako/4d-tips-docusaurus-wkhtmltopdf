<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE html><html lang="de"><head><meta content="19 R5" name="docsearch:version" /><meta charset="utf-8" /><meta content="IE=edge" http-equiv="X-UA-Compatible" /><title>Log file (.journal) · 4D Documentation</title><meta content="width=device-width" name="viewport" /><meta content="Docusaurus" name="generator" /><meta content="A continuously-used application is always recording changes, additions or deletions. Performing regular backups of data is important but does not allow (in case of incident) restoring data entered since the last backup. To respond to this need, 4D now offers a specific tool: the log file. This file allows ensuring permanent security of data."name="description" /><meta content="de" name="docsearch:language" /><meta content="Log file (.journal) · 4D Documentation" property="og:title" /><meta content="website" property="og:type" /><meta content="https://4d.github.io/docs/Rx/index.html" property="og:url" /><meta content="A continuously-used application is always recording changes, additions or deletions. Performing regular backups of data is important but does not allow (in case of incident) restoring data entered since the last backup. To respond to this need, 4D now offers a specific tool: the log file. This file allows ensuring permanent security of data."property="og:description" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png"property="og:image" /><meta content="summary" name="twitter:card" /><meta content="https://4d.github.io/docs/Rx/img/logohome.png" name="twitter:image" /><link href="https://developer.4d.com/docs/Rx/img/4d.gif" rel="shortcut icon" /><link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" /><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/routeros.min.css"rel="stylesheet" /><link href="https://developer.4d.com/docs/Rx/css/main.css" rel="stylesheet" /></head><body class="sideNavVisible separateOnPageNav"><div class="navPusher" style="padding-top:0px!important;"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="#log.md" rel="noreferrer noopener" target="_blank">Edit</a><h1 class="postHeaderTitle" id="__docusaurus">Log file(.journal)<a aria-hidden="true" class="anchor" id="log.html"></a></h1></header><article><div><p><span>A continuously-used application is always recordingchanges, additions or deletions. Performing regular backups of datais important but does not allow (in case of incident) restoringdata entered since the last backup. To respond to this need, 4D nowoffers a specific tool: the log file. This file allows ensuringpermanent security of data.</span></p><p><span>In addition, 4D works continuously with a data cache inmemory. Any changes made to the application data are storedtemporarily in the cache before being written to the hard disk.This accelerates the operation of applications; in fact, accessingmemory is faster than accessing the hard disk. If an incidentoccurs in the application before the data stored in the cache couldbe written to the disk, you must include the current log file inorder to restore the application entirely.</span></p><p><span>Finally, 4D has functions that analyze the contents of thelog file, making it possible to rollback the operations carried outon the application data. These functions area available in the MSC:refer to the <a href="#analysis.html">Activity analysis</a> pageand the <a href="#rollback.html">Rollback</a> page.</span></p><h2><span><a aria-hidden="true" class="anchor" id="log.html_how-the-log-file-works"></a><a aria-hidden="true" class="hash-link" href="#log.html_how-the-log-file-works"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>How the log file works</span></h2><p><span>The log file generated by 4D contains a description of alloperations performed on the data of journaled tables, which arelogged sequentially. By default, all the tables are journaled, i.e.included in the log file, but you can deselect individual tablesusing the <strong>Include in Log File</strong> tableproperty.</span></p><p><span>As such, each operation performed by a user causes twosimultaneous actions: the first one in the data file (instructionis executed normally) and the second one in the log file (thedescription of the operation is recorded). The log file is createdindependently without disturbing or slowing down the work of theuser. An application can only work with one log file at a time. Thelog file records the following action types:</span></p><ul><li><span>Opening and closing of the data file,</span></li><li><span>Opening and closing of the process(contexts),</span></li><li><span>Adding of records or BLOBs,</span></li><li><span>Modifying of records,</span></li><li><span>Deleting of records,</span></li><li><span>Creating and closing of transactions.</span></li></ul><p><span>For more information about these actions, refer to the<a href="#analysis.html">Activity analysis</a> page of theMSC.</span></p><p><span>4D manages the log file. It takes into account alloperations that affect the data file equally, regardless of anymanipulations performed by a user, a 4D method, the SQL engine,plug-ins, or from a Web browser or a mobile applicaton.</span></p><p><span>The following illustration sums up how the log fileworks:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Backup/backup05.png" /></span></p><p><span>The current log file is automatically saved with thecurrent data file. This mechanism has two distinctadvantages:</span></p><ul><li><span>Its avoids saturating the disk volume where the log fileis stored. Without a backup, the log file would get bigger andbigger with use, and would eventually use all available disk space.For each data file backup, 4D or 4D Server closes the current logfile and immediately starts a new, empty file, thereby avoiding therisk of saturation. The old log file is then archived andeventually destroyed depending on the mechanism for managing thebackup sets.</span></li><li><span>It keeps log files corresponding to backups in order tobe able to parse or repair an application at a later point in time.The integration of a log file can only be done in the applicationto which it corresponds. It is important, in order to be able toproperly integrate a log file into a backup, to have backups andlog files archived simultaneously.</span></li></ul><h2><span><a aria-hidden="true" class="anchor" id="log.html_creating-the-log-file"></a><a aria-hidden="true" class="hash-link" href="#log.html_creating-the-log-file"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16"width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Creating the log file</span></h2><p><span>By default, any application project created with 4D uses alog file (option set in the <strong>General</strong> page of thePreferences). The log file is named <em>data.journal</em> and isplaced in the Data folder.</span></p><p><span>You can find out if your application uses a log file atany time: just check whether the <strong>Use Log</strong> option isselected on the <strong>Backup/Configuration</strong> page of theSettings. If you deselected this option, or if you use anapplication without a log file and wish to set up a backup strategywith a log file, you will have to create one.</span></p><p><span>To create a log file:</span></p><ol><li><p><span>On the <strong>Backup/Configuration</strong> page of theStructure Settings, check the <strong>Use Log</strong> option. Theprogram displays a standard open/new file dialog box. By default,the log file is named <em>data.journal</em>.</span></p></li><li><p><span>Keep the default name or rename it, and then select thefile location. If you have at least two hard drives, it isrecommended that you place the log file on a disk other than theone containing the application project. If the application harddrive is lost, you can still recall your log file.</span></p></li><li><p><span>Click <strong>Save</strong>. The disk and the name of theopen log file are now displayed in the <strong>Use Log</strong>area of the dialog box. You can click on this area in order todisplay a pop-up menu containing the log path on thedisk.</span></p></li><li><p><span>Validate the Settings dialog box.</span></p></li></ol><p><span>In order for you to be able to create a log file directly,the data must be in one of the following situations:</span></p><ul><li><span>The data file is blank,</span></li><li><span>You just performed a backup and no changes have yet beenmade to the data.</span></li></ul><p><span>In all other cases, when you validate the Settings dialogbox, an alert dialog box will appear to inform you that it isnecessary to perform a backup. If you click <strong>OK</strong>,the backup begins immediately, then the log file is activated. Ifyou click <strong>Cancel</strong>, the request is saved but thecreation of the log file is postponed and it will actually becreated only after the next backup of the application. Thisprecaution is indispensable because, in order to restore anapplication after any incidents, you will need a copy of theapplication into which the operations recorded in the log file willbe integrated.</span></p><p><span>Without having to do anything else, all operationsperformed on the data are logged in this file and it will be usedin the future when the application is opened.</span></p><p><span>You must create another log file if you create a new datafile. You must set or create another log file if you open anotherdata file that is not linked to a log file (or if the log file ismissing).</span></p><h2><span><a aria-hidden="true" class="anchor" id="log.html_stopping-a-log-file"></a><a aria-hidden="true" class="hash-link" href="#log.html_stopping-a-log-file"><svg aria-hidden="true" class="hash-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"fill-rule="evenodd"></path></svg></a>Stopping a log file</span></h2><p><span>If you would like to stop logging operations to thecurrent log file, simply deselect the <strong>Use Log</strong>option on the <strong>Backup/Configuration</strong> page of theSettings.</span></p><p><span>4D then displays an alert message to remind you that thisaction prevents you from taking advantage of the security that thelog file provides:</span></p><p><span><img alt="" src="https://developer.4d.com/docs/Rx/assets/en/Backup/backup06.png" /></span></p><p><span>If you click <strong>Stop</strong>, the current log fileis immediately closed (the Settings dialog box does not need to bevalidated afterwards).</span></p><p><span>If you wish to close the current log file because it istoo large, you might consider performing a data file backup, whichwill cause the log file to be backed up as well.</span></p><blockquote><p><span><strong>4D Server:</strong> The <code>New log file</code>command automatically closes the current log file and starts a newone. If for some reason the log file becomes unavailable during aworking session, error 1274 is generated and 4D Server does notallow users to write data anymore. When the log file is availableagain, it is necessary to do a backup.</span></p></blockquote></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="#settings.html"><span class="arrow-prev">←</span> <span>BackupSettings</span></a><a class="docs-next button" href="#restore.html"><span>Restore</span> <span class="arrow-next">→</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#log.html_how-the-log-file-works">How the log fileworks</a></li><li><a href="#log.html_creating-the-log-file">Creating the logfile</a></li><li><a href="#log.html_stopping-a-log-file">Stopping a logfile</a></li></ul></nav></div></div></body></html>